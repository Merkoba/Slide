(function(){"use strict";var _documentCurrentScript=typeof document<"u"?document.currentScript:null;const App$1={};window.App=App$1,(function(){let e=[],o=[];(()=>{let f="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=0,a=0;t<f.length;t++)(t%2?o:e).push(a=a+f[t])})();function l(f){if(f<768)return!1;for(let t=0,a=e.length;;){let u=t+a>>1;if(f<e[u])a=u;else if(f>=o[u])t=u+1;else return!0;if(t==a)return!1}}function d(f){return f>=127462&&f<=127487}const b=8205;function S(f,t,a=!0,u=!0){return(a?M:E)(f,t,u)}function M(f,t,a){if(t==f.length)return t;t&&R(f.charCodeAt(t))&&Z(f.charCodeAt(t-1))&&t--;let u=L(f,t);for(t+=q(u);t<f.length;){let p=L(f,t);if(u==b||p==b||a&&l(p))t+=q(p),u=p;else if(d(p)){let g=0,A=t-2;for(;A>=0&&d(L(f,A));)g++,A-=2;if(g%2==0)break;t+=2}else break}return t}function E(f,t,a){for(;t>0;){let u=M(f,t-2,a);if(u<t)return u;t--}return 0}function L(f,t){let a=f.charCodeAt(t);if(!Z(a)||t+1==f.length)return a;let u=f.charCodeAt(t+1);return R(u)?(a-55296<<10)+(u-56320)+65536:a}function R(f){return f>=56320&&f<57344}function Z(f){return f>=55296&&f<56320}function q(f){return f<65536?1:2}class K{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,a,u){[t,a]=Ce(this,t,a);let p=[];return this.decompose(0,t,p,2),u.length&&u.decompose(0,u.length,p,3),this.decompose(a,this.length,p,1),se.from(p,this.length-(a-t)+u.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,a=this.length){[t,a]=Ce(this,t,a);let u=[];return this.decompose(t,a,u,0),se.from(u,a-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let a=this.scanIdentical(t,1),u=this.length-this.scanIdentical(t,-1),p=new ve(this),g=new ve(t);for(let A=a,$=a;;){if(p.next(A),g.next(A),A=0,p.lineBreak!=g.lineBreak||p.done!=g.done||p.value!=g.value)return!1;if($+=p.value.length,p.done||$>=u)return!0}}iter(t=1){return new ve(this,t)}iterRange(t,a=this.length){return new Ee(this,t,a)}iterLines(t,a){let u;if(t==null)u=this.iter();else{a==null&&(a=this.lines+1);let p=this.line(t).from;u=this.iterRange(p,Math.max(p,a==this.lines+1?this.length:a<=1?0:this.line(a-1).to))}return new le(u)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(t.length==0)throw new RangeError("A document must have at least one line");return t.length==1&&!t[0]?K.empty:t.length<=32?new U(t):se.from(U.split(t,[]))}}class U extends K{constructor(t,a=re(t)){super(),this.text=t,this.length=a}get lines(){return this.text.length}get children(){return null}lineInner(t,a,u,p){for(let g=0;;g++){let A=this.text[g],$=p+A.length;if((a?u:$)>=t)return new _e(p,$,u,A);p=$+1,u++}}decompose(t,a,u,p){let g=t<=0&&a>=this.length?this:new U(de(this.text,t,a),Math.min(a,this.length)-Math.max(0,t));if(p&1){let A=u.pop(),$=ae(g.text,A.text.slice(),0,g.length);if($.length<=32)u.push(new U($,A.length+g.length));else{let F=$.length>>1;u.push(new U($.slice(0,F)),new U($.slice(F)))}}else u.push(g)}replace(t,a,u){if(!(u instanceof U))return super.replace(t,a,u);[t,a]=Ce(this,t,a);let p=ae(this.text,ae(u.text,de(this.text,0,t)),a),g=this.length+u.length-(a-t);return p.length<=32?new U(p,g):se.from(U.split(p,[]),g)}sliceString(t,a=this.length,u=`
`){[t,a]=Ce(this,t,a);let p="";for(let g=0,A=0;g<=a&&A<this.text.length;A++){let $=this.text[A],F=g+$.length;g>t&&A&&(p+=u),t<F&&a>g&&(p+=$.slice(Math.max(0,t-g),a-g)),g=F+1}return p}flatten(t){for(let a of this.text)t.push(a)}scanIdentical(){return 0}static split(t,a){let u=[],p=-1;for(let g of t)u.push(g),p+=g.length+1,u.length==32&&(a.push(new U(u,p)),u=[],p=-1);return p>-1&&a.push(new U(u,p)),a}}class se extends K{constructor(t,a){super(),this.children=t,this.length=a,this.lines=0;for(let u of t)this.lines+=u.lines}lineInner(t,a,u,p){for(let g=0;;g++){let A=this.children[g],$=p+A.length,F=u+A.lines-1;if((a?F:$)>=t)return A.lineInner(t,a,u,p);p=$+1,u=F+1}}decompose(t,a,u,p){for(let g=0,A=0;A<=a&&g<this.children.length;g++){let $=this.children[g],F=A+$.length;if(t<=F&&a>=A){let V=p&((A<=t?1:0)|(F>=a?2:0));A>=t&&F<=a&&!V?u.push($):$.decompose(t-A,a-A,u,V)}A=F+1}}replace(t,a,u){if([t,a]=Ce(this,t,a),u.lines<this.lines)for(let p=0,g=0;p<this.children.length;p++){let A=this.children[p],$=g+A.length;if(t>=g&&a<=$){let F=A.replace(t-g,a-g,u),V=this.lines-A.lines+F.lines;if(F.lines<V>>4&&F.lines>V>>6){let z=this.children.slice();return z[p]=F,new se(z,this.length-(a-t)+u.length)}return super.replace(g,$,F)}g=$+1}return super.replace(t,a,u)}sliceString(t,a=this.length,u=`
`){[t,a]=Ce(this,t,a);let p="";for(let g=0,A=0;g<this.children.length&&A<=a;g++){let $=this.children[g],F=A+$.length;A>t&&g&&(p+=u),t<F&&a>A&&(p+=$.sliceString(t-A,a-A,u)),A=F+1}return p}flatten(t){for(let a of this.children)a.flatten(t)}scanIdentical(t,a){if(!(t instanceof se))return 0;let u=0,[p,g,A,$]=a>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;p+=a,g+=a){if(p==A||g==$)return u;let F=this.children[p],V=t.children[g];if(F!=V)return u+F.scanIdentical(V,a);u+=F.length+1}}static from(t,a=t.reduce((u,p)=>u+p.length+1,-1)){let u=0;for(let Ae of t)u+=Ae.lines;if(u<32){let Ae=[];for(let $e of t)$e.flatten(Ae);return new U(Ae,a)}let p=Math.max(32,u>>5),g=p<<1,A=p>>1,$=[],F=0,V=-1,z=[];function ie(Ae){let $e;if(Ae.lines>g&&Ae instanceof se)for(let je of Ae.children)ie(je);else Ae.lines>A&&(F>A||!F)?(oe(),$.push(Ae)):Ae instanceof U&&F&&($e=z[z.length-1])instanceof U&&Ae.lines+$e.lines<=32?(F+=Ae.lines,V+=Ae.length+1,z[z.length-1]=new U($e.text.concat(Ae.text),$e.length+1+Ae.length)):(F+Ae.lines>p&&oe(),F+=Ae.lines,V+=Ae.length+1,z.push(Ae))}function oe(){F!=0&&($.push(z.length==1?z[0]:se.from(z,V)),V=-1,F=z.length=0)}for(let Ae of t)ie(Ae);return oe(),$.length==1?$[0]:new se($,a)}}K.empty=new U([""],0);function re(f){let t=-1;for(let a of f)t+=a.length+1;return t}function ae(f,t,a=0,u=1e9){for(let p=0,g=0,A=!0;g<f.length&&p<=u;g++){let $=f[g],F=p+$.length;F>=a&&(F>u&&($=$.slice(0,u-p)),p<a&&($=$.slice(a-p)),A?(t[t.length-1]+=$,A=!1):t.push($)),p=F+1}return t}function de(f,t,a){return ae(f,[""],t,a)}class ve{constructor(t,a=1){this.dir=a,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[a>0?1:(t instanceof U?t.text.length:t.children.length)<<1]}nextInner(t,a){for(this.done=this.lineBreak=!1;;){let u=this.nodes.length-1,p=this.nodes[u],g=this.offsets[u],A=g>>1,$=p instanceof U?p.text.length:p.children.length;if(A==(a>0?$:0)){if(u==0)return this.done=!0,this.value="",this;a>0&&this.offsets[u-1]++,this.nodes.pop(),this.offsets.pop()}else if((g&1)==(a>0?0:1)){if(this.offsets[u]+=a,t==0)return this.lineBreak=!0,this.value=`
`,this;t--}else if(p instanceof U){let F=p.text[A+(a<0?-1:0)];if(this.offsets[u]+=a,F.length>Math.max(0,t))return this.value=t==0?F:a>0?F.slice(t):F.slice(0,F.length-t),this;t-=F.length}else{let F=p.children[A+(a<0?-1:0)];t>F.length?(t-=F.length,this.offsets[u]+=a):(a<0&&this.offsets[u]--,this.nodes.push(F),this.offsets.push(a>0?1:(F instanceof U?F.text.length:F.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class Ee{constructor(t,a,u){this.value="",this.done=!1,this.cursor=new ve(t,a>u?-1:1),this.pos=a>u?t.length:0,this.from=Math.min(a,u),this.to=Math.max(a,u)}nextInner(t,a){if(a<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,a<0?this.pos-this.to:this.from-this.pos);let u=a<0?this.pos-this.from:this.to-this.pos;t>u&&(t=u),u-=t;let{value:p}=this.cursor.next(t);return this.pos+=(p.length+t)*a,this.value=p.length<=u?p:a<0?p.slice(p.length-u):p.slice(0,u),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class le{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:a,lineBreak:u,value:p}=this.inner.next(t);return a&&this.afterBreak?(this.value="",this.afterBreak=!1):a?(this.done=!0,this.value=""):u?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=p,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(K.prototype[Symbol.iterator]=function(){return this.iter()},ve.prototype[Symbol.iterator]=Ee.prototype[Symbol.iterator]=le.prototype[Symbol.iterator]=function(){return this});class _e{constructor(t,a,u,p){this.from=t,this.to=a,this.number=u,this.text=p}get length(){return this.to-this.from}}function Ce(f,t,a){return t=Math.max(0,Math.min(f.length,t)),[t,Math.max(t,Math.min(f.length,a))]}function We(f,t,a=!0,u=!0){return S(f,t,a,u)}function He(f){return f>=56320&&f<57344}function Mt(f){return f>=55296&&f<56320}function ut(f,t){let a=f.charCodeAt(t);if(!Mt(a)||t+1==f.length)return a;let u=f.charCodeAt(t+1);return He(u)?(a-55296<<10)+(u-56320)+65536:a}function Nt(f){return f<=65535?String.fromCharCode(f):(f-=65536,String.fromCharCode((f>>10)+55296,(f&1023)+56320))}function St(f){return f<65536?1:2}const xt=/\r\n?|\n/;var $t=(function(f){return f[f.Simple=0]="Simple",f[f.TrackDel=1]="TrackDel",f[f.TrackBefore=2]="TrackBefore",f[f.TrackAfter=3]="TrackAfter",f})($t||($t={}));class qt{constructor(t){this.sections=t}get length(){let t=0;for(let a=0;a<this.sections.length;a+=2)t+=this.sections[a];return t}get newLength(){let t=0;for(let a=0;a<this.sections.length;a+=2){let u=this.sections[a+1];t+=u<0?this.sections[a]:u}return t}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(t){for(let a=0,u=0,p=0;a<this.sections.length;){let g=this.sections[a++],A=this.sections[a++];A<0?(t(u,p,g),p+=g):p+=A,u+=g}}iterChangedRanges(t,a=!1){ai(this,t,a)}get invertedDesc(){let t=[];for(let a=0;a<this.sections.length;){let u=this.sections[a++],p=this.sections[a++];p<0?t.push(u,p):t.push(p,u)}return new qt(t)}composeDesc(t){return this.empty?t:t.empty?this:di(this,t)}mapDesc(t,a=!1){return t.empty?this:si(this,t,a)}mapPos(t,a=-1,u=$t.Simple){let p=0,g=0;for(let A=0;A<this.sections.length;){let $=this.sections[A++],F=this.sections[A++],V=p+$;if(F<0){if(V>t)return g+(t-p);g+=$}else{if(u!=$t.Simple&&V>=t&&(u==$t.TrackDel&&p<t&&V>t||u==$t.TrackBefore&&p<t||u==$t.TrackAfter&&V>t))return null;if(V>t||V==t&&a<0&&!$)return t==p||a<0?g:g+F;g+=F}p=V}if(t>p)throw new RangeError(`Position ${t} is out of range for changeset of length ${p}`);return g}touchesRange(t,a=t){for(let u=0,p=0;u<this.sections.length&&p<=a;){let g=this.sections[u++],A=this.sections[u++],$=p+g;if(A>=0&&p<=a&&$>=t)return p<t&&$>a?"cover":!0;p=$}return!1}toString(){let t="";for(let a=0;a<this.sections.length;){let u=this.sections[a++],p=this.sections[a++];t+=(t?" ":"")+u+(p>=0?":"+p:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some(a=>typeof a!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new qt(t)}static create(t){return new qt(t)}}class Vt extends qt{constructor(t,a){super(t),this.inserted=a}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return ai(this,(a,u,p,g,A)=>t=t.replace(p,p+(u-a),A),!1),t}mapDesc(t,a=!1){return si(this,t,a,!0)}invert(t){let a=this.sections.slice(),u=[];for(let p=0,g=0;p<a.length;p+=2){let A=a[p],$=a[p+1];if($>=0){a[p]=$,a[p+1]=A;let F=p>>1;for(;u.length<F;)u.push(K.empty);u.push(A?t.slice(g,g+A):K.empty)}g+=A}return new Vt(a,u)}compose(t){return this.empty?t:t.empty?this:di(this,t,!0)}map(t,a=!1){return t.empty?this:si(this,t,a,!0)}iterChanges(t,a=!1){ai(this,t,a)}get desc(){return qt.create(this.sections)}filter(t){let a=[],u=[],p=[],g=new At(this);e:for(let A=0,$=0;;){let F=A==t.length?1e9:t[A++];for(;$<F||$==F&&g.len==0;){if(g.done)break e;let z=Math.min(g.len,F-$);Ut(p,z,-1);let ie=g.ins==-1?-1:g.off==0?g.ins:0;Ut(a,z,ie),ie>0&&Yt(u,a,g.text),g.forward(z),$+=z}let V=t[A++];for(;$<V;){if(g.done)break e;let z=Math.min(g.len,V-$);Ut(a,z,-1),Ut(p,z,g.ins==-1?-1:g.off==0?g.ins:0),g.forward(z),$+=z}}return{changes:new Vt(a,u),filtered:qt.create(p)}}toJSON(){let t=[];for(let a=0;a<this.sections.length;a+=2){let u=this.sections[a],p=this.sections[a+1];p<0?t.push(u):p==0?t.push([u]):t.push([u].concat(this.inserted[a>>1].toJSON()))}return t}static of(t,a,u){let p=[],g=[],A=0,$=null;function F(z=!1){if(!z&&!p.length)return;A<a&&Ut(p,a-A,-1);let ie=new Vt(p,g);$=$?$.compose(ie.map($)):ie,p=[],g=[],A=0}function V(z){if(Array.isArray(z))for(let ie of z)V(ie);else if(z instanceof Vt){if(z.length!=a)throw new RangeError(`Mismatched change set length (got ${z.length}, expected ${a})`);F(),$=$?$.compose(z.map($)):z}else{let{from:ie,to:oe=ie,insert:Ae}=z;if(ie>oe||ie<0||oe>a)throw new RangeError(`Invalid change range ${ie} to ${oe} (in doc of length ${a})`);let $e=Ae?typeof Ae=="string"?K.of(Ae.split(u||xt)):Ae:K.empty,je=$e.length;if(ie==oe&&je==0)return;ie<A&&F(),ie>A&&Ut(p,ie-A,-1),Ut(p,oe-ie,je),Yt(g,p,$e),A=oe}}return V(t),F(!$),$}static empty(t){return new Vt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let a=[],u=[];for(let p=0;p<t.length;p++){let g=t[p];if(typeof g=="number")a.push(g,-1);else{if(!Array.isArray(g)||typeof g[0]!="number"||g.some((A,$)=>$&&typeof A!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(g.length==1)a.push(g[0],0);else{for(;u.length<p;)u.push(K.empty);u[p]=K.of(g.slice(1)),a.push(g[0],u[p].length)}}}return new Vt(a,u)}static createSet(t,a){return new Vt(t,a)}}function Ut(f,t,a,u=!1){if(t==0&&a<=0)return;let p=f.length-2;p>=0&&a<=0&&a==f[p+1]?f[p]+=t:p>=0&&t==0&&f[p]==0?f[p+1]+=a:u?(f[p]+=t,f[p+1]+=a):f.push(t,a)}function Yt(f,t,a){if(a.length==0)return;let u=t.length-2>>1;if(u<f.length)f[f.length-1]=f[f.length-1].append(a);else{for(;f.length<u;)f.push(K.empty);f.push(a)}}function ai(f,t,a){let u=f.inserted;for(let p=0,g=0,A=0;A<f.sections.length;){let $=f.sections[A++],F=f.sections[A++];if(F<0)p+=$,g+=$;else{let V=p,z=g,ie=K.empty;for(;V+=$,z+=F,F&&u&&(ie=ie.append(u[A-2>>1])),!(a||A==f.sections.length||f.sections[A+1]<0);)$=f.sections[A++],F=f.sections[A++];t(p,V,g,z,ie),p=V,g=z}}}function si(f,t,a,u=!1){let p=[],g=u?[]:null,A=new At(f),$=new At(t);for(let F=-1;;){if(A.done&&$.len||$.done&&A.len)throw new Error("Mismatched change set lengths");if(A.ins==-1&&$.ins==-1){let V=Math.min(A.len,$.len);Ut(p,V,-1),A.forward(V),$.forward(V)}else if($.ins>=0&&(A.ins<0||F==A.i||A.off==0&&($.len<A.len||$.len==A.len&&!a))){let V=$.len;for(Ut(p,$.ins,-1);V;){let z=Math.min(A.len,V);A.ins>=0&&F<A.i&&A.len<=z&&(Ut(p,0,A.ins),g&&Yt(g,p,A.text),F=A.i),A.forward(z),V-=z}$.next()}else if(A.ins>=0){let V=0,z=A.len;for(;z;)if($.ins==-1){let ie=Math.min(z,$.len);V+=ie,z-=ie,$.forward(ie)}else if($.ins==0&&$.len<z)z-=$.len,$.next();else break;Ut(p,V,F<A.i?A.ins:0),g&&F<A.i&&Yt(g,p,A.text),F=A.i,A.forward(A.len-z)}else{if(A.done&&$.done)return g?Vt.createSet(p,g):qt.create(p);throw new Error("Mismatched change set lengths")}}}function di(f,t,a=!1){let u=[],p=a?[]:null,g=new At(f),A=new At(t);for(let $=!1;;){if(g.done&&A.done)return p?Vt.createSet(u,p):qt.create(u);if(g.ins==0)Ut(u,g.len,0,$),g.next();else if(A.len==0&&!A.done)Ut(u,0,A.ins,$),p&&Yt(p,u,A.text),A.next();else{if(g.done||A.done)throw new Error("Mismatched change set lengths");{let F=Math.min(g.len2,A.len),V=u.length;if(g.ins==-1){let z=A.ins==-1?-1:A.off?0:A.ins;Ut(u,F,z,$),p&&z&&Yt(p,u,A.text)}else A.ins==-1?(Ut(u,g.off?0:g.len,F,$),p&&Yt(p,u,g.textBit(F))):(Ut(u,g.off?0:g.len,A.off?0:A.ins,$),p&&!A.off&&Yt(p,u,A.text));$=(g.ins>F||A.ins>=0&&A.len>F)&&($||u.length>V),g.forward2(F),A.forward(F)}}}}class At{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,a=this.i-2>>1;return a>=t.length?K.empty:t[a]}textBit(t){let{inserted:a}=this.set,u=this.i-2>>1;return u>=a.length&&!t?K.empty:a[u].slice(this.off,t==null?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){this.ins==-1?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class hn{constructor(t,a,u){this.from=t,this.to=a,this.flags=u}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let t=this.flags&7;return t==7?null:t}get goalColumn(){let t=this.flags>>6;return t==16777215?void 0:t}map(t,a=-1){let u,p;return this.empty?u=p=t.mapPos(this.from,a):(u=t.mapPos(this.from,1),p=t.mapPos(this.to,-1)),u==this.from&&p==this.to?this:new hn(u,p,this.flags)}extend(t,a=t){if(t<=this.anchor&&a>=this.anchor)return ft.range(t,a);let u=Math.abs(t-this.anchor)>Math.abs(a-this.anchor)?t:a;return ft.range(this.anchor,u)}eq(t,a=!1){return this.anchor==t.anchor&&this.head==t.head&&(!a||!this.empty||this.assoc==t.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ft.range(t.anchor,t.head)}static create(t,a,u){return new hn(t,a,u)}}class ft{constructor(t,a){this.ranges=t,this.mainIndex=a}map(t,a=-1){return t.empty?this:ft.create(this.ranges.map(u=>u.map(t,a)),this.mainIndex)}eq(t,a=!1){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let u=0;u<this.ranges.length;u++)if(!this.ranges[u].eq(t.ranges[u],a))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ft([this.main],0)}addRange(t,a=!0){return ft.create([t].concat(this.ranges),a?0:this.mainIndex+1)}replaceRange(t,a=this.mainIndex){let u=this.ranges.slice();return u[a]=t,ft.create(u,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(t=>t.toJSON()),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||typeof t.main!="number"||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ft(t.ranges.map(a=>hn.fromJSON(a)),t.main)}static single(t,a=t){return new ft([ft.range(t,a)],0)}static create(t,a=0){if(t.length==0)throw new RangeError("A selection needs at least one range");for(let u=0,p=0;p<t.length;p++){let g=t[p];if(g.empty?g.from<=u:g.from<u)return ft.normalized(t.slice(),a);u=g.to}return new ft(t,a)}static cursor(t,a=0,u,p){return hn.create(t,t,(a==0?0:a<0?8:16)|(u==null?7:Math.min(6,u))|(p??16777215)<<6)}static range(t,a,u,p){let g=(u??16777215)<<6|(p==null?7:Math.min(6,p));return a<t?hn.create(a,t,48|g):hn.create(t,a,(a>t?8:0)|g)}static normalized(t,a=0){let u=t[a];t.sort((p,g)=>p.from-g.from),a=t.indexOf(u);for(let p=1;p<t.length;p++){let g=t[p],A=t[p-1];if(g.empty?g.from<=A.to:g.from<A.to){let $=A.from,F=Math.max(g.to,A.to);p<=a&&a--,t.splice(--p,2,g.anchor>g.head?ft.range(F,$):ft.range($,F))}}return new ft(t,a)}}function Xn(f,t){for(let a of f.ranges)if(a.to>t)throw new RangeError("Selection points outside of document")}let zn=0;class Dt{constructor(t,a,u,p,g){this.combine=t,this.compareInput=a,this.compare=u,this.isStatic=p,this.id=zn++,this.default=t([]),this.extensions=typeof g=="function"?g(this):g}get reader(){return this}static define(t={}){return new Dt(t.combine||(a=>a),t.compareInput||((a,u)=>a===u),t.compare||(t.combine?(a,u)=>a===u:ei),!!t.static,t.enables)}of(t){return new fi([],this,0,t)}compute(t,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new fi(t,this,1,a)}computeN(t,a){if(this.isStatic)throw new Error("Can't compute a static facet");return new fi(t,this,2,a)}from(t,a){return a||(a=u=>u),this.compute([t],u=>a(u.field(t)))}}function ei(f,t){return f==t||f.length==t.length&&f.every((a,u)=>a===t[u])}class fi{constructor(t,a,u,p){this.dependencies=t,this.facet=a,this.type=u,this.value=p,this.id=zn++}dynamicSlot(t){var a;let u=this.value,p=this.facet.compareInput,g=this.id,A=t[g]>>1,$=this.type==2,F=!1,V=!1,z=[];for(let ie of this.dependencies)ie=="doc"?F=!0:ie=="selection"?V=!0:(((a=t[ie.id])!==null&&a!==void 0?a:1)&1)==0&&z.push(t[ie.id]);return{create(ie){return ie.values[A]=u(ie),1},update(ie,oe){if(F&&oe.docChanged||V&&(oe.docChanged||oe.selection)||Ei(ie,z)){let Ae=u(ie);if($?!Qi(Ae,ie.values[A],p):!p(Ae,ie.values[A]))return ie.values[A]=Ae,1}return 0},reconfigure:(ie,oe)=>{let Ae,$e=oe.config.address[g];if($e!=null){let je=Wt(oe,$e);if(this.dependencies.every(ot=>ot instanceof Dt?oe.facet(ot)===ie.facet(ot):ot instanceof wn?oe.field(ot,!1)==ie.field(ot,!1):!0)||($?Qi(Ae=u(ie),je,p):p(Ae=u(ie),je)))return ie.values[A]=je,0}else Ae=u(ie);return ie.values[A]=Ae,1}}}}function Qi(f,t,a){if(f.length!=t.length)return!1;for(let u=0;u<f.length;u++)if(!a(f[u],t[u]))return!1;return!0}function Ei(f,t){let a=!1;for(let u of t)Ft(f,u)&1&&(a=!0);return a}function gi(f,t,a){let u=a.map(F=>f[F.id]),p=a.map(F=>F.type),g=u.filter(F=>!(F&1)),A=f[t.id]>>1;function $(F){let V=[];for(let z=0;z<u.length;z++){let ie=Wt(F,u[z]);if(p[z]==2)for(let oe of ie)V.push(oe);else V.push(ie)}return t.combine(V)}return{create(F){for(let V of u)Ft(F,V);return F.values[A]=$(F),1},update(F,V){if(!Ei(F,g))return 0;let z=$(F);return t.compare(z,F.values[A])?0:(F.values[A]=z,1)},reconfigure(F,V){let z=Ei(F,u),ie=V.config.facets[t.id],oe=V.facet(t);if(ie&&!z&&ei(a,ie))return F.values[A]=oe,0;let Ae=$(F);return t.compare(Ae,oe)?(F.values[A]=oe,0):(F.values[A]=Ae,1)}}}const Ti=Dt.define({static:!0});class wn{constructor(t,a,u,p,g){this.id=t,this.createF=a,this.updateF=u,this.compareF=p,this.spec=g,this.provides=void 0}static define(t){let a=new wn(zn++,t.create,t.update,t.compare||((u,p)=>u===p),t);return t.provide&&(a.provides=t.provide(a)),a}create(t){let a=t.facet(Ti).find(u=>u.field==this);return(a?.create||this.createF)(t)}slot(t){let a=t[this.id]>>1;return{create:u=>(u.values[a]=this.create(u),1),update:(u,p)=>{let g=u.values[a],A=this.updateF(g,p);return this.compareF(g,A)?0:(u.values[a]=A,1)},reconfigure:(u,p)=>{let g=u.facet(Ti),A=p.facet(Ti),$;return($=g.find(F=>F.field==this))&&$!=A.find(F=>F.field==this)?(u.values[a]=$.create(u),1):p.config.address[this.id]!=null?(u.values[a]=p.field(this),0):(u.values[a]=this.create(u),1)}}}init(t){return[this,Ti.of({field:this,create:t})]}get extension(){return this}}const Bi={lowest:4,low:3,default:2,high:1,highest:0};function vi(f){return t=>new sr(t,f)}const Di={highest:vi(Bi.highest),high:vi(Bi.high),default:vi(Bi.default),low:vi(Bi.low),lowest:vi(Bi.lowest)};class sr{constructor(t,a){this.inner=t,this.prec=a}}class Je{of(t){return new tt(this,t)}reconfigure(t){return Je.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class tt{constructor(t,a){this.compartment=t,this.inner=a}}class qe{constructor(t,a,u,p,g,A){for(this.base=t,this.compartments=a,this.dynamicSlots=u,this.address=p,this.staticValues=g,this.facets=A,this.statusTemplate=[];this.statusTemplate.length<u.length;)this.statusTemplate.push(0)}staticFacet(t){let a=this.address[t.id];return a==null?t.default:this.staticValues[a>>1]}static resolve(t,a,u){let p=[],g=Object.create(null),A=new Map;for(let oe of _t(t,a,A))oe instanceof wn?p.push(oe):(g[oe.facet.id]||(g[oe.facet.id]=[])).push(oe);let $=Object.create(null),F=[],V=[];for(let oe of p)$[oe.id]=V.length<<1,V.push(Ae=>oe.slot(Ae));let z=u?.config.facets;for(let oe in g){let Ae=g[oe],$e=Ae[0].facet,je=z&&z[oe]||[];if(Ae.every(ot=>ot.type==0))if($[$e.id]=F.length<<1|1,ei(je,Ae))F.push(u.facet($e));else{let ot=$e.combine(Ae.map(bt=>bt.value));F.push(u&&$e.compare(ot,u.facet($e))?u.facet($e):ot)}else{for(let ot of Ae)ot.type==0?($[ot.id]=F.length<<1|1,F.push(ot.value)):($[ot.id]=V.length<<1,V.push(bt=>ot.dynamicSlot(bt)));$[$e.id]=V.length<<1,V.push(ot=>gi(ot,$e,Ae))}}let ie=V.map(oe=>oe($));return new qe(t,A,ie,$,F,g)}}function _t(f,t,a){let u=[[],[],[],[],[]],p=new Map;function g(A,$){let F=p.get(A);if(F!=null){if(F<=$)return;let V=u[F].indexOf(A);V>-1&&u[F].splice(V,1),A instanceof tt&&a.delete(A.compartment)}if(p.set(A,$),Array.isArray(A))for(let V of A)g(V,$);else if(A instanceof tt){if(a.has(A.compartment))throw new RangeError("Duplicate use of compartment in extensions");let V=t.get(A.compartment)||A.inner;a.set(A.compartment,V),g(V,$)}else if(A instanceof sr)g(A.inner,A.prec);else if(A instanceof wn)u[$].push(A),A.provides&&g(A.provides,$);else if(A instanceof fi)u[$].push(A),A.facet.extensions&&g(A.facet.extensions,Bi.default);else{let V=A.extension;if(!V)throw new Error(`Unrecognized extension value in extension set (${A}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);g(V,$)}}return g(f,Bi.default),u.reduce((A,$)=>A.concat($))}function Ft(f,t){if(t&1)return 2;let a=t>>1,u=f.status[a];if(u==4)throw new Error("Cyclic dependency between fields and/or facets");if(u&2)return u;f.status[a]=4;let p=f.computeSlot(f,f.config.dynamicSlots[a]);return f.status[a]=2|p}function Wt(f,t){return t&1?f.config.staticValues[t>>1]:f.values[t>>1]}const Rt=Dt.define(),un=Dt.define({combine:f=>f.some(t=>t),static:!0}),Bt=Dt.define({combine:f=>f.length?f[0]:void 0,static:!0}),ln=Dt.define(),pn=Dt.define(),Oi=Dt.define(),yi=Dt.define({combine:f=>f.length?f[0]:!1});class ti{constructor(t,a){this.type=t,this.value=a}static define(){return new ii}}class ii{of(t){return new ti(this,t)}}class Fi{constructor(t){this.map=t}of(t){return new Et(this,t)}}class Et{constructor(t,a){this.type=t,this.value=a}map(t){let a=this.type.map(this.value,t);return a===void 0?void 0:a==this.value?this:new Et(this.type,a)}is(t){return this.type==t}static define(t={}){return new Fi(t.map||(a=>a))}static mapEffects(t,a){if(!t.length)return t;let u=[];for(let p of t){let g=p.map(a);g&&u.push(g)}return u}}Et.reconfigure=Et.define(),Et.appendConfig=Et.define();class ui{constructor(t,a,u,p,g,A){this.startState=t,this.changes=a,this.selection=u,this.effects=p,this.annotations=g,this.scrollIntoView=A,this._doc=null,this._state=null,u&&Xn(u,a.newLength),g.some($=>$.type==ui.time)||(this.annotations=g.concat(ui.time.of(Date.now())))}static create(t,a,u,p,g,A){return new ui(t,a,u,p,g,A)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let a of this.annotations)if(a.type==t)return a.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let a=this.annotation(ui.userEvent);return!!(a&&(a==t||a.length>t.length&&a.slice(0,t.length)==t&&a[t.length]=="."))}}ui.time=ti.define(),ui.userEvent=ti.define(),ui.addToHistory=ti.define(),ui.remote=ti.define();function Li(f,t){let a=[];for(let u=0,p=0;;){let g,A;if(u<f.length&&(p==t.length||t[p]>=f[u]))g=f[u++],A=f[u++];else if(p<t.length)g=t[p++],A=t[p++];else return a;!a.length||a[a.length-1]<g?a.push(g,A):a[a.length-1]<A&&(a[a.length-1]=A)}}function cn(f,t,a){var u;let p,g,A;return a?(p=t.changes,g=Vt.empty(t.changes.length),A=f.changes.compose(t.changes)):(p=t.changes.map(f.changes),g=f.changes.mapDesc(t.changes,!0),A=f.changes.compose(p)),{changes:A,selection:t.selection?t.selection.map(g):(u=f.selection)===null||u===void 0?void 0:u.map(p),effects:Et.mapEffects(f.effects,p).concat(Et.mapEffects(t.effects,g)),annotations:f.annotations.length?f.annotations.concat(t.annotations):t.annotations,scrollIntoView:f.scrollIntoView||t.scrollIntoView}}function Bn(f,t,a){let u=t.selection,p=Zi(t.annotations);return t.userEvent&&(p=p.concat(ui.userEvent.of(t.userEvent))),{changes:t.changes instanceof Vt?t.changes:Vt.of(t.changes||[],a,f.facet(Bt)),selection:u&&(u instanceof ft?u:ft.single(u.anchor,u.head)),effects:Zi(t.effects),annotations:p,scrollIntoView:!!t.scrollIntoView}}function pi(f,t,a){let u=Bn(f,t.length?t[0]:{},f.doc.length);t.length&&t[0].filter===!1&&(a=!1);for(let g=1;g<t.length;g++){t[g].filter===!1&&(a=!1);let A=!!t[g].sequential;u=cn(u,Bn(f,t[g],A?u.changes.newLength:f.doc.length),A)}let p=ui.create(f,u.changes,u.selection,u.effects,u.annotations,u.scrollIntoView);return Ni(a?bi(p):p)}function bi(f){let t=f.startState,a=!0;for(let p of t.facet(ln)){let g=p(f);if(g===!1){a=!1;break}Array.isArray(g)&&(a=a===!0?g:Li(a,g))}if(a!==!0){let p,g;if(a===!1)g=f.changes.invertedDesc,p=Vt.empty(t.doc.length);else{let A=f.changes.filter(a);p=A.changes,g=A.filtered.mapDesc(A.changes).invertedDesc}f=ui.create(t,p,f.selection&&f.selection.map(g),Et.mapEffects(f.effects,g),f.annotations,f.scrollIntoView)}let u=t.facet(pn);for(let p=u.length-1;p>=0;p--){let g=u[p](f);g instanceof ui?f=g:Array.isArray(g)&&g.length==1&&g[0]instanceof ui?f=g[0]:f=pi(t,Zi(g),!1)}return f}function Ni(f){let t=f.startState,a=t.facet(Oi),u=f;for(let p=a.length-1;p>=0;p--){let g=a[p](f);g&&Object.keys(g).length&&(u=cn(u,Bn(t,g,f.changes.newLength),!0))}return u==f?f:ui.create(t,f.changes,f.selection,u.effects,u.annotations,u.scrollIntoView)}const Hi=[];function Zi(f){return f==null?Hi:Array.isArray(f)?f:[f]}var ee=(function(f){return f[f.Word=0]="Word",f[f.Space=1]="Space",f[f.Other=2]="Other",f})(ee||(ee={}));const Oe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ue;try{ue=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function ye(f){if(ue)return ue.test(f);for(let t=0;t<f.length;t++){let a=f[t];if(/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Oe.test(a)))return!0}return!1}function ke(f){return t=>{if(!/\S/.test(t))return ee.Space;if(ye(t))return ee.Word;for(let a=0;a<f.length;a++)if(t.indexOf(f[a])>-1)return ee.Word;return ee.Other}}class at{constructor(t,a,u,p,g,A){this.config=t,this.doc=a,this.selection=u,this.values=p,this.status=t.statusTemplate.slice(),this.computeSlot=g,A&&(A._state=this);for(let $=0;$<this.config.dynamicSlots.length;$++)Ft(this,$<<1);this.computeSlot=null}field(t,a=!0){let u=this.config.address[t.id];if(u==null){if(a)throw new RangeError("Field is not present in this state");return}return Ft(this,u),Wt(this,u)}update(...t){return pi(this,t,!0)}applyTransaction(t){let a=this.config,{base:u,compartments:p}=a;for(let $ of t.effects)$.is(Je.reconfigure)?(a&&(p=new Map,a.compartments.forEach((F,V)=>p.set(V,F)),a=null),p.set($.value.compartment,$.value.extension)):$.is(Et.reconfigure)?(a=null,u=$.value):$.is(Et.appendConfig)&&(a=null,u=Zi(u).concat($.value));let g;a?g=t.startState.values.slice():(a=qe.resolve(u,p,this),g=new at(a,this.doc,this.selection,a.dynamicSlots.map(()=>null),(F,V)=>V.reconfigure(F,this),null).values);let A=t.startState.facet(un)?t.newSelection:t.newSelection.asSingle();new at(a,t.newDoc,A,g,($,F)=>F.update($,t),t)}replaceSelection(t){return typeof t=="string"&&(t=this.toText(t)),this.changeByRange(a=>({changes:{from:a.from,to:a.to,insert:t},range:ft.cursor(a.from+t.length)}))}changeByRange(t){let a=this.selection,u=t(a.ranges[0]),p=this.changes(u.changes),g=[u.range],A=Zi(u.effects);for(let $=1;$<a.ranges.length;$++){let F=t(a.ranges[$]),V=this.changes(F.changes),z=V.map(p);for(let oe=0;oe<$;oe++)g[oe]=g[oe].map(z);let ie=p.mapDesc(V,!0);g.push(F.range.map(ie)),p=p.compose(z),A=Et.mapEffects(A,z).concat(Et.mapEffects(Zi(F.effects),ie))}return{changes:p,selection:ft.create(g,a.mainIndex),effects:A}}changes(t=[]){return t instanceof Vt?t:Vt.of(t,this.doc.length,this.facet(at.lineSeparator))}toText(t){return K.of(t.split(this.facet(at.lineSeparator)||xt))}sliceDoc(t=0,a=this.doc.length){return this.doc.sliceString(t,a,this.lineBreak)}facet(t){let a=this.config.address[t.id];return a==null?t.default:(Ft(this,a),Wt(this,a))}toJSON(t){let a={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let u in t){let p=t[u];p instanceof wn&&this.config.address[p.id]!=null&&(a[u]=p.spec.toJSON(this.field(t[u]),this))}return a}static fromJSON(t,a={},u){if(!t||typeof t.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let p=[];if(u){for(let g in u)if(Object.prototype.hasOwnProperty.call(t,g)){let A=u[g],$=t[g];p.push(A.init(F=>A.spec.fromJSON($,F)))}}return at.create({doc:t.doc,selection:ft.fromJSON(t.selection),extensions:a.extensions?p.concat([a.extensions]):p})}static create(t={}){let a=qe.resolve(t.extensions||[],new Map),u=t.doc instanceof K?t.doc:K.of((t.doc||"").split(a.staticFacet(at.lineSeparator)||xt)),p=t.selection?t.selection instanceof ft?t.selection:ft.single(t.selection.anchor,t.selection.head):ft.single(0);return Xn(p,u.length),a.staticFacet(un)||(p=p.asSingle()),new at(a,u,p,a.dynamicSlots.map(()=>null),(g,A)=>A.create(g),null)}get tabSize(){return this.facet(at.tabSize)}get lineBreak(){return this.facet(at.lineSeparator)||`
`}get readOnly(){return this.facet(yi)}phrase(t,...a){for(let u of this.facet(at.phrases))if(Object.prototype.hasOwnProperty.call(u,t)){t=u[t];break}return a.length&&(t=t.replace(/\$(\$|\d*)/g,(u,p)=>{if(p=="$")return"$";let g=+(p||1);return!g||g>a.length?u:a[g-1]})),t}languageDataAt(t,a,u=-1){let p=[];for(let g of this.facet(Rt))for(let A of g(this,a,u))Object.prototype.hasOwnProperty.call(A,t)&&p.push(A[t]);return p}charCategorizer(t){return ke(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:a,from:u,length:p}=this.doc.lineAt(t),g=this.charCategorizer(t),A=t-u,$=t-u;for(;A>0;){let F=We(a,A,!1);if(g(a.slice(F,A))!=ee.Word)break;A=F}for(;$<p;){let F=We(a,$);if(g(a.slice($,F))!=ee.Word)break;$=F}return A==$?null:ft.range(A+u,$+u)}}at.allowMultipleSelections=un,at.tabSize=Dt.define({combine:f=>f.length?f[0]:4}),at.lineSeparator=Bt,at.readOnly=yi,at.phrases=Dt.define({compare(f,t){let a=Object.keys(f),u=Object.keys(t);return a.length==u.length&&a.every(p=>f[p]==t[p])}}),at.languageData=Rt,at.changeFilter=ln,at.transactionFilter=pn,at.transactionExtender=Oi,Je.reconfigure=Et.define();function Ot(f,t,a={}){let u={};for(let p of f)for(let g of Object.keys(p)){let A=p[g],$=u[g];if($===void 0)u[g]=A;else if(!($===A||A===void 0))if(Object.hasOwnProperty.call(a,g))u[g]=a[g]($,A);else throw new Error("Config merge conflict for field "+g)}for(let p in t)u[p]===void 0&&(u[p]=t[p]);return u}class kt{eq(t){return this==t}range(t,a=t){return rn.create(t,a,this)}}kt.prototype.startSide=kt.prototype.endSide=0,kt.prototype.point=!1,kt.prototype.mapMode=$t.TrackDel;let rn=class am{constructor(t,a,u){this.from=t,this.to=a,this.value=u}static create(t,a,u){return new am(t,a,u)}};function oi(f,t){return f.from-t.from||f.value.startSide-t.value.startSide}class Mi{constructor(t,a,u,p){this.from=t,this.to=a,this.value=u,this.maxPoint=p}get length(){return this.to[this.to.length-1]}findIndex(t,a,u,p=0){let g=u?this.to:this.from;for(let A=p,$=g.length;;){if(A==$)return A;let F=A+$>>1,V=g[F]-t||(u?this.value[F].endSide:this.value[F].startSide)-a;if(F==A)return V>=0?A:$;V>=0?$=F:A=F+1}}between(t,a,u,p){for(let g=this.findIndex(a,-1e9,!0),A=this.findIndex(u,1e9,!1,g);g<A;g++)if(p(this.from[g]+t,this.to[g]+t,this.value[g])===!1)return!1}map(t,a){let u=[],p=[],g=[],A=-1,$=-1;for(let F=0;F<this.value.length;F++){let V=this.value[F],z=this.from[F]+t,ie=this.to[F]+t,oe,Ae;if(z==ie){let $e=a.mapPos(z,V.startSide,V.mapMode);if($e==null||(oe=Ae=$e,V.startSide!=V.endSide&&(Ae=a.mapPos(z,V.endSide),Ae<oe)))continue}else if(oe=a.mapPos(z,V.startSide),Ae=a.mapPos(ie,V.endSide),oe>Ae||oe==Ae&&V.startSide>0&&V.endSide<=0)continue;(Ae-oe||V.endSide-V.startSide)<0||(A<0&&(A=oe),V.point&&($=Math.max($,Ae-oe)),u.push(V),p.push(oe-A),g.push(Ae-A))}return{mapped:u.length?new Mi(p,g,u,$):null,pos:A}}}class Zn{constructor(t,a,u,p){this.chunkPos=t,this.chunk=a,this.nextLayer=u,this.maxPoint=p}static create(t,a,u,p){return new Zn(t,a,u,p)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let a of this.chunk)t+=a.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:a=[],sort:u=!1,filterFrom:p=0,filterTo:g=this.length}=t,A=t.filter;if(a.length==0&&!A)return this;if(u&&(a=a.slice().sort(oi)),this.isEmpty)return a.length?Zn.of(a):this;let $=new lr(this,null,-1).goto(0),F=0,V=[],z=new br;for(;$.value||F<a.length;)if(F<a.length&&($.from-a[F].from||$.startSide-a[F].value.startSide)>=0){let ie=a[F++];z.addInner(ie.from,ie.to,ie.value)||V.push(ie)}else $.rangeIndex==1&&$.chunkIndex<this.chunk.length&&(F==a.length||this.chunkEnd($.chunkIndex)<a[F].from)&&(!A||p>this.chunkEnd($.chunkIndex)||g<this.chunkPos[$.chunkIndex])&&z.addChunk(this.chunkPos[$.chunkIndex],this.chunk[$.chunkIndex])?$.nextChunk():((!A||p>$.to||g<$.from||A($.from,$.to,$.value))&&(z.addInner($.from,$.to,$.value)||V.push(rn.create($.from,$.to,$.value))),$.next());return z.finishInner(this.nextLayer.isEmpty&&!V.length?Zn.empty:this.nextLayer.update({add:V,filter:A,filterFrom:p,filterTo:g}))}map(t){if(t.empty||this.isEmpty)return this;let a=[],u=[],p=-1;for(let A=0;A<this.chunk.length;A++){let $=this.chunkPos[A],F=this.chunk[A],V=t.touchesRange($,$+F.length);if(V===!1)p=Math.max(p,F.maxPoint),a.push(F),u.push(t.mapPos($));else if(V===!0){let{mapped:z,pos:ie}=F.map($,t);z&&(p=Math.max(p,z.maxPoint),a.push(z),u.push(ie))}}let g=this.nextLayer.map(t);return a.length==0?g:new Zn(u,a,g||Zn.empty,p)}between(t,a,u){if(!this.isEmpty){for(let p=0;p<this.chunk.length;p++){let g=this.chunkPos[p],A=this.chunk[p];if(a>=g&&t<=g+A.length&&A.between(g,t-g,a-g,u)===!1)return}this.nextLayer.between(t,a,u)}}iter(t=0){return Ts.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,a=0){return Ts.from(t).goto(a)}static compare(t,a,u,p,g=-1){let A=t.filter(ie=>ie.maxPoint>0||!ie.isEmpty&&ie.maxPoint>=g),$=a.filter(ie=>ie.maxPoint>0||!ie.isEmpty&&ie.maxPoint>=g),F=Es(A,$,u),V=new Fs(A,F,g),z=new Fs($,F,g);u.iterGaps((ie,oe,Ae)=>Ya(V,ie,z,oe,Ae,p)),u.empty&&u.length==0&&Ya(V,0,z,0,0,p)}static eq(t,a,u=0,p){p==null&&(p=999999999);let g=t.filter(z=>!z.isEmpty&&a.indexOf(z)<0),A=a.filter(z=>!z.isEmpty&&t.indexOf(z)<0);if(g.length!=A.length)return!1;if(!g.length)return!0;let $=Es(g,A),F=new Fs(g,$,0).goto(u),V=new Fs(A,$,0).goto(u);for(;;){if(F.to!=V.to||!Uo(F.active,V.active)||F.point&&(!V.point||!F.point.eq(V.point)))return!1;if(F.to>p)return!0;F.next(),V.next()}}static spans(t,a,u,p,g=-1){let A=new Fs(t,null,g).goto(a),$=a,F=A.openStart;for(;;){let V=Math.min(A.to,u);if(A.point){let z=A.activeForPoint(A.to),ie=A.pointFrom<a?z.length+1:A.point.startSide<0?z.length:Math.min(z.length,F);p.point($,V,A.point,z,ie,A.pointRank),F=Math.min(A.openEnd(V),z.length)}else V>$&&(p.span($,V,A.active,F),F=A.openEnd(V));if(A.to>u)return F+(A.point&&A.to>u?1:0);$=A.to,A.next()}}static of(t,a=!1){let u=new br;for(let p of t instanceof rn?[t]:a?qr(t):t)u.add(p.from,p.to,p.value);return u.finish()}static join(t){if(!t.length)return Zn.empty;let a=t[t.length-1];for(let u=t.length-2;u>=0;u--)for(let p=t[u];p!=Zn.empty;p=p.nextLayer)a=new Zn(p.chunkPos,p.chunk,a,Math.max(p.maxPoint,a.maxPoint));return a}}Zn.empty=new Zn([],[],null,-1);function qr(f){if(f.length>1)for(let t=f[0],a=1;a<f.length;a++){let u=f[a];if(oi(t,u)>0)return f.slice().sort(oi);t=u}return f}Zn.empty.nextLayer=Zn.empty;class br{finishChunk(t){this.chunks.push(new Mi(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,a,u){this.addInner(t,a,u)||(this.nextLayer||(this.nextLayer=new br)).add(t,a,u)}addInner(t,a,u){let p=t-this.lastTo||u.startSide-this.last.endSide;if(p<=0&&(t-this.lastFrom||u.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return p<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(a-this.chunkStart),this.last=u,this.lastFrom=t,this.lastTo=a,this.value.push(u),u.point&&(this.maxPoint=Math.max(this.maxPoint,a-t)),!0)}addChunk(t,a){if((t-this.lastTo||a.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,a.maxPoint),this.chunks.push(a),this.chunkPos.push(t);let u=a.value.length-1;return this.last=a.value[u],this.lastFrom=a.from[u]+t,this.lastTo=a.to[u]+t,!0}finish(){return this.finishInner(Zn.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return t;let a=Zn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,a}}function Es(f,t,a){let u=new Map;for(let g of f)for(let A=0;A<g.chunk.length;A++)g.chunk[A].maxPoint<=0&&u.set(g.chunk[A],g.chunkPos[A]);let p=new Set;for(let g of t)for(let A=0;A<g.chunk.length;A++){let $=u.get(g.chunk[A]);$!=null&&(a?a.mapPos($):$)==g.chunkPos[A]&&!a?.touchesRange($,$+g.chunk[A].length)&&p.add(g.chunk[A])}return p}class lr{constructor(t,a,u,p=0){this.layer=t,this.skip=a,this.minPoint=u,this.rank=p}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,a=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,a,!1),this}gotoInner(t,a,u){for(;this.chunkIndex<this.layer.chunk.length;){let p=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(p)||this.layer.chunkEnd(this.chunkIndex)<t||p.maxPoint<this.minPoint))break;this.chunkIndex++,u=!1}if(this.chunkIndex<this.layer.chunk.length){let p=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],a,!0);(!u||this.rangeIndex<p)&&this.setRangeIndex(p)}this.next()}forward(t,a){(this.to-t||this.endSide-a)<0&&this.gotoInner(t,a,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let t=this.layer.chunkPos[this.chunkIndex],a=this.layer.chunk[this.chunkIndex],u=t+a.from[this.rangeIndex];if(this.from=u,this.to=t+a.to[this.rangeIndex],this.value=a.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ts{constructor(t){this.heap=t}static from(t,a=null,u=-1){let p=[];for(let g=0;g<t.length;g++)for(let A=t[g];!A.isEmpty;A=A.nextLayer)A.maxPoint>=u&&p.push(new lr(A,a,u,g));return p.length==1?p[0]:new Ts(p)}get startSide(){return this.value?this.value.startSide:0}goto(t,a=-1e9){for(let u of this.heap)u.goto(t,a);for(let u=this.heap.length>>1;u>=0;u--)jo(this.heap,u);return this.next(),this}forward(t,a){for(let u of this.heap)u.forward(t,a);for(let u=this.heap.length>>1;u>=0;u--)jo(this.heap,u);(this.to-t||this.value.endSide-a)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),jo(this.heap,0)}}}function jo(f,t){for(let a=f[t];;){let u=(t<<1)+1;if(u>=f.length)break;let p=f[u];if(u+1<f.length&&p.compare(f[u+1])>=0&&(p=f[u+1],u++),a.compare(p)<0)break;f[u]=a,f[t]=p,t=u}}class Fs{constructor(t,a,u){this.minPoint=u,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ts.from(t,a,u)}goto(t,a=-1e9){return this.cursor.goto(t,a),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=a,this.openStart=-1,this.next(),this}forward(t,a){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-a)<0;)this.removeActive(this.minActive);this.cursor.forward(t,a)}removeActive(t){Ks(this.active,t),Ks(this.activeTo,t),Ks(this.activeRank,t),this.minActive=Ha(this.active,this.activeTo)}addActive(t){let a=0,{value:u,to:p,rank:g}=this.cursor;for(;a<this.activeRank.length&&(g-this.activeRank[a]||p-this.activeTo[a])>0;)a++;Js(this.active,a,u),Js(this.activeTo,a,p),Js(this.activeRank,a,g),t&&Js(t,a,this.cursor.from),this.minActive=Ha(this.active,this.activeTo)}next(){let t=this.to,a=this.point;this.point=null;let u=this.openStart<0?[]:null;for(;;){let p=this.minActive;if(p>-1&&(this.activeTo[p]-this.cursor.from||this.active[p].endSide-this.cursor.startSide)<0){if(this.activeTo[p]>t){this.to=this.activeTo[p],this.endSide=this.active[p].endSide;break}this.removeActive(p),u&&Ks(u,p)}else if(this.cursor.value)if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let g=this.cursor.value;if(!g.point)this.addActive(u),this.cursor.next();else if(a&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=g,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=g.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(u){this.openStart=0;for(let p=u.length-1;p>=0&&u[p]<t;p--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let a=[];for(let u=this.active.length-1;u>=0&&!(this.activeRank[u]<this.pointRank);u--)(this.activeTo[u]>t||this.activeTo[u]==t&&this.active[u].endSide>=this.point.endSide)&&a.push(this.active[u]);return a.reverse()}openEnd(t){let a=0;for(let u=this.activeTo.length-1;u>=0&&this.activeTo[u]>t;u--)a++;return a}}function Ya(f,t,a,u,p,g){f.goto(t),a.goto(u);let A=u+p,$=u,F=u-t;for(;;){let V=f.to+F-a.to,z=V||f.endSide-a.endSide,ie=z<0?f.to+F:a.to,oe=Math.min(ie,A);if(f.point||a.point?f.point&&a.point&&(f.point==a.point||f.point.eq(a.point))&&Uo(f.activeForPoint(f.to),a.activeForPoint(a.to))||g.comparePoint($,oe,f.point,a.point):oe>$&&!Uo(f.active,a.active)&&g.compareRange($,oe,f.active,a.active),ie>A)break;(V||f.openEnd!=a.openEnd)&&g.boundChange&&g.boundChange(ie),$=ie,z<=0&&f.next(),z>=0&&a.next()}}function Uo(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++)if(f[a]!=t[a]&&!f[a].eq(t[a]))return!1;return!0}function Ks(f,t){for(let a=t,u=f.length-1;a<u;a++)f[a]=f[a+1];f.pop()}function Js(f,t,a){for(let u=f.length-1;u>=t;u--)f[u+1]=f[u];f[t]=a}function Ha(f,t){let a=-1,u=1e9;for(let p=0;p<t.length;p++)(t[p]-u||f[p].endSide-f[a].endSide)<0&&(a=p,u=t[p]);return a}function Rs(f,t,a=f.length){let u=0;for(let p=0;p<a&&p<f.length;)f.charCodeAt(p)==9?(u+=t-u%t,p++):(u++,p=We(f,p));return u}function Yo(f,t,a,u){for(let p=0,g=0;;){if(g>=t)return p;if(p==f.length)break;g+=f.charCodeAt(p)==9?a-g%a:1,p=We(f,p)}return u===!0?-1:f.length}const Ho="ͼ",Ka=typeof Symbol>"u"?"__"+Ho:Symbol.for(Ho),Ko=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class jr{constructor(t,a){this.rules=[];let{finish:u}=a||{};function p(A){return/^@/.test(A)?[A]:A.split(/,\s*/)}function g(A,$,F,V){let z=[],ie=/^@(\w+)\b/.exec(A[0]),oe=ie&&ie[1]=="keyframes";if(ie&&$==null)return F.push(A[0]+";");for(let Ae in $){let $e=$[Ae];if(/&/.test(Ae))g(Ae.split(/,\s*/).map(je=>A.map(ot=>je.replace(/&/,ot))).reduce((je,ot)=>je.concat(ot)),$e,F);else if($e&&typeof $e=="object"){if(!ie)throw new RangeError("The value of a property ("+Ae+") should be a primitive value.");g(p(Ae),$e,z,oe)}else $e!=null&&z.push(Ae.replace(/_.*/,"").replace(/[A-Z]/g,je=>"-"+je.toLowerCase())+": "+$e+";")}(z.length||oe)&&F.push((u&&!ie&&!V?A.map(u):A).join(", ")+" {"+z.join(" ")+"}")}for(let A in t)g(p(A),t[A],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let t=Ja[Ka]||1;return Ja[Ka]=t+1,Ho+t.toString(36)}static mount(t,a,u){let p=t[Ko],g=u&&u.nonce;p?g&&p.setNonce(g):p=new Ju(t,g),p.mount(Array.isArray(a)?a:[a],t)}}let el=new Map;class Ju{constructor(t,a){let u=t.ownerDocument||t,p=u.defaultView;if(!t.head&&t.adoptedStyleSheets&&p.CSSStyleSheet){let g=el.get(u);if(g)return t[Ko]=g;this.sheet=new p.CSSStyleSheet,el.set(u,this)}else this.styleTag=u.createElement("style"),a&&this.styleTag.setAttribute("nonce",a);this.modules=[],t[Ko]=this}mount(t,a){let u=this.sheet,p=0,g=0;for(let A=0;A<t.length;A++){let $=t[A],F=this.modules.indexOf($);if(F<g&&F>-1&&(this.modules.splice(F,1),g--,F=-1),F==-1){if(this.modules.splice(g++,0,$),u)for(let V=0;V<$.rules.length;V++)u.insertRule($.rules[V],p++)}else{for(;g<F;)p+=this.modules[g++].rules.length;p+=$.rules.length,g++}}if(u)a.adoptedStyleSheets.indexOf(this.sheet)<0&&(a.adoptedStyleSheets=[this.sheet,...a.adoptedStyleSheets]);else{let A="";for(let F=0;F<this.modules.length;F++)A+=this.modules[F].getRules()+`
`;this.styleTag.textContent=A;let $=a.head||a;this.styleTag.parentNode!=$&&$.insertBefore(this.styleTag,$.firstChild)}}setNonce(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}for(var Ur={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tc=typeof navigator<"u"&&/Mac/.test(navigator.platform),nc=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ii=0;Ii<10;Ii++)Ur[48+Ii]=Ur[96+Ii]=String(Ii);for(var Ii=1;Ii<=24;Ii++)Ur[Ii+111]="F"+Ii;for(var Ii=65;Ii<=90;Ii++)Ur[Ii]=String.fromCharCode(Ii+32),Bs[Ii]=String.fromCharCode(Ii);for(var Jo in Ur)Bs.hasOwnProperty(Jo)||(Bs[Jo]=Ur[Jo]);function ic(f){var t=tc&&f.metaKey&&f.shiftKey&&!f.ctrlKey&&!f.altKey||nc&&f.shiftKey&&f.key&&f.key.length==1||f.key=="Unidentified",a=!t&&f.key||(f.shiftKey?Bs:Ur)[f.keyCode]||f.key||"Unidentified";return a=="Esc"&&(a="Escape"),a=="Del"&&(a="Delete"),a=="Left"&&(a="ArrowLeft"),a=="Up"&&(a="ArrowUp"),a=="Right"&&(a="ArrowRight"),a=="Down"&&(a="ArrowDown"),a}function xi(){var f=arguments[0];typeof f=="string"&&(f=document.createElement(f));var t=1,a=arguments[1];if(a&&typeof a=="object"&&a.nodeType==null&&!Array.isArray(a)){for(var u in a)if(Object.prototype.hasOwnProperty.call(a,u)){var p=a[u];typeof p=="string"?f.setAttribute(u,p):p!=null&&(f[u]=p)}t++}for(;t<arguments.length;t++)tl(f,arguments[t]);return f}function tl(f,t){if(typeof t=="string")f.appendChild(document.createTextNode(t));else if(t!=null)if(t.nodeType!=null)f.appendChild(t);else if(Array.isArray(t))for(var a=0;a<t.length;a++)tl(f,t[a]);else throw new RangeError("Unsupported child node: "+t)}let Ki=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},ea=typeof document<"u"?document:{documentElement:{style:{}}};const ta=/Edge\/(\d+)/.exec(Ki.userAgent),nl=/MSIE \d/.test(Ki.userAgent),na=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ki.userAgent),Qs=!!(nl||na||ta),il=!Qs&&/gecko\/(\d+)/i.test(Ki.userAgent),ia=!Qs&&/Chrome\/(\d+)/.exec(Ki.userAgent),rc="webkitFontSmoothing"in ea.documentElement.style,ra=!Qs&&/Apple Computer/.test(Ki.vendor),rl=ra&&(/Mobile\/\w+/.test(Ki.userAgent)||Ki.maxTouchPoints>2);var sn={mac:rl||/Mac/.test(Ki.platform),windows:/Win/.test(Ki.platform),linux:/Linux|X11/.test(Ki.platform),ie:Qs,ie_version:nl?ea.documentMode||6:na?+na[1]:ta?+ta[1]:0,gecko:il,gecko_version:il?+(/Firefox\/(\d+)/.exec(Ki.userAgent)||[0,0])[1]:0,chrome:!!ia,chrome_version:ia?+ia[1]:0,ios:rl,android:/Android\b/.test(Ki.userAgent),webkit_version:rc?+(/\bAppleWebKit\/(\d+)/.exec(Ki.userAgent)||[0,0])[1]:0,safari:ra,safari_version:ra?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Ki.userAgent)||[0,0])[1]:0,tabSize:ea.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function sa(f,t){for(let a in f)a=="class"&&t.class?t.class+=" "+f.class:a=="style"&&t.style?t.style+=";"+f.style:t[a]=f[a];return t}const io=Object.create(null);function De(f,t,a){if(f==t)return!0;f||(f=io),t||(t=io);let u=Object.keys(f),p=Object.keys(t);if(u.length-0!=p.length-0)return!1;for(let g of u)if(g!=a&&(p.indexOf(g)==-1||f[g]!==t[g]))return!1;return!0}function ni(f,t){for(let a=f.attributes.length-1;a>=0;a--){let u=f.attributes[a].name;t[u]==null&&f.removeAttribute(u)}for(let a in t){let u=t[a];a=="style"?f.style.cssText=u:f.getAttribute(a)!=u&&f.setAttribute(a,u)}}function cs(f,t,a){let u=!1;if(t)for(let p in t)a&&p in a||(u=!0,p=="style"?f.style.cssText="":f.removeAttribute(p));if(a)for(let p in a)t&&t[p]==a[p]||(u=!0,p=="style"?f.style.cssText=a[p]:f.setAttribute(p,a[p]));return u}function Ar(f){let t=Object.create(null);for(let a=0;a<f.attributes.length;a++){let u=f.attributes[a];t[u.name]=u.value}return t}class vr{eq(t){return!1}updateDOM(t,a){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,a,u){return null}get isHidden(){return!1}get editable(){return!1}destroy(t){}}var tn=(function(f){return f[f.Text=0]="Text",f[f.WidgetBefore=1]="WidgetBefore",f[f.WidgetAfter=2]="WidgetAfter",f[f.WidgetRange=3]="WidgetRange",f})(tn||(tn={}));class mn extends kt{constructor(t,a,u,p){super(),this.startSide=t,this.endSide=a,this.widget=u,this.spec=p}get heightRelevant(){return!1}static mark(t){return new Ls(t)}static widget(t){let a=Math.max(-1e4,Math.min(1e4,t.side||0)),u=!!t.block;return a+=u&&!t.inlineOrder?a>0?3e8:-4e8:a>0?1e8:-1e8,new ri(t,a,a,u,t.widget||null,!1)}static replace(t){let a=!!t.block,u,p;if(t.isBlockGap)u=-5e8,p=4e8;else{let{start:g,end:A}=Mr(t,a);u=(g?a?-3e8:-1:5e8)-1,p=(A?a?2e8:1:-6e8)+1}return new ri(t,u,p,a,t.widget||null,!0)}static line(t){return new ys(t)}static set(t,a=!1){return Zn.of(t,a)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}mn.none=Zn.empty;class Ls extends mn{constructor(t){let{start:a,end:u}=Mr(t);super(a?-1:5e8,u?1:-6e8,null,t),this.tagName=t.tagName||"span",this.attrs=t.class&&t.attributes?sa(t.attributes,{class:t.class}):t.class?{class:t.class}:t.attributes||io}eq(t){return this==t||t instanceof Ls&&this.tagName==t.tagName&&De(this.attrs,t.attrs)}range(t,a=t){if(t>=a)throw new RangeError("Mark decorations may not be empty");return super.range(t,a)}}Ls.prototype.point=!1;class ys extends mn{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof ys&&this.spec.class==t.spec.class&&De(this.spec.attributes,t.spec.attributes)}range(t,a=t){if(a!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,a)}}ys.prototype.mapMode=$t.TrackBefore,ys.prototype.point=!0;class ri extends mn{constructor(t,a,u,p,g,A){super(a,u,g,t),this.block=p,this.isReplace=A,this.mapMode=p?a<=0?$t.TrackBefore:$t.TrackAfter:$t.TrackDel}get type(){return this.startSide!=this.endSide?tn.WidgetRange:this.startSide<=0?tn.WidgetBefore:tn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof ri&&sc(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,a=t){if(this.isReplace&&(t>a||t==a&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&a!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,a)}}ri.prototype.point=!0;function Mr(f,t=!1){let{inclusiveStart:a,inclusiveEnd:u}=f;return a==null&&(a=f.inclusive),u==null&&(u=f.inclusive),{start:a??t,end:u??t}}function sc(f,t){return f==t||!!(f&&t&&f.compare(t))}function Yr(f,t,a,u=0){let p=a.length-1;p>=0&&a[p]+u>=f?a[p]=Math.max(a[p],t):a.push(f,t)}class bs extends kt{constructor(t,a){super(),this.tagName=t,this.attributes=a}eq(t){return t==this||t instanceof bs&&this.tagName==t.tagName&&De(this.attributes,t.attributes)}static create(t){return new bs(t.tagName,t.attributes||io)}static set(t,a=!1){return Zn.of(t,a)}}bs.prototype.startSide=bs.prototype.endSide=-1;function fs(f){let t;return f.nodeType==11?t=f.getSelection?f:f.ownerDocument:t=f,t.getSelection()}function dn(f,t){return t?f==t||f.contains(t.nodeType!=1?t.parentNode:t):!1}function ro(f,t){if(!t.anchorNode)return!1;try{return dn(f,t.anchorNode)}catch{return!1}}function Ns(f){return f.nodeType==3?kr(f,0,f.nodeValue.length).getClientRects():f.nodeType==1?f.getClientRects():[]}function ur(f,t,a,u){return a?sl(f,t,a,u,-1)||sl(f,t,a,u,1):!1}function Hr(f){for(var t=0;;t++)if(f=f.previousSibling,!f)return t}function so(f){return f.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(f.nodeName)}function sl(f,t,a,u,p){for(;;){if(f==a&&t==u)return!0;if(t==(p<0?0:Nr(f))){if(f.nodeName=="DIV")return!1;let g=f.parentNode;if(!g||g.nodeType!=1)return!1;t=Hr(f)+(p<0?0:1),f=g}else if(f.nodeType==1){if(f=f.childNodes[t+(p<0?-1:0)],f.nodeType==1&&f.contentEditable=="false")return!1;t=p<0?Nr(f):0}else return!1}}function Nr(f){return f.nodeType==3?f.nodeValue.length:f.childNodes.length}function ao(f,t){let a=t?f.left:f.right;return{left:a,right:a,top:f.top,bottom:f.bottom}}function lo(f){let t=f.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:f.innerWidth,top:0,bottom:f.innerHeight}}function ol(f,t){let a=t.width/f.offsetWidth,u=t.height/f.offsetHeight;return(a>.995&&a<1.005||!isFinite(a)||Math.abs(t.width-f.offsetWidth)<1)&&(a=1),(u>.995&&u<1.005||!isFinite(u)||Math.abs(t.height-f.offsetHeight)<1)&&(u=1),{scaleX:a,scaleY:u}}function oc(f,t,a,u,p,g,A,$){let F=f.ownerDocument,V=F.defaultView||window;for(let z=f,ie=!1;z&&!ie;)if(z.nodeType==1){let oe,Ae=z==F.body,$e=1,je=1;if(Ae)oe=lo(V);else{if(/^(fixed|sticky)$/.test(getComputedStyle(z).position)&&(ie=!0),z.scrollHeight<=z.clientHeight&&z.scrollWidth<=z.clientWidth){z=z.assignedSlot||z.parentNode;continue}let Xt=z.getBoundingClientRect();({scaleX:$e,scaleY:je}=ol(z,Xt)),oe={left:Xt.left,right:Xt.left+z.clientWidth*$e,top:Xt.top,bottom:Xt.top+z.clientHeight*je}}let ot=0,bt=0;if(p=="nearest")t.top<oe.top?(bt=t.top-(oe.top+A),a>0&&t.bottom>oe.bottom+bt&&(bt=t.bottom-oe.bottom+A)):t.bottom>oe.bottom&&(bt=t.bottom-oe.bottom+A,a<0&&t.top-bt<oe.top&&(bt=t.top-(oe.top+A)));else{let Xt=t.bottom-t.top,Zt=oe.bottom-oe.top;bt=(p=="center"&&Xt<=Zt?t.top+Xt/2-Zt/2:p=="start"||p=="center"&&a<0?t.top-A:t.bottom-Zt+A)-oe.top}if(u=="nearest"?t.left<oe.left?(ot=t.left-(oe.left+g),a>0&&t.right>oe.right+ot&&(ot=t.right-oe.right+g)):t.right>oe.right&&(ot=t.right-oe.right+g,a<0&&t.left<oe.left+ot&&(ot=t.left-(oe.left+g))):ot=(u=="center"?t.left+(t.right-t.left)/2-(oe.right-oe.left)/2:u=="start"==$?t.left-g:t.right-(oe.right-oe.left)+g)-oe.left,ot||bt)if(Ae)V.scrollBy(ot,bt);else{let Xt=0,Zt=0;if(bt){let an=z.scrollTop;z.scrollTop+=bt/je,Zt=(z.scrollTop-an)*je}if(ot){let an=z.scrollLeft;z.scrollLeft+=ot/$e,Xt=(z.scrollLeft-an)*$e}t={left:t.left-Xt,top:t.top-Zt,right:t.right-Xt,bottom:t.bottom-Zt},Xt&&Math.abs(Xt-ot)<1&&(u="nearest"),Zt&&Math.abs(Zt-bt)<1&&(p="nearest")}if(Ae)break;(t.top<oe.top||t.bottom>oe.bottom||t.left<oe.left||t.right>oe.right)&&(t={left:Math.max(t.left,oe.left),right:Math.min(t.right,oe.right),top:Math.max(t.top,oe.top),bottom:Math.min(t.bottom,oe.bottom)}),z=z.assignedSlot||z.parentNode}else if(z.nodeType==11)z=z.host;else break}function As(f){let t=f.ownerDocument,a,u;for(let p=f.parentNode;p&&!(p==t.body||a&&u);)if(p.nodeType==1)!u&&p.scrollHeight>p.clientHeight&&(u=p),!a&&p.scrollWidth>p.clientWidth&&(a=p),p=p.assignedSlot||p.parentNode;else if(p.nodeType==11)p=p.host;else break;return{x:a,y:u}}class yn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:a,focusNode:u}=t;this.set(a,Math.min(t.anchorOffset,a?Nr(a):0),u,Math.min(t.focusOffset,u?Nr(u):0))}set(t,a,u,p){this.anchorNode=t,this.anchorOffset=a,this.focusNode=u,this.focusOffset=p}}let hr=null;sn.safari&&sn.safari_version>=26&&(hr=!1);function oa(f){if(f.setActive)return f.setActive();if(hr)return f.focus(hr);let t=[];for(let a=f;a&&(t.push(a,a.scrollTop,a.scrollLeft),a!=a.ownerDocument);a=a.parentNode);if(f.focus(hr==null?{get preventScroll(){return hr={preventScroll:!0},!0}}:void 0),!hr){hr=!1;for(let a=0;a<t.length;){let u=t[a++],p=t[a++],g=t[a++];u.scrollTop!=p&&(u.scrollTop=p),u.scrollLeft!=g&&(u.scrollLeft=g)}}}let aa;function kr(f,t,a=t){let u=aa||(aa=document.createRange());return u.setEnd(f,a),u.setStart(f,t),u}function Gr(f,t,a,u){let p={key:t,code:t,keyCode:a,which:a,cancelable:!0};u&&({altKey:p.altKey,ctrlKey:p.ctrlKey,shiftKey:p.shiftKey,metaKey:p.metaKey}=u);let g=new KeyboardEvent("keydown",p);g.synthetic=!0,f.dispatchEvent(g);let A=new KeyboardEvent("keyup",p);return A.synthetic=!0,f.dispatchEvent(A),g.defaultPrevented||A.defaultPrevented}function al(f){for(;f;){if(f&&(f.nodeType==9||f.nodeType==11&&f.host))return f;f=f.assignedSlot||f.parentNode}return null}function ac(f,t){let a=t.focusNode,u=t.focusOffset;if(!a||t.anchorNode!=a||t.anchorOffset!=u)return!1;for(u=Math.min(u,Nr(a));;)if(u){if(a.nodeType!=1)return!1;let p=a.childNodes[u-1];p.contentEditable=="false"?u--:(a=p,u=Nr(a))}else{if(a==f)return!0;u=Hr(a),a=a.parentNode}}function ll(f){return f.scrollTop>Math.max(1,f.scrollHeight-f.clientHeight-4)}function ul(f,t){for(let a=f,u=t;;){if(a.nodeType==3&&u>0)return{node:a,offset:u};if(a.nodeType==1&&u>0){if(a.contentEditable=="false")return null;a=a.childNodes[u-1],u=Nr(a)}else if(a.parentNode&&!so(a))u=Hr(a),a=a.parentNode;else return null}}function cl(f,t){for(let a=f,u=t;;){if(a.nodeType==3&&u<a.nodeValue.length)return{node:a,offset:u};if(a.nodeType==1&&u<a.childNodes.length){if(a.contentEditable=="false")return null;a=a.childNodes[u],u=0}else if(a.parentNode&&!so(a))u=Hr(a)+1,a=a.parentNode;else return null}}class qi{constructor(t,a,u=!0){this.node=t,this.offset=a,this.precise=u}static before(t,a){return new qi(t.parentNode,Hr(t),a)}static after(t,a){return new qi(t.parentNode,Hr(t)+1,a)}}var Ai=(function(f){return f[f.LTR=0]="LTR",f[f.RTL=1]="RTL",f})(Ai||(Ai={}));const hs=Ai.LTR,la=Ai.RTL;function fl(f){let t=[];for(let a=0;a<f.length;a++)t.push(1<<+f[a]);return t}const lc=fl("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),uc=fl("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ua=Object.create(null),$r=[];for(let f of["()","[]","{}"]){let t=f.charCodeAt(0),a=f.charCodeAt(1);ua[t]=a,ua[a]=-t}function hl(f){return f<=247?lc[f]:1424<=f&&f<=1524?2:1536<=f&&f<=1785?uc[f-1536]:1774<=f&&f<=2220?4:8192<=f&&f<=8204?256:64336<=f&&f<=65023?4:1}const Gs=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ji{get dir(){return this.level%2?la:hs}constructor(t,a,u){this.from=t,this.to=a,this.level=u}side(t,a){return this.dir==a==t?this.to:this.from}forward(t,a){return t==(this.dir==a)}static find(t,a,u,p){let g=-1;for(let A=0;A<t.length;A++){let $=t[A];if($.from<=a&&$.to>=a){if($.level==u)return A;(g<0||(p!=0?p<0?$.from<a:$.to>a:t[g].level>$.level))&&(g=A)}}if(g<0)throw new RangeError("Index out of range");return g}}function ca(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++){let u=f[a],p=t[a];if(u.from!=p.from||u.to!=p.to||u.direction!=p.direction||!ca(u.inner,p.inner))return!1}return!0}const Ci=[];function cc(f,t,a,u,p){for(let g=0;g<=u.length;g++){let A=g?u[g-1].to:t,$=g<u.length?u[g].from:a,F=g?256:p;for(let V=A,z=F,ie=F;V<$;V++){let oe=hl(f.charCodeAt(V));oe==512?oe=z:oe==8&&ie==4&&(oe=16),Ci[V]=oe==4?2:oe,oe&7&&(ie=oe),z=oe}for(let V=A,z=F,ie=F;V<$;V++){let oe=Ci[V];if(oe==128)V<$-1&&z==Ci[V+1]&&z&24?oe=Ci[V]=z:Ci[V]=256;else if(oe==64){let Ae=V+1;for(;Ae<$&&Ci[Ae]==64;)Ae++;let $e=V&&z==8||Ae<a&&Ci[Ae]==8?ie==1?1:8:256;for(let je=V;je<Ae;je++)Ci[je]=$e;V=Ae-1}else oe==8&&ie==1&&(Ci[V]=1);z=oe,oe&7&&(ie=oe)}}}function pl(f,t,a,u,p){let g=p==1?2:1;for(let A=0,$=0,F=0;A<=u.length;A++){let V=A?u[A-1].to:t,z=A<u.length?u[A].from:a;for(let ie=V,oe,Ae,$e;ie<z;ie++)if(Ae=ua[oe=f.charCodeAt(ie)])if(Ae<0){for(let je=$-3;je>=0;je-=3)if($r[je+1]==-Ae){let ot=$r[je+2],bt=ot&2?p:ot&4?ot&1?g:p:0;bt&&(Ci[ie]=Ci[$r[je]]=bt),$=je;break}}else{if($r.length==189)break;$r[$++]=ie,$r[$++]=oe,$r[$++]=F}else if(($e=Ci[ie])==2||$e==1){let je=$e==p;F=je?0:1;for(let ot=$-3;ot>=0;ot-=3){let bt=$r[ot+2];if(bt&2)break;if(je)$r[ot+2]|=2;else{if(bt&4)break;$r[ot+2]|=4}}}}}function dl(f,t,a,u){for(let p=0,g=u;p<=a.length;p++){let A=p?a[p-1].to:f,$=p<a.length?a[p].from:t;for(let F=A;F<$;){let V=Ci[F];if(V==256){let z=F+1;for(;;)if(z==$){if(p==a.length)break;z=a[p++].to,$=p<a.length?a[p].from:t}else if(Ci[z]==256)z++;else break;let ie=g==1,oe=(z<t?Ci[z]:u)==1,Ae=ie==oe?ie?1:2:u;for(let $e=z,je=p,ot=je?a[je-1].to:f;$e>F;)$e==ot&&($e=a[--je].from,ot=je?a[je-1].to:f),Ci[--$e]=Ae;F=z}else g=V,F++}}}function fa(f,t,a,u,p,g,A){let $=u%2?2:1;if(u%2==p%2)for(let F=t,V=0;F<a;){let z=!0,ie=!1;if(V==g.length||F<g[V].from){let je=Ci[F];je!=$&&(z=!1,ie=je==16)}let oe=!z&&$==1?[]:null,Ae=z?u:u+1,$e=F;e:for(;;)if(V<g.length&&$e==g[V].from){if(ie)break e;let je=g[V];if(!z)for(let ot=je.to,bt=V+1;;){if(ot==a)break e;if(bt<g.length&&g[bt].from==ot)ot=g[bt++].to;else{if(Ci[ot]==$)break e;break}}if(V++,oe)oe.push(je);else{je.from>F&&A.push(new ji(F,je.from,Ae));let ot=je.direction==hs!=!(Ae%2);ha(f,ot?u+1:u,p,je.inner,je.from,je.to,A),F=je.to}$e=je.to}else{if($e==a||(z?Ci[$e]!=$:Ci[$e]==$))break;$e++}oe?fa(f,F,$e,u+1,p,oe,A):F<$e&&A.push(new ji(F,$e,Ae)),F=$e}else for(let F=a,V=g.length;F>t;){let z=!0,ie=!1;if(!V||F>g[V-1].to){let je=Ci[F-1];je!=$&&(z=!1,ie=je==16)}let oe=!z&&$==1?[]:null,Ae=z?u:u+1,$e=F;e:for(;;)if(V&&$e==g[V-1].to){if(ie)break e;let je=g[--V];if(!z)for(let ot=je.from,bt=V;;){if(ot==t)break e;if(bt&&g[bt-1].to==ot)ot=g[--bt].from;else{if(Ci[ot-1]==$)break e;break}}if(oe)oe.push(je);else{je.to<F&&A.push(new ji(je.to,F,Ae));let ot=je.direction==hs!=!(Ae%2);ha(f,ot?u+1:u,p,je.inner,je.from,je.to,A),F=je.from}$e=je.from}else{if($e==t||(z?Ci[$e-1]!=$:Ci[$e-1]==$))break;$e--}oe?fa(f,$e,F,u+1,p,oe,A):$e<F&&A.push(new ji($e,F,Ae)),F=$e}}function ha(f,t,a,u,p,g,A){let $=t%2?2:1;cc(f,p,g,u,$),pl(f,p,g,u,$),dl(p,g,u,$),fa(f,p,g,t,a,u,A)}function fc(f,t,a){if(!f)return[new ji(0,0,t==la?1:0)];if(t==hs&&!a.length&&!Gs.test(f))return ml(f.length);if(a.length)for(;f.length>Ci.length;)Ci[Ci.length]=256;let u=[],p=t==hs?0:1;return ha(f,p,p,a,0,f.length,u),u}function ml(f){return[new ji(0,f,0)]}let gl="";function hc(f,t,a,u,p){var g;let A=u.head-f.from,$=ji.find(t,A,(g=u.bidiLevel)!==null&&g!==void 0?g:-1,u.assoc),F=t[$],V=F.side(p,a);if(A==V){let oe=$+=p?1:-1;if(oe<0||oe>=t.length)return null;F=t[$=oe],A=F.side(!p,a),V=F.side(p,a)}let z=We(f.text,A,F.forward(p,a));(z<F.from||z>F.to)&&(z=V),gl=f.text.slice(Math.min(A,z),Math.max(A,z));let ie=$==(p?t.length-1:0)?null:t[$+(p?1:-1)];return ie&&z==V&&ie.level+(p?0:1)<F.level?ft.cursor(ie.side(!p,a)+f.from,ie.forward(p,a)?1:-1,ie.level):ft.cursor(z+f.from,F.forward(p,a)?-1:1,F.level)}function pc(f,t,a){for(let u=t;u<a;u++){let p=hl(f.charCodeAt(u));if(p==1)return hs;if(p==2||p==4)return la}return hs}const _l=Dt.define(),Ol=Dt.define(),yl=Dt.define(),co=Dt.define(),pa=Dt.define(),bl=Dt.define(),ps=Dt.define(),da=Dt.define(),ma=Dt.define(),Al=Dt.define({combine:f=>f.some(t=>t)}),vl=Dt.define({combine:f=>f.some(t=>t)}),xl=Dt.define();class vs{constructor(t,a="nearest",u="nearest",p=5,g=5,A=!1){this.range=t,this.y=a,this.x=u,this.yMargin=p,this.xMargin=g,this.isSnapshot=A}map(t){return t.empty?this:new vs(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new vs(ft.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ho=Et.define({map:(f,t)=>f.map(t)}),Cl=Et.define();function Vi(f,t,a){let u=f.facet(co);u.length?u[0](t):window.onerror&&window.onerror(String(t),a,void 0,void 0,t)||(a?console.error(a+":",t):console.error(t))}const Zr=Dt.define({combine:f=>f.length?f[0]:!0});let dc=0;const Kr=Dt.define({combine(f){return f.filter((t,a)=>{for(let u=0;u<a;u++)if(f[u].plugin==t.plugin)return!1;return!0})}});class Ri{constructor(t,a,u,p,g){this.id=t,this.create=a,this.domEventHandlers=u,this.domEventObservers=p,this.baseExtensions=g(this),this.extension=this.baseExtensions.concat(Kr.of({plugin:this,arg:void 0}))}of(t){return this.baseExtensions.concat(Kr.of({plugin:this,arg:t}))}static define(t,a){const{eventHandlers:u,eventObservers:p,provide:g,decorations:A}=a||{};return new Ri(dc++,t,u,p,$=>{let F=[];return A&&F.push(yt.of(V=>{let z=V.plugin($);return z?A(z):mn.none})),g&&F.push(g($)),F})}static fromClass(t,a){return Ri.define((u,p)=>new t(u,p),a)}}class te{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(t){if(this.value){if(this.mustUpdate){let a=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(a)}catch(u){if(Vi(a.state,u,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(t,this.spec.arg)}catch(a){Vi(t.state,a,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var a;if(!((a=this.value)===null||a===void 0)&&a.destroy)try{this.value.destroy()}catch(u){Vi(t.state,u,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Pe=Dt.define(),Ie=Dt.define(),yt=Dt.define(),fn=Dt.define(),wi=Dt.define(),Ji=Dt.define(),ms=Dt.define();function th(f,t){let a=f.state.facet(ms);if(!a.length)return a;let u=a.map(g=>g instanceof Function?g(f):g),p=[];return Zn.spans(u,t.from,t.to,{point(){},span(g,A,$,F){let V=g-t.from,z=A-t.from,ie=p;for(let oe=$.length-1;oe>=0;oe--,F--){let Ae=$[oe].spec.bidiIsolate,$e;if(Ae==null&&(Ae=pc(t.text,V,z)),F>0&&ie.length&&($e=ie[ie.length-1]).to==V&&$e.direction==Ae)$e.to=z,ie=$e.inner;else{let je={from:V,to:z,direction:Ae,inner:[]};ie.push(je),ie=je.inner}}}}),p}const nh=Dt.define();function mc(f){let t=0,a=0,u=0,p=0;for(let g of f.state.facet(nh)){let A=g(f);A&&(A.left!=null&&(t=Math.max(t,A.left)),A.right!=null&&(a=Math.max(a,A.right)),A.top!=null&&(u=Math.max(u,A.top)),A.bottom!=null&&(p=Math.max(p,A.bottom)))}return{left:t,right:a,top:u,bottom:p}}const ga=Dt.define();class Dr{constructor(t,a,u,p){this.fromA=t,this.toA=a,this.fromB=u,this.toB=p}join(t){return new Dr(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let a=t.length,u=this;for(;a>0;a--){let p=t[a-1];if(!(p.fromA>u.toA)){if(p.toA<u.fromA)break;u=u.join(p),t.splice(a-1,1)}}return t.splice(a,0,u),t}static extendWithRanges(t,a){if(a.length==0)return t;let u=[];for(let p=0,g=0,A=0;;){let $=p<t.length?t[p].fromB:1e9,F=g<a.length?a[g]:1e9,V=Math.min($,F);if(V==1e9)break;let z=V+A,ie=V,oe=z;for(;;)if(g<a.length&&a[g]<=ie){let Ae=a[g+1];g+=2,ie=Math.max(ie,Ae);for(let $e=p;$e<t.length&&t[$e].fromB<=ie;$e++)A=t[$e].toA-t[$e].toB;oe=Math.max(oe,Ae+A)}else if(p<t.length&&t[p].fromB<=ie){let Ae=t[p++];ie=Math.max(ie,Ae.toB),oe=Math.max(oe,Ae.toA),A=Ae.toA-Ae.toB}else break;u.push(new Dr(z,oe,V,ie))}return u}}class Sl{constructor(t,a,u){this.view=t,this.state=a,this.transactions=u,this.flags=0,this.startState=t.state,this.changes=Vt.empty(this.startState.doc.length);for(let g of u)this.changes=this.changes.compose(g.changes);let p=[];this.changes.iterChangedRanges((g,A,$,F)=>p.push(new Dr(g,A,$,F))),this.changedRanges=p}static create(t,a,u){return new Sl(t,a,u)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(t=>t.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const lm=[];class Xi{constructor(t,a,u=0){this.dom=t,this.length=a,this.flags=u,this.parent=null,t.cmTile=this}get breakAfter(){return this.flags&1}get children(){return lm}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(t){if(this.flags|=2,this.flags&4){this.flags&=-5;let a=this.domAttrs;a&&ni(this.dom,a)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(t){this.dom=t,t.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t,a=this.posAtStart){let u=a;for(let p of this.children){if(p==t)return u;u+=p.length+p.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}covers(t){return!0}coordsIn(t,a){return null}domPosFor(t,a){let u=Hr(this.dom),p=this.length?t>0:a>0;return new qi(this.parent.dom,u+(p?1:0),t==0||t==this.length)}markDirty(t){this.flags&=-3,t&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let t=this;t;t=t.parent)if(t instanceof Pl)return t;return null}static get(t){return t.cmTile}}class wl extends Xi{constructor(t){super(t,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(t){this.children.push(t),t.parent=this}sync(t){if(this.flags&2)return;super.sync(t);let a=this.dom,u=null,p,g=t?.node==a?t:null,A=0;for(let $ of this.children){if($.sync(t),A+=$.length+$.breakAfter,p=u?u.nextSibling:a.firstChild,g&&p!=$.dom&&(g.written=!0),$.dom.parentNode==a)for(;p&&p!=$.dom;)p=ih(p);else a.insertBefore($.dom,p);u=$.dom}for(p=u?u.nextSibling:a.firstChild,g&&p&&(g.written=!0);p;)p=ih(p);this.length=A}}function ih(f){let t=f.nextSibling;return f.parentNode.removeChild(f),t}class Pl extends wl{constructor(t,a){super(a),this.view=t}owns(t){for(;t;t=t.parent)if(t==this)return!0;return!1}isBlock(){return!0}nearest(t){for(;;){if(!t)return null;let a=Xi.get(t);if(a&&this.owns(a))return a;t=t.parentNode}}blockTiles(t){for(let a=[],u=this,p=0,g=0;;)if(p==u.children.length){if(!a.length)return;u=u.parent,u.breakAfter&&g++,p=a.pop()}else{let A=u.children[p++];if(A instanceof xs)a.push(p),u=A,p=0;else{let $=g+A.length,F=t(A,g);if(F!==void 0)return F;g=$+A.breakAfter}}}resolveBlock(t,a){let u,p=-1,g,A=-1;if(this.blockTiles(($,F)=>{let V=F+$.length;if(t>=F&&t<=V){if($.isWidget()&&a>=-1&&a<=1){if($.flags&32)return!0;$.flags&16&&(u=void 0)}(F<t||t==V&&(a<-1?$.length:$.covers(1)))&&(!u||!$.isWidget()&&u.isWidget())&&(u=$,p=t-F),(V>t||t==F&&(a>1?$.length:$.covers(-1)))&&(!g||!$.isWidget()&&g.isWidget())&&(g=$,A=t-F)}}),!u&&!g)throw new Error("No tile at position "+t);return u&&a<0||!g?{tile:u,offset:p}:{tile:g,offset:A}}}class xs extends wl{constructor(t,a){super(t),this.wrapper=a}isBlock(){return!0}covers(t){return this.children.length?t<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(t,a){let u=new xs(a||document.createElement(t.tagName),t);return a||(u.flags|=4),u}}class po extends wl{constructor(t,a){super(t),this.attrs=a}isLine(){return!0}static start(t,a,u){let p=new po(a||document.createElement("div"),t);return(!a||!u)&&(p.flags|=4),p}get domAttrs(){return this.attrs}resolveInline(t,a,u){let p=null,g=-1,A=null,$=-1;function F(z,ie){for(let oe=0,Ae=0;oe<z.children.length&&Ae<=ie;oe++){let $e=z.children[oe],je=Ae+$e.length;je>=ie&&($e.isComposite()?F($e,ie-Ae):(!A||A.isHidden&&(a>0||u&&cm(A,$e)))&&(je>ie||$e.flags&32)?(A=$e,$=ie-Ae):(Ae<ie||$e.flags&16&&!$e.isHidden)&&(p=$e,g=ie-Ae)),Ae=je}}F(this,t);let V=(a<0?p:A)||p||A;return V?{tile:V,offset:V==p?g:$}:null}coordsIn(t,a){let u=this.resolveInline(t,a,!0);return u?u.tile.coordsIn(Math.max(0,u.offset),a):um(this)}domIn(t,a){let u=this.resolveInline(t,a);if(u){let{tile:p,offset:g}=u;if(this.dom.contains(p.dom))return p.isText()?new qi(p.dom,Math.min(p.dom.nodeValue.length,g)):p.domPosFor(g,p.flags&16?1:p.flags&32?-1:a);let A=u.tile.parent,$=!1;for(let F of A.children){if($)return new qi(F.dom,0);F==u.tile&&($=!0)}}return new qi(this.dom,0)}}function um(f){let t=f.dom.lastChild;if(!t)return f.dom.getBoundingClientRect();let a=Ns(t);return a[a.length-1]||null}function cm(f,t){let a=f.coordsIn(0,1),u=t.coordsIn(0,1);return a&&u&&u.top<a.bottom}class dr extends wl{constructor(t,a){super(t),this.mark=a}get domAttrs(){return this.mark.attrs}static of(t,a){let u=new dr(a||document.createElement(t.tagName),t);return a||(u.flags|=4),u}}class Zs extends Xi{constructor(t,a){super(t,a.length),this.text=a}sync(t){this.flags&2||(super.sync(t),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(t,a){let u=this.dom.nodeValue.length;t>u&&(t=u);let p=t,g=t,A=0;t==0&&a<0||t==u&&a>=0?sn.chrome||sn.gecko||(t?(p--,A=1):g<u&&(g++,A=-1)):a<0?p--:g<u&&g++;let $=kr(this.dom,p,g).getClientRects();if(!$.length)return null;let F=$[(A?A<0:a>=0)?0:$.length-1];return sn.safari&&!A&&F.width==0&&(F=Array.prototype.find.call($,V=>V.width)||F),A?ao(F,A<0):F||null}static of(t,a){let u=new Zs(a||document.createTextNode(t),t);return a||(u.flags|=2),u}}class go extends Xi{constructor(t,a,u,p){super(t,a,p),this.widget=u}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(t){return this.flags&48?!1:(this.flags&(t<0?64:128))>0}coordsIn(t,a){return this.coordsInWidget(t,a,!1)}coordsInWidget(t,a,u){let p=this.widget.coordsAt(this.dom,t,a);if(p)return p;if(u)return ao(this.dom.getBoundingClientRect(),this.length?t==0:a<=0);{let g=this.dom.getClientRects(),A=null;if(!g.length)return null;let $=this.flags&16?!0:this.flags&32?!1:t>0;for(let F=$?g.length-1:0;A=g[F],!(t>0?F==0:F==g.length-1||A.top<A.bottom);F+=$?-1:1);return ao(A,!$)}}get overrideDOMText(){if(!this.length)return K.empty;let{root:t}=this;if(!t)return K.empty;let a=this.posAtStart;return t.view.state.doc.slice(a,a+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(t,a,u,p,g){return g||(g=t.toDOM(a),t.editable||(g.contentEditable="false")),new go(g,u,t,p)}}class Ml extends Xi{constructor(t){let a=document.createElement("img");a.className="cm-widgetBuffer",a.setAttribute("aria-hidden","true"),super(a,0,t)}get isHidden(){return!1}get overrideDOMText(){return K.empty}coordsIn(t){return this.dom.getBoundingClientRect()}}class hm{constructor(t){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=t}advance(t,a,u){let{tile:p,index:g,beforeBreak:A,parents:$}=this;for(;t||a>0;)if(p.isComposite())if(A){if(!t)break;u&&u.break(),t--,A=!1}else if(g==p.children.length){if(!t&&!$.length)break;u&&u.leave(p),A=!!p.breakAfter,{tile:p,index:g}=$.pop(),g++}else{let F=p.children[g],V=F.breakAfter;(a>0?F.length<=t:F.length<t)&&(!u||u.skip(F,0,F.length)!==!1||!F.isComposite)?(A=!!V,g++,t-=F.length):($.push({tile:p,index:g}),p=F,g=0,u&&F.isComposite()&&u.enter(F))}else if(g==p.length)A=!!p.breakAfter,{tile:p,index:g}=$.pop(),g++;else if(t){let F=Math.min(t,p.length-g);u&&u.skip(p,g,g+F),t-=F,g+=F}else break;return this.tile=p,this.index=g,this.beforeBreak=A,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class dm{constructor(t,a,u,p){this.from=t,this.to=a,this.wrapper=u,this.rank=p}}class mm{constructor(t,a,u){this.cache=t,this.root=a,this.blockWrappers=u,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(t,a,u,p){var g;this.flushBuffer();let A=this.ensureMarks(a,u),$=A.lastChild;if($&&$.isText()&&!($.flags&8)){this.cache.reused.set($,2);let F=A.children[A.children.length-1]=new Zs($.dom,$.text+t);F.parent=A}else A.append(p||Zs.of(t,(g=this.cache.find(Zs))===null||g===void 0?void 0:g.dom));this.pos+=t.length,this.afterWidget=null}addComposition(t,a){let u=this.curLine;u.dom!=a.line.dom&&(u.setDOM(this.cache.reused.has(a.line)?gc(a.line.dom):a.line.dom),this.cache.reused.set(a.line,2));let p=u;for(let A=a.marks.length-1;A>=0;A--){let $=a.marks[A],F=p.lastChild;if(F instanceof dr&&F.mark.eq($.mark))F.dom!=$.dom&&F.setDOM(gc($.dom)),p=F;else{if(this.cache.reused.get($)){let z=Xi.get($.dom);z&&z.setDOM(gc($.dom))}let V=dr.of($.mark,$.dom);p.append(V),p=V}this.cache.reused.set($,2)}let g=new Zs(t.text,t.text.nodeValue);g.flags|=8,p.append(g)}addInlineWidget(t,a,u){let p=this.afterWidget&&t.flags&48&&(this.afterWidget.flags&48)==(t.flags&48);p||this.flushBuffer();let g=this.ensureMarks(a,u);!p&&!(t.flags&16)&&g.append(this.getBuffer(1)),g.append(t),this.pos+=t.length,this.afterWidget=t}addMark(t,a,u){this.flushBuffer(),this.ensureMarks(a,u).append(t),this.pos+=t.length,this.afterWidget=null}addBlockWidget(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}continueWidget(t){let a=this.afterWidget||this.lastBlock;a.length+=t,this.pos+=t}addLineStart(t,a){var u;t||(t=sh);let p=po.start(t,a||((u=this.cache.find(po))===null||u===void 0?void 0:u.dom),!!a);this.getBlockPos().append(this.lastBlock=this.curLine=p)}addLine(t){this.getBlockPos().append(t),this.pos+=t.length,this.lastBlock=t,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(t){this.blockPosCovered()||this.addLineStart(t)}ensureLine(t){this.curLine||this.addLineStart(t)}ensureMarks(t,a){var u;let p=this.curLine;for(let g=t.length-1;g>=0;g--){let A=t[g],$;if(a>0&&($=p.lastChild)&&$ instanceof dr&&$.mark.eq(A))p=$,a--;else{let F=dr.of(A,(u=this.cache.find(dr,V=>V.mark.eq(A)))===null||u===void 0?void 0:u.dom);p.append(F),p=F,a=0}}return p}endLine(){if(this.curLine){this.flushBuffer();let t=this.curLine.lastChild;(!t||!rh(this.curLine,!1)||t.dom.nodeName!="BR"&&t.isWidget()&&!(sn.ios&&rh(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(_c,0,32)||new go(_c.toDOM(),0,_c,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let t=this.wrappers.length-1;t>=0;t--)this.wrappers[t].to<this.pos&&this.wrappers.splice(t,1);for(let t=this.blockWrappers;t.value&&t.from<=this.pos;t.next())if(t.to>=this.pos){let a=new dm(t.from,t.to,t.value,t.rank),u=this.wrappers.length;for(;u>0&&(this.wrappers[u-1].rank-a.rank||this.wrappers[u-1].to-a.to)<0;)u--;this.wrappers.splice(u,0,a)}this.wrapperPos=this.pos}getBlockPos(){var t;this.updateBlockWrappers();let a=this.root;for(let u of this.wrappers){let p=a.lastChild;if(u.from<this.pos&&p instanceof xs&&p.wrapper.eq(u.wrapper))a=p;else{let g=xs.of(u.wrapper,(t=this.cache.find(xs,A=>A.wrapper.eq(u.wrapper)))===null||t===void 0?void 0:t.dom);a.append(g),a=g}}return a}blockPosCovered(){let t=this.lastBlock;return t!=null&&!t.breakAfter&&(!t.isWidget()||(t.flags&160)>0)}getBuffer(t){let a=2|(t<0?16:32),u=this.cache.find(Ml,void 0,1);return u&&(u.flags=a),u||new Ml(a)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class _m{constructor(t){this.skipCount=0,this.text="",this.textOff=0,this.cursor=t.iter()}skip(t){this.textOff+t<=this.text.length?this.textOff+=t:(this.skipCount+=t-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(t){if(this.textOff==this.text.length){let{value:p,lineBreak:g,done:A}=this.cursor.next(this.skipCount);if(this.skipCount=0,A)throw new Error("Ran out of text content when drawing inline views");this.text=p;let $=this.textOff=Math.min(t,p.length);return g?null:p.slice(0,$)}let a=Math.min(this.text.length,this.textOff+t),u=this.text.slice(this.textOff,a);return this.textOff=a,u}}const kl=[go,po,Zs,dr,Ml,xs,Pl];for(let f=0;f<kl.length;f++)kl[f].bucket=f;class Om{constructor(t){this.view=t,this.buckets=kl.map(()=>[]),this.index=kl.map(()=>0),this.reused=new Map}add(t){let a=t.constructor.bucket,u=this.buckets[a];u.length<6?u.push(t):u[this.index[a]=(this.index[a]+1)%6]=t}find(t,a,u=2){let p=t.bucket,g=this.buckets[p],A=this.index[p];for(let $=g.length-1;$>=0;$--){let F=($+A)%g.length,V=g[F];if((!a||a(V))&&!this.reused.has(V))return g.splice(F,1),F<A&&this.index[p]--,this.reused.set(V,u),V}return null}findWidget(t,a,u){let p=this.buckets[0];if(p.length)for(let g=0,A=0;;g++){if(g==p.length){if(A)return null;A=1,g=0}let $=p[g];if(!this.reused.has($)&&(A==0?$.widget.compare(t):$.widget.constructor==t.constructor&&t.updateDOM($.dom,this.view)))return p.splice(g,1),g<this.index[0]&&this.index[0]--,this.reused.set($,1),$.length=a,$.flags=$.flags&-498|u,$}}reuse(t){return this.reused.set(t,1),t}maybeReuse(t,a=2){if(!this.reused.has(t))return this.reused.set(t,a),t.dom}}class ym{constructor(t,a,u,p,g){this.view=t,this.decorations=p,this.disallowBlockEffectsFor=g,this.openWidget=!1,this.openMarks=0,this.cache=new Om(t),this.text=new _m(t.state.doc),this.builder=new mm(this.cache,new Pl(t,t.contentDOM),Zn.iter(u)),this.cache.reused.set(a,2),this.old=new hm(a)}run(t,a){let u=a&&this.getCompositionContext(a.text);for(let p=0,g=0,A=0;;){let $=A<t.length?t[A++]:null,F=$?$.fromA:this.old.root.length;if(F>p){let V=F-p;this.preserve(V,!A,!$),p=F,g+=V}if(!$)break;this.forward($.fromA,$.toA),a&&$.fromA<=a.range.fromA&&$.toA>=a.range.toA?(this.emit(g,a.range.fromB),this.builder.addComposition(a,u),this.emit(a.range.toB,$.toB)):this.emit(g,$.toB),g=$.toB,p=$.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(t,a,u){let p=vm(this.old),g=this.openMarks;this.old.advance(t,u?1:-1,{skip:(A,$,F)=>{if(A.isWidget())if(this.openWidget)this.builder.continueWidget(F-$);else{let V=F>0||$<A.length?go.of(A.widget,this.view,F-$,A.flags&496,this.cache.maybeReuse(A)):this.cache.reuse(A);V.flags&256?(V.flags&=-2,this.builder.addBlockWidget(V)):(this.builder.ensureLine(null),this.builder.addInlineWidget(V,p,g),g=p.length)}else if(A.isText())this.builder.ensureLine(null),!$&&F==A.length?this.builder.addText(A.text,p,g,this.cache.reuse(A)):(this.cache.add(A),this.builder.addText(A.text.slice($,F),p,g)),g=p.length;else if(A.isLine())A.flags&=-2,this.cache.reused.set(A,1),this.builder.addLine(A);else if(A instanceof Ml)this.cache.add(A);else if(A instanceof dr)this.builder.ensureLine(null),this.builder.addMark(A,p,g),this.cache.reused.set(A,1),g=p.length;else return!1;this.openWidget=!1},enter:A=>{A.isLine()?this.builder.addLineStart(A.attrs,this.cache.maybeReuse(A)):(this.cache.add(A),A instanceof dr&&p.unshift(A.mark)),this.openWidget=!1},leave:A=>{A.isLine()?p.length&&(p.length=g=0):A instanceof dr&&(p.shift(),g=Math.min(g,p.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(t)}emit(t,a){let u=null,p=this.builder,g=0,A=Zn.spans(this.decorations,t,a,{point:($,F,V,z,ie,oe)=>{if(V instanceof ri){if(this.disallowBlockEffectsFor[oe]){if(V.block)throw new RangeError("Block decorations may not be specified via plugins");if(F>this.view.state.doc.lineAt($).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(g=z.length,ie>z.length)p.continueWidget(F-$);else{let Ae=V.widget||(V.block?_o.block:_o.inline),$e=bm(V),je=this.cache.findWidget(Ae,F-$,$e)||go.of(Ae,this.view,F-$,$e);V.block?(V.startSide>0&&p.addLineStartIfNotCovered(u),p.addBlockWidget(je)):(p.ensureLine(u),p.addInlineWidget(je,z,ie))}u=null}else u=Am(u,V);F>$&&this.text.skip(F-$)},span:($,F,V,z)=>{for(let ie=$;ie<F;){let oe=this.text.next(Math.min(512,F-ie));oe==null?(p.addLineStartIfNotCovered(u),p.addBreak(),ie++):(p.ensureLine(u),p.addText(oe,V,z),ie+=oe.length),u=null}}});p.addLineStartIfNotCovered(u),this.openWidget=A>g,this.openMarks=A}forward(t,a){this.old.advance(a-t,1,{skip:(u,p,g)=>{(u.isText()||g==u.length)&&this.cache.add(u)},enter:u=>this.cache.add(u),leave:()=>{},break:()=>{}})}getCompositionContext(t){let a=[],u=null;for(let p=t.parentNode;;p=p.parentNode){let g=Xi.get(p);if(p==this.view.contentDOM)break;g instanceof dr?a.push(g):g?.isLine()?u=g:p.nodeName=="DIV"&&!u&&p!=this.view.contentDOM?u=new po(p,sh):a.push(dr.of(new Ls({tagName:p.nodeName.toLowerCase(),attributes:Ar(p)}),p))}return{line:u,marks:a}}}function rh(f,t){let a=u=>{for(let p of u.children)if((t?p.isText():p.length)||a(p))return!0;return!1};return a(f)}function bm(f){let t=f.isReplace?(f.startSide<0?64:0)|(f.endSide>0?128:0):f.startSide>0?32:16;return f.block&&(t|=256),t}const sh={class:"cm-line"};function Am(f,t){let a=t.spec.attributes,u=t.spec.class;return!a&&!u||(f||(f={class:"cm-line"}),a&&sa(a,f),u&&(f.class+=" "+u)),f}function vm(f){let t=[];for(let a=f.parents.length;a>1;a--){let u=a==f.parents.length?f.tile:f.parents[a].tile;u instanceof dr&&t.push(u.mark)}return t}function gc(f){let t=Xi.get(f);return t&&t.setDOM(f.cloneNode()),f}class _o extends vr{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}_o.inline=new _o("span"),_o.block=new _o("div");const _c=new class extends vr{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class oh{constructor(t){this.view=t,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=mn.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Pl(t,t.contentDOM),this.updateInner([new Dr(0,0,0,t.state.doc.length)],null)}update(t){var a;let u=t.changedRanges;this.minWidth>0&&u.length&&(u.every(({fromA:z,toA:ie})=>ie<this.minWidthFrom||z>this.minWidthTo)?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(t);let p=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((a=this.domChanged)===null||a===void 0)&&a.newSel?p=this.domChanged.newSel.head:!Dm(t.changes,this.hasComposition)&&!t.selectionSet&&(p=t.state.selection.main.head));let g=p>-1?Cm(this.view,t.changes,p):null;if(this.domChanged=null,this.hasComposition){let{from:z,to:ie}=this.hasComposition;u=new Dr(z,ie,t.changes.mapPos(z,-1),t.changes.mapPos(ie,1)).addToSet(u.slice())}this.hasComposition=g?{from:g.range.fromB,to:g.range.toB}:null,(sn.ie||sn.chrome)&&!g&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let A=this.decorations,$=this.blockWrappers;this.updateDeco();let F=Pm(A,this.decorations,t.changes);F.length&&(u=Dr.extendWithRanges(u,F));let V=km($,this.blockWrappers,t.changes);return V.length&&(u=Dr.extendWithRanges(u,V)),g&&!u.some(z=>z.fromA<=g.range.fromA&&z.toA>=g.range.toA)&&(u=g.range.addToSet(u.slice())),this.tile.flags&2&&u.length==0?!1:(this.updateInner(u,g),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,a){this.view.viewState.mustMeasureContent=!0;let{observer:u}=this.view;u.ignore(()=>{if(a||t.length){let A=this.tile,$=new ym(this.view,A,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=$.run(t,a),Oc(A,$.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let g=sn.chrome||sn.ios?{node:u.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(g),g&&(g.written||u.selectionRange.focusNode!=g.node||!this.tile.dom.contains(g.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let p=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let g of this.tile.children)g.isWidget()&&g.widget instanceof yc&&p.push(g.dom);u.updateGaps(p)}updateEditContextFormatting(t){this.editContextFormatting=this.editContextFormatting.map(t.changes);for(let a of t.transactions)for(let u of a.effects)u.is(Cl)&&(this.editContextFormatting=u.value)}updateSelection(t=!1,a=!1){(t||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:u}=this.tile,p=this.view.root.activeElement,g=p==u,A=!g&&!(this.view.state.facet(Zr)||u.tabIndex>-1)&&ro(u,this.view.observer.selectionRange)&&!(p&&u.contains(p));if(!(g||a||A))return;let $=this.forceSelection;this.forceSelection=!1;let F=this.view.state.selection.main,V,z;if(F.empty?z=V=this.inlineDOMNearPos(F.anchor,F.assoc||1):(z=this.inlineDOMNearPos(F.head,F.head==F.from?1:-1),V=this.inlineDOMNearPos(F.anchor,F.anchor==F.from?1:-1)),sn.gecko&&F.empty&&!this.hasComposition&&xm(V)){let oe=document.createTextNode("");this.view.observer.ignore(()=>V.node.insertBefore(oe,V.node.childNodes[V.offset]||null)),V=z=new qi(oe,0),$=!0}let ie=this.view.observer.selectionRange;($||!ie.focusNode||(!ur(V.node,V.offset,ie.anchorNode,ie.anchorOffset)||!ur(z.node,z.offset,ie.focusNode,ie.focusOffset))&&!this.suppressWidgetCursorChange(ie,F))&&(this.view.observer.ignore(()=>{sn.android&&sn.chrome&&u.contains(ie.focusNode)&&$m(ie.focusNode,u)&&(u.blur(),u.focus({preventScroll:!0}));let oe=fs(this.view.root);if(oe)if(F.empty){if(sn.gecko){let Ae=Sm(V.node,V.offset);if(Ae&&Ae!=3){let $e=(Ae==1?ul:cl)(V.node,V.offset);$e&&(V=new qi($e.node,$e.offset))}}oe.collapse(V.node,V.offset),F.bidiLevel!=null&&oe.caretBidiLevel!==void 0&&(oe.caretBidiLevel=F.bidiLevel)}else if(oe.extend){oe.collapse(V.node,V.offset);try{oe.extend(z.node,z.offset)}catch{}}else{let Ae=document.createRange();F.anchor>F.head&&([V,z]=[z,V]),Ae.setEnd(z.node,z.offset),Ae.setStart(V.node,V.offset),oe.removeAllRanges(),oe.addRange(Ae)}A&&this.view.root.activeElement==u&&(u.blur(),p&&p.focus())}),this.view.observer.setSelectionRange(V,z)),this.impreciseAnchor=V.precise?null:new qi(ie.anchorNode,ie.anchorOffset),this.impreciseHead=z.precise?null:new qi(ie.focusNode,ie.focusOffset)}suppressWidgetCursorChange(t,a){return this.hasComposition&&a.empty&&ur(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)&&this.posFromDOM(t.focusNode,t.focusOffset)==a.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,a=t.state.selection.main,u=fs(t.root),{anchorNode:p,anchorOffset:g}=t.observer.selectionRange;if(!u||!a.empty||!a.assoc||!u.modify)return;let A=this.lineAt(a.head,a.assoc);if(!A)return;let $=A.posAtStart;if(a.head==$||a.head==$+A.length)return;let F=this.coordsAt(a.head,-1),V=this.coordsAt(a.head,1);if(!F||!V||F.bottom>V.top)return;let z=this.domAtPos(a.head+a.assoc,a.assoc);u.collapse(z.node,z.offset),u.modify("move",a.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let ie=t.observer.selectionRange;t.docView.posFromDOM(ie.anchorNode,ie.anchorOffset)!=a.from&&u.collapse(p,g)}posFromDOM(t,a){let u=this.tile.nearest(t);if(!u)return this.tile.dom.compareDocumentPosition(t)&2?0:this.view.state.doc.length;let p=u.posAtStart;if(u.isComposite()){let g;if(t==u.dom)g=u.dom.childNodes[a];else{let A=Nr(t)==0?0:a==0?-1:1;for(;;){let $=t.parentNode;if($==u.dom)break;A==0&&$.firstChild!=$.lastChild&&(t==$.firstChild?A=-1:A=1),t=$}A<0?g=t:g=t.nextSibling}if(g==u.dom.firstChild)return p;for(;g&&!Xi.get(g);)g=g.nextSibling;if(!g)return p+u.length;for(let A=0,$=p;;A++){let F=u.children[A];if(F.dom==g)return $;$+=F.length+F.breakAfter}}else return u.isText()?t==u.dom?p+a:p+(a?u.length:0):p}domAtPos(t,a){let{tile:u,offset:p}=this.tile.resolveBlock(t,a);return u.isWidget()?u.domPosFor(t,a):u.domIn(p,a)}inlineDOMNearPos(t,a){let u,p=-1,g=!1,A,$=-1,F=!1;return this.tile.blockTiles((V,z)=>{if(V.isWidget()){if(V.flags&32&&z>=t)return!0;V.flags&16&&(g=!0)}else{let ie=z+V.length;if(z<=t&&(u=V,p=t-z,g=ie<t),ie>=t&&!A&&(A=V,$=t-z,F=z>t),z>t&&A)return!0}}),!u&&!A?this.domAtPos(t,a):(g&&A?u=null:F&&u&&(A=null),u&&a<0||!A?u.domIn(p,a):A.domIn($,a))}coordsAt(t,a){let{tile:u,offset:p}=this.tile.resolveBlock(t,a);return u.isWidget()?u.widget instanceof yc?null:u.coordsInWidget(p,a,!0):u.coordsIn(p,a)}lineAt(t,a){let{tile:u}=this.tile.resolveBlock(t,a);return u.isLine()?u:null}coordsForChar(t){let{tile:a,offset:u}=this.tile.resolveBlock(t,1);if(!a.isLine())return null;function p(g,A){if(g.isComposite())for(let $ of g.children){if($.length>=A){let F=p($,A);if(F)return F}if(A-=$.length,A<0)break}else if(g.isText()&&A<g.length){let $=We(g.text,A);if($==A)return null;let F=kr(g.dom,A,$).getClientRects();for(let V=0;V<F.length;V++){let z=F[V];if(V==F.length-1||z.top<z.bottom&&z.left<z.right)return z}}return null}return p(a,u)}measureVisibleLineHeights(t){let a=[],{from:u,to:p}=t,g=this.view.contentDOM.clientWidth,A=g>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,$=-1,F=this.view.textDirection==Ai.LTR,V=0,z=(ie,oe,Ae)=>{for(let $e=0;$e<ie.children.length&&!(oe>p);$e++){let je=ie.children[$e],ot=oe+je.length,bt=je.dom.getBoundingClientRect(),{height:Xt}=bt;if(Ae&&!$e&&(V+=bt.top-Ae.top),je instanceof xs)ot>u&&z(je,oe,bt);else if(oe>=u&&(V>0&&a.push(-V),a.push(Xt+V),V=0,A)){let Zt=je.dom.lastChild,an=Zt?Ns(Zt):[];if(an.length){let Gt=an[an.length-1],nn=F?Gt.right-bt.left:bt.right-Gt.left;nn>$&&($=nn,this.minWidth=g,this.minWidthFrom=oe,this.minWidthTo=ot)}}Ae&&$e==ie.children.length-1&&(V+=Ae.bottom-bt.bottom),oe=ot+je.breakAfter}};return z(this.tile,0,null),a}textDirectionAt(t){let{tile:a}=this.tile.resolveBlock(t,1);return getComputedStyle(a.dom).direction=="rtl"?Ai.RTL:Ai.LTR}measureTextSize(){let t=this.tile.blockTiles(A=>{if(A.isLine()&&A.children.length&&A.length<=20){let $=0,F;for(let V of A.children){if(!V.isText()||/[^ -~]/.test(V.text))return;let z=Ns(V.dom);if(z.length!=1)return;$+=z[0].width,F=z[0].height}if($)return{lineHeight:A.dom.getBoundingClientRect().height,charWidth:$/A.length,textHeight:F}}});if(t)return t;let a=document.createElement("div"),u,p,g;return a.className="cm-line",a.style.width="99999px",a.style.position="absolute",a.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(a);let A=Ns(a.firstChild)[0];u=a.getBoundingClientRect().height,p=A&&A.width?A.width/27:7,g=A&&A.height?A.height:u,a.remove()}),{lineHeight:u,charWidth:p,textHeight:g}}computeBlockGapDeco(){let t=[],a=this.view.viewState;for(let u=0,p=0;;p++){let g=p==a.viewports.length?null:a.viewports[p],A=g?g.from-1:this.view.state.doc.length;if(A>u){let $=(a.lineBlockAt(A).bottom-a.lineBlockAt(u).top)/this.view.scaleY;t.push(mn.replace({widget:new yc($),block:!0,inclusive:!0,isBlockGap:!0}).range(u,A))}if(!g)break;u=g.to+1}return mn.set(t)}updateDeco(){let t=1,a=this.view.state.facet(yt).map(g=>(this.dynamicDecorationMap[t++]=typeof g=="function")?g(this.view):g),u=!1,p=this.view.state.facet(wi).map((g,A)=>{let $=typeof g=="function";return $&&(u=!0),$?g(this.view):g});for(p.length&&(this.dynamicDecorationMap[t++]=u,a.push(Zn.join(p))),this.decorations=[this.editContextFormatting,...a,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];t<this.decorations.length;)this.dynamicDecorationMap[t++]=!1;this.blockWrappers=this.view.state.facet(fn).map(g=>typeof g=="function"?g(this.view):g)}scrollIntoView(t){if(t.isSnapshot){let V=this.view.viewState.lineBlockAt(t.range.head);this.view.scrollDOM.scrollTop=V.top-t.yMargin,this.view.scrollDOM.scrollLeft=t.xMargin;return}for(let V of this.view.state.facet(xl))try{if(V(this.view,t.range,t))return!0}catch(z){Vi(this.view.state,z,"scroll handler")}let{range:a}=t,u=this.coordsAt(a.head,a.empty?a.assoc:a.head>a.anchor?-1:1),p;if(!u)return;!a.empty&&(p=this.coordsAt(a.anchor,a.anchor>a.head?-1:1))&&(u={left:Math.min(u.left,p.left),top:Math.min(u.top,p.top),right:Math.max(u.right,p.right),bottom:Math.max(u.bottom,p.bottom)});let g=mc(this.view),A={left:u.left-g.left,top:u.top-g.top,right:u.right+g.right,bottom:u.bottom+g.bottom},{offsetWidth:$,offsetHeight:F}=this.view.scrollDOM;oc(this.view.scrollDOM,A,a.head<a.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,$),-$),Math.max(Math.min(t.yMargin,F),-F),this.view.textDirection==Ai.LTR)}lineHasWidget(t){let a=u=>u.isWidget()||u.children.some(a);return a(this.tile.resolveBlock(t,1).tile)}destroy(){Oc(this.tile)}}function Oc(f,t){let a=t?.get(f);if(a!=1){a==null&&f.destroy();for(let u of f.children)Oc(u,t)}}function xm(f){return f.node.nodeType==1&&f.node.firstChild&&(f.offset==0||f.node.childNodes[f.offset-1].contentEditable=="false")&&(f.offset==f.node.childNodes.length||f.node.childNodes[f.offset].contentEditable=="false")}function ah(f,t){let a=f.observer.selectionRange;if(!a.focusNode)return null;let u=ul(a.focusNode,a.focusOffset),p=cl(a.focusNode,a.focusOffset),g=u||p;if(p&&u&&p.node!=u.node){let $=Xi.get(p.node);if(!$||$.isText()&&$.text!=p.node.nodeValue)g=p;else if(f.docView.lastCompositionAfterCursor){let F=Xi.get(u.node);!F||F.isText()&&F.text!=u.node.nodeValue||(g=p)}}if(f.docView.lastCompositionAfterCursor=g!=u,!g)return null;let A=t-g.offset;return{from:A,to:A+g.node.nodeValue.length,node:g.node}}function Cm(f,t,a){let u=ah(f,a);if(!u)return null;let{node:p,from:g,to:A}=u,$=p.nodeValue;if(/[\n\r]/.test($)||f.state.doc.sliceString(u.from,u.to)!=$)return null;let F=t.invertedDesc;return{range:new Dr(F.mapPos(g),F.mapPos(A),g,A),text:p}}function Sm(f,t){return f.nodeType!=1?0:(t&&f.childNodes[t-1].contentEditable=="false"?1:0)|(t<f.childNodes.length&&f.childNodes[t].contentEditable=="false"?2:0)}let wm=class{constructor(){this.changes=[]}compareRange(t,a){Yr(t,a,this.changes)}comparePoint(t,a){Yr(t,a,this.changes)}boundChange(t){Yr(t,t,this.changes)}};function Pm(f,t,a){let u=new wm;return Zn.compare(f,t,a,u),u.changes}class Mm{constructor(){this.changes=[]}compareRange(t,a){Yr(t,a,this.changes)}comparePoint(){}boundChange(t){Yr(t,t,this.changes)}}function km(f,t,a){let u=new Mm;return Zn.compare(f,t,a,u),u.changes}function $m(f,t){for(let a=f;a&&a!=t;a=a.assignedSlot||a.parentNode)if(a.nodeType==1&&a.contentEditable=="false")return!0;return!1}function Dm(f,t){let a=!1;return t&&f.iterChangedRanges((u,p)=>{u<t.to&&p>t.from&&(a=!0)}),a}class yc extends vr{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return t.className="cm-gap",this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Em(f,t,a=1){let u=f.charCategorizer(t),p=f.doc.lineAt(t),g=t-p.from;if(p.length==0)return ft.cursor(t);g==0?a=1:g==p.length&&(a=-1);let A=g,$=g;a<0?A=We(p.text,g,!1):$=We(p.text,g);let F=u(p.text.slice(A,$));for(;A>0;){let V=We(p.text,A,!1);if(u(p.text.slice(V,A))!=F)break;A=V}for(;$<p.length;){let V=We(p.text,$);if(u(p.text.slice($,V))!=F)break;$=V}return ft.range(A+p.from,$+p.from)}function Tm(f,t,a,u,p){let g=Math.round((u-t.left)*f.defaultCharacterWidth);if(f.lineWrapping&&a.height>f.defaultLineHeight*1.5){let $=f.viewState.heightOracle.textHeight,F=Math.floor((p-a.top-(f.defaultLineHeight-$)*.5)/$);g+=F*f.viewState.heightOracle.lineLength}let A=f.state.sliceDoc(a.from,a.to);return a.from+Yo(A,g,f.state.tabSize)}function bc(f,t,a){let u=f.lineBlockAt(t);if(Array.isArray(u.type)){let p;for(let g of u.type){if(g.from>t)break;if(!(g.to<t)){if(g.from<t&&g.to>t)return g;(!p||g.type==tn.Text&&(p.type!=g.type||(a<0?g.from<t:g.to>t)))&&(p=g)}}return p||u}return u}function Fm(f,t,a,u){let p=bc(f,t.head,t.assoc||-1),g=!u||p.type!=tn.Text||!(f.lineWrapping||p.widgetLineBreaks)?null:f.coordsAtPos(t.assoc<0&&t.head>p.from?t.head-1:t.head);if(g){let A=f.dom.getBoundingClientRect(),$=f.textDirectionAt(p.from),F=f.posAtCoords({x:a==($==Ai.LTR)?A.right-1:A.left+1,y:(g.top+g.bottom)/2});if(F!=null)return ft.cursor(F,a?-1:1)}return ft.cursor(a?p.to:p.from,a?-1:1)}function lh(f,t,a,u){let p=f.state.doc.lineAt(t.head),g=f.bidiSpans(p),A=f.textDirectionAt(p.from);for(let $=t,F=null;;){let V=hc(p,g,A,$,a),z=gl;if(!V){if(p.number==(a?f.state.doc.lines:1))return $;z=`
`,p=f.state.doc.line(p.number+(a?1:-1)),g=f.bidiSpans(p),V=f.visualLineSide(p,!a)}if(F){if(!F(z))return $}else{if(!u)return V;F=u(z)}$=V}}function Rm(f,t,a){let u=f.state.charCategorizer(t),p=u(a);return g=>{let A=u(g);return p==ee.Space&&(p=A),p==A}}function Bm(f,t,a,u){let p=t.head,g=a?1:-1;if(p==(a?f.state.doc.length:0))return ft.cursor(p,t.assoc);let A=t.goalColumn,$,F=f.contentDOM.getBoundingClientRect(),V=f.coordsAtPos(p,t.assoc||-1),z=f.documentTop;if(V)A==null&&(A=V.left-F.left),$=g<0?V.top:V.bottom;else{let Ae=f.viewState.lineBlockAt(p);A==null&&(A=Math.min(F.right-F.left,f.defaultCharacterWidth*(p-Ae.from))),$=(g<0?Ae.top:Ae.bottom)+z}let ie=F.left+A,oe=u??f.viewState.heightOracle.textHeight>>1;for(let Ae=0;;Ae+=10){let $e=$+(oe+Ae)*g,je=vc(f,{x:ie,y:$e},!1,g);return ft.cursor(je.pos,je.assoc,void 0,A)}}function _a(f,t,a){for(;;){let u=0;for(let p of f)p.between(t-1,t+1,(g,A,$)=>{if(t>g&&t<A){let F=u||a||(t-g<A-t?-1:1);t=F<0?g:A,u=F}});if(!u)return t}}function uh(f,t){let a=null;for(let u=0;u<t.ranges.length;u++){let p=t.ranges[u],g=null;if(p.empty){let A=_a(f,p.from,0);A!=p.from&&(g=ft.cursor(A,-1))}else{let A=_a(f,p.from,-1),$=_a(f,p.to,1);(A!=p.from||$!=p.to)&&(g=ft.range(p.from==p.anchor?A:$,p.from==p.head?A:$))}g&&(a||(a=t.ranges.slice()),a[u]=g)}return a?ft.create(a,t.mainIndex):t}function Ac(f,t,a){let u=_a(f.state.facet(Ji).map(p=>p(f)),a.from,t.head>a.from?-1:1);return u==a.from?a:ft.cursor(u,u<a.from?1:-1)}class Jr{constructor(t,a){this.pos=t,this.assoc=a}}function vc(f,t,a,u){let p=f.contentDOM.getBoundingClientRect(),g=p.top+f.viewState.paddingTop,{x:A,y:$}=t,F=$-g,V;for(;;){if(F<0)return new Jr(0,1);if(F>f.viewState.docHeight)return new Jr(f.state.doc.length,-1);if(V=f.elementAtHeight(F),u==null)break;if(V.type==tn.Text){let oe=f.docView.coordsAt(u<0?V.from:V.to,u);if(oe&&(u<0?oe.top<=F+g:oe.bottom>=F+g))break}let ie=f.viewState.heightOracle.textHeight/2;F=u>0?V.bottom+ie:V.top-ie}if(f.viewport.from>=V.to||f.viewport.to<=V.from){if(a)return null;if(V.type==tn.Text){let ie=Tm(f,p,V,A,$);return new Jr(ie,ie==V.from?1:-1)}}if(V.type!=tn.Text)return F<(V.top+V.bottom)/2?new Jr(V.from,1):new Jr(V.to,-1);let z=f.docView.lineAt(V.from,2);return(!z||z.length!=V.length)&&(z=f.docView.lineAt(V.from,-2)),fh(f,z,V.from,A,$)}function fh(f,t,a,u,p){let g=-1,A=null,$=1e9,F=1e9,V=p,z=p,ie=(oe,Ae)=>{for(let $e=0;$e<oe.length;$e++){let je=oe[$e];if(je.top==je.bottom)continue;let ot=je.left>u?je.left-u:je.right<u?u-je.right:0,bt=je.top>p?je.top-p:je.bottom<p?p-je.bottom:0;je.top<=z&&je.bottom>=V&&(V=Math.min(je.top,V),z=Math.max(je.bottom,z),bt=0),(g<0||(bt-F||ot-$)<0)&&(g>=0&&F&&$<ot&&A.top<=z-2&&A.bottom>=V+2?F=0:(g=Ae,$=ot,F=bt,A=je))}};if(t.isText()){for(let Ae=0;Ae<t.length;){let $e=We(t.text,Ae);if(ie(kr(t.dom,Ae,$e).getClientRects(),Ae),!$&&!F)break;Ae=$e}return u>(A.left+A.right)/2==(hh(f,g+a)==Ai.LTR)?new Jr(a+We(t.text,g),-1):new Jr(a+g,1)}else{if(!t.length)return new Jr(a,1);for(let je=0;je<t.children.length;je++){let ot=t.children[je];if(ot.flags&48)continue;let bt=(ot.dom.nodeType==1?ot.dom:kr(ot.dom,0,ot.length)).getClientRects();if(ie(bt,je),!$&&!F)break}let oe=t.children[g],Ae=t.posBefore(oe,a);return oe.isComposite()||oe.isText()?fh(f,oe,Ae,Math.max(A.left,Math.min(A.right,u)),p):u>(A.left+A.right)/2==(hh(f,g+a)==Ai.LTR)?new Jr(Ae+oe.length,-1):new Jr(Ae,1)}}function hh(f,t){let a=f.state.doc.lineAt(t);return f.bidiSpans(a)[ji.find(f.bidiSpans(a),t-a.from,-1,1)].dir}const Oa="￿";class Qm{constructor(t,a){this.points=t,this.text="",this.lineSeparator=a.facet(at.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Oa}readRange(t,a){if(!t)return this;let u=t.parentNode;for(let p=t;;){this.findPointBefore(u,p);let g=this.text.length;this.readNode(p);let A=Xi.get(p),$=p.nextSibling;if($==a){A?.breakAfter&&!$&&this.lineBreak();break}let F=Xi.get($);(A&&F?A.breakAfter:(A?A.breakAfter:so(p))||so($)&&(p.nodeName!="BR"||A?.isWidget())&&this.text.length>g)&&!Nm($,a)&&this.lineBreak(),p=$}return this.findPointBefore(u,a),this}readTextNode(t){let a=t.nodeValue;for(let u of this.points)u.node==t&&(u.pos=this.text.length+Math.min(u.offset,a.length));for(let u=0,p=this.lineSeparator?null:/\r\n?|\n/g;;){let g=-1,A=1,$;if(this.lineSeparator?(g=a.indexOf(this.lineSeparator,u),A=this.lineSeparator.length):($=p.exec(a))&&(g=$.index,A=$[0].length),this.append(a.slice(u,g<0?a.length:g)),g<0)break;if(this.lineBreak(),A>1)for(let F of this.points)F.node==t&&F.pos>this.text.length&&(F.pos-=A-1);u=g+A}}readNode(t){let a=Xi.get(t),u=a&&a.overrideDOMText;if(u!=null){this.findPointInside(t,u.length);for(let p=u.iter();!p.next().done;)p.lineBreak?this.lineBreak():this.append(p.value)}else t.nodeType==3?this.readTextNode(t):t.nodeName=="BR"?t.nextSibling&&this.lineBreak():t.nodeType==1&&this.readRange(t.firstChild,null)}findPointBefore(t,a){for(let u of this.points)u.node==t&&t.childNodes[u.offset]==a&&(u.pos=this.text.length)}findPointInside(t,a){for(let u of this.points)(t.nodeType==3?u.node==t:t.contains(u.node))&&(u.pos=this.text.length+(Lm(t,u.node,u.offset)?a:0))}}function Lm(f,t,a){for(;;){if(!t||a<Nr(t))return!1;if(t==f)return!0;a=Hr(t)+1,t=t.parentNode}}function Nm(f,t){let a;for(;!(f==t||!f);f=f.nextSibling){let u=Xi.get(f);if(!u?.isWidget())return!1;u&&(a||(a=[])).push(u)}if(a)for(let u of a){let p=u.overrideDOMText;if(p?.length)return!1}return!0}class dh{constructor(t,a){this.node=t,this.offset=a,this.pos=-1}}class Gm{constructor(t,a,u,p){this.typeOver=p,this.bounds=null,this.text="",this.domChanged=a>-1;let{impreciseHead:g,impreciseAnchor:A}=t.docView;if(t.state.readOnly&&a>-1)this.newSel=null;else if(a>-1&&(this.bounds=mh(t.docView.tile,a,u,0))){let $=g||A?[]:Im(t),F=new Qm($,t.state);F.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=F.text,this.newSel=Vm($,this.bounds.from)}else{let $=t.observer.selectionRange,F=g&&g.node==$.focusNode&&g.offset==$.focusOffset||!dn(t.contentDOM,$.focusNode)?t.state.selection.main.head:t.docView.posFromDOM($.focusNode,$.focusOffset),V=A&&A.node==$.anchorNode&&A.offset==$.anchorOffset||!dn(t.contentDOM,$.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM($.anchorNode,$.anchorOffset),z=t.viewport;if((sn.ios||sn.chrome)&&t.state.selection.main.empty&&F!=V&&(z.from>0||z.to<t.state.doc.length)){let ie=Math.min(F,V),oe=Math.max(F,V),Ae=z.from-ie,$e=z.to-oe;(Ae==0||Ae==1||ie==0)&&($e==0||$e==-1||oe==t.state.doc.length)&&(F=0,V=t.state.doc.length)}t.inputState.composing>-1&&t.state.selection.ranges.length>1?this.newSel=t.state.selection.replaceRange(ft.range(V,F)):this.newSel=ft.single(V,F)}}}function mh(f,t,a,u){if(f.isComposite()){let p=-1,g=-1,A=-1,$=-1;for(let F=0,V=u,z=u;F<f.children.length;F++){let ie=f.children[F],oe=V+ie.length;if(V<t&&oe>a)return mh(ie,t,a,V);if(oe>=t&&p==-1&&(p=F,g=V),V>a&&ie.dom.parentNode==f.dom){A=F,$=z;break}z=oe,V=oe+ie.breakAfter}return{from:g,to:$<0?u+f.length:$,startDOM:(p?f.children[p-1].dom.nextSibling:null)||f.dom.firstChild,endDOM:A<f.children.length&&A>=0?f.children[A].dom:null}}else return f.isText()?{from:u,to:u+f.length,startDOM:f.dom,endDOM:f.dom.nextSibling}:null}function gh(f,t){let a,{newSel:u}=t,p=f.state.selection.main,g=f.inputState.lastKeyTime>Date.now()-100?f.inputState.lastKeyCode:-1;if(t.bounds){let{from:A,to:$}=t.bounds,F=p.from,V=null;(g===8||sn.android&&t.text.length<$-A)&&(F=p.to,V="end");let z=_h(f.state.doc.sliceString(A,$,Oa),t.text,F-A,V);z&&(sn.chrome&&g==13&&z.toB==z.from+2&&t.text.slice(z.from,z.toB)==Oa+Oa&&z.toB--,a={from:A+z.from,to:A+z.toA,insert:K.of(t.text.slice(z.from,z.toB).split(Oa))})}else u&&(!f.hasFocus&&f.state.facet(Zr)||u.main.eq(p))&&(u=null);if(!a&&!u)return!1;if(!a&&t.typeOver&&!p.empty&&u&&u.main.empty?a={from:p.from,to:p.to,insert:f.state.doc.slice(p.from,p.to)}:(sn.mac||sn.android)&&a&&a.from==a.to&&a.from==p.head-1&&/^\. ?$/.test(a.insert.toString())&&f.contentDOM.getAttribute("autocorrect")=="off"?(u&&a.insert.length==2&&(u=ft.single(u.main.anchor-1,u.main.head-1)),a={from:a.from,to:a.to,insert:K.of([a.insert.toString().replace("."," ")])}):a&&a.from>=p.from&&a.to<=p.to&&(a.from!=p.from||a.to!=p.to)&&p.to-p.from-(a.to-a.from)<=4?a={from:p.from,to:p.to,insert:f.state.doc.slice(p.from,a.from).append(a.insert).append(f.state.doc.slice(a.to,p.to))}:f.state.doc.lineAt(p.from).to<p.to&&f.docView.lineHasWidget(p.to)&&f.inputState.insertingTextAt>Date.now()-50?a={from:p.from,to:p.to,insert:f.state.toText(f.inputState.insertingText)}:sn.chrome&&a&&a.from==a.to&&a.from==p.head&&a.insert.toString()==`
 `&&f.lineWrapping&&(u&&(u=ft.single(u.main.anchor-1,u.main.head-1)),a={from:p.from,to:p.to,insert:K.of([" "])}),a)return xc(f,a,u,g);if(u&&!u.main.eq(p)){let A=!1,$="select";return f.inputState.lastSelectionTime>Date.now()-50&&(f.inputState.lastSelectionOrigin=="select"&&(A=!0),$=f.inputState.lastSelectionOrigin,$=="select.pointer"&&(u=uh(f.state.facet(Ji).map(F=>F(f)),u))),f.dispatch({selection:u,scrollIntoView:A,userEvent:$}),!0}else return!1}function xc(f,t,a,u=-1){if(sn.ios&&f.inputState.flushIOSKey(t))return!0;let p=f.state.selection.main;if(sn.android&&(t.to==p.to&&(t.from==p.from||t.from==p.from-1&&f.state.sliceDoc(t.from,p.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&Gr(f.contentDOM,"Enter",13)||(t.from==p.from-1&&t.to==p.to&&t.insert.length==0||u==8&&t.insert.length<t.to-t.from&&t.to>p.head)&&Gr(f.contentDOM,"Backspace",8)||t.from==p.from&&t.to==p.to+1&&t.insert.length==0&&Gr(f.contentDOM,"Delete",46)))return!0;let g=t.insert.toString();f.inputState.composing>=0&&f.inputState.composing++;let A,$=()=>A||(A=Zm(f,t,a));return f.state.facet(bl).some(F=>F(f,t.from,t.to,g,$))||f.dispatch($()),!0}function Zm(f,t,a){let u,p=f.state,g=p.selection.main,A=-1;if(t.from==t.to&&t.from<g.from||t.from>g.to){let F=t.from<g.from?-1:1,V=F<0?g.from:g.to,z=_a(p.facet(Ji).map(ie=>ie(f)),V,F);t.from==z&&(A=z)}if(A>-1)u={changes:t,selection:ft.cursor(t.from+t.insert.length,-1)};else if(t.from>=g.from&&t.to<=g.to&&t.to-t.from>=(g.to-g.from)/3&&(!a||a.main.empty&&a.main.from==t.from+t.insert.length)&&f.inputState.composing<0){let F=g.from<t.from?p.sliceDoc(g.from,t.from):"",V=g.to>t.to?p.sliceDoc(t.to,g.to):"";u=p.replaceSelection(f.state.toText(F+t.insert.sliceString(0,void 0,f.state.lineBreak)+V))}else{let F=p.changes(t),V=a&&a.main.to<=F.newLength?a.main:void 0;if(p.selection.ranges.length>1&&(f.inputState.composing>=0||f.inputState.compositionPendingChange)&&t.to<=g.to+10&&t.to>=g.to-10){let z=f.state.sliceDoc(t.from,t.to),ie,oe=a&&ah(f,a.main.head);if(oe){let $e=t.insert.length-(t.to-t.from);ie={from:oe.from,to:oe.to-$e}}else ie=f.state.doc.lineAt(g.head);let Ae=g.to-t.to;u=p.changeByRange($e=>{if($e.from==g.from&&$e.to==g.to)return{changes:F,range:V||$e.map(F)};let je=$e.to-Ae,ot=je-z.length;if(f.state.sliceDoc(ot,je)!=z||je>=ie.from&&ot<=ie.to)return{range:$e};let bt=p.changes({from:ot,to:je,insert:t.insert}),Xt=$e.to-g.to;return{changes:bt,range:V?ft.range(Math.max(0,V.anchor+Xt),Math.max(0,V.head+Xt)):$e.map(bt)}})}else u={changes:F,selection:V&&p.selection.replaceRange(V)}}let $="input.type";return(f.composing||f.inputState.compositionPendingChange&&f.inputState.compositionEndedAt>Date.now()-50)&&(f.inputState.compositionPendingChange=!1,$+=".compose",f.inputState.compositionFirstChange&&($+=".start",f.inputState.compositionFirstChange=!1)),p.update(u,{userEvent:$,scrollIntoView:!0})}function _h(f,t,a,u){let p=Math.min(f.length,t.length),g=0;for(;g<p&&f.charCodeAt(g)==t.charCodeAt(g);)g++;if(g==p&&f.length==t.length)return null;let A=f.length,$=t.length;for(;A>0&&$>0&&f.charCodeAt(A-1)==t.charCodeAt($-1);)A--,$--;if(u=="end"){let F=Math.max(0,g-Math.min(A,$));a-=A+F-g}if(A<g&&f.length<t.length){let F=a<=g&&a>=A?g-a:0;g-=F,$=g+($-A),A=g}else if($<g){let F=a<=g&&a>=$?g-a:0;g-=F,A=g+(A-$),$=g}return{from:g,toA:A,toB:$}}function Im(f){let t=[];if(f.root.activeElement!=f.contentDOM)return t;let{anchorNode:a,anchorOffset:u,focusNode:p,focusOffset:g}=f.observer.selectionRange;return a&&(t.push(new dh(a,u)),(p!=a||g!=u)&&t.push(new dh(p,g))),t}function Vm(f,t){if(f.length==0)return null;let a=f[0].pos,u=f.length==2?f[1].pos:a;return a>-1&&u>-1?ft.single(a+t,u+t):null}class Xm{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,sn.safari&&t.contentDOM.addEventListener("input",()=>null),sn.gecko&&s1(t.contentDOM.ownerDocument)}handleEvent(t){!Km(this.view,t)||this.ignoreDuringComposition(t)||t.type=="keydown"&&this.keydown(t)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(t.type,t)):this.runHandlers(t.type,t))}runHandlers(t,a){let u=this.handlers[t];if(u){for(let p of u.observers)p(this.view,a);for(let p of u.handlers){if(a.defaultPrevented)break;if(p(this.view,a)){a.preventDefault();break}}}}ensureHandlers(t){let a=Wm(t),u=this.handlers,p=this.view.contentDOM;for(let g in a)if(g!="scroll"){let A=!a[g].handlers.length,$=u[g];$&&A!=!$.handlers.length&&(p.removeEventListener(g,this.handleEvent),$=null),$||p.addEventListener(g,this.handleEvent,{passive:A})}for(let g in u)g!="scroll"&&!a[g]&&p.removeEventListener(g,this.handleEvent);this.handlers=a}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&t.keyCode!=27&&bh.indexOf(t.keyCode)<0&&(this.tabFocusMode=-1),sn.android&&sn.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let a;return sn.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((a=yh.find(u=>u.keyCode==t.keyCode))&&!t.ctrlKey||zm.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=a||t,setTimeout(()=>this.flushIOSKey(),250),!0):(t.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(t){let a=this.pendingIOSKey;return!a||a.key=="Enter"&&t&&t.from<t.to&&/^\S+$/.test(t.insert.toString())?!1:(this.pendingIOSKey=void 0,Gr(this.view.contentDOM,a.key,a.keyCode,a instanceof KeyboardEvent?a:void 0))}ignoreDuringComposition(t){return!/^key/.test(t.type)||t.synthetic?!1:this.composing>0?!0:sn.safari&&!sn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.view.observer.update(t),this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Oh(f,t){return(a,u)=>{try{return t.call(f,u,a)}catch(p){Vi(a.state,p)}}}function Wm(f){let t=Object.create(null);function a(u){return t[u]||(t[u]={observers:[],handlers:[]})}for(let u of f){let p=u.spec,g=p&&p.plugin.domEventHandlers,A=p&&p.plugin.domEventObservers;if(g)for(let $ in g){let F=g[$];F&&a($).handlers.push(Oh(u.value,F))}if(A)for(let $ in A){let F=A[$];F&&a($).observers.push(Oh(u.value,F))}}for(let u in Ir)a(u).handlers.push(Ir[u]);for(let u in Er)a(u).observers.push(Er[u]);return t}const yh=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],zm="dthko",bh=[16,17,18,20,91,92,224,225],$l=6;function Dl(f){return Math.max(0,f)*.7+8}function qm(f,t){return Math.max(Math.abs(f.clientX-t.clientX),Math.abs(f.clientY-t.clientY))}class jm{constructor(t,a,u,p){this.view=t,this.startEvent=a,this.style=u,this.mustSelect=p,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=a,this.scrollParents=As(t.contentDOM),this.atoms=t.state.facet(Ji).map(A=>A(t));let g=t.contentDOM.ownerDocument;g.addEventListener("mousemove",this.move=this.move.bind(this)),g.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=a.shiftKey,this.multiple=t.state.facet(at.allowMultipleSelections)&&Um(t,a),this.dragging=Hm(t,a)&&Ph(a)==1?null:!1}start(t){this.dragging===!1&&this.select(t)}move(t){if(t.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&qm(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let a=0,u=0,p=0,g=0,A=this.view.win.innerWidth,$=this.view.win.innerHeight;this.scrollParents.x&&({left:p,right:A}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:g,bottom:$}=this.scrollParents.y.getBoundingClientRect());let F=mc(this.view);t.clientX-F.left<=p+$l?a=-Dl(p-t.clientX):t.clientX+F.right>=A-$l&&(a=Dl(t.clientX-A)),t.clientY-F.top<=g+$l?u=-Dl(g-t.clientY):t.clientY+F.bottom>=$-$l&&(u=Dl(t.clientY-$)),this.setScrollSpeed(a,u)}up(t){this.dragging==null&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,a){this.scrollSpeed={x:t,y:a},t||a?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:t,y:a}=this.scrollSpeed;t&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=t,t=0),a&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=a,a=0),(t||a)&&this.view.win.scrollBy(t,a),this.dragging===!1&&this.select(this.lastEvent)}select(t){let{view:a}=this,u=uh(this.atoms,this.style.get(t,this.extend,this.multiple));(this.mustSelect||!u.eq(a.state.selection,this.dragging===!1))&&this.view.dispatch({selection:u,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.transactions.some(a=>a.isUserEvent("input.type"))?this.destroy():this.style.update(t)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Um(f,t){let a=f.state.facet(_l);return a.length?a[0](t):sn.mac?t.metaKey:t.ctrlKey}function Ym(f,t){let a=f.state.facet(Ol);return a.length?a[0](t):sn.mac?!t.altKey:!t.ctrlKey}function Hm(f,t){let{main:a}=f.state.selection;if(a.empty)return!1;let u=fs(f.root);if(!u||u.rangeCount==0)return!0;let p=u.getRangeAt(0).getClientRects();for(let g=0;g<p.length;g++){let A=p[g];if(A.left<=t.clientX&&A.right>=t.clientX&&A.top<=t.clientY&&A.bottom>=t.clientY)return!0}return!1}function Km(f,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let a=t.target,u;a!=f.contentDOM;a=a.parentNode)if(!a||a.nodeType==11||(u=Xi.get(a))&&u.isWidget()&&!u.isHidden&&u.widget.ignoreEvent(t))return!1;return!0}const Ir=Object.create(null),Er=Object.create(null),Ah=sn.ie&&sn.ie_version<15||sn.ios&&sn.webkit_version<604;function Jm(f){let t=f.dom.parentNode;if(!t)return;let a=t.appendChild(document.createElement("textarea"));a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout(()=>{f.focus(),a.remove(),vh(f,a.value)},50)}function El(f,t,a){for(let u of f.facet(t))a=u(a,f);return a}function vh(f,t){t=El(f.state,da,t);let{state:a}=f,u,p=1,g=a.toText(t),A=g.lines==a.selection.ranges.length;if(Cc!=null&&a.selection.ranges.every(F=>F.empty)&&Cc==g.toString()){let F=-1;u=a.changeByRange(V=>{let z=a.doc.lineAt(V.from);if(z.from==F)return{range:V};F=z.from;let ie=a.toText((A?g.line(p++).text:t)+a.lineBreak);return{changes:{from:z.from,insert:ie},range:ft.cursor(V.from+ie.length)}})}else A?u=a.changeByRange(F=>{let V=g.line(p++);return{changes:{from:F.from,to:F.to,insert:V.text},range:ft.cursor(F.from+V.length)}}):u=a.replaceSelection(g);f.dispatch(u,{userEvent:"input.paste",scrollIntoView:!0})}Er.scroll=f=>{f.inputState.lastScrollTop=f.scrollDOM.scrollTop,f.inputState.lastScrollLeft=f.scrollDOM.scrollLeft},Ir.keydown=(f,t)=>(f.inputState.setSelectionOrigin("select"),t.keyCode==27&&f.inputState.tabFocusMode!=0&&(f.inputState.tabFocusMode=Date.now()+2e3),!1),Er.touchstart=(f,t)=>{f.inputState.lastTouchTime=Date.now(),f.inputState.setSelectionOrigin("select.pointer")},Er.touchmove=f=>{f.inputState.setSelectionOrigin("select.pointer")},Ir.mousedown=(f,t)=>{if(f.observer.flush(),f.inputState.lastTouchTime>Date.now()-2e3)return!1;let a=null;for(let u of f.state.facet(yl))if(a=u(f,t),a)break;if(!a&&t.button==0&&(a=t1(f,t)),a){let u=!f.hasFocus;f.inputState.startMouseSelection(new jm(f,t,a,u)),u&&f.observer.ignore(()=>{oa(f.contentDOM);let g=f.root.activeElement;g&&!g.contains(f.contentDOM)&&g.blur()});let p=f.inputState.mouseSelection;if(p)return p.start(t),p.dragging===!1}else f.inputState.setSelectionOrigin("select.pointer");return!1};function xh(f,t,a,u){if(u==1)return ft.cursor(t,a);if(u==2)return Em(f.state,t,a);{let p=f.docView.lineAt(t,a),g=f.state.doc.lineAt(p?p.posAtEnd:t),A=p?p.posAtStart:g.from,$=p?p.posAtEnd:g.to;return $<f.state.doc.length&&$==g.to&&$++,ft.range(A,$)}}const e1=sn.ie&&sn.ie_version<=11;let Ch=null,Sh=0,wh=0;function Ph(f){if(!e1)return f.detail;let t=Ch,a=wh;return Ch=f,wh=Date.now(),Sh=!t||a>Date.now()-400&&Math.abs(t.clientX-f.clientX)<2&&Math.abs(t.clientY-f.clientY)<2?(Sh+1)%3:1}function t1(f,t){let a=f.posAndSideAtCoords({x:t.clientX,y:t.clientY},!1),u=Ph(t),p=f.state.selection;return{update(g){g.docChanged&&(a.pos=g.changes.mapPos(a.pos),p=p.map(g.changes))},get(g,A,$){let F=f.posAndSideAtCoords({x:g.clientX,y:g.clientY},!1),V,z=xh(f,F.pos,F.assoc,u);if(a.pos!=F.pos&&!A){let ie=xh(f,a.pos,a.assoc,u),oe=Math.min(ie.from,z.from),Ae=Math.max(ie.to,z.to);z=oe<z.from?ft.range(oe,Ae):ft.range(Ae,oe)}return A?p.replaceRange(p.main.extend(z.from,z.to)):$&&u==1&&p.ranges.length>1&&(V=n1(p,F.pos))?V:$?p.addRange(z):ft.create([z])}}}function n1(f,t){for(let a=0;a<f.ranges.length;a++){let{from:u,to:p}=f.ranges[a];if(u<=t&&p>=t)return ft.create(f.ranges.slice(0,a).concat(f.ranges.slice(a+1)),f.mainIndex==a?0:f.mainIndex-(f.mainIndex>a?1:0))}return null}Ir.dragstart=(f,t)=>{let{selection:{main:a}}=f.state;if(t.target.draggable){let p=f.docView.tile.nearest(t.target);if(p&&p.isWidget()){let g=p.posAtStart,A=g+p.length;(g>=a.to||A<=a.from)&&(a=ft.range(g,A))}}let{inputState:u}=f;return u.mouseSelection&&(u.mouseSelection.dragging=!0),u.draggedContent=a,t.dataTransfer&&(t.dataTransfer.setData("Text",El(f.state,ma,f.state.sliceDoc(a.from,a.to))),t.dataTransfer.effectAllowed="copyMove"),!1},Ir.dragend=f=>(f.inputState.draggedContent=null,!1);function Mh(f,t,a,u){if(a=El(f.state,da,a),!a)return;let p=f.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:g}=f.inputState,A=u&&g&&Ym(f,t)?{from:g.from,to:g.to}:null,$={from:p,insert:a},F=f.state.changes(A?[A,$]:$);f.focus(),f.dispatch({changes:F,selection:{anchor:F.mapPos(p,-1),head:F.mapPos(p,1)},userEvent:A?"move.drop":"input.drop"}),f.inputState.draggedContent=null}Ir.drop=(f,t)=>{if(!t.dataTransfer)return!1;if(f.state.readOnly)return!0;let a=t.dataTransfer.files;if(a&&a.length){let u=Array(a.length),p=0,g=()=>{++p==a.length&&Mh(f,t,u.filter(A=>A!=null).join(f.state.lineBreak),!1)};for(let A=0;A<a.length;A++){let $=new FileReader;$.onerror=g,$.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test($.result)||(u[A]=$.result),g()},$.readAsText(a[A])}return!0}else{let u=t.dataTransfer.getData("Text");if(u)return Mh(f,t,u,!0),!0}return!1},Ir.paste=(f,t)=>{if(f.state.readOnly)return!0;f.observer.flush();let a=Ah?null:t.clipboardData;return a?(vh(f,a.getData("text/plain")||a.getData("text/uri-list")),!0):(Jm(f),!1)};function i1(f,t){let a=f.dom.parentNode;if(!a)return;let u=a.appendChild(document.createElement("textarea"));u.style.cssText="position: fixed; left: -10000px; top: 10px",u.value=t,u.focus(),u.selectionEnd=t.length,u.selectionStart=0,setTimeout(()=>{u.remove(),f.focus()},50)}function r1(f){let t=[],a=[],u=!1;for(let p of f.selection.ranges)p.empty||(t.push(f.sliceDoc(p.from,p.to)),a.push(p));if(!t.length){let p=-1;for(let{from:g}of f.selection.ranges){let A=f.doc.lineAt(g);A.number>p&&(t.push(A.text),a.push({from:A.from,to:Math.min(f.doc.length,A.to+1)})),p=A.number}u=!0}return{text:El(f,ma,t.join(f.lineBreak)),ranges:a,linewise:u}}let Cc=null;Ir.copy=Ir.cut=(f,t)=>{let{text:a,ranges:u,linewise:p}=r1(f.state);if(!a&&!p)return!1;Cc=p?a:null,t.type=="cut"&&!f.state.readOnly&&f.dispatch({changes:u,scrollIntoView:!0,userEvent:"delete.cut"});let g=Ah?null:t.clipboardData;return g?(g.clearData(),g.setData("text/plain",a),!0):(i1(f,a),!1)};const kh=ti.define();function $h(f,t){let a=[];for(let u of f.facet(ps)){let p=u(f,t);p&&a.push(p)}return a.length?f.update({effects:a,annotations:kh.of(!0)}):null}function Dh(f){setTimeout(()=>{let t=f.hasFocus;if(t!=f.inputState.notifiedFocused){let a=$h(f.state,t);a?f.dispatch(a):f.update([])}},10)}Er.focus=f=>{f.inputState.lastFocusTime=Date.now(),!f.scrollDOM.scrollTop&&(f.inputState.lastScrollTop||f.inputState.lastScrollLeft)&&(f.scrollDOM.scrollTop=f.inputState.lastScrollTop,f.scrollDOM.scrollLeft=f.inputState.lastScrollLeft),Dh(f)},Er.blur=f=>{f.observer.clearSelectionRange(),Dh(f)},Er.compositionstart=Er.compositionupdate=f=>{f.observer.editContext||(f.inputState.compositionFirstChange==null&&(f.inputState.compositionFirstChange=!0),f.inputState.composing<0&&(f.inputState.composing=0))},Er.compositionend=f=>{f.observer.editContext||(f.inputState.composing=-1,f.inputState.compositionEndedAt=Date.now(),f.inputState.compositionPendingKey=!0,f.inputState.compositionPendingChange=f.observer.pendingRecords().length>0,f.inputState.compositionFirstChange=null,sn.chrome&&sn.android?f.observer.flushSoon():f.inputState.compositionPendingChange?Promise.resolve().then(()=>f.observer.flush()):setTimeout(()=>{f.inputState.composing<0&&f.docView.hasComposition&&f.update([])},50))},Er.contextmenu=f=>{f.inputState.lastContextMenu=Date.now()},Ir.beforeinput=(f,t)=>{var a,u;if((t.inputType=="insertText"||t.inputType=="insertCompositionText")&&(f.inputState.insertingText=t.data,f.inputState.insertingTextAt=Date.now()),t.inputType=="insertReplacementText"&&f.observer.editContext){let g=(a=t.dataTransfer)===null||a===void 0?void 0:a.getData("text/plain"),A=t.getTargetRanges();if(g&&A.length){let $=A[0],F=f.posAtDOM($.startContainer,$.startOffset),V=f.posAtDOM($.endContainer,$.endOffset);return xc(f,{from:F,to:V,insert:f.state.toText(g)},null),!0}}let p;if(sn.chrome&&sn.android&&(p=yh.find(g=>g.inputType==t.inputType))&&(f.observer.delayAndroidKey(p.key,p.keyCode),p.key=="Backspace"||p.key=="Delete")){let g=((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0;setTimeout(()=>{var A;(((A=window.visualViewport)===null||A===void 0?void 0:A.height)||0)>g+10&&f.hasFocus&&(f.contentDOM.blur(),f.focus())},100)}return sn.ios&&t.inputType=="deleteContentForward"&&f.observer.flushSoon(),sn.safari&&t.inputType=="insertText"&&f.inputState.composing>=0&&setTimeout(()=>Er.compositionend(f,t),20),!1};const Eh=new Set;function s1(f){Eh.has(f)||(Eh.add(f),f.addEventListener("copy",()=>{}),f.addEventListener("cut",()=>{}))}const Th=["pre-wrap","normal","pre-line","break-spaces"];let Oo=!1;function Fh(){Oo=!1}class o1{constructor(t){this.lineWrapping=t,this.doc=K.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(t,a){let u=this.doc.lineAt(a).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(u+=Math.max(0,Math.ceil((a-t-u*this.lineLength*.5)/this.lineLength))),this.lineHeight*u}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Th.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let a=!1;for(let u=0;u<t.length;u++){let p=t[u];p<0?u++:this.heightSamples[Math.floor(p*10)]||(a=!0,this.heightSamples[Math.floor(p*10)]=!0)}return a}refresh(t,a,u,p,g,A){let $=Th.indexOf(t)>-1,F=Math.round(a)!=Math.round(this.lineHeight)||this.lineWrapping!=$;if(this.lineWrapping=$,this.lineHeight=a,this.charWidth=u,this.textHeight=p,this.lineLength=g,F){this.heightSamples={};for(let V=0;V<A.length;V++){let z=A[V];z<0?V++:this.heightSamples[Math.floor(z*10)]=!0}}return F}}class a1{constructor(t,a){this.from=t,this.heights=a,this.index=0}get more(){return this.index<this.heights.length}}class Vr{constructor(t,a,u,p,g){this.from=t,this.length=a,this.top=u,this.height=p,this._content=g}get type(){return typeof this._content=="number"?tn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ri?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(t){let a=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new Vr(this.from,this.length+t.length,this.top,this.height+t.height,a)}}var ki=(function(f){return f[f.ByPos=0]="ByPos",f[f.ByHeight=1]="ByHeight",f[f.ByPosNoHeight=2]="ByPosNoHeight",f})(ki||(ki={}));const Tl=.001;class cr{constructor(t,a,u=2){this.length=t,this.height=a,this.flags=u}get outdated(){return(this.flags&2)>0}set outdated(t){this.flags=(t?2:0)|this.flags&-3}setHeight(t){this.height!=t&&(Math.abs(this.height-t)>Tl&&(Oo=!0),this.height=t)}replace(t,a,u){return cr.of(u)}decomposeLeft(t,a){a.push(this)}decomposeRight(t,a){a.push(this)}applyChanges(t,a,u,p){let g=this,A=u.doc;for(let $=p.length-1;$>=0;$--){let{fromA:F,toA:V,fromB:z,toB:ie}=p[$],oe=g.lineAt(F,ki.ByPosNoHeight,u.setDoc(a),0,0),Ae=oe.to>=V?oe:g.lineAt(V,ki.ByPosNoHeight,u,0,0);for(ie+=Ae.to-V,V=Ae.to;$>0&&oe.from<=p[$-1].toA;)F=p[$-1].fromA,z=p[$-1].fromB,$--,F<oe.from&&(oe=g.lineAt(F,ki.ByPosNoHeight,u,0,0));z+=oe.from-F,F=oe.from;let $e=Sc.build(u.setDoc(A),t,z,ie);g=Fl(g,g.replace(F,V,$e))}return g.updateHeight(u,0)}static empty(){return new xr(0,0,0)}static of(t){if(t.length==1)return t[0];let a=0,u=t.length,p=0,g=0;for(;;)if(a==u)if(p>g*2){let $=t[a-1];$.break?t.splice(--a,1,$.left,null,$.right):t.splice(--a,1,$.left,$.right),u+=1+$.break,p-=$.size}else if(g>p*2){let $=t[u];$.break?t.splice(u,1,$.left,null,$.right):t.splice(u,1,$.left,$.right),u+=2+$.break,g-=$.size}else break;else if(p<g){let $=t[a++];$&&(p+=$.size)}else{let $=t[--u];$&&(g+=$.size)}let A=0;return t[a-1]==null?(A=1,a--):t[a]==null&&(A=1,u++),new u1(cr.of(t.slice(0,a)),A,cr.of(t.slice(u)))}}function Fl(f,t){return f==t?f:(f.constructor!=t.constructor&&(Oo=!0),t)}cr.prototype.size=1;const l1=mn.replace({});class Rh extends cr{constructor(t,a,u){super(t,a),this.deco=u,this.spaceAbove=0}mainBlock(t,a){return new Vr(a,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(t,a,u,p){return this.spaceAbove&&t<u+this.spaceAbove?new Vr(p,0,u,this.spaceAbove,l1):this.mainBlock(u,p)}lineAt(t,a,u,p,g){let A=this.mainBlock(p,g);return this.spaceAbove?this.blockAt(0,u,p,g).join(A):A}forEachLine(t,a,u,p,g,A){t<=g+this.length&&a>=g&&A(this.lineAt(0,ki.ByPos,u,p,g))}setMeasuredHeight(t){let a=t.heights[t.index++];a<0?(this.spaceAbove=-a,a=t.heights[t.index++]):this.spaceAbove=0,this.setHeight(a)}updateHeight(t,a=0,u=!1,p){return p&&p.from<=a&&p.more&&this.setMeasuredHeight(p),this.outdated=!1,this}toString(){return`block(${this.length})`}}class xr extends Rh{constructor(t,a,u){super(t,a,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=u}mainBlock(t,a){return new Vr(a,this.length,t+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(t,a,u){let p=u[0];return u.length==1&&(p instanceof xr||p instanceof er&&p.flags&4)&&Math.abs(this.length-p.length)<10?(p instanceof er?p=new xr(p.length,this.height,this.spaceAbove):p.height=this.height,this.outdated||(p.outdated=!1),p):cr.of(u)}updateHeight(t,a=0,u=!1,p){return p&&p.from<=a&&p.more?this.setMeasuredHeight(p):(u||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class er extends cr{constructor(t){super(t,0)}heightMetrics(t,a){let u=t.doc.lineAt(a).number,p=t.doc.lineAt(a+this.length).number,g=p-u+1,A,$=0;if(t.lineWrapping){let F=Math.min(this.height,t.lineHeight*g);A=F/g,this.length>g+1&&($=(this.height-F)/(this.length-g-1))}else A=this.height/g;return{firstLine:u,lastLine:p,perLine:A,perChar:$}}blockAt(t,a,u,p){let{firstLine:g,lastLine:A,perLine:$,perChar:F}=this.heightMetrics(a,p);if(a.lineWrapping){let V=p+(t<a.lineHeight?0:Math.round(Math.max(0,Math.min(1,(t-u)/this.height))*this.length)),z=a.doc.lineAt(V),ie=$+z.length*F,oe=Math.max(u,t-ie/2);return new Vr(z.from,z.length,oe,ie,0)}else{let V=Math.max(0,Math.min(A-g,Math.floor((t-u)/$))),{from:z,length:ie}=a.doc.line(g+V);return new Vr(z,ie,u+$*V,$,0)}}lineAt(t,a,u,p,g){if(a==ki.ByHeight)return this.blockAt(t,u,p,g);if(a==ki.ByPosNoHeight){let{from:Ae,to:$e}=u.doc.lineAt(t);return new Vr(Ae,$e-Ae,0,0,0)}let{firstLine:A,perLine:$,perChar:F}=this.heightMetrics(u,g),V=u.doc.lineAt(t),z=$+V.length*F,ie=V.number-A,oe=p+$*ie+F*(V.from-g-ie);return new Vr(V.from,V.length,Math.max(p,Math.min(oe,p+this.height-z)),z,0)}forEachLine(t,a,u,p,g,A){t=Math.max(t,g),a=Math.min(a,g+this.length);let{firstLine:$,perLine:F,perChar:V}=this.heightMetrics(u,g);for(let z=t,ie=p;z<=a;){let oe=u.doc.lineAt(z);if(z==t){let $e=oe.number-$;ie+=F*$e+V*(t-g-$e)}let Ae=F+V*oe.length;A(new Vr(oe.from,oe.length,ie,Ae,0)),ie+=Ae,z=oe.to+1}}replace(t,a,u){let p=this.length-a;if(p>0){let g=u[u.length-1];g instanceof er?u[u.length-1]=new er(g.length+p):u.push(null,new er(p-1))}if(t>0){let g=u[0];g instanceof er?u[0]=new er(t+g.length):u.unshift(new er(t-1),null)}return cr.of(u)}decomposeLeft(t,a){a.push(new er(t-1),null)}decomposeRight(t,a){a.push(null,new er(this.length-t-1))}updateHeight(t,a=0,u=!1,p){let g=a+this.length;if(p&&p.from<=a+this.length&&p.more){let A=[],$=Math.max(a,p.from),F=-1;for(p.from>a&&A.push(new er(p.from-a-1).updateHeight(t,a));$<=g&&p.more;){let z=t.doc.lineAt($).length;A.length&&A.push(null);let ie=p.heights[p.index++],oe=0;ie<0&&(oe=-ie,ie=p.heights[p.index++]),F==-1?F=ie:Math.abs(ie-F)>=Tl&&(F=-2);let Ae=new xr(z,ie,oe);Ae.outdated=!1,A.push(Ae),$+=z+1}$<=g&&A.push(null,new er(g-$).updateHeight(t,$));let V=cr.of(A);return(F<0||Math.abs(V.height-this.height)>=Tl||Math.abs(F-this.heightMetrics(t,a).perLine)>=Tl)&&(Oo=!0),Fl(this,V)}else(u||this.outdated)&&(this.setHeight(t.heightForGap(a,a+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class u1 extends cr{constructor(t,a,u){super(t.length+a+u.length,t.height+u.height,a|(t.outdated||u.outdated?2:0)),this.left=t,this.right=u,this.size=t.size+u.size}get break(){return this.flags&1}blockAt(t,a,u,p){let g=u+this.left.height;return t<g?this.left.blockAt(t,a,u,p):this.right.blockAt(t,a,g,p+this.left.length+this.break)}lineAt(t,a,u,p,g){let A=p+this.left.height,$=g+this.left.length+this.break,F=a==ki.ByHeight?t<A:t<$,V=F?this.left.lineAt(t,a,u,p,g):this.right.lineAt(t,a,u,A,$);if(this.break||(F?V.to<$:V.from>$))return V;let z=a==ki.ByPosNoHeight?ki.ByPosNoHeight:ki.ByPos;return F?V.join(this.right.lineAt($,z,u,A,$)):this.left.lineAt($,z,u,p,g).join(V)}forEachLine(t,a,u,p,g,A){let $=p+this.left.height,F=g+this.left.length+this.break;if(this.break)t<F&&this.left.forEachLine(t,a,u,p,g,A),a>=F&&this.right.forEachLine(t,a,u,$,F,A);else{let V=this.lineAt(F,ki.ByPos,u,p,g);t<V.from&&this.left.forEachLine(t,V.from-1,u,p,g,A),V.to>=t&&V.from<=a&&A(V),a>V.to&&this.right.forEachLine(V.to+1,a,u,$,F,A)}}replace(t,a,u){let p=this.left.length+this.break;if(a<p)return this.balanced(this.left.replace(t,a,u),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-p,a-p,u));let g=[];t>0&&this.decomposeLeft(t,g);let A=g.length;for(let $ of u)g.push($);if(t>0&&Bh(g,A-1),a<this.length){let $=g.length;this.decomposeRight(a,g),Bh(g,$)}return cr.of(g)}decomposeLeft(t,a){let u=this.left.length;if(t<=u)return this.left.decomposeLeft(t,a);a.push(this.left),this.break&&(u++,t>=u&&a.push(null)),t>u&&this.right.decomposeLeft(t-u,a)}decomposeRight(t,a){let u=this.left.length,p=u+this.break;if(t>=p)return this.right.decomposeRight(t-p,a);t<u&&this.left.decomposeRight(t,a),this.break&&t<p&&a.push(null),a.push(this.right)}balanced(t,a){return t.size>2*a.size||a.size>2*t.size?cr.of(this.break?[t,null,a]:[t,a]):(this.left=Fl(this.left,t),this.right=Fl(this.right,a),this.setHeight(t.height+a.height),this.outdated=t.outdated||a.outdated,this.size=t.size+a.size,this.length=t.length+this.break+a.length,this)}updateHeight(t,a=0,u=!1,p){let{left:g,right:A}=this,$=a+g.length+this.break,F=null;return p&&p.from<=a+g.length&&p.more?F=g=g.updateHeight(t,a,u,p):g.updateHeight(t,a,u),p&&p.from<=$+A.length&&p.more?F=A=A.updateHeight(t,$,u,p):A.updateHeight(t,$,u),F?this.balanced(g,A):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Bh(f,t){let a,u;f[t]==null&&(a=f[t-1])instanceof er&&(u=f[t+1])instanceof er&&f.splice(t-1,3,new er(a.length+1+u.length))}const c1=5;class Sc{constructor(t,a){this.pos=t,this.oracle=a,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,a){if(this.lineStart>-1){let u=Math.min(a,this.lineEnd),p=this.nodes[this.nodes.length-1];p instanceof xr?p.length+=u-this.pos:(u>this.pos||!this.isCovered)&&this.nodes.push(new xr(u-this.pos,-1,0)),this.writtenTo=u,a>u&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=a}point(t,a,u){if(t<a||u.heightRelevant){let p=u.widget?u.widget.estimatedHeight:0,g=u.widget?u.widget.lineBreaks:0;p<0&&(p=this.oracle.lineHeight);let A=a-t;u.block?this.addBlock(new Rh(A,p,u)):(A||g||p>=c1)&&this.addLineDeco(p,g,A)}else a>t&&this.span(t,a);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:a}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=a,this.writtenTo<t&&((this.writtenTo<t-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new xr(this.pos-t,-1,0)),this.writtenTo=this.pos}blankContent(t,a){let u=new er(a-t);return this.oracle.doc.lineAt(t).to==a&&(u.flags|=4),u}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof xr)return t;let a=new xr(0,-1,0);return this.nodes.push(a),a}addBlock(t){this.enterLine();let a=t.deco;a&&a.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,a&&a.endSide>0&&(this.covering=t)}addLineDeco(t,a,u){let p=this.ensureLine();p.length+=u,p.collapsed+=u,p.widgetHeight=Math.max(p.widgetHeight,t),p.breaks+=a,this.writtenTo=this.pos=this.pos+u}finish(t){let a=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(a instanceof xr)&&!this.isCovered?this.nodes.push(new xr(0,-1,0)):(this.writtenTo<this.pos||a==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let u=t;for(let p of this.nodes)p instanceof xr&&p.updateHeight(this.oracle,u),u+=p?p.length:1;return this.nodes}static build(t,a,u,p){let g=new Sc(u,t);return Zn.spans(a,u,p,g,0),g.finish(u)}}function f1(f,t,a){let u=new h1;return Zn.compare(f,t,a,u,0),u.changes}class h1{constructor(){this.changes=[]}compareRange(){}comparePoint(t,a,u,p){(t<a||u&&u.heightRelevant||p&&p.heightRelevant)&&Yr(t,a,this.changes,5)}}function p1(f,t){let a=f.getBoundingClientRect(),u=f.ownerDocument,p=u.defaultView||window,g=Math.max(0,a.left),A=Math.min(p.innerWidth,a.right),$=Math.max(0,a.top),F=Math.min(p.innerHeight,a.bottom);for(let V=f.parentNode;V&&V!=u.body;)if(V.nodeType==1){let z=V,ie=window.getComputedStyle(z);if((z.scrollHeight>z.clientHeight||z.scrollWidth>z.clientWidth)&&ie.overflow!="visible"){let oe=z.getBoundingClientRect();g=Math.max(g,oe.left),A=Math.min(A,oe.right),$=Math.max($,oe.top),F=Math.min(V==f.parentNode?p.innerHeight:F,oe.bottom)}V=ie.position=="absolute"||ie.position=="fixed"?z.offsetParent:z.parentNode}else if(V.nodeType==11)V=V.host;else break;return{left:g-a.left,right:Math.max(g,A)-a.left,top:$-(a.top+t),bottom:Math.max($,F)-(a.top+t)}}function d1(f){let t=f.getBoundingClientRect(),a=f.ownerDocument.defaultView||window;return t.left<a.innerWidth&&t.right>0&&t.top<a.innerHeight&&t.bottom>0}function m1(f,t){let a=f.getBoundingClientRect();return{left:0,right:a.right-a.left,top:t,bottom:a.bottom-(a.top+t)}}class wc{constructor(t,a,u,p){this.from=t,this.to=a,this.size=u,this.displaySize=p}static same(t,a){if(t.length!=a.length)return!1;for(let u=0;u<t.length;u++){let p=t[u],g=a[u];if(p.from!=g.from||p.to!=g.to||p.size!=g.size)return!1}return!0}draw(t,a){return mn.replace({widget:new g1(this.displaySize*(a?t.scaleY:t.scaleX),a)}).range(this.from,this.to)}}class g1 extends vr{constructor(t,a){super(),this.size=t,this.vertical=a}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Qh{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Lh,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ai.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let a=t.facet(Ie).some(u=>typeof u!="function"&&u.class=="cm-lineWrapping");this.heightOracle=new o1(a),this.stateDeco=t.facet(yt).filter(u=>typeof u!="function"),this.heightMap=cr.empty().applyChanges(this.stateDeco,K.empty,this.heightOracle.setDoc(t.doc),[new Dr(0,0,0,t.doc.length)]);for(let u=0;u<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());u++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=mn.set(this.lineGaps.map(u=>u.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:a}=this.state.selection;for(let u=0;u<=1;u++){let p=u?a.head:a.anchor;if(!t.some(({from:g,to:A})=>p>=g&&p<=A)){let{from:g,to:A}=this.lineBlockAt(p);t.push(new Rl(g,A))}}return this.viewports=t.sort((u,p)=>u.from-p.from),this.updateScaler()}updateScaler(){let t=this.scaler;return this.scaler=this.heightMap.height<=7e6?Lh:new Pc(this.heightOracle,this.heightMap,this.viewports),t.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,t=>{this.viewportLines.push(ya(t,this.scaler))})}update(t,a=null){this.state=t.state;let u=this.stateDeco;this.stateDeco=this.state.facet(yt).filter(z=>typeof z!="function");let p=t.changedRanges,g=Dr.extendWithRanges(p,f1(u,this.stateDeco,t?t.changes:Vt.empty(this.state.doc.length))),A=this.heightMap.height,$=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Fh(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),g),(this.heightMap.height!=A||Oo)&&(t.flags|=2),$?(this.scrollAnchorPos=t.changes.mapPos($.from,-1),this.scrollAnchorHeight=$.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=A);let F=g.length?this.mapViewport(this.viewport,t.changes):this.viewport;(a&&(a.range.head<F.from||a.range.head>F.to)||!this.viewportIsAppropriate(F))&&(F=this.getViewport(0,a));let V=F.from!=this.viewport.from||F.to!=this.viewport.to;this.viewport=F,t.flags|=this.updateForViewport(),(V||!t.changes.empty||t.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(t.changes),a&&(this.scrollTarget=a),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(vl)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let a=t.contentDOM,u=window.getComputedStyle(a),p=this.heightOracle,g=u.whiteSpace;this.defaultTextDirection=u.direction=="rtl"?Ai.RTL:Ai.LTR;let A=this.heightOracle.mustRefreshForWrapping(g),$=a.getBoundingClientRect(),F=A||this.mustMeasureContent||this.contentDOMHeight!=$.height;this.contentDOMHeight=$.height,this.mustMeasureContent=!1;let V=0,z=0;if($.width&&$.height){let{scaleX:an,scaleY:Gt}=ol(a,$);(an>.005&&Math.abs(this.scaleX-an)>.005||Gt>.005&&Math.abs(this.scaleY-Gt)>.005)&&(this.scaleX=an,this.scaleY=Gt,V|=16,A=F=!0)}let ie=(parseInt(u.paddingTop)||0)*this.scaleY,oe=(parseInt(u.paddingBottom)||0)*this.scaleY;(this.paddingTop!=ie||this.paddingBottom!=oe)&&(this.paddingTop=ie,this.paddingBottom=oe,V|=18),this.editorWidth!=t.scrollDOM.clientWidth&&(p.lineWrapping&&(F=!0),this.editorWidth=t.scrollDOM.clientWidth,V|=16);let Ae=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=Ae&&(this.scrollAnchorHeight=-1,this.scrollTop=Ae),this.scrolledToBottom=ll(t.scrollDOM);let $e=(this.printing?m1:p1)(a,this.paddingTop),je=$e.top-this.pixelViewport.top,ot=$e.bottom-this.pixelViewport.bottom;this.pixelViewport=$e;let bt=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(bt!=this.inView&&(this.inView=bt,bt&&(F=!0)),!this.inView&&!this.scrollTarget&&!d1(t.dom))return 0;let Xt=$.width;if((this.contentDOMWidth!=Xt||this.editorHeight!=t.scrollDOM.clientHeight)&&(this.contentDOMWidth=$.width,this.editorHeight=t.scrollDOM.clientHeight,V|=16),F){let an=t.docView.measureVisibleLineHeights(this.viewport);if(p.mustRefreshForHeights(an)&&(A=!0),A||p.lineWrapping&&Math.abs(Xt-this.contentDOMWidth)>p.charWidth){let{lineHeight:Gt,charWidth:nn,textHeight:en}=t.docView.measureTextSize();A=Gt>0&&p.refresh(g,Gt,nn,en,Math.max(5,Xt/nn),an),A&&(t.docView.minWidth=0,V|=16)}je>0&&ot>0?z=Math.max(je,ot):je<0&&ot<0&&(z=Math.min(je,ot)),Fh();for(let Gt of this.viewports){let nn=Gt.from==this.viewport.from?an:t.docView.measureVisibleLineHeights(Gt);this.heightMap=(A?cr.empty().applyChanges(this.stateDeco,K.empty,this.heightOracle,[new Dr(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(p,0,A,new a1(Gt.from,nn))}Oo&&(V|=2)}let Zt=!this.viewportIsAppropriate(this.viewport,z)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Zt&&(V&2&&(V|=this.updateScaler()),this.viewport=this.getViewport(z,this.scrollTarget),V|=this.updateForViewport()),(V&2||Zt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(A?[]:this.lineGaps,t)),V|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),V}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,a){let u=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),p=this.heightMap,g=this.heightOracle,{visibleTop:A,visibleBottom:$}=this,F=new Rl(p.lineAt(A-u*1e3,ki.ByHeight,g,0,0).from,p.lineAt($+(1-u)*1e3,ki.ByHeight,g,0,0).to);if(a){let{head:V}=a.range;if(V<F.from||V>F.to){let z=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),ie=p.lineAt(V,ki.ByPos,g,0,0),oe;a.y=="center"?oe=(ie.top+ie.bottom)/2-z/2:a.y=="start"||a.y=="nearest"&&V<F.from?oe=ie.top:oe=ie.bottom-z,F=new Rl(p.lineAt(oe-1e3/2,ki.ByHeight,g,0,0).from,p.lineAt(oe+z+1e3/2,ki.ByHeight,g,0,0).to)}}return F}mapViewport(t,a){let u=a.mapPos(t.from,-1),p=a.mapPos(t.to,1);return new Rl(this.heightMap.lineAt(u,ki.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(p,ki.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:a},u=0){if(!this.inView)return!0;let{top:p}=this.heightMap.lineAt(t,ki.ByPos,this.heightOracle,0,0),{bottom:g}=this.heightMap.lineAt(a,ki.ByPos,this.heightOracle,0,0),{visibleTop:A,visibleBottom:$}=this;return(t==0||p<=A-Math.max(10,Math.min(-u,250)))&&(a==this.state.doc.length||g>=$+Math.max(10,Math.min(u,250)))&&p>A-2*1e3&&g<$+2*1e3}mapLineGaps(t,a){if(!t.length||a.empty)return t;let u=[];for(let p of t)a.touchesRange(p.from,p.to)||u.push(new wc(a.mapPos(p.from),a.mapPos(p.to),p.size,p.displaySize));return u}ensureLineGaps(t,a){let u=this.heightOracle.lineWrapping,p=u?1e4:2e3,g=p>>1,A=p<<1;if(this.defaultTextDirection!=Ai.LTR&&!u)return[];let $=[],F=(z,ie,oe,Ae)=>{if(ie-z<g)return;let $e=this.state.selection.main,je=[$e.from];$e.empty||je.push($e.to);for(let bt of je)if(bt>z&&bt<ie){F(z,bt-10,oe,Ae),F(bt+10,ie,oe,Ae);return}let ot=O1(t,bt=>bt.from>=oe.from&&bt.to<=oe.to&&Math.abs(bt.from-z)<g&&Math.abs(bt.to-ie)<g&&!je.some(Xt=>bt.from<Xt&&bt.to>Xt));if(!ot){if(ie<oe.to&&a&&u&&a.visibleRanges.some(Zt=>Zt.from<=ie&&Zt.to>=ie)){let Zt=a.moveToLineBoundary(ft.cursor(ie),!1,!0).head;Zt>z&&(ie=Zt)}let bt=this.gapSize(oe,z,ie,Ae),Xt=u||bt<2e6?bt:2e6;ot=new wc(z,ie,bt,Xt)}$.push(ot)},V=z=>{if(z.length<A||z.type!=tn.Text)return;let ie=_1(z.from,z.to,this.stateDeco);if(ie.total<A)return;let oe=this.scrollTarget?this.scrollTarget.range.head:null,Ae,$e;if(u){let je=p/this.heightOracle.lineLength*this.heightOracle.lineHeight,ot,bt;if(oe!=null){let Xt=Ql(ie,oe),Zt=((this.visibleBottom-this.visibleTop)/2+je)/z.height;ot=Xt-Zt,bt=Xt+Zt}else ot=(this.visibleTop-z.top-je)/z.height,bt=(this.visibleBottom-z.top+je)/z.height;Ae=Bl(ie,ot),$e=Bl(ie,bt)}else{let je=ie.total*this.heightOracle.charWidth,ot=p*this.heightOracle.charWidth,bt=0;if(je>2e6)for(let nn of t)nn.from>=z.from&&nn.from<z.to&&nn.size!=nn.displaySize&&nn.from*this.heightOracle.charWidth+bt<this.pixelViewport.left&&(bt=nn.size-nn.displaySize);let Xt=this.pixelViewport.left+bt,Zt=this.pixelViewport.right+bt,an,Gt;if(oe!=null){let nn=Ql(ie,oe),en=((Zt-Xt)/2+ot)/je;an=nn-en,Gt=nn+en}else an=(Xt-ot)/je,Gt=(Zt+ot)/je;Ae=Bl(ie,an),$e=Bl(ie,Gt)}Ae>z.from&&F(z.from,Ae,z,ie),$e<z.to&&F($e,z.to,z,ie)};for(let z of this.viewportLines)Array.isArray(z.type)?z.type.forEach(V):V(z);return $}gapSize(t,a,u,p){let g=Ql(p,u)-Ql(p,a);return this.heightOracle.lineWrapping?t.height*g:p.total*this.heightOracle.charWidth*g}updateLineGaps(t){wc.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=mn.set(t.map(a=>a.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(t){let a=this.stateDeco;this.lineGaps.length&&(a=a.concat(this.lineGapDeco));let u=[];Zn.spans(a,this.viewport.from,this.viewport.to,{span(g,A){u.push({from:g,to:A})},point(){}},20);let p=0;if(u.length!=this.visibleRanges.length)p=12;else for(let g=0;g<u.length&&!(p&8);g++){let A=this.visibleRanges[g],$=u[g];(A.from!=$.from||A.to!=$.to)&&(p|=4,t&&t.mapPos(A.from,-1)==$.from&&t.mapPos(A.to,1)==$.to||(p|=8))}return this.visibleRanges=u,p}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find(a=>a.from<=t&&a.to>=t)||ya(this.heightMap.lineAt(t,ki.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return t>=this.viewportLines[0].top&&t<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(a=>a.top<=t&&a.bottom>=t)||ya(this.heightMap.lineAt(this.scaler.fromDOM(t),ki.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let a=this.lineBlockAtHeight(t+8);return a.from>=this.viewport.from||this.viewportLines[0].top-t>200?a:this.viewportLines[0]}elementAtHeight(t){return ya(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Rl{constructor(t,a){this.from=t,this.to=a}}function _1(f,t,a){let u=[],p=f,g=0;return Zn.spans(a,f,t,{span(){},point(A,$){A>p&&(u.push({from:p,to:A}),g+=A-p),p=$}},20),p<t&&(u.push({from:p,to:t}),g+=t-p),{total:g,ranges:u}}function Bl({total:f,ranges:t},a){if(a<=0)return t[0].from;if(a>=1)return t[t.length-1].to;let u=Math.floor(f*a);for(let p=0;;p++){let{from:g,to:A}=t[p],$=A-g;if(u<=$)return g+u;u-=$}}function Ql(f,t){let a=0;for(let{from:u,to:p}of f.ranges){if(t<=p){a+=t-u;break}a+=p-u}return a/f.total}function O1(f,t){for(let a of f)if(t(a))return a}const Lh={toDOM(f){return f},fromDOM(f){return f},scale:1,eq(f){return f==this}};class Pc{constructor(t,a,u){let p=0,g=0,A=0;this.viewports=u.map(({from:$,to:F})=>{let V=a.lineAt($,ki.ByPos,t,0,0).top,z=a.lineAt(F,ki.ByPos,t,0,0).bottom;return p+=z-V,{from:$,to:F,top:V,bottom:z,domTop:0,domBottom:0}}),this.scale=(7e6-p)/(a.height-p);for(let $ of this.viewports)$.domTop=A+($.top-g)*this.scale,A=$.domBottom=$.domTop+($.bottom-$.top),g=$.bottom}toDOM(t){for(let a=0,u=0,p=0;;a++){let g=a<this.viewports.length?this.viewports[a]:null;if(!g||t<g.top)return p+(t-u)*this.scale;if(t<=g.bottom)return g.domTop+(t-g.top);u=g.bottom,p=g.domBottom}}fromDOM(t){for(let a=0,u=0,p=0;;a++){let g=a<this.viewports.length?this.viewports[a]:null;if(!g||t<g.domTop)return u+(t-p)/this.scale;if(t<=g.domBottom)return g.top+(t-g.domTop);u=g.bottom,p=g.domBottom}}eq(t){return t instanceof Pc?this.scale==t.scale&&this.viewports.length==t.viewports.length&&this.viewports.every((a,u)=>a.from==t.viewports[u].from&&a.to==t.viewports[u].to):!1}}function ya(f,t){if(t.scale==1)return f;let a=t.toDOM(f.top),u=t.toDOM(f.bottom);return new Vr(f.from,f.length,a,u-a,Array.isArray(f._content)?f._content.map(p=>ya(p,t)):f._content)}const Ll=Dt.define({combine:f=>f.join(" ")}),Mc=Dt.define({combine:f=>f.indexOf(!0)>-1}),kc=jr.newName(),Nh=jr.newName(),Gh=jr.newName(),Zh={"&light":"."+Nh,"&dark":"."+Gh};function $c(f,t,a){return new jr(t,{finish(u){return/&/.test(u)?u.replace(/&\w*/,p=>{if(p=="&")return f;if(!a||!a[p])throw new RangeError(`Unsupported selector: ${p}`);return a[p]}):f+" "+u}})}const y1=$c("."+kc,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zh),b1={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Dc=sn.ie&&sn.ie_version<=11;class A1{constructor(t){this.view=t,this.active=!1,this.editContext=null,this.selectionRange=new yn,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver(a=>{for(let u of a)this.queue.push(u);(sn.ie&&sn.ie_version<=11||sn.ios&&t.composing)&&a.some(u=>u.type=="childList"&&u.removedNodes.length||u.type=="characterData"&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&sn.android&&t.constructor.EDIT_CONTEXT!==!1&&!(sn.chrome&&sn.chrome_version<126)&&(this.editContext=new x1(t),t.state.facet(Zr)&&(t.contentDOM.editContext=this.editContext.editContext)),Dc&&(this.onCharData=a=>{this.queue.push({target:a.target,type:"characterData",oldValue:a.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var a;((a=this.view.docView)===null||a===void 0?void 0:a.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(a=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),a.length>0&&a[a.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(a=>{a.length>0&&a[a.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(t){(t.type=="change"||!t.type)&&!t.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some((a,u)=>a!=t[u]))){this.gapIntersection.disconnect();for(let a of t)this.gapIntersection.observe(a);this.gaps=t}}onSelectionChange(t){let a=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:u}=this,p=this.selectionRange;if(u.state.facet(Zr)?u.root.activeElement!=this.dom:!ro(this.dom,p))return;let g=p.anchorNode&&u.docView.tile.nearest(p.anchorNode);if(g&&g.isWidget()&&g.widget.ignoreEvent(t)){a||(this.selectionChanged=!1);return}(sn.ie&&sn.ie_version<=11||sn.android&&sn.chrome)&&!u.state.selection.main.empty&&p.focusNode&&ur(p.focusNode,p.focusOffset,p.anchorNode,p.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,a=fs(t.root);if(!a)return!1;let u=sn.safari&&t.root.nodeType==11&&t.root.activeElement==this.dom&&v1(this.view,a)||a;if(!u||this.selectionRange.eq(u))return!1;let p=ro(this.dom,u);return p&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&ac(this.dom,u)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(u),p&&(this.selectionChanged=!0),!0)}setSelectionRange(t,a){this.selectionRange.set(t.node,t.offset,a.node,a.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,a=null;for(let u=this.dom;u;)if(u.nodeType==1)!a&&t<this.scrollTargets.length&&this.scrollTargets[t]==u?t++:a||(a=this.scrollTargets.slice(0,t)),a&&a.push(u),u=u.assignedSlot||u.parentNode;else if(u.nodeType==11)u=u.host;else break;if(t<this.scrollTargets.length&&!a&&(a=this.scrollTargets.slice(0,t)),a){for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);for(let u of this.scrollTargets=a)u.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,b1),Dc&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Dc&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,a){var u;if(!this.delayedAndroidKey){let p=()=>{let g=this.delayedAndroidKey;g&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=g.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&g.force&&Gr(this.dom,g.key,g.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(p)}(!this.delayedAndroidKey||t=="Enter")&&(this.delayedAndroidKey={key:t,keyCode:a,force:this.lastChange<Date.now()-50||!!(!((u=this.delayedAndroidKey)===null||u===void 0)&&u.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let a=-1,u=-1,p=!1;for(let g of t){let A=this.readMutation(g);A&&(A.typeOver&&(p=!0),a==-1?{from:a,to:u}=A:(a=Math.min(A.from,a),u=Math.max(A.to,u)))}return{from:a,to:u,typeOver:p}}readChange(){let{from:t,to:a,typeOver:u}=this.processRecords(),p=this.selectionChanged&&ro(this.dom,this.selectionRange);if(t<0&&!p)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let g=new Gm(this.view,t,a,u);return this.view.docView.domChanged={newSel:g.newSel?g.newSel.main:null},g}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let a=this.readChange();if(!a)return this.view.requestMeasure(),!1;let u=this.view.state,p=gh(this.view,a);return this.view.state==u&&(a.domChanged||a.newSel&&!a.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),p}readMutation(t){let a=this.view.docView.tile.nearest(t.target);if(!a||a.isWidget())return null;if(a.markDirty(t.type=="attributes"),t.type=="childList"){let u=Ih(a,t.previousSibling||t.target.previousSibling,-1),p=Ih(a,t.nextSibling||t.target.nextSibling,1);return{from:u?a.posAfter(u):a.posAtStart,to:p?a.posBefore(p):a.posAtEnd,typeOver:!1}}else return t.type=="characterData"?{from:a.posAtStart,to:a.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}update(t){this.editContext&&(this.editContext.update(t),t.startState.facet(Zr)!=t.state.facet(Zr)&&(t.view.contentDOM.editContext=t.state.facet(Zr)?this.editContext.editContext:null))}destroy(){var t,a,u;this.stop(),(t=this.intersection)===null||t===void 0||t.disconnect(),(a=this.gapIntersection)===null||a===void 0||a.disconnect(),(u=this.resizeScroll)===null||u===void 0||u.disconnect();for(let p of this.scrollTargets)p.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Ih(f,t,a){for(;t;){let u=Xi.get(t);if(u&&u.parent==f)return u;let p=t.parentNode;t=p!=f.dom?p:a>0?t.nextSibling:t.previousSibling}return null}function Vh(f,t){let a=t.startContainer,u=t.startOffset,p=t.endContainer,g=t.endOffset,A=f.docView.domAtPos(f.state.selection.main.anchor,1);return ur(A.node,A.offset,p,g)&&([a,u,p,g]=[p,g,a,u]),{anchorNode:a,anchorOffset:u,focusNode:p,focusOffset:g}}function v1(f,t){if(t.getComposedRanges){let p=t.getComposedRanges(f.root)[0];if(p)return Vh(f,p)}let a=null;function u(p){p.preventDefault(),p.stopImmediatePropagation(),a=p.getTargetRanges()[0]}return f.contentDOM.addEventListener("beforeinput",u,!0),f.dom.ownerDocument.execCommand("indent"),f.contentDOM.removeEventListener("beforeinput",u,!0),a?Vh(f,a):null}class x1{constructor(t){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(t.state);let a=this.editContext=new window.EditContext({text:t.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,t.state.selection.main.anchor))),selectionEnd:this.toContextPos(t.state.selection.main.head)});this.handlers.textupdate=u=>{let p=t.state.selection.main,{anchor:g,head:A}=p,$=this.toEditorPos(u.updateRangeStart),F=this.toEditorPos(u.updateRangeEnd);t.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:u.updateRangeStart,editorBase:$,drifted:!1});let V=F-$>u.text.length;$==this.from&&g<this.from?$=g:F==this.to&&g>this.to&&(F=g);let z=_h(t.state.sliceDoc($,F),u.text,(V?p.from:p.to)-$,V?"end":null);if(!z){let oe=ft.single(this.toEditorPos(u.selectionStart),this.toEditorPos(u.selectionEnd));oe.main.eq(p)||t.dispatch({selection:oe,userEvent:"select"});return}let ie={from:z.from+$,to:z.toA+$,insert:K.of(u.text.slice(z.from,z.toB).split(`
`))};if((sn.mac||sn.android)&&ie.from==A-1&&/^\. ?$/.test(u.text)&&t.contentDOM.getAttribute("autocorrect")=="off"&&(ie={from:$,to:F,insert:K.of([u.text.replace("."," ")])}),this.pendingContextChange=ie,!t.state.readOnly){let oe=this.to-this.from+(ie.to-ie.from+ie.insert.length);xc(t,ie,ft.single(this.toEditorPos(u.selectionStart,oe),this.toEditorPos(u.selectionEnd,oe)))}this.pendingContextChange&&(this.revertPending(t.state),this.setSelection(t.state)),ie.from<ie.to&&!ie.insert.length&&t.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(a.text.slice(Math.max(0,u.updateRangeStart-1),Math.min(a.text.length,u.updateRangeStart+1)))&&this.handlers.compositionend(u)},this.handlers.characterboundsupdate=u=>{let p=[],g=null;for(let A=this.toEditorPos(u.rangeStart),$=this.toEditorPos(u.rangeEnd);A<$;A++){let F=t.coordsForChar(A);g=F&&new DOMRect(F.left,F.top,F.right-F.left,F.bottom-F.top)||g||new DOMRect,p.push(g)}a.updateCharacterBounds(u.rangeStart,p)},this.handlers.textformatupdate=u=>{let p=[];for(let g of u.getTextFormats()){let A=g.underlineStyle,$=g.underlineThickness;if(!/none/i.test(A)&&!/none/i.test($)){let F=this.toEditorPos(g.rangeStart),V=this.toEditorPos(g.rangeEnd);if(F<V){let z=`text-decoration: underline ${/^[a-z]/.test(A)?A+" ":A=="Dashed"?"dashed ":A=="Squiggle"?"wavy ":""}${/thin/i.test($)?1:2}px`;p.push(mn.mark({attributes:{style:z}}).range(F,V))}}}t.dispatch({effects:Cl.of(mn.set(p))})},this.handlers.compositionstart=()=>{t.inputState.composing<0&&(t.inputState.composing=0,t.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(t.inputState.composing=-1,t.inputState.compositionFirstChange=null,this.composing){let{drifted:u}=this.composing;this.composing=null,u&&this.reset(t.state)}};for(let u in this.handlers)a.addEventListener(u,this.handlers[u]);this.measureReq={read:u=>{this.editContext.updateControlBounds(u.contentDOM.getBoundingClientRect());let p=fs(u.root);p&&p.rangeCount&&this.editContext.updateSelectionBounds(p.getRangeAt(0).getBoundingClientRect())}}}applyEdits(t){let a=0,u=!1,p=this.pendingContextChange;return t.changes.iterChanges((g,A,$,F,V)=>{if(u)return;let z=V.length-(A-g);if(p&&A>=p.to)if(p.from==g&&p.to==A&&p.insert.eq(V)){p=this.pendingContextChange=null,a+=z,this.to+=z;return}else p=null,this.revertPending(t.state);if(g+=a,A+=a,A<=this.from)this.from+=z,this.to+=z;else if(g<this.to){if(g<this.from||A>this.to||this.to-this.from+V.length>3e4){u=!0;return}this.editContext.updateText(this.toContextPos(g),this.toContextPos(A),V.toString()),this.to+=z}a+=z}),p&&!u&&this.revertPending(t.state),!u}update(t){let a=this.pendingContextChange,u=t.startState.selection.main;this.composing&&(this.composing.drifted||!t.changes.touchesRange(u.from,u.to)&&t.transactions.some(p=>!p.isUserEvent("input.type")&&p.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=t.changes.mapPos(this.composing.editorBase)):!this.applyEdits(t)||!this.rangeIsValid(t.state)?(this.pendingContextChange=null,this.reset(t.state)):(t.docChanged||t.selectionSet||a)&&this.setSelection(t.state),(t.geometryChanged||t.docChanged||t.selectionSet)&&t.view.requestMeasure(this.measureReq)}resetRange(t){let{head:a}=t.selection.main;this.from=Math.max(0,a-1e4),this.to=Math.min(t.doc.length,a+1e4)}reset(t){this.resetRange(t),this.editContext.updateText(0,this.editContext.text.length,t.doc.sliceString(this.from,this.to)),this.setSelection(t)}revertPending(t){let a=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(a.from),this.toContextPos(a.from+a.insert.length),t.doc.sliceString(a.from,a.to))}setSelection(t){let{main:a}=t.selection,u=this.toContextPos(Math.max(this.from,Math.min(this.to,a.anchor))),p=this.toContextPos(a.head);(this.editContext.selectionStart!=u||this.editContext.selectionEnd!=p)&&this.editContext.updateSelection(u,p)}rangeIsValid(t){let{head:a}=t.selection.main;return!(this.from>0&&a-this.from<500||this.to<t.doc.length&&this.to-a<500||this.to-this.from>1e4*3)}toEditorPos(t,a=this.to-this.from){t=Math.min(t,a);let u=this.composing;return u&&u.drifted?u.editorBase+(t-u.contextBase):t+this.from}toContextPos(t){let a=this.composing;return a&&a.drifted?a.contextBase+(t-a.editorBase):t-this.from}destroy(){for(let t in this.handlers)this.editContext.removeEventListener(t,this.handlers[t])}}class on{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){var a;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:u}=t;this.dispatchTransactions=t.dispatchTransactions||u&&(p=>p.forEach(g=>u(g,this)))||(p=>this.update(p)),this.dispatch=this.dispatch.bind(this),this._root=t.root||al(t.parent)||document,this.viewState=new Qh(t.state||at.create(t)),t.scrollTo&&t.scrollTo.is(ho)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Kr).map(p=>new te(p));for(let p of this.plugins)p.update(this);this.observer=new A1(this),this.inputState=new Xm(this),this.inputState.ensureHandlers(this.plugins),this.docView=new oh(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((a=document.fonts)===null||a===void 0)&&a.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...t){let a=t.length==1&&t[0]instanceof ui?t:t.length==1&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(a,this)}update(t){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let a=!1,u=!1,p,g=this.state;for(let oe of t){if(oe.startState!=g)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");g=oe.state}if(this.destroyed){this.viewState.state=g;return}let A=this.hasFocus,$=0,F=null;t.some(oe=>oe.annotation(kh))?(this.inputState.notifiedFocused=A,$=1):A!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=A,F=$h(g,A),F||($=1));let V=this.observer.delayedAndroidKey,z=null;if(V?(this.observer.clearDelayedAndroidKey(),z=this.observer.readChange(),(z&&!this.state.doc.eq(g.doc)||!this.state.selection.eq(g.selection))&&(z=null)):this.observer.clear(),g.facet(at.phrases)!=this.state.facet(at.phrases))return this.setState(g);p=Sl.create(this,g,t),p.flags|=$;let ie=this.viewState.scrollTarget;try{this.updateState=2;for(let oe of t){if(ie&&(ie=ie.map(oe.changes)),oe.scrollIntoView){let{main:Ae}=oe.state.selection;ie=new vs(Ae.empty?Ae:ft.cursor(Ae.head,Ae.head>Ae.anchor?-1:1))}for(let Ae of oe.effects)Ae.is(ho)&&(ie=Ae.value.clip(this.state))}this.viewState.update(p,ie),this.bidiCache=Nl.update(this.bidiCache,p.changes),p.empty||(this.updatePlugins(p),this.inputState.update(p)),a=this.docView.update(p),this.state.facet(ga)!=this.styleModules&&this.mountStyles(),u=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(a,t.some(oe=>oe.isUserEvent("select.pointer")))}finally{this.updateState=0}if(p.startState.facet(Ll)!=p.state.facet(Ll)&&(this.viewState.mustMeasureContent=!0),(a||u||ie||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),a&&this.docViewUpdate(),!p.empty)for(let oe of this.state.facet(pa))try{oe(p)}catch(Ae){Vi(this.state,Ae,"update listener")}(F||z)&&Promise.resolve().then(()=>{F&&this.state==F.startState&&this.dispatch(F),z&&!gh(this,z)&&V.force&&Gr(this.contentDOM,V.key,V.keyCode)})}setState(t){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=t;return}this.updateState=2;let a=this.hasFocus;try{for(let u of this.plugins)u.destroy(this);this.viewState=new Qh(t),this.plugins=t.facet(Kr).map(u=>new te(u)),this.pluginMap.clear();for(let u of this.plugins)u.update(this);this.docView.destroy(),this.docView=new oh(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}a&&this.focus(),this.requestMeasure()}updatePlugins(t){let a=t.startState.facet(Kr),u=t.state.facet(Kr);if(a!=u){let p=[];for(let g of u){let A=a.indexOf(g);if(A<0)p.push(new te(g));else{let $=this.plugins[A];$.mustUpdate=t,p.push($)}}for(let g of this.plugins)g.mustUpdate!=t&&g.destroy(this);this.plugins=p,this.pluginMap.clear()}else for(let p of this.plugins)p.mustUpdate=t;for(let p=0;p<this.plugins.length;p++)this.plugins[p].update(this);a!=u&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let a=t.value;if(a&&a.docViewUpdate)try{a.docViewUpdate(this)}catch(u){Vi(this.state,u,"doc view update listener")}}}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,t&&this.observer.forceFlush();let a=null,u=this.scrollDOM,p=u.scrollTop*this.scaleY,{scrollAnchorPos:g,scrollAnchorHeight:A}=this.viewState;Math.abs(p-this.viewState.scrollTop)>1&&(A=-1),this.viewState.scrollAnchorHeight=-1;try{for(let $=0;;$++){if(A<0)if(ll(u))g=-1,A=this.viewState.heightMap.height;else{let Ae=this.viewState.scrollAnchorAt(p);g=Ae.from,A=Ae.top}this.updateState=1;let F=this.viewState.measure(this);if(!F&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if($>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let V=[];F&4||([this.measureRequests,V]=[V,this.measureRequests]);let z=V.map(Ae=>{try{return Ae.read(this)}catch($e){return Vi(this.state,$e),Xh}}),ie=Sl.create(this,this.state,[]),oe=!1;ie.flags|=F,a?a.flags|=F:a=ie,this.updateState=2,ie.empty||(this.updatePlugins(ie),this.inputState.update(ie),this.updateAttrs(),oe=this.docView.update(ie),oe&&this.docViewUpdate());for(let Ae=0;Ae<V.length;Ae++)if(z[Ae]!=Xh)try{let $e=V[Ae];$e.write&&$e.write(z[Ae],this)}catch($e){Vi(this.state,$e)}if(oe&&this.docView.updateSelection(!0),!ie.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,A=-1;continue}else{let $e=(g<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(g).top)-A;if($e>1||$e<-1){p=p+$e,u.scrollTop=p/this.scaleY,A=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(a&&!a.empty)for(let $ of this.state.facet(pa))$(a)}get themeClasses(){return kc+" "+(this.state.facet(Mc)?Gh:Nh)+" "+this.state.facet(Ll)}updateAttrs(){let t=Wh(this,Pe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),a={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Zr)?"true":"false",class:"cm-content",style:`${sn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(a["aria-readonly"]="true"),Wh(this,Ie,a);let u=this.observer.ignore(()=>{let p=cs(this.contentDOM,this.contentAttrs,a),g=cs(this.dom,this.editorAttrs,t);return p||g});return this.editorAttrs=t,this.contentAttrs=a,u}showAnnouncements(t){let a=!0;for(let u of t)for(let p of u.effects)if(p.is(on.announce)){a&&(this.announceDOM.textContent=""),a=!1;let g=this.announceDOM.appendChild(document.createElement("div"));g.textContent=p.value}}mountStyles(){this.styleModules=this.state.facet(ga);let t=this.state.facet(on.cspNonce);jr.mount(this.root,this.styleModules.concat(y1).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),t){if(this.measureRequests.indexOf(t)>-1)return;if(t.key!=null){for(let a=0;a<this.measureRequests.length;a++)if(this.measureRequests[a].key===t.key){this.measureRequests[a]=t;return}}this.measureRequests.push(t)}}plugin(t){let a=this.pluginMap.get(t);return(a===void 0||a&&a.plugin!=t)&&this.pluginMap.set(t,a=this.plugins.find(u=>u.plugin==t)||null),a&&a.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,a,u){return Ac(this,t,lh(this,t,a,u))}moveByGroup(t,a){return Ac(this,t,lh(this,t,a,u=>Rm(this,t.head,u)))}visualLineSide(t,a){let u=this.bidiSpans(t),p=this.textDirectionAt(t.from),g=u[a?u.length-1:0];return ft.cursor(g.side(a,p)+t.from,g.forward(!a,p)?1:-1)}moveToLineBoundary(t,a,u=!0){return Fm(this,t,a,u)}moveVertically(t,a,u){return Ac(this,t,Bm(this,t,a,u))}domAtPos(t,a=1){return this.docView.domAtPos(t,a)}posAtDOM(t,a=0){return this.docView.posFromDOM(t,a)}posAtCoords(t,a=!0){this.readMeasured();let u=vc(this,t,a);return u&&u.pos}posAndSideAtCoords(t,a=!0){return this.readMeasured(),vc(this,t,a)}coordsAtPos(t,a=1){this.readMeasured();let u=this.docView.coordsAt(t,a);if(!u||u.left==u.right)return u;let p=this.state.doc.lineAt(t),g=this.bidiSpans(p),A=g[ji.find(g,t-p.from,-1,a)];return ao(u,A.dir==Ai.LTR==a>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Al)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>C1)return ml(t.length);let a=this.textDirectionAt(t.from),u;for(let g of this.bidiCache)if(g.from==t.from&&g.dir==a&&(g.fresh||ca(g.isolates,u=th(this,t))))return g.order;u||(u=th(this,t));let p=fc(t.text,a,u);return this.bidiCache.push(new Nl(t.from,t.to,a,u,!0,p)),p}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||sn.safari&&((t=this.inputState)===null||t===void 0?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{oa(this.contentDOM),this.docView.updateSelection()})}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((t.nodeType==9?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,a={}){return ho.of(new vs(typeof t=="number"?ft.cursor(t):t,a.y,a.x,a.yMargin,a.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:a}=this.scrollDOM,u=this.viewState.scrollAnchorAt(t);return ho.of(new vs(ft.cursor(u.from),"start","start",u.top-t,a,!0))}setTabFocusMode(t){t==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof t=="boolean"?this.inputState.tabFocusMode=t?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+t)}static domEventHandlers(t){return Ri.define(()=>({}),{eventHandlers:t})}static domEventObservers(t){return Ri.define(()=>({}),{eventObservers:t})}static theme(t,a){let u=jr.newName(),p=[Ll.of(u),ga.of($c(`.${u}`,t))];return a&&a.dark&&p.push(Mc.of(!0)),p}static baseTheme(t){return Di.lowest(ga.of($c("."+kc,t,Zh)))}static findFromDOM(t){var a;let u=t.querySelector(".cm-content"),p=u&&Xi.get(u)||Xi.get(t);return((a=p?.root)===null||a===void 0?void 0:a.view)||null}}on.styleModule=ga,on.inputHandler=bl,on.clipboardInputFilter=da,on.clipboardOutputFilter=ma,on.scrollHandler=xl,on.focusChangeEffect=ps,on.perLineTextDirection=Al,on.exceptionSink=co,on.updateListener=pa,on.editable=Zr,on.mouseSelectionStyle=yl,on.dragMovesSelection=Ol,on.clickAddsSelectionRange=_l,on.decorations=yt,on.blockWrappers=fn,on.outerDecorations=wi,on.atomicRanges=Ji,on.bidiIsolatedRanges=ms,on.scrollMargins=nh,on.darkTheme=Mc,on.cspNonce=Dt.define({combine:f=>f.length?f[0]:""}),on.contentAttributes=Ie,on.editorAttributes=Pe,on.lineWrapping=on.contentAttributes.of({class:"cm-lineWrapping"}),on.announce=Et.define();const C1=4096,Xh={};class Nl{constructor(t,a,u,p,g,A){this.from=t,this.to=a,this.dir=u,this.isolates=p,this.fresh=g,this.order=A}static update(t,a){if(a.empty&&!t.some(g=>g.fresh))return t;let u=[],p=t.length?t[t.length-1].dir:Ai.LTR;for(let g=Math.max(0,t.length-10);g<t.length;g++){let A=t[g];A.dir==p&&!a.touchesRange(A.from,A.to)&&u.push(new Nl(a.mapPos(A.from,1),a.mapPos(A.to,-1),A.dir,A.isolates,!1,A.order))}return u}}function Wh(f,t,a){for(let u=f.state.facet(t),p=u.length-1;p>=0;p--){let g=u[p],A=typeof g=="function"?g(f):g;A&&sa(A,a)}return a}const S1=sn.mac?"mac":sn.windows?"win":sn.linux?"linux":"key";function w1(f,t){const a=f.split(/-(?!$)/);let u=a[a.length-1];u=="Space"&&(u=" ");let p,g,A,$;for(let F=0;F<a.length-1;++F){const V=a[F];if(/^(cmd|meta|m)$/i.test(V))$=!0;else if(/^a(lt)?$/i.test(V))p=!0;else if(/^(c|ctrl|control)$/i.test(V))g=!0;else if(/^s(hift)?$/i.test(V))A=!0;else if(/^mod$/i.test(V))t=="mac"?$=!0:g=!0;else throw new Error("Unrecognized modifier name: "+V)}return p&&(u="Alt-"+u),g&&(u="Ctrl-"+u),$&&(u="Meta-"+u),A&&(u="Shift-"+u),u}function Gl(f,t,a){return t.altKey&&(f="Alt-"+f),t.ctrlKey&&(f="Ctrl-"+f),t.metaKey&&(f="Meta-"+f),a!==!1&&t.shiftKey&&(f="Shift-"+f),f}const P1=Di.default(on.domEventHandlers({keydown(f,t){return jh(qh(t.state),f,t,"editor")}})),Zl=Dt.define({enables:P1}),zh=new WeakMap;function qh(f){let t=f.facet(Zl),a=zh.get(t);return a||zh.set(t,a=$1(t.reduce((u,p)=>u.concat(p),[]))),a}function M1(f,t,a){return jh(qh(f.state),t,f,a)}let Cs=null;const k1=4e3;function $1(f,t=S1){let a=Object.create(null),u=Object.create(null),p=(A,$)=>{let F=u[A];if(F==null)u[A]=$;else if(F!=$)throw new Error("Key binding "+A+" is used both as a regular binding and as a multi-stroke prefix")},g=(A,$,F,V,z)=>{var ie,oe;let Ae=a[A]||(a[A]=Object.create(null)),$e=$.split(/ (?!$)/).map(bt=>w1(bt,t));for(let bt=1;bt<$e.length;bt++){let Xt=$e.slice(0,bt).join(" ");p(Xt,!0),Ae[Xt]||(Ae[Xt]={preventDefault:!0,stopPropagation:!1,run:[Zt=>{let an=Cs={view:Zt,prefix:Xt,scope:A};return setTimeout(()=>{Cs==an&&(Cs=null)},k1),!0}]})}let je=$e.join(" ");p(je,!1);let ot=Ae[je]||(Ae[je]={preventDefault:!1,stopPropagation:!1,run:((oe=(ie=Ae._any)===null||ie===void 0?void 0:ie.run)===null||oe===void 0?void 0:oe.slice())||[]});F&&ot.run.push(F),V&&(ot.preventDefault=!0),z&&(ot.stopPropagation=!0)};for(let A of f){let $=A.scope?A.scope.split(" "):["editor"];if(A.any)for(let V of $){let z=a[V]||(a[V]=Object.create(null));z._any||(z._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:ie}=A;for(let oe in z)z[oe].run.push(Ae=>ie(Ae,Ec))}let F=A[t]||A.key;if(F)for(let V of $)g(V,F,A.run,A.preventDefault,A.stopPropagation),A.shift&&g(V,"Shift-"+F,A.shift,A.preventDefault,A.stopPropagation)}return a}let Ec=null;function jh(f,t,a,u){Ec=t;let p=ic(t),g=ut(p,0),A=St(g)==p.length&&p!=" ",$="",F=!1,V=!1,z=!1;Cs&&Cs.view==a&&Cs.scope==u&&($=Cs.prefix+" ",bh.indexOf(t.keyCode)<0&&(V=!0,Cs=null));let ie=new Set,oe=ot=>{if(ot){for(let bt of ot.run)if(!ie.has(bt)&&(ie.add(bt),bt(a)))return ot.stopPropagation&&(z=!0),!0;ot.preventDefault&&(ot.stopPropagation&&(z=!0),V=!0)}return!1},Ae=f[u],$e,je;return Ae&&(oe(Ae[$+Gl(p,t,!A)])?F=!0:A&&(t.altKey||t.metaKey||t.ctrlKey)&&!(sn.windows&&t.ctrlKey&&t.altKey)&&!(sn.mac&&t.altKey&&!(t.ctrlKey||t.metaKey))&&($e=Ur[t.keyCode])&&$e!=p?(oe(Ae[$+Gl($e,t,!0)])||t.shiftKey&&(je=Bs[t.keyCode])!=p&&je!=$e&&oe(Ae[$+Gl(je,t,!1)]))&&(F=!0):A&&t.shiftKey&&oe(Ae[$+Gl(p,t,!0)])&&(F=!0),!F&&oe(Ae._any)&&(F=!0)),V&&(F=!0),F&&z&&t.stopPropagation(),Ec=null,F}class ba{constructor(t,a,u,p,g){this.className=t,this.left=a,this.top=u,this.width=p,this.height=g}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,a){return a.className!=this.className?!1:(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width!=null&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,a,u){if(u.empty){let p=t.coordsAtPos(u.head,u.assoc||1);if(!p)return[];let g=Uh(t);return[new ba(a,p.left-g.left,p.top-g.top,null,p.bottom-p.top)]}else return D1(t,a,u)}}function Uh(f){let t=f.scrollDOM.getBoundingClientRect();return{left:(f.textDirection==Ai.LTR?t.left:t.right-f.scrollDOM.clientWidth*f.scaleX)-f.scrollDOM.scrollLeft*f.scaleX,top:t.top-f.scrollDOM.scrollTop*f.scaleY}}function Yh(f,t,a,u){let p=f.coordsAtPos(t,a*2);if(!p)return u;let g=f.dom.getBoundingClientRect(),A=(p.top+p.bottom)/2,$=f.posAtCoords({x:g.left+1,y:A}),F=f.posAtCoords({x:g.right-1,y:A});return $==null||F==null?u:{from:Math.max(u.from,Math.min($,F)),to:Math.min(u.to,Math.max($,F))}}function D1(f,t,a){if(a.to<=f.viewport.from||a.from>=f.viewport.to)return[];let u=Math.max(a.from,f.viewport.from),p=Math.min(a.to,f.viewport.to),g=f.textDirection==Ai.LTR,A=f.contentDOM,$=A.getBoundingClientRect(),F=Uh(f),V=A.querySelector(".cm-line"),z=V&&window.getComputedStyle(V),ie=$.left+(z?parseInt(z.paddingLeft)+Math.min(0,parseInt(z.textIndent)):0),oe=$.right-(z?parseInt(z.paddingRight):0),Ae=bc(f,u,1),$e=bc(f,p,-1),je=Ae.type==tn.Text?Ae:null,ot=$e.type==tn.Text?$e:null;if(je&&(f.lineWrapping||Ae.widgetLineBreaks)&&(je=Yh(f,u,1,je)),ot&&(f.lineWrapping||$e.widgetLineBreaks)&&(ot=Yh(f,p,-1,ot)),je&&ot&&je.from==ot.from&&je.to==ot.to)return Xt(Zt(a.from,a.to,je));{let Gt=je?Zt(a.from,null,je):an(Ae,!1),nn=ot?Zt(null,a.to,ot):an($e,!0),en=[];return(je||Ae).to<(ot||$e).from-(je&&ot?1:0)||Ae.widgetLineBreaks>1&&Gt.bottom+f.defaultLineHeight/2<nn.top?en.push(bt(ie,Gt.bottom,oe,nn.top)):Gt.bottom<nn.top&&f.elementAtHeight((Gt.bottom+nn.top)/2).type==tn.Text&&(Gt.bottom=nn.top=(Gt.bottom+nn.top)/2),Xt(Gt).concat(en).concat(Xt(nn))}function bt(Gt,nn,en,li){return new ba(t,Gt-F.left,nn-F.top,en-Gt,li-nn)}function Xt({top:Gt,bottom:nn,horizontal:en}){let li=[];for(let mi=0;mi<en.length;mi+=2)li.push(bt(en[mi],Gt,en[mi+1],nn));return li}function Zt(Gt,nn,en){let li=1e9,mi=-1e9,Pi=[];function hi(_i,$i,fr,Pr,ls){let nr=f.coordsAtPos(_i,_i==en.to?-2:2),Qr=f.coordsAtPos(fr,fr==en.from?2:-2);!nr||!Qr||(li=Math.min(nr.top,Qr.top,li),mi=Math.max(nr.bottom,Qr.bottom,mi),ls==Ai.LTR?Pi.push(g&&$i?ie:nr.left,g&&Pr?oe:Qr.right):Pi.push(!g&&Pr?ie:Qr.left,!g&&$i?oe:nr.right))}let bn=Gt??en.from,Si=nn??en.to;for(let _i of f.visibleRanges)if(_i.to>bn&&_i.from<Si)for(let $i=Math.max(_i.from,bn),fr=Math.min(_i.to,Si);;){let Pr=f.state.doc.lineAt($i);for(let ls of f.bidiSpans(Pr)){let nr=ls.from+Pr.from,Qr=ls.to+Pr.from;if(nr>=fr)break;Qr>$i&&hi(Math.max(nr,$i),Gt==null&&nr<=bn,Math.min(Qr,fr),nn==null&&Qr>=Si,ls.dir)}if($i=Pr.to+1,$i>=fr)break}return Pi.length==0&&hi(bn,Gt==null,Si,nn==null,f.textDirection),{top:li,bottom:mi,horizontal:Pi}}function an(Gt,nn){let en=$.top+(nn?Gt.top:Gt.bottom);return{top:en,bottom:en,horizontal:[]}}}function E1(f,t){return f.constructor==t.constructor&&f.eq(t)}class T1{constructor(t,a){this.view=t,this.layer=a,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),a.above&&this.dom.classList.add("cm-layer-above"),a.class&&this.dom.classList.add(a.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),a.mount&&a.mount(this.dom,t)}update(t){t.startState.facet(Il)!=t.state.facet(Il)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}docViewUpdate(t){this.layer.updateOnDocViewUpdate!==!1&&t.requestMeasure(this.measureReq)}setOrder(t){let a=0,u=t.facet(Il);for(;a<u.length&&u[a]!=this.layer;)a++;this.dom.style.zIndex=String((this.layer.above?150:-1)-a)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:a}=this.view;(t!=this.scaleX||a!=this.scaleY)&&(this.scaleX=t,this.scaleY=a,this.dom.style.transform=`scale(${1/t}, ${1/a})`)}draw(t){if(t.length!=this.drawn.length||t.some((a,u)=>!E1(a,this.drawn[u]))){let a=this.dom.firstChild,u=0;for(let p of t)p.update&&a&&p.constructor&&this.drawn[u].constructor&&p.update(a,this.drawn[u])?(a=a.nextSibling,u++):this.dom.insertBefore(p.draw(),a);for(;a;){let p=a.nextSibling;a.remove(),a=p}this.drawn=t,sn.safari&&sn.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Il=Dt.define();function Hh(f){return[Ri.define(t=>new T1(t,f)),Il.of(f)]}const Aa=Dt.define({combine(f){return Ot(f,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,a)=>Math.min(t,a),drawRangeCursor:(t,a)=>t||a})}});function F1(f={}){return[Aa.of(f),R1,B1,Q1,vl.of(!0)]}function Kh(f){return f.startState.facet(Aa)!=f.state.facet(Aa)}const R1=Hh({above:!0,markers(f){let{state:t}=f,a=t.facet(Aa),u=[];for(let p of t.selection.ranges){let g=p==t.selection.main;if(p.empty||a.drawRangeCursor){let A=g?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",$=p.empty?p:ft.cursor(p.head,p.head>p.anchor?-1:1);for(let F of ba.forRange(f,A,$))u.push(F)}}return u},update(f,t){f.transactions.some(u=>u.selection)&&(t.style.animationName=t.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let a=Kh(f);return a&&Jh(f.state,t),f.docChanged||f.selectionSet||a},mount(f,t){Jh(t.state,f)},class:"cm-cursorLayer"});function Jh(f,t){t.style.animationDuration=f.facet(Aa).cursorBlinkRate+"ms"}const B1=Hh({above:!1,markers(f){return f.state.selection.ranges.map(t=>t.empty?[]:ba.forRange(f,"cm-selectionBackground",t)).reduce((t,a)=>t.concat(a))},update(f,t){return f.docChanged||f.selectionSet||f.viewportChanged||Kh(f)},class:"cm-selectionLayer"}),Q1=Di.highest(on.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),ep=Et.define({map(f,t){return f==null?null:t.mapPos(f)}}),va=wn.define({create(){return null},update(f,t){return f!=null&&(f=t.changes.mapPos(f)),t.effects.reduce((a,u)=>u.is(ep)?u.value:a,f)}}),L1=Ri.fromClass(class{constructor(f){this.view=f,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(f){var t;let a=f.state.field(va);a==null?this.cursor!=null&&((t=this.cursor)===null||t===void 0||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(f.startState.field(va)!=a||f.docChanged||f.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:f}=this,t=f.state.field(va),a=t!=null&&f.coordsAtPos(t);if(!a)return null;let u=f.scrollDOM.getBoundingClientRect();return{left:a.left-u.left+f.scrollDOM.scrollLeft*f.scaleX,top:a.top-u.top+f.scrollDOM.scrollTop*f.scaleY,height:a.bottom-a.top}}drawCursor(f){if(this.cursor){let{scaleX:t,scaleY:a}=this.view;f?(this.cursor.style.left=f.left/t+"px",this.cursor.style.top=f.top/a+"px",this.cursor.style.height=f.height/a+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(f){this.view.state.field(va)!=f&&this.view.dispatch({effects:ep.of(f)})}},{eventObservers:{dragover(f){this.setDropPos(this.view.posAtCoords({x:f.clientX,y:f.clientY}))},dragleave(f){(f.target==this.view.contentDOM||!this.view.contentDOM.contains(f.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function N1(){return[va,L1]}const Tc=2e3;function G1(f,t,a){let u=Math.min(t.line,a.line),p=Math.max(t.line,a.line),g=[];if(t.off>Tc||a.off>Tc||t.col<0||a.col<0){let A=Math.min(t.off,a.off),$=Math.max(t.off,a.off);for(let F=u;F<=p;F++){let V=f.doc.line(F);V.length<=$&&g.push(ft.range(V.from+A,V.to+$))}}else{let A=Math.min(t.col,a.col),$=Math.max(t.col,a.col);for(let F=u;F<=p;F++){let V=f.doc.line(F),z=Yo(V.text,A,f.tabSize,!0);if(z<0)g.push(ft.cursor(V.to));else{let ie=Yo(V.text,$,f.tabSize);g.push(ft.range(V.from+z,V.from+ie))}}}return g}function Z1(f,t){let a=f.coordsAtPos(f.viewport.from);return a?Math.round(Math.abs((a.left-t)/f.defaultCharacterWidth)):-1}function tp(f,t){let a=f.posAtCoords({x:t.clientX,y:t.clientY},!1),u=f.state.doc.lineAt(a),p=a-u.from,g=p>Tc?-1:p==u.length?Z1(f,t.clientX):Rs(u.text,f.state.tabSize,a-u.from);return{line:u.number,col:g,off:p}}function I1(f,t){let a=tp(f,t),u=f.state.selection;return a?{update(p){if(p.docChanged){let g=p.changes.mapPos(p.startState.doc.line(a.line).from),A=p.state.doc.lineAt(g);a={line:A.number,col:a.col,off:Math.min(a.off,A.length)},u=u.map(p.changes)}},get(p,g,A){let $=tp(f,p);if(!$)return u;let F=G1(f.state,a,$);return F.length?A?ft.create(F.concat(u.ranges)):ft.create(F):u}}:null}function V1(f){let t=f?.eventFilter||(a=>a.altKey&&a.button==0);return on.mouseSelectionStyle.of((a,u)=>t(u)?I1(a,u):null)}const X1={Alt:[18,f=>!!f.altKey],Control:[17,f=>!!f.ctrlKey],Shift:[16,f=>!!f.shiftKey],Meta:[91,f=>!!f.metaKey]},W1={style:"cursor: crosshair"};function z1(f={}){let[t,a]=X1[f.key||"Alt"],u=Ri.fromClass(class{constructor(p){this.view=p,this.isDown=!1}set(p){this.isDown!=p&&(this.isDown=p,this.view.update([]))}},{eventObservers:{keydown(p){this.set(p.keyCode==t||a(p))},keyup(p){(p.keyCode==t||!a(p))&&this.set(!1)},mousemove(p){this.set(a(p))}}});return[u,on.contentAttributes.of(p=>{var g;return!((g=p.plugin(u))===null||g===void 0)&&g.isDown?W1:null})]}const Vl="-10000px";class np{constructor(t,a,u,p){this.facet=a,this.createTooltipView=u,this.removeTooltipView=p,this.input=t.state.facet(a),this.tooltips=this.input.filter(A=>A);let g=null;this.tooltipViews=this.tooltips.map(A=>g=u(A,g))}update(t,a){var u;let p=t.state.facet(this.facet),g=p.filter(F=>F);if(p===this.input){for(let F of this.tooltipViews)F.update&&F.update(t);return!1}let A=[],$=a?[]:null;for(let F=0;F<g.length;F++){let V=g[F],z=-1;if(V){for(let ie=0;ie<this.tooltips.length;ie++){let oe=this.tooltips[ie];oe&&oe.create==V.create&&(z=ie)}if(z<0)A[F]=this.createTooltipView(V,F?A[F-1]:null),$&&($[F]=!!V.above);else{let ie=A[F]=this.tooltipViews[z];$&&($[F]=a[z]),ie.update&&ie.update(t)}}}for(let F of this.tooltipViews)A.indexOf(F)<0&&(this.removeTooltipView(F),(u=F.destroy)===null||u===void 0||u.call(F));return a&&($.forEach((F,V)=>a[V]=F),a.length=$.length),this.input=p,this.tooltips=g,this.tooltipViews=A,!0}}function q1(f){let t=f.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const Fc=Dt.define({combine:f=>{var t,a,u;return{position:sn.ios?"absolute":((t=f.find(p=>p.position))===null||t===void 0?void 0:t.position)||"fixed",parent:((a=f.find(p=>p.parent))===null||a===void 0?void 0:a.parent)||null,tooltipSpace:((u=f.find(p=>p.tooltipSpace))===null||u===void 0?void 0:u.tooltipSpace)||q1}}}),ip=new WeakMap,Rc=Ri.fromClass(class{constructor(f){this.view=f,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=f.state.facet(Fc);this.position=t.position,this.parent=t.parent,this.classes=f.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new np(f,Bc,(a,u)=>this.createTooltip(a,u),a=>{this.resizeObserver&&this.resizeObserver.unobserve(a.dom),a.dom.remove()}),this.above=this.manager.tooltips.map(a=>!!a.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(a=>{Date.now()>this.lastTransaction-50&&a.length>0&&a[a.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),f.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let f of this.manager.tooltipViews)this.intersectionObserver.observe(f.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(f){f.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(f,this.above);t&&this.observeIntersection();let a=t||f.geometryChanged,u=f.state.facet(Fc);if(u.position!=this.position&&!this.madeAbsolute){this.position=u.position;for(let p of this.manager.tooltipViews)p.dom.style.position=this.position;a=!0}if(u.parent!=this.parent){this.parent&&this.container.remove(),this.parent=u.parent,this.createContainer();for(let p of this.manager.tooltipViews)this.container.appendChild(p.dom);a=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);a&&this.maybeMeasure()}createTooltip(f,t){let a=f.create(this.view),u=t?t.dom:null;if(a.dom.classList.add("cm-tooltip"),f.arrow&&!a.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let p=document.createElement("div");p.className="cm-tooltip-arrow",a.dom.appendChild(p)}return a.dom.style.position=this.position,a.dom.style.top=Vl,a.dom.style.left="0px",this.container.insertBefore(a.dom,u),a.mount&&a.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(a.dom),a}destroy(){var f,t,a;this.view.win.removeEventListener("resize",this.measureSoon);for(let u of this.manager.tooltipViews)u.dom.remove(),(f=u.destroy)===null||f===void 0||f.call(u);this.parent&&this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(a=this.intersectionObserver)===null||a===void 0||a.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let f=1,t=1,a=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:g}=this.manager.tooltipViews[0];if(sn.safari){let A=g.getBoundingClientRect();a=Math.abs(A.top+1e4)>1||Math.abs(A.left)>1}else a=!!g.offsetParent&&g.offsetParent!=this.container.ownerDocument.body}if(a||this.position=="absolute")if(this.parent){let g=this.parent.getBoundingClientRect();g.width&&g.height&&(f=g.width/this.parent.offsetWidth,t=g.height/this.parent.offsetHeight)}else({scaleX:f,scaleY:t}=this.view.viewState);let u=this.view.scrollDOM.getBoundingClientRect(),p=mc(this.view);return{visible:{left:u.left+p.left,top:u.top+p.top,right:u.right-p.right,bottom:u.bottom-p.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((g,A)=>{let $=this.manager.tooltipViews[A];return $.getCoords?$.getCoords(g.pos):this.view.coordsAtPos(g.pos)}),size:this.manager.tooltipViews.map(({dom:g})=>g.getBoundingClientRect()),space:this.view.state.facet(Fc).tooltipSpace(this.view),scaleX:f,scaleY:t,makeAbsolute:a}}writeMeasure(f){var t;if(f.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let $ of this.manager.tooltipViews)$.dom.style.position="absolute"}let{visible:a,space:u,scaleX:p,scaleY:g}=f,A=[];for(let $=0;$<this.manager.tooltips.length;$++){let F=this.manager.tooltips[$],V=this.manager.tooltipViews[$],{dom:z}=V,ie=f.pos[$],oe=f.size[$];if(!ie||F.clip!==!1&&(ie.bottom<=Math.max(a.top,u.top)||ie.top>=Math.min(a.bottom,u.bottom)||ie.right<Math.max(a.left,u.left)-.1||ie.left>Math.min(a.right,u.right)+.1)){z.style.top=Vl;continue}let Ae=F.arrow?V.dom.querySelector(".cm-tooltip-arrow"):null,$e=Ae?7:0,je=oe.right-oe.left,ot=(t=ip.get(V))!==null&&t!==void 0?t:oe.bottom-oe.top,bt=V.offset||U1,Xt=this.view.textDirection==Ai.LTR,Zt=oe.width>u.right-u.left?Xt?u.left:u.right-oe.width:Xt?Math.max(u.left,Math.min(ie.left-(Ae?14:0)+bt.x,u.right-je)):Math.min(Math.max(u.left,ie.left-je+(Ae?14:0)-bt.x),u.right-je),an=this.above[$];!F.strictSide&&(an?ie.top-ot-$e-bt.y<u.top:ie.bottom+ot+$e+bt.y>u.bottom)&&an==u.bottom-ie.bottom>ie.top-u.top&&(an=this.above[$]=!an);let Gt=(an?ie.top-u.top:u.bottom-ie.bottom)-$e;if(Gt<ot&&V.resize!==!1){if(Gt<this.view.defaultLineHeight){z.style.top=Vl;continue}ip.set(V,ot),z.style.height=(ot=Gt)/g+"px"}else z.style.height&&(z.style.height="");let nn=an?ie.top-ot-$e-bt.y:ie.bottom+$e+bt.y,en=Zt+je;if(V.overlap!==!0)for(let li of A)li.left<en&&li.right>Zt&&li.top<nn+ot&&li.bottom>nn&&(nn=an?li.top-ot-2-$e:li.bottom+$e+2);if(this.position=="absolute"?(z.style.top=(nn-f.parent.top)/g+"px",rp(z,(Zt-f.parent.left)/p)):(z.style.top=nn/g+"px",rp(z,Zt/p)),Ae){let li=ie.left+(Xt?bt.x:-bt.x)-(Zt+14-7);Ae.style.left=li/p+"px"}V.overlap!==!0&&A.push({left:Zt,top:nn,right:en,bottom:nn+ot}),z.classList.toggle("cm-tooltip-above",an),z.classList.toggle("cm-tooltip-below",!an),V.positioned&&V.positioned(f.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let f of this.manager.tooltipViews)f.dom.style.top=Vl}},{eventObservers:{scroll(){this.maybeMeasure()}}});function rp(f,t){let a=parseInt(f.style.left,10);(isNaN(a)||Math.abs(t-a)>1)&&(f.style.left=t+"px")}const j1=on.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),U1={x:0,y:0},Bc=Dt.define({enables:[Rc,j1]}),Xl=Dt.define({combine:f=>f.reduce((t,a)=>t.concat(a),[])});class Wl{static create(t){return new Wl(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new np(t,Xl,(a,u)=>this.createHostedView(a,u),a=>a.dom.remove())}createHostedView(t,a){let u=t.create(this.view);return u.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(u.dom,a?a.dom.nextSibling:this.dom.firstChild),this.mounted&&u.mount&&u.mount(this.view),u}mount(t){for(let a of this.manager.tooltipViews)a.mount&&a.mount(t);this.mounted=!0}positioned(t){for(let a of this.manager.tooltipViews)a.positioned&&a.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let a of this.manager.tooltipViews)(t=a.destroy)===null||t===void 0||t.call(a)}passProp(t){let a;for(let u of this.manager.tooltipViews){let p=u[t];if(p!==void 0){if(a===void 0)a=p;else if(a!==p)return}}return a}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Y1=Bc.compute([Xl],f=>{let t=f.facet(Xl);return t.length===0?null:{pos:Math.min(...t.map(a=>a.pos)),end:Math.max(...t.map(a=>{var u;return(u=a.end)!==null&&u!==void 0?u:a.pos})),create:Wl.create,above:t[0].above,arrow:t.some(a=>a.arrow)}});class H1{constructor(t,a,u,p,g){this.view=t,this.source=a,this.field=u,this.setHover=p,this.hoverTime=g,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:a}=this,u=t.docView.tile.nearest(a.target);if(!u)return;let p,g=1;if(u.isWidget())p=u.posAtStart;else{if(p=t.posAtCoords(a),p==null)return;let $=t.coordsAtPos(p);if(!$||a.y<$.top||a.y>$.bottom||a.x<$.left-t.defaultCharacterWidth||a.x>$.right+t.defaultCharacterWidth)return;let F=t.bidiSpans(t.state.doc.lineAt(p)).find(z=>z.from<=p&&z.to>=p),V=F&&F.dir==Ai.RTL?-1:1;g=a.x<$.left?-V:V}let A=this.source(t,p,g);if(A?.then){let $=this.pending={pos:p};A.then(F=>{this.pending==$&&(this.pending=null,F&&!(Array.isArray(F)&&!F.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(F)?F:[F])}))},F=>Vi(t.state,F,"hover tooltip"))}else A&&!(Array.isArray(A)&&!A.length)&&t.dispatch({effects:this.setHover.of(Array.isArray(A)?A:[A])})}get tooltip(){let t=this.view.plugin(Rc),a=t?t.manager.tooltips.findIndex(u=>u.create==Wl.create):-1;return a>-1?t.manager.tooltipViews[a]:null}mousemove(t){var a,u;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:p,tooltip:g}=this;if(p.length&&g&&!K1(g.dom,t)||this.pending){let{pos:A}=p[0]||this.pending,$=(u=(a=p[0])===null||a===void 0?void 0:a.end)!==null&&u!==void 0?u:A;(A==$?this.view.posAtCoords(this.lastMove)!=A:!J1(this.view,A,$,t.clientX,t.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:a}=this;if(a.length){let{tooltip:u}=this;u&&u.dom.contains(t.relatedTarget)?this.watchTooltipLeave(u.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(t){let a=u=>{t.removeEventListener("mouseleave",a),this.active.length&&!this.view.dom.contains(u.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};t.addEventListener("mouseleave",a)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const zl=4;function K1(f,t){let{left:a,right:u,top:p,bottom:g}=f.getBoundingClientRect(),A;if(A=f.querySelector(".cm-tooltip-arrow")){let $=A.getBoundingClientRect();p=Math.min($.top,p),g=Math.max($.bottom,g)}return t.clientX>=a-zl&&t.clientX<=u+zl&&t.clientY>=p-zl&&t.clientY<=g+zl}function J1(f,t,a,u,p,g){let A=f.scrollDOM.getBoundingClientRect(),$=f.documentTop+f.documentPadding.top+f.contentHeight;if(A.left>u||A.right<u||A.top>p||Math.min(A.bottom,$)<p)return!1;let F=f.posAtCoords({x:u,y:p},!1);return F>=t&&F<=a}function eg(f,t={}){let a=Et.define(),u=wn.define({create(){return[]},update(p,g){if(p.length&&(t.hideOnChange&&(g.docChanged||g.selection)?p=[]:t.hideOn&&(p=p.filter(A=>!t.hideOn(g,A))),g.docChanged)){let A=[];for(let $ of p){let F=g.changes.mapPos($.pos,-1,$t.TrackDel);if(F!=null){let V=Object.assign(Object.create(null),$);V.pos=F,V.end!=null&&(V.end=g.changes.mapPos(V.end)),A.push(V)}}p=A}for(let A of g.effects)A.is(a)&&(p=A.value),A.is(tg)&&(p=[]);return p},provide:p=>Xl.from(p)});return{active:u,extension:[u,Ri.define(p=>new H1(p,f,u,a,t.hoverTime||300)),Y1]}}function sp(f,t){let a=f.plugin(Rc);if(!a)return null;let u=a.manager.tooltips.indexOf(t);return u<0?null:a.manager.tooltipViews[u]}const tg=Et.define(),op=Dt.define({combine(f){let t,a;for(let u of f)t=t||u.topContainer,a=a||u.bottomContainer;return{topContainer:t,bottomContainer:a}}});function xa(f,t){let a=f.plugin(ap),u=a?a.specs.indexOf(t):-1;return u>-1?a.panels[u]:null}const ap=Ri.fromClass(class{constructor(f){this.input=f.state.facet(Ca),this.specs=this.input.filter(a=>a),this.panels=this.specs.map(a=>a(f));let t=f.state.facet(op);this.top=new ql(f,!0,t.topContainer),this.bottom=new ql(f,!1,t.bottomContainer),this.top.sync(this.panels.filter(a=>a.top)),this.bottom.sync(this.panels.filter(a=>!a.top));for(let a of this.panels)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}update(f){let t=f.state.facet(op);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new ql(f.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new ql(f.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let a=f.state.facet(Ca);if(a!=this.input){let u=a.filter(F=>F),p=[],g=[],A=[],$=[];for(let F of u){let V=this.specs.indexOf(F),z;V<0?(z=F(f.view),$.push(z)):(z=this.panels[V],z.update&&z.update(f)),p.push(z),(z.top?g:A).push(z)}this.specs=u,this.panels=p,this.top.sync(g),this.bottom.sync(A);for(let F of $)F.dom.classList.add("cm-panel"),F.mount&&F.mount()}else for(let u of this.panels)u.update&&u.update(f)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:f=>on.scrollMargins.of(t=>{let a=t.plugin(f);return a&&{top:a.top.scrollMargin(),bottom:a.bottom.scrollMargin()}})});class ql{constructor(t,a,u){this.view=t,this.top=a,this.container=u,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let a of this.panels)a.destroy&&t.indexOf(a)<0&&a.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let a=this.container||this.view.dom;a.insertBefore(this.dom,this.top?a.firstChild:null)}let t=this.dom.firstChild;for(let a of this.panels)if(a.dom.parentNode==this.dom){for(;t!=a.dom;)t=up(t);t=t.nextSibling}else this.dom.insertBefore(a.dom,t);for(;t;)t=up(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function up(f){let t=f.nextSibling;return f.remove(),t}const Ca=Dt.define({enables:ap});class gs extends kt{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}gs.prototype.elementClass="",gs.prototype.toDOM=void 0,gs.prototype.mapMode=$t.TrackBefore,gs.prototype.startSide=gs.prototype.endSide=-1,gs.prototype.point=!0;const jl=Dt.define(),ng=Dt.define(),ig={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Zn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Sa=Dt.define();function rg(f){return[fp(),Sa.of({...ig,...f})]}const cp=Dt.define({combine:f=>f.some(t=>t)});function fp(f){return[sg]}const sg=Ri.fromClass(class{constructor(f){this.view=f,this.domAfter=null,this.prevViewport=f.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=f.state.facet(Sa).map(t=>new mp(f,t)),this.fixed=!f.state.facet(cp);for(let t of this.gutters)t.config.side=="after"?this.getDOMAfter().appendChild(t.dom):this.dom.appendChild(t.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),f.scrollDOM.insertBefore(this.dom,f.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(f){if(this.updateGutters(f)){let t=this.prevViewport,a=f.view.viewport,u=Math.min(t.to,a.to)-Math.max(t.from,a.from);this.syncGutters(u<(a.to-a.from)*.8)}if(f.geometryChanged){let t=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=t,this.domAfter&&(this.domAfter.style.minHeight=t)}this.view.state.facet(cp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=f.view.viewport}syncGutters(f){let t=this.dom.nextSibling;f&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let a=Zn.iter(this.view.state.facet(jl),this.view.viewport.from),u=[],p=this.gutters.map(g=>new og(g,this.view.viewport,-this.view.documentPadding.top));for(let g of this.view.viewportLineBlocks)if(u.length&&(u=[]),Array.isArray(g.type)){let A=!0;for(let $ of g.type)if($.type==tn.Text&&A){Qc(a,u,$.from);for(let F of p)F.line(this.view,$,u);A=!1}else if($.widget)for(let F of p)F.widget(this.view,$)}else if(g.type==tn.Text){Qc(a,u,g.from);for(let A of p)A.line(this.view,g,u)}else if(g.widget)for(let A of p)A.widget(this.view,g);for(let g of p)g.finish();f&&(this.view.scrollDOM.insertBefore(this.dom,t),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(f){let t=f.startState.facet(Sa),a=f.state.facet(Sa),u=f.docChanged||f.heightChanged||f.viewportChanged||!Zn.eq(f.startState.facet(jl),f.state.facet(jl),f.view.viewport.from,f.view.viewport.to);if(t==a)for(let p of this.gutters)p.update(f)&&(u=!0);else{u=!0;let p=[];for(let g of a){let A=t.indexOf(g);A<0?p.push(new mp(this.view,g)):(this.gutters[A].update(f),p.push(this.gutters[A]))}for(let g of this.gutters)g.dom.remove(),p.indexOf(g)<0&&g.destroy();for(let g of p)g.config.side=="after"?this.getDOMAfter().appendChild(g.dom):this.dom.appendChild(g.dom);this.gutters=p}return u}destroy(){for(let f of this.gutters)f.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:f=>on.scrollMargins.of(t=>{let a=t.plugin(f);if(!a||a.gutters.length==0||!a.fixed)return null;let u=a.dom.offsetWidth*t.scaleX,p=a.domAfter?a.domAfter.offsetWidth*t.scaleX:0;return t.textDirection==Ai.LTR?{left:u,right:p}:{right:u,left:p}})});function dp(f){return Array.isArray(f)?f:[f]}function Qc(f,t,a){for(;f.value&&f.from<=a;)f.from==a&&t.push(f.value),f.next()}class og{constructor(t,a,u){this.gutter=t,this.height=u,this.i=0,this.cursor=Zn.iter(t.markers,a.from)}addElement(t,a,u){let{gutter:p}=this,g=(a.top-this.height)/t.scaleY,A=a.height/t.scaleY;if(this.i==p.elements.length){let $=new gp(t,A,g,u);p.elements.push($),p.dom.appendChild($.dom)}else p.elements[this.i].update(t,A,g,u);this.height=a.bottom,this.i++}line(t,a,u){let p=[];Qc(this.cursor,p,a.from),u.length&&(p=p.concat(u));let g=this.gutter.config.lineMarker(t,a,p);g&&p.unshift(g);let A=this.gutter;p.length==0&&!A.config.renderEmptyElements||this.addElement(t,a,p)}widget(t,a){let u=this.gutter.config.widgetMarker(t,a.widget,a),p=u?[u]:null;for(let g of t.state.facet(ng)){let A=g(t,a.widget,a);A&&(p||(p=[])).push(A)}p&&this.addElement(t,a,p)}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let a=t.elements.pop();t.dom.removeChild(a.dom),a.destroy()}}}class mp{constructor(t,a){this.view=t,this.config=a,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let u in a.domEventHandlers)this.dom.addEventListener(u,p=>{let g=p.target,A;if(g!=this.dom&&this.dom.contains(g)){for(;g.parentNode!=this.dom;)g=g.parentNode;let F=g.getBoundingClientRect();A=(F.top+F.bottom)/2}else A=p.clientY;let $=t.lineBlockAtHeight(A-t.documentTop);a.domEventHandlers[u](t,$,p)&&p.preventDefault()});this.markers=dp(a.markers(t)),a.initialSpacer&&(this.spacer=new gp(t,0,0,[a.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let a=this.markers;if(this.markers=dp(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let p=this.config.updateSpacer(this.spacer.markers[0],t);p!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[p])}let u=t.view.viewport;return!Zn.eq(this.markers,a,u.from,u.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(t):!1)}destroy(){for(let t of this.elements)t.destroy()}}class gp{constructor(t,a,u,p){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,a,u,p)}update(t,a,u,p){this.height!=a&&(this.height=a,this.dom.style.height=a+"px"),this.above!=u&&(this.dom.style.marginTop=(this.above=u)?u+"px":""),ag(this.markers,p)||this.setMarkers(t,p)}setMarkers(t,a){let u="cm-gutterElement",p=this.dom.firstChild;for(let g=0,A=0;;){let $=A,F=g<a.length?a[g++]:null,V=!1;if(F){let z=F.elementClass;z&&(u+=" "+z);for(let ie=A;ie<this.markers.length;ie++)if(this.markers[ie].compare(F)){$=ie,V=!0;break}}else $=this.markers.length;for(;A<$;){let z=this.markers[A++];if(z.toDOM){z.destroy(p);let ie=p.nextSibling;p.remove(),p=ie}}if(!F)break;F.toDOM&&(V?p=p.nextSibling:this.dom.insertBefore(F.toDOM(t),p)),V&&A++}this.dom.className=u,this.markers=a}destroy(){this.setMarkers(null,[])}}function ag(f,t){if(f.length!=t.length)return!1;for(let a=0;a<f.length;a++)if(!f[a].compare(t[a]))return!1;return!0}const lg=Dt.define(),ug=Dt.define(),yo=Dt.define({combine(f){return Ot(f,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,a){let u=Object.assign({},t);for(let p in a){let g=u[p],A=a[p];u[p]=g?($,F,V)=>g($,F,V)||A($,F,V):A}return u}})}});class Lc extends gs{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Nc(f,t){return f.state.facet(yo).formatNumber(t,f.state)}const cg=Sa.compute([yo],f=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(t){return t.state.facet(lg)},lineMarker(t,a,u){return u.some(p=>p.toDOM)?null:new Lc(Nc(t,t.state.doc.lineAt(a.from).number))},widgetMarker:(t,a,u)=>{for(let p of t.state.facet(ug)){let g=p(t,a,u);if(g)return g}return null},lineMarkerChange:t=>t.startState.facet(yo)!=t.state.facet(yo),initialSpacer(t){return new Lc(Nc(t,_p(t.state.doc.lines)))},updateSpacer(t,a){let u=Nc(a.view,_p(a.view.state.doc.lines));return u==t.number?t:new Lc(u)},domEventHandlers:f.facet(yo).domEventHandlers,side:"before"}));function fg(f={}){return[yo.of(f),fp(),cg]}function _p(f){let t=9;for(;t<f;)t=t*10+9;return t}const hg=new class extends gs{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pg=jl.compute(["selection"],f=>{let t=[],a=-1;for(let u of f.selection.ranges){let p=f.doc.lineAt(u.head).from;p>a&&(a=p,t.push(hg.range(p)))}return Zn.of(t)});function dg(){return pg}const Op=1024;let mg=0;class Gc{constructor(t,a){this.from=t,this.to=a}}class ci{constructor(t={}){this.id=mg++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=t.combine||null}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof t!="function"&&(t=mr.match(t)),a=>{let u=t(a);return u===void 0?null:[this,u]}}}ci.closedBy=new ci({deserialize:f=>f.split(" ")}),ci.openedBy=new ci({deserialize:f=>f.split(" ")}),ci.group=new ci({deserialize:f=>f.split(" ")}),ci.isolate=new ci({deserialize:f=>{if(f&&f!="rtl"&&f!="ltr"&&f!="auto")throw new RangeError("Invalid value for isolate: "+f);return f||"auto"}}),ci.contextHash=new ci({perNode:!0}),ci.lookAhead=new ci({perNode:!0}),ci.mounted=new ci({perNode:!0});class Ul{constructor(t,a,u){this.tree=t,this.overlay=a,this.parser=u}static get(t){return t&&t.props&&t.props[ci.mounted.id]}}const gg=Object.create(null);class mr{constructor(t,a,u,p=0){this.name=t,this.props=a,this.id=u,this.flags=p}static define(t){let a=t.props&&t.props.length?Object.create(null):gg,u=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(t.name==null?8:0),p=new mr(t.name||"",a,t.id,u);if(t.props){for(let g of t.props)if(Array.isArray(g)||(g=g(p)),g){if(g[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");a[g[0].id]=g[1]}}return p}prop(t){return this.props[t.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(t){if(typeof t=="string"){if(this.name==t)return!0;let a=this.prop(ci.group);return a?a.indexOf(t)>-1:!1}return this.id==t}static match(t){let a=Object.create(null);for(let u in t)for(let p of u.split(" "))a[p]=t[u];return u=>{for(let p=u.prop(ci.group),g=-1;g<(p?p.length:0);g++){let A=a[g<0?u.name:p[g]];if(A)return A}}}}mr.none=new mr("",Object.create(null),0,8);class Zc{constructor(t){this.types=t;for(let a=0;a<t.length;a++)if(t[a].id!=a)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let a=[];for(let u of this.types){let p=null;for(let g of t){let A=g(u);if(A){p||(p=Object.assign({},u.props));let $=A[1],F=A[0];F.combine&&F.id in p&&($=F.combine(p[F.id],$)),p[F.id]=$}}a.push(p?new mr(u.name,p,u.id,u.flags):u)}return new Zc(a)}}const Yl=new WeakMap,yp=new WeakMap;var Wi;(function(f){f[f.ExcludeBuffers=1]="ExcludeBuffers",f[f.IncludeAnonymous=2]="IncludeAnonymous",f[f.IgnoreMounts=4]="IgnoreMounts",f[f.IgnoreOverlays=8]="IgnoreOverlays"})(Wi||(Wi={}));class Gi{constructor(t,a,u,p,g){if(this.type=t,this.children=a,this.positions=u,this.length=p,this.props=null,g&&g.length){this.props=Object.create(null);for(let[A,$]of g)this.props[typeof A=="number"?A:A.id]=$}}toString(){let t=Ul.get(this);if(t&&!t.overlay)return t.tree.toString();let a="";for(let u of this.children){let p=u.toString();p&&(a&&(a+=","),a+=p)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(a.length?"("+a+")":""):a}cursor(t=0){return new Xc(this.topNode,t)}cursorAt(t,a=0,u=0){let p=Yl.get(this)||this.topNode,g=new Xc(p);return g.moveTo(t,a),Yl.set(this,g._tree),g}get topNode(){return new gr(this,0,0,null)}resolve(t,a=0){let u=wa(Yl.get(this)||this.topNode,t,a,!1);return Yl.set(this,u),u}resolveInner(t,a=0){let u=wa(yp.get(this)||this.topNode,t,a,!0);return yp.set(this,u),u}resolveStack(t,a=0){return yg(this,t,a)}iterate(t){let{enter:a,leave:u,from:p=0,to:g=this.length}=t,A=t.mode||0,$=(A&Wi.IncludeAnonymous)>0;for(let F=this.cursor(A|Wi.IncludeAnonymous);;){let V=!1;if(F.from<=g&&F.to>=p&&(!$&&F.type.isAnonymous||a(F)!==!1)){if(F.firstChild())continue;V=!0}for(;V&&u&&($||!F.type.isAnonymous)&&u(F),!F.nextSibling();){if(!F.parent())return;V=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let a in this.props)t.push([+a,this.props[a]]);return t}balance(t={}){return this.children.length<=8?this:zc(mr.none,this.children,this.positions,0,this.children.length,0,this.length,(a,u,p)=>new Gi(this.type,a,u,p,this.propValues),t.makeTree||((a,u,p)=>new Gi(mr.none,a,u,p)))}static build(t){return bg(t)}}Gi.empty=new Gi(mr.none,[],[],0);class Ic{constructor(t,a){this.buffer=t,this.index=a}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ic(this.buffer,this.index)}}class Ss{constructor(t,a,u){this.buffer=t,this.length=a,this.set=u}get type(){return mr.none}toString(){let t=[];for(let a=0;a<this.buffer.length;)t.push(this.childString(a)),a=this.buffer[a+3];return t.join(",")}childString(t){let a=this.buffer[t],u=this.buffer[t+3],p=this.set.types[a],g=p.name;if(/\W/.test(g)&&!p.isError&&(g=JSON.stringify(g)),t+=4,u==t)return g;let A=[];for(;t<u;)A.push(this.childString(t)),t=this.buffer[t+3];return g+"("+A.join(",")+")"}findChild(t,a,u,p,g){let{buffer:A}=this,$=-1;for(let F=t;F!=a&&!(Ap(g,p,A[F+1],A[F+2])&&($=F,u>0));F=A[F+3]);return $}slice(t,a,u){let p=this.buffer,g=new Uint16Array(a-t),A=0;for(let $=t,F=0;$<a;){g[F++]=p[$++],g[F++]=p[$++]-u;let V=g[F++]=p[$++]-u;g[F++]=p[$++]-t,A=Math.max(A,V)}return new Ss(g,A,this.set)}}function Ap(f,t,a,u){switch(f){case-2:return a<t;case-1:return u>=t&&a<t;case 0:return a<t&&u>t;case 1:return a<=t&&u>t;case 2:return u>t;case 4:return!0}}function wa(f,t,a,u){for(var p;f.from==f.to||(a<1?f.from>=t:f.from>t)||(a>-1?f.to<=t:f.to<t);){let A=!u&&f instanceof gr&&f.index<0?null:f.parent;if(!A)return f;f=A}let g=u?0:Wi.IgnoreOverlays;if(u)for(let A=f,$=A.parent;$;A=$,$=A.parent)A instanceof gr&&A.index<0&&((p=$.enter(t,a,g))===null||p===void 0?void 0:p.from)!=A.from&&(f=$);for(;;){let A=f.enter(t,a,g);if(!A)return f;f=A}}class vp{cursor(t=0){return new Xc(this,t)}getChild(t,a=null,u=null){let p=xp(this,t,a,u);return p.length?p[0]:null}getChildren(t,a=null,u=null){return xp(this,t,a,u)}resolve(t,a=0){return wa(this,t,a,!1)}resolveInner(t,a=0){return wa(this,t,a,!0)}matchContext(t){return Vc(this.parent,t)}enterUnfinishedNodesBefore(t){let a=this.childBefore(t),u=this;for(;a;){let p=a.lastChild;if(!p||p.to!=a.to)break;p.type.isError&&p.from==p.to?(u=a,a=p.prevSibling):a=p}return u}get node(){return this}get next(){return this.parent}}class gr extends vp{constructor(t,a,u,p){super(),this._tree=t,this.from=a,this.index=u,this._parent=p}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,a,u,p,g=0){for(let A=this;;){for(let{children:$,positions:F}=A._tree,V=a>0?$.length:-1;t!=V;t+=a){let z=$[t],ie=F[t]+A.from;if(Ap(p,u,ie,ie+z.length)){if(z instanceof Ss){if(g&Wi.ExcludeBuffers)continue;let oe=z.findChild(0,z.buffer.length,a,u-ie,p);if(oe>-1)return new es(new _g(A,z,t,ie),null,oe)}else if(g&Wi.IncludeAnonymous||!z.type.isAnonymous||Wc(z)){let oe;if(!(g&Wi.IgnoreMounts)&&(oe=Ul.get(z))&&!oe.overlay)return new gr(oe.tree,ie,t,A);let Ae=new gr(z,ie,t,A);return g&Wi.IncludeAnonymous||!Ae.type.isAnonymous?Ae:Ae.nextChild(a<0?z.children.length-1:0,a,u,p)}}}if(g&Wi.IncludeAnonymous||!A.type.isAnonymous||(A.index>=0?t=A.index+a:t=a<0?-1:A._parent._tree.children.length,A=A._parent,!A))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}prop(t){return this._tree.prop(t)}enter(t,a,u=0){let p;if(!(u&Wi.IgnoreOverlays)&&(p=Ul.get(this._tree))&&p.overlay){let g=t-this.from;for(let{from:A,to:$}of p.overlay)if((a>0?A<=g:A<g)&&(a<0?$>=g:$>g))return new gr(p.tree,p.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,a,u)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function xp(f,t,a,u){let p=f.cursor(),g=[];if(!p.firstChild())return g;if(a!=null){for(let A=!1;!A;)if(A=p.type.is(a),!p.nextSibling())return g}for(;;){if(u!=null&&p.type.is(u))return g;if(p.type.is(t)&&g.push(p.node),!p.nextSibling())return u==null?g:[]}}function Vc(f,t,a=t.length-1){for(let u=f;a>=0;u=u.parent){if(!u)return!1;if(!u.type.isAnonymous){if(t[a]&&t[a]!=u.name)return!1;a--}}return!0}class _g{constructor(t,a,u,p){this.parent=t,this.buffer=a,this.index=u,this.start=p}}class es extends vp{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,a,u){super(),this.context=t,this._parent=a,this.index=u,this.type=t.buffer.set.types[t.buffer.buffer[u]]}child(t,a,u){let{buffer:p}=this.context,g=p.findChild(this.index+4,p.buffer[this.index+3],t,a-this.context.start,u);return g<0?null:new es(this.context,this,g)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}prop(t){return this.type.prop(t)}enter(t,a,u=0){if(u&Wi.ExcludeBuffers)return null;let{buffer:p}=this.context,g=p.findChild(this.index+4,p.buffer[this.index+3],a>0?1:-1,t-this.context.start,a);return g<0?null:new es(this.context,this,g)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,a=t.buffer[this.index+3];return a<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new es(this.context,this._parent,a):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,a=this._parent?this._parent.index+4:0;return this.index==a?this.externalSibling(-1):new es(this.context,this._parent,t.findChild(a,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],a=[],{buffer:u}=this.context,p=this.index+4,g=u.buffer[this.index+3];if(g>p){let A=u.buffer[this.index+1];t.push(u.slice(p,g,A)),a.push(0)}return new Gi(this.type,t,a,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Cp(f){if(!f.length)return null;let t=0,a=f[0];for(let g=1;g<f.length;g++){let A=f[g];(A.from>a.from||A.to<a.to)&&(a=A,t=g)}let u=a instanceof gr&&a.index<0?null:a.parent,p=f.slice();return u?p[t]=u:p.splice(t,1),new Og(p,a)}class Og{constructor(t,a){this.heads=t,this.node=a}get next(){return Cp(this.heads)}}function yg(f,t,a){let u=f.resolveInner(t,a),p=null;for(let g=u instanceof gr?u:u.context.parent;g;g=g.parent)if(g.index<0){let A=g.parent;(p||(p=[u])).push(A.resolve(t,a)),g=A}else{let A=Ul.get(g.tree);if(A&&A.overlay&&A.overlay[0].from<=t&&A.overlay[A.overlay.length-1].to>=t){let $=new gr(A.tree,A.overlay[0].from+g.from,-1,g);(p||(p=[u])).push(wa($,t,a,!1))}}return p?Cp(p):u}class Xc{get name(){return this.type.name}constructor(t,a=0){if(this.mode=a,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof gr)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let u=t._parent;u;u=u._parent)this.stack.unshift(u.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return t?(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0):!1}yieldBuf(t,a){this.index=t;let{start:u,buffer:p}=this.buffer;return this.type=a||p.set.types[p.buffer[t]],this.from=u+p.buffer[t+1],this.to=u+p.buffer[t+2],!0}yield(t){return t?t instanceof gr?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,a,u){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,a,u,this.mode));let{buffer:p}=this.buffer,g=p.findChild(this.index+4,p.buffer[this.index+3],t,a-this.buffer.start,u);return g<0?!1:(this.stack.push(this.index),this.yieldBuf(g))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,a,u=this.mode){return this.buffer?u&Wi.ExcludeBuffers?!1:this.enterChild(1,t,a):this.yield(this._tree.enter(t,a,u))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Wi.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Wi.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode)):!1;let{buffer:a}=this.buffer,u=this.stack.length-1;if(t<0){let p=u<0?0:this.stack[u]+4;if(this.index!=p)return this.yieldBuf(a.findChild(p,this.index,-1,0,4))}else{let p=a.buffer[this.index+3];if(p<(u<0?a.buffer.length:a.buffer[this.stack[u]+3]))return this.yieldBuf(p)}return u<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let a,u,{buffer:p}=this;if(p){if(t>0){if(this.index<p.buffer.buffer.length)return!1}else for(let g=0;g<this.index;g++)if(p.buffer.buffer[g+3]<this.index)return!1;({index:a,parent:u}=p)}else({index:a,_parent:u}=this._tree);for(;u;{index:a,_parent:u}=u)if(a>-1)for(let g=a+t,A=t<0?-1:u._tree.children.length;g!=A;g+=t){let $=u._tree.children[g];if(this.mode&Wi.IncludeAnonymous||$ instanceof Ss||!$.type.isAnonymous||Wc($))return!1}return!0}move(t,a){if(a&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,a=0){for(;(this.from==this.to||(a<1?this.from>=t:this.from>t)||(a>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,a););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,a=null,u=0;if(t&&t.context==this.buffer)e:for(let p=this.index,g=this.stack.length;g>=0;){for(let A=t;A;A=A._parent)if(A.index==p){if(p==this.index)return A;a=A,u=g+1;break e}p=this.stack[--g]}for(let p=u;p<this.stack.length;p++)a=new es(this.buffer,a,this.stack[p]);return this.bufferNode=new es(this.buffer,a,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,a){for(let u=0;;){let p=!1;if(this.type.isAnonymous||t(this)!==!1){if(this.firstChild()){u++;continue}this.type.isAnonymous||(p=!0)}for(;;){if(p&&a&&a(this),p=this.type.isAnonymous,!u)return;if(this.nextSibling())break;this.parent(),u--,p=!0}}}matchContext(t){if(!this.buffer)return Vc(this.node.parent,t);let{buffer:a}=this.buffer,{types:u}=a.set;for(let p=t.length-1,g=this.stack.length-1;p>=0;g--){if(g<0)return Vc(this._tree,t,p);let A=u[a.buffer[this.stack[g]]];if(!A.isAnonymous){if(t[p]&&t[p]!=A.name)return!1;p--}}return!0}}function Wc(f){return f.children.some(t=>t instanceof Ss||!t.type.isAnonymous||Wc(t))}function bg(f){var t;let{buffer:a,nodeSet:u,maxBufferLength:p=Op,reused:g=[],minRepeatType:A=u.types.length}=f,$=Array.isArray(a)?new Ic(a,a.length):a,F=u.types,V=0,z=0;function ie(Gt,nn,en,li,mi,Pi){let{id:hi,start:bn,end:Si,size:_i}=$,$i=z,fr=V;if(_i<0)if($.next(),_i==-1){let Os=g[hi];en.push(Os),li.push(bn-Gt);return}else if(_i==-3){V=hi;return}else if(_i==-4){z=hi;return}else throw new RangeError(`Unrecognized record size: ${_i}`);let Pr=F[hi],ls,nr,Qr=bn-Gt;if(Si-bn<=p&&(nr=ot($.pos-nn,mi))){let Os=new Uint16Array(nr.size-nr.skip),Lr=$.pos-nr.size,us=Os.length;for(;$.pos>Lr;)us=bt(nr.start,Os,us);ls=new Ss(Os,Si-nr.start,u),Qr=nr.start-Gt}else{let Os=$.pos-_i;$.next();let Lr=[],us=[],Hs=hi>=A?hi:-1,qo=0,Ku=Si;for(;$.pos>Os;)Hs>=0&&$.id==Hs&&$.size>=0?($.end<=Ku-p&&($e(Lr,us,bn,qo,$.end,Ku,Hs,$i,fr),qo=Lr.length,Ku=$.end),$.next()):Pi>2500?oe(bn,Os,Lr,us):ie(bn,Os,Lr,us,Hs,Pi+1);if(Hs>=0&&qo>0&&qo<Lr.length&&$e(Lr,us,bn,qo,bn,Ku,Hs,$i,fr),Lr.reverse(),us.reverse(),Hs>-1&&qo>0){let om=Ae(Pr,fr);ls=zc(Pr,Lr,us,0,Lr.length,0,Si-bn,om,om)}else ls=je(Pr,Lr,us,Si-bn,$i-Si,fr)}en.push(ls),li.push(Qr)}function oe(Gt,nn,en,li){let mi=[],Pi=0,hi=-1;for(;$.pos>nn;){let{id:bn,start:Si,end:_i,size:$i}=$;if($i>4)$.next();else{if(hi>-1&&Si<hi)break;hi<0&&(hi=_i-p),mi.push(bn,Si,_i),Pi++,$.next()}}if(Pi){let bn=new Uint16Array(Pi*4),Si=mi[mi.length-2];for(let _i=mi.length-3,$i=0;_i>=0;_i-=3)bn[$i++]=mi[_i],bn[$i++]=mi[_i+1]-Si,bn[$i++]=mi[_i+2]-Si,bn[$i++]=$i;en.push(new Ss(bn,mi[2]-Si,u)),li.push(Si-Gt)}}function Ae(Gt,nn){return(en,li,mi)=>{let Pi=0,hi=en.length-1,bn,Si;if(hi>=0&&(bn=en[hi])instanceof Gi){if(!hi&&bn.type==Gt&&bn.length==mi)return bn;(Si=bn.prop(ci.lookAhead))&&(Pi=li[hi]+bn.length+Si)}return je(Gt,en,li,mi,Pi,nn)}}function $e(Gt,nn,en,li,mi,Pi,hi,bn,Si){let _i=[],$i=[];for(;Gt.length>li;)_i.push(Gt.pop()),$i.push(nn.pop()+en-mi);Gt.push(je(u.types[hi],_i,$i,Pi-mi,bn-Pi,Si)),nn.push(mi-en)}function je(Gt,nn,en,li,mi,Pi,hi){if(Pi){let bn=[ci.contextHash,Pi];hi=hi?[bn].concat(hi):[bn]}if(mi>25){let bn=[ci.lookAhead,mi];hi=hi?[bn].concat(hi):[bn]}return new Gi(Gt,nn,en,li,hi)}function ot(Gt,nn){let en=$.fork(),li=0,mi=0,Pi=0,hi=en.end-p,bn={size:0,start:0,skip:0};e:for(let Si=en.pos-Gt;en.pos>Si;){let _i=en.size;if(en.id==nn&&_i>=0){bn.size=li,bn.start=mi,bn.skip=Pi,Pi+=4,li+=4,en.next();continue}let $i=en.pos-_i;if(_i<0||$i<Si||en.start<hi)break;let fr=en.id>=A?4:0,Pr=en.start;for(en.next();en.pos>$i;){if(en.size<0)if(en.size==-3||en.size==-4)fr+=4;else break e;else en.id>=A&&(fr+=4);en.next()}mi=Pr,li+=_i,Pi+=fr}return(nn<0||li==Gt)&&(bn.size=li,bn.start=mi,bn.skip=Pi),bn.size>4?bn:void 0}function bt(Gt,nn,en){let{id:li,start:mi,end:Pi,size:hi}=$;if($.next(),hi>=0&&li<A){let bn=en;if(hi>4){let Si=$.pos-(hi-4);for(;$.pos>Si;)en=bt(Gt,nn,en)}nn[--en]=bn,nn[--en]=Pi-Gt,nn[--en]=mi-Gt,nn[--en]=li}else hi==-3?V=li:hi==-4&&(z=li);return en}let Xt=[],Zt=[];for(;$.pos>0;)ie(f.start||0,f.bufferStart||0,Xt,Zt,-1,0);let an=(t=f.length)!==null&&t!==void 0?t:Xt.length?Zt[0]+Xt[0].length:0;return new Gi(F[f.topID],Xt.reverse(),Zt.reverse(),an)}const Sp=new WeakMap;function Hl(f,t){if(!f.isAnonymous||t instanceof Ss||t.type!=f)return 1;let a=Sp.get(t);if(a==null){a=1;for(let u of t.children){if(u.type!=f||!(u instanceof Gi)){a=1;break}a+=Hl(f,u)}Sp.set(t,a)}return a}function zc(f,t,a,u,p,g,A,$,F){let V=0;for(let $e=u;$e<p;$e++)V+=Hl(f,t[$e]);let z=Math.ceil(V*1.5/8),ie=[],oe=[];function Ae($e,je,ot,bt,Xt){for(let Zt=ot;Zt<bt;){let an=Zt,Gt=je[Zt],nn=Hl(f,$e[Zt]);for(Zt++;Zt<bt;Zt++){let en=Hl(f,$e[Zt]);if(nn+en>=z)break;nn+=en}if(Zt==an+1){if(nn>z){let en=$e[an];Ae(en.children,en.positions,0,en.children.length,je[an]+Xt);continue}ie.push($e[an])}else{let en=je[Zt-1]+$e[Zt-1].length-Gt;ie.push(zc(f,$e,je,an,Zt,Gt,en,null,F))}oe.push(Gt+Xt-g)}}return Ae(t,a,u,p,0),($||F)(ie,oe,A)}class Ag{constructor(){this.map=new WeakMap}setBuffer(t,a,u){let p=this.map.get(t);p||this.map.set(t,p=new Map),p.set(a,u)}getBuffer(t,a){let u=this.map.get(t);return u&&u.get(a)}set(t,a){t instanceof es?this.setBuffer(t.context.buffer,t.index,a):t instanceof gr&&this.map.set(t.tree,a)}get(t){return t instanceof es?this.getBuffer(t.context.buffer,t.index):t instanceof gr?this.map.get(t.tree):void 0}cursorSet(t,a){t.buffer?this.setBuffer(t.buffer.buffer,t.index,a):this.map.set(t.tree,a)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Is{constructor(t,a,u,p,g=!1,A=!1){this.from=t,this.to=a,this.tree=u,this.offset=p,this.open=(g?1:0)|(A?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(t,a=[],u=!1){let p=[new Is(0,t.length,t,0,!1,u)];for(let g of a)g.to>t.length&&p.push(g);return p}static applyChanges(t,a,u=128){if(!a.length)return t;let p=[],g=1,A=t.length?t[0]:null;for(let $=0,F=0,V=0;;$++){let z=$<a.length?a[$]:null,ie=z?z.fromA:1e9;if(ie-F>=u)for(;A&&A.from<ie;){let oe=A;if(F>=oe.from||ie<=oe.to||V){let Ae=Math.max(oe.from,F)-V,$e=Math.min(oe.to,ie)-V;oe=Ae>=$e?null:new Is(Ae,$e,oe.tree,oe.offset+V,$>0,!!z)}if(oe&&p.push(oe),A.to>ie)break;A=g<t.length?t[g++]:null}if(!z)break;F=z.toA,V=z.toA-z.toB}return p}}class wp{startParse(t,a,u){return typeof t=="string"&&(t=new vg(t)),u=u?u.length?u.map(p=>new Gc(p.from,p.to)):[new Gc(0,0)]:[new Gc(0,t.length)],this.createParse(t,a||[],u)}parse(t,a,u){let p=this.startParse(t,a,u);for(;;){let g=p.advance();if(g)return g}}}class vg{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,a){return this.string.slice(t,a)}}new ci({perNode:!0});let xg=0;class Tr{constructor(t,a,u,p){this.name=t,this.set=a,this.base=u,this.modified=p,this.id=xg++}toString(){let{name:t}=this;for(let a of this.modified)a.name&&(t=`${a.name}(${t})`);return t}static define(t,a){let u=typeof t=="string"?t:"?";if(t instanceof Tr&&(a=t),a?.base)throw new Error("Can not derive from a modified tag");let p=new Tr(u,[],null,[]);if(p.set.push(p),a)for(let g of a.set)p.set.push(g);return p}static defineModifier(t){let a=new Kl(t);return u=>u.modified.indexOf(a)>-1?u:Kl.get(u.base||u,u.modified.concat(a).sort((p,g)=>p.id-g.id))}}let Cg=0;class Kl{constructor(t){this.name=t,this.instances=[],this.id=Cg++}static get(t,a){if(!a.length)return t;let u=a[0].instances.find($=>$.base==t&&Sg(a,$.modified));if(u)return u;let p=[],g=new Tr(t.name,p,t,a);for(let $ of a)$.instances.push(g);let A=wg(a);for(let $ of t.set)if(!$.modified.length)for(let F of A)p.push(Kl.get($,F));return g}}function Sg(f,t){return f.length==t.length&&f.every((a,u)=>a==t[u])}function wg(f){let t=[[]];for(let a=0;a<f.length;a++)for(let u=0,p=t.length;u<p;u++)t.push(t[u].concat(f[a]));return t.sort((a,u)=>u.length-a.length)}function Pp(f){let t=Object.create(null);for(let a in f){let u=f[a];Array.isArray(u)||(u=[u]);for(let p of a.split(" "))if(p){let g=[],A=2,$=p;for(let ie=0;;){if($=="..."&&ie>0&&ie+3==p.length){A=1;break}let oe=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec($);if(!oe)throw new RangeError("Invalid path: "+p);if(g.push(oe[0]=="*"?"":oe[0][0]=='"'?JSON.parse(oe[0]):oe[0]),ie+=oe[0].length,ie==p.length)break;let Ae=p[ie++];if(ie==p.length&&Ae=="!"){A=0;break}if(Ae!="/")throw new RangeError("Invalid path: "+p);$=p.slice(ie)}let F=g.length-1,V=g[F];if(!V)throw new RangeError("Invalid path: "+p);let z=new Pa(u,A,F>0?g.slice(0,F):null);t[V]=z.sort(t[V])}}return Mp.add(t)}const Mp=new ci({combine(f,t){let a,u,p;for(;f||t;){if(!f||t&&f.depth>=t.depth?(p=t,t=t.next):(p=f,f=f.next),a&&a.mode==p.mode&&!p.context&&!a.context)continue;let g=new Pa(p.tags,p.mode,p.context);a?a.next=g:u=g,a=g}return u}});class Pa{constructor(t,a,u,p){this.tags=t,this.mode=a,this.context=u,this.next=p}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}Pa.empty=new Pa([],2,null);function kp(f,t){let a=Object.create(null);for(let g of f)if(!Array.isArray(g.tag))a[g.tag.id]=g.class;else for(let A of g.tag)a[A.id]=g.class;let{scope:u,all:p=null}=t||{};return{style:g=>{let A=p;for(let $ of g)for(let F of $.set){let V=a[F.id];if(V){A=A?A+" "+V:V;break}}return A},scope:u}}function Pg(f,t){let a=null;for(let u of f){let p=u.style(t);p&&(a=a?a+" "+p:p)}return a}function Mg(f,t,a,u=0,p=f.length){let g=new kg(u,Array.isArray(t)?t:[t],a);g.highlightRange(f.cursor(),u,p,"",g.highlighters),g.flush(p)}class kg{constructor(t,a,u){this.at=t,this.highlighters=a,this.span=u,this.class=""}startSpan(t,a){a!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=a)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,a,u,p,g){let{type:A,from:$,to:F}=t;if($>=u||F<=a)return;A.isTop&&(g=this.highlighters.filter(Ae=>!Ae.scope||Ae.scope(A)));let V=p,z=$g(t)||Pa.empty,ie=Pg(g,z.tags);if(ie&&(V&&(V+=" "),V+=ie,z.mode==1&&(p+=(p?" ":"")+ie)),this.startSpan(Math.max(a,$),V),z.opaque)return;let oe=t.tree&&t.tree.prop(ci.mounted);if(oe&&oe.overlay){let Ae=t.node.enter(oe.overlay[0].from+$,1),$e=this.highlighters.filter(ot=>!ot.scope||ot.scope(oe.tree.type)),je=t.firstChild();for(let ot=0,bt=$;;ot++){let Xt=ot<oe.overlay.length?oe.overlay[ot]:null,Zt=Xt?Xt.from+$:F,an=Math.max(a,bt),Gt=Math.min(u,Zt);if(an<Gt&&je)for(;t.from<Gt&&(this.highlightRange(t,an,Gt,p,g),this.startSpan(Math.min(Gt,t.to),V),!(t.to>=Zt||!t.nextSibling())););if(!Xt||Zt>u)break;bt=Xt.to+$,bt>a&&(this.highlightRange(Ae.cursor(),Math.max(a,Xt.from+$),Math.min(u,bt),"",$e),this.startSpan(Math.min(u,bt),V))}je&&t.parent()}else if(t.firstChild()){oe&&(p="");do if(!(t.to<=a)){if(t.from>=u)break;this.highlightRange(t,a,u,p,g),this.startSpan(Math.min(u,t.to),V)}while(t.nextSibling());t.parent()}}}function $g(f){let t=f.type.prop(Mp);for(;t&&t.context&&!f.matchContext(t.context);)t=t.next;return t||null}const Ht=Tr.define,Jl=Ht(),ws=Ht(),$p=Ht(ws),Dp=Ht(ws),Ps=Ht(),eu=Ht(Ps),qc=Ht(Ps),ts=Ht(),Vs=Ht(ts),ns=Ht(),is=Ht(),jc=Ht(),Ma=Ht(jc),tu=Ht(),st={comment:Jl,lineComment:Ht(Jl),blockComment:Ht(Jl),docComment:Ht(Jl),name:ws,variableName:Ht(ws),typeName:$p,tagName:Ht($p),propertyName:Dp,attributeName:Ht(Dp),className:Ht(ws),labelName:Ht(ws),namespace:Ht(ws),macroName:Ht(ws),literal:Ps,string:eu,docString:Ht(eu),character:Ht(eu),attributeValue:Ht(eu),number:qc,integer:Ht(qc),float:Ht(qc),bool:Ht(Ps),regexp:Ht(Ps),escape:Ht(Ps),color:Ht(Ps),url:Ht(Ps),keyword:ns,self:Ht(ns),null:Ht(ns),atom:Ht(ns),unit:Ht(ns),modifier:Ht(ns),operatorKeyword:Ht(ns),controlKeyword:Ht(ns),definitionKeyword:Ht(ns),moduleKeyword:Ht(ns),operator:is,derefOperator:Ht(is),arithmeticOperator:Ht(is),logicOperator:Ht(is),bitwiseOperator:Ht(is),compareOperator:Ht(is),updateOperator:Ht(is),definitionOperator:Ht(is),typeOperator:Ht(is),controlOperator:Ht(is),punctuation:jc,separator:Ht(jc),bracket:Ma,angleBracket:Ht(Ma),squareBracket:Ht(Ma),paren:Ht(Ma),brace:Ht(Ma),content:ts,heading:Vs,heading1:Ht(Vs),heading2:Ht(Vs),heading3:Ht(Vs),heading4:Ht(Vs),heading5:Ht(Vs),heading6:Ht(Vs),contentSeparator:Ht(ts),list:Ht(ts),quote:Ht(ts),emphasis:Ht(ts),strong:Ht(ts),link:Ht(ts),monospace:Ht(ts),strikethrough:Ht(ts),inserted:Ht(),deleted:Ht(),changed:Ht(),invalid:Ht(),meta:tu,documentMeta:Ht(tu),annotation:Ht(tu),processingInstruction:Ht(tu),definition:Tr.defineModifier("definition"),constant:Tr.defineModifier("constant"),function:Tr.defineModifier("function"),standard:Tr.defineModifier("standard"),local:Tr.defineModifier("local"),special:Tr.defineModifier("special")};for(let f in st){let t=st[f];t instanceof Tr&&(t.name=f)}kp([{tag:st.link,class:"tok-link"},{tag:st.heading,class:"tok-heading"},{tag:st.emphasis,class:"tok-emphasis"},{tag:st.strong,class:"tok-strong"},{tag:st.keyword,class:"tok-keyword"},{tag:st.atom,class:"tok-atom"},{tag:st.bool,class:"tok-bool"},{tag:st.url,class:"tok-url"},{tag:st.labelName,class:"tok-labelName"},{tag:st.inserted,class:"tok-inserted"},{tag:st.deleted,class:"tok-deleted"},{tag:st.literal,class:"tok-literal"},{tag:st.string,class:"tok-string"},{tag:st.number,class:"tok-number"},{tag:[st.regexp,st.escape,st.special(st.string)],class:"tok-string2"},{tag:st.variableName,class:"tok-variableName"},{tag:st.local(st.variableName),class:"tok-variableName tok-local"},{tag:st.definition(st.variableName),class:"tok-variableName tok-definition"},{tag:st.special(st.variableName),class:"tok-variableName2"},{tag:st.definition(st.propertyName),class:"tok-propertyName tok-definition"},{tag:st.typeName,class:"tok-typeName"},{tag:st.namespace,class:"tok-namespace"},{tag:st.className,class:"tok-className"},{tag:st.macroName,class:"tok-macroName"},{tag:st.propertyName,class:"tok-propertyName"},{tag:st.operator,class:"tok-operator"},{tag:st.comment,class:"tok-comment"},{tag:st.meta,class:"tok-meta"},{tag:st.invalid,class:"tok-invalid"},{tag:st.punctuation,class:"tok-punctuation"}]);var Uc;const Ao=new ci;function Ep(f){return Dt.define({combine:f?t=>t.concat(f):void 0})}const Yc=new ci;class Xr{constructor(t,a,u=[],p=""){this.data=t,this.name=p,at.prototype.hasOwnProperty("tree")||Object.defineProperty(at.prototype,"tree",{get(){return zi(this)}}),this.parser=a,this.extension=[Ms.of(this),at.languageData.of((g,A,$)=>{let F=Tp(g,A,$),V=F.type.prop(Ao);if(!V)return[];let z=g.facet(V),ie=F.type.prop(Yc);if(ie){let oe=F.resolve(A-F.from,$);for(let Ae of ie)if(Ae.test(oe,g)){let $e=g.facet(Ae.facet);return Ae.type=="replace"?$e:$e.concat(z)}}return z})].concat(u)}isActiveAt(t,a,u=-1){return Tp(t,a,u).type.prop(Ao)==this.data}findRegions(t){let a=t.facet(Ms);if(a?.data==this.data)return[{from:0,to:t.doc.length}];if(!a||!a.allowsNesting)return[];let u=[],p=(g,A)=>{if(g.prop(Ao)==this.data){u.push({from:A,to:A+g.length});return}let $=g.prop(ci.mounted);if($){if($.tree.prop(Ao)==this.data){if($.overlay)for(let F of $.overlay)u.push({from:F.from+A,to:F.to+A});else u.push({from:A,to:A+g.length});return}else if($.overlay){let F=u.length;if(p($.tree,$.overlay[0].from+A),u.length>F)return}}for(let F=0;F<g.children.length;F++){let V=g.children[F];V instanceof Gi&&p(V,g.positions[F]+A)}};return p(zi(t),0),u}get allowsNesting(){return!0}}Xr.setState=Et.define();function Tp(f,t,a){let u=f.facet(Ms),p=zi(f).topNode;if(!u||u.allowsNesting)for(let g=p;g;g=g.enter(t,a,Wi.ExcludeBuffers))g.type.isTop&&(p=g);return p}class nu extends Xr{constructor(t,a,u){super(t,a,[],u),this.parser=a}static define(t){let a=Ep(t.languageData);return new nu(a,t.parser.configure({props:[Ao.add(u=>u.isTop?a:void 0)]}),t.name)}configure(t,a){return new nu(this.data,this.parser.configure(t),a||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function zi(f){let t=f.field(Xr.state,!1);return t?t.tree:Gi.empty}class Dg{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,a){let u=this.cursorPos-this.string.length;return t<u||a>=this.cursorPos?this.doc.sliceString(t,a):this.string.slice(t-u,a-u)}}let ka=null;class iu{constructor(t,a,u=[],p,g,A,$,F){this.parser=t,this.state=a,this.fragments=u,this.tree=p,this.treeLen=g,this.viewport=A,this.skipped=$,this.scheduleOn=F,this.parse=null,this.tempSkipped=[]}static create(t,a,u){return new iu(t,a,[],Gi.empty,0,u,[],null)}startParse(){return this.parser.startParse(new Dg(this.state.doc),this.fragments)}work(t,a){return a!=null&&a>=this.state.doc.length&&(a=void 0),this.tree!=Gi.empty&&this.isDone(a??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var u;if(typeof t=="number"){let p=Date.now()+t;t=()=>Date.now()>p}for(this.parse||(this.parse=this.startParse()),a!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>a)&&a<this.state.doc.length&&this.parse.stopAt(a);;){let p=this.parse.advance();if(p)if(this.fragments=this.withoutTempSkipped(Is.addTree(p,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(u=this.parse.stoppedAt)!==null&&u!==void 0?u:this.state.doc.length,this.tree=p,this.parse=null,this.treeLen<(a??this.state.doc.length))this.parse=this.startParse();else return!0;if(t())return!1}})}takeTree(){let t,a;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext(()=>{for(;!(a=this.parse.advance()););}),this.treeLen=t,this.tree=a,this.fragments=this.withoutTempSkipped(Is.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let a=ka;ka=this;try{return t()}finally{ka=a}}withoutTempSkipped(t){for(let a;a=this.tempSkipped.pop();)t=Fp(t,a.from,a.to);return t}changes(t,a){let{fragments:u,tree:p,treeLen:g,viewport:A,skipped:$}=this;if(this.takeTree(),!t.empty){let F=[];if(t.iterChangedRanges((V,z,ie,oe)=>F.push({fromA:V,toA:z,fromB:ie,toB:oe})),u=Is.applyChanges(u,F),p=Gi.empty,g=0,A={from:t.mapPos(A.from,-1),to:t.mapPos(A.to,1)},this.skipped.length){$=[];for(let V of this.skipped){let z=t.mapPos(V.from,1),ie=t.mapPos(V.to,-1);z<ie&&$.push({from:z,to:ie})}}}return new iu(this.parser,a,u,p,g,A,$,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let a=this.skipped.length;for(let u=0;u<this.skipped.length;u++){let{from:p,to:g}=this.skipped[u];p<t.to&&g>t.from&&(this.fragments=Fp(this.fragments,p,g),this.skipped.splice(u--,1))}return this.skipped.length>=a?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,a){this.skipped.push({from:t,to:a})}static getSkippingParser(t){return new class extends wp{createParse(a,u,p){let g=p[0].from,A=p[p.length-1].to;return{parsedPos:g,advance(){let F=ka;if(F){for(let V of p)F.tempSkipped.push(V);t&&(F.scheduleOn=F.scheduleOn?Promise.all([F.scheduleOn,t]):t)}return this.parsedPos=A,new Gi(mr.none,[],[],A-g)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let a=this.fragments;return this.treeLen>=t&&a.length&&a[0].from==0&&a[0].to>=t}static get(){return ka}}function Fp(f,t,a){return Is.applyChanges(f,[{fromA:t,toA:a,fromB:t,toB:a}])}class vo{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let a=this.context.changes(t.changes,t.state),u=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),a.viewport.to);return a.work(20,u)||a.takeTree(),new vo(a)}static init(t){let a=Math.min(3e3,t.doc.length),u=iu.create(t.facet(Ms).parser,t,{from:0,to:a});return u.work(20,a)||u.takeTree(),new vo(u)}}Xr.state=wn.define({create:vo.init,update(f,t){for(let a of t.effects)if(a.is(Xr.setState))return a.value;return t.startState.facet(Ms)!=t.state.facet(Ms)?vo.init(t.state):f.apply(t)}});let Rp=f=>{let t=setTimeout(()=>f(),500);return()=>clearTimeout(t)};typeof requestIdleCallback<"u"&&(Rp=f=>{let t=-1,a=setTimeout(()=>{t=requestIdleCallback(f,{timeout:400})},100);return()=>t<0?clearTimeout(a):cancelIdleCallback(t)});const Hc=typeof navigator<"u"&&(!((Uc=navigator.scheduling)===null||Uc===void 0)&&Uc.isInputPending)?()=>navigator.scheduling.isInputPending():null,Eg=Ri.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let a=this.view.state.field(Xr.state).context;(a.updateViewport(t.view.viewport)||this.view.viewport.to>a.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(a)}scheduleWork(){if(this.working)return;let{state:t}=this.view,a=t.field(Xr.state);(a.tree!=a.context.tree||!a.context.isDone(t.doc.length))&&(this.working=Rp(this.work))}work(t){this.working=null;let a=Date.now();if(this.chunkEnd<a&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=a+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:u,viewport:{to:p}}=this.view,g=u.field(Xr.state);if(g.tree==g.context.tree&&g.context.isDone(p+1e5))return;let A=Date.now()+Math.min(this.chunkBudget,100,t&&!Hc?Math.max(25,t.timeRemaining()-5):1e9),$=g.context.treeLen<p&&u.doc.length>p+1e3,F=g.context.work(()=>Hc&&Hc()||Date.now()>A,p+($?0:1e5));this.chunkBudget-=Date.now()-a,(F||this.chunkBudget<=0)&&(g.context.takeTree(),this.view.dispatch({effects:Xr.setState.of(new vo(g.context))})),this.chunkBudget>0&&!(F&&!$)&&this.scheduleWork(),this.checkAsyncSchedule(g.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then(()=>this.scheduleWork()).catch(a=>Vi(this.view.state,a)).then(()=>this.workScheduled--),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ms=Dt.define({combine(f){return f.length?f[0]:null},enables:f=>[Xr.state,Eg,on.contentAttributes.compute([f],t=>{let a=t.facet(f);return a&&a.name?{"data-language":a.name}:{}})]});class Tg{constructor(t,a=[]){this.language=t,this.support=a,this.extension=[t,a]}}const Fg=Dt.define(),$a=Dt.define({combine:f=>{if(!f.length)return"  ";let t=f[0];if(!t||/\S/.test(t)||Array.from(t).some(a=>a!=t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(f[0]));return t}});function ru(f){let t=f.facet($a);return t.charCodeAt(0)==9?f.tabSize*t.length:t.length}function Da(f,t){let a="",u=f.tabSize,p=f.facet($a)[0];if(p=="	"){for(;t>=u;)a+="	",t-=u;p=" "}for(let g=0;g<t;g++)a+=p;return a}function Kc(f,t){f instanceof at&&(f=new su(f));for(let u of f.state.facet(Fg)){let p=u(f,t);if(p!==void 0)return p}let a=zi(f.state);return a.length>=t?Rg(f,a,t):null}class su{constructor(t,a={}){this.state=t,this.options=a,this.unit=ru(t)}lineAt(t,a=1){let u=this.state.doc.lineAt(t),{simulateBreak:p,simulateDoubleBreak:g}=this.options;return p!=null&&p>=u.from&&p<=u.to?g&&p==t?{text:"",from:t}:(a<0?p<t:p<=t)?{text:u.text.slice(p-u.from),from:p}:{text:u.text.slice(0,p-u.from),from:u.from}:u}textAfterPos(t,a=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:u,from:p}=this.lineAt(t,a);return u.slice(t-p,Math.min(u.length,t+100-p))}column(t,a=1){let{text:u,from:p}=this.lineAt(t,a),g=this.countColumn(u,t-p),A=this.options.overrideIndentation?this.options.overrideIndentation(p):-1;return A>-1&&(g+=A-this.countColumn(u,u.search(/\S|$/))),g}countColumn(t,a=t.length){return Rs(t,this.state.tabSize,a)}lineIndent(t,a=1){let{text:u,from:p}=this.lineAt(t,a),g=this.options.overrideIndentation;if(g){let A=g(p);if(A>-1)return A}return this.countColumn(u,u.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Bp=new ci;function Rg(f,t,a){let u=t.resolveStack(a),p=t.resolveInner(a,-1).resolve(a,0).enterUnfinishedNodesBefore(a);if(p!=u.node){let g=[];for(let A=p;A&&!(A.from<u.node.from||A.to>u.node.to||A.from==u.node.from&&A.type==u.node.type);A=A.parent)g.push(A);for(let A=g.length-1;A>=0;A--)u={node:g[A],next:u}}return Qp(u,f,a)}function Qp(f,t,a){for(let u=f;u;u=u.next){let p=Qg(u.node);if(p)return p(Jc.create(t,a,u))}return 0}function Bg(f){return f.pos==f.options.simulateBreak&&f.options.simulateDoubleBreak}function Qg(f){let t=f.type.prop(Bp);if(t)return t;let a=f.firstChild,u;if(a&&(u=a.type.prop(ci.closedBy))){let p=f.lastChild,g=p&&u.indexOf(p.name)>-1;return A=>Lp(A,!0,1,void 0,g&&!Bg(A)?p.from:void 0)}return f.parent==null?Lg:null}function Lg(){return 0}class Jc extends su{constructor(t,a,u){super(t.state,t.options),this.base=t,this.pos=a,this.context=u}get node(){return this.context.node}static create(t,a,u){return new Jc(t,a,u)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let a=this.state.doc.lineAt(t.from);for(;;){let u=t.resolve(a.from);for(;u.parent&&u.parent.from==u.from;)u=u.parent;if(Ng(u,t))break;a=this.state.doc.lineAt(u.from)}return this.lineIndent(a.from)}continue(){return Qp(this.context.next,this.base,this.pos)}}function Ng(f,t){for(let a=t;a;a=a.parent)if(f==a)return!0;return!1}function Gg(f){let t=f.node,a=t.childAfter(t.from),u=t.lastChild;if(!a)return null;let p=f.options.simulateBreak,g=f.state.doc.lineAt(a.from),A=p==null||p<=g.from?g.to:Math.min(g.to,p);for(let $=a.to;;){let F=t.childAfter($);if(!F||F==u)return null;if(!F.type.isSkipped){if(F.from>=A)return null;let V=/^ */.exec(g.text.slice(a.to-g.from))[0].length;return{from:a.from,to:a.to+V}}$=F.to}}function Zg({closing:f,align:t=!0,units:a=1}){return u=>Lp(u,t,a,f)}function Lp(f,t,a,u,p){let g=f.textAfter,A=g.match(/^\s*/)[0].length,$=u&&g.slice(A,A+u.length)==u||p==f.pos+A,F=t?Gg(f):null;return F?$?f.column(F.from):f.column(F.to):f.baseIndent+($?0:f.unit*a)}const Ig=f=>f.baseIndent;function ef({except:f,units:t=1}={}){return a=>{let u=f&&f.test(a.textAfter);return a.baseIndent+(u?0:t*a.unit)}}const Vg=200;function Xg(){return at.transactionFilter.of(f=>{if(!f.docChanged||!f.isUserEvent("input.type")&&!f.isUserEvent("input.complete"))return f;let t=f.startState.languageDataAt("indentOnInput",f.startState.selection.main.head);if(!t.length)return f;let a=f.newDoc,{head:u}=f.newSelection.main,p=a.lineAt(u);if(u>p.from+Vg)return f;let g=a.sliceString(p.from,u);if(!t.some(V=>V.test(g)))return f;let{state:A}=f,$=-1,F=[];for(let{head:V}of A.selection.ranges){let z=A.doc.lineAt(V);if(z.from==$)continue;$=z.from;let ie=Kc(A,z.from);if(ie==null)continue;let oe=/^\s*/.exec(z.text)[0],Ae=Da(A,ie);oe!=Ae&&F.push({from:z.from,to:z.from+oe.length,insert:Ae})}return F.length?[f,{changes:F,sequential:!0}]:f})}const Wg=Dt.define(),Np=new ci;function zg(f){let t=f.firstChild,a=f.lastChild;return t&&t.to<a.from?{from:t.to,to:a.type.isError?f.to:a.from}:null}function qg(f,t,a){let u=zi(f);if(u.length<a)return null;let p=u.resolveStack(a,1),g=null;for(let A=p;A;A=A.next){let $=A.node;if($.to<=a||$.from>a)continue;if(g&&$.from<t)break;let F=$.type.prop(Np);if(F&&($.to<u.length-50||u.length==f.doc.length||!jg($))){let V=F($,f);V&&V.from<=a&&V.from>=t&&V.to>a&&(g=V)}}return g}function jg(f){let t=f.lastChild;return t&&t.to==f.to&&t.type.isError}function ou(f,t,a){for(let u of f.facet(Wg)){let p=u(f,t,a);if(p)return p}return qg(f,t,a)}function Gp(f,t){let a=t.mapPos(f.from,1),u=t.mapPos(f.to,-1);return a>=u?void 0:{from:a,to:u}}const au=Et.define({map:Gp}),Ea=Et.define({map:Gp});function Zp(f){let t=[];for(let{head:a}of f.state.selection.ranges)t.some(u=>u.from<=a&&u.to>=a)||t.push(f.lineBlockAt(a));return t}const Xs=wn.define({create(){return mn.none},update(f,t){t.isUserEvent("delete")&&t.changes.iterChangedRanges((a,u)=>f=Ip(f,a,u)),f=f.map(t.changes);for(let a of t.effects)if(a.is(au)&&!Ug(f,a.value.from,a.value.to)){let{preparePlaceholder:u}=t.state.facet(Wp),p=u?mn.replace({widget:new t_(u(t.state,a.value))}):jp;f=f.update({add:[p.range(a.value.from,a.value.to)]})}else a.is(Ea)&&(f=f.update({filter:(u,p)=>a.value.from!=u||a.value.to!=p,filterFrom:a.value.from,filterTo:a.value.to}));return t.selection&&(f=Ip(f,t.selection.main.head)),f},provide:f=>on.decorations.from(f),toJSON(f,t){let a=[];return f.between(0,t.doc.length,(u,p)=>{a.push(u,p)}),a},fromJSON(f){if(!Array.isArray(f)||f.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let a=0;a<f.length;){let u=f[a++],p=f[a++];if(typeof u!="number"||typeof p!="number")throw new RangeError("Invalid JSON for fold state");t.push(jp.range(u,p))}return mn.set(t,!0)}});function Ip(f,t,a=t){let u=!1;return f.between(t,a,(p,g)=>{p<a&&g>t&&(u=!0)}),u?f.update({filterFrom:t,filterTo:a,filter:(p,g)=>p>=a||g<=t}):f}function lu(f,t,a){var u;let p=null;return(u=f.field(Xs,!1))===null||u===void 0||u.between(t,a,(g,A)=>{(!p||p.from>g)&&(p={from:g,to:A})}),p}function Ug(f,t,a){let u=!1;return f.between(t,t,(p,g)=>{p==t&&g==a&&(u=!0)}),u}function Vp(f,t){return f.field(Xs,!1)?t:t.concat(Et.appendConfig.of(zp()))}const Yg=f=>{for(let t of Zp(f)){let a=ou(f.state,t.from,t.to);if(a)return f.dispatch({effects:Vp(f.state,[au.of(a),Xp(f,a)])}),!0}return!1},Hg=f=>{if(!f.state.field(Xs,!1))return!1;let t=[];for(let a of Zp(f)){let u=lu(f.state,a.from,a.to);u&&t.push(Ea.of(u),Xp(f,u,!1))}return t.length&&f.dispatch({effects:t}),t.length>0};function Xp(f,t,a=!0){let u=f.state.doc.lineAt(t.from).number,p=f.state.doc.lineAt(t.to).number;return on.announce.of(`${f.state.phrase(a?"Folded lines":"Unfolded lines")} ${u} ${f.state.phrase("to")} ${p}.`)}const Kg=f=>{let{state:t}=f,a=[];for(let u=0;u<t.doc.length;){let p=f.lineBlockAt(u),g=ou(t,p.from,p.to);g&&a.push(au.of(g)),u=(g?f.lineBlockAt(g.to):p).to+1}return a.length&&f.dispatch({effects:Vp(f.state,a)}),!!a.length},Jg=f=>{let t=f.state.field(Xs,!1);if(!t||!t.size)return!1;let a=[];return t.between(0,f.state.doc.length,(u,p)=>{a.push(Ea.of({from:u,to:p}))}),f.dispatch({effects:a}),!0},e_={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Wp=Dt.define({combine(f){return Ot(f,e_)}});function zp(f){return[Xs,r_]}function qp(f,t){let{state:a}=f,u=a.facet(Wp),p=A=>{let $=f.lineBlockAt(f.posAtDOM(A.target)),F=lu(f.state,$.from,$.to);F&&f.dispatch({effects:Ea.of(F)}),A.preventDefault()};if(u.placeholderDOM)return u.placeholderDOM(f,p,t);let g=document.createElement("span");return g.textContent=u.placeholderText,g.setAttribute("aria-label",a.phrase("folded code")),g.title=a.phrase("unfold"),g.className="cm-foldPlaceholder",g.onclick=p,g}const jp=mn.replace({widget:new class extends vr{toDOM(f){return qp(f,null)}}});class t_ extends vr{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return qp(t,this.value)}}const n_={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class tf extends gs{constructor(t,a){super(),this.config=t,this.open=a}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let a=document.createElement("span");return a.textContent=this.open?this.config.openText:this.config.closedText,a.title=t.state.phrase(this.open?"Fold line":"Unfold line"),a}}function i_(f={}){let t={...n_,...f},a=new tf(t,!0),u=new tf(t,!1),p=Ri.fromClass(class{constructor(A){this.from=A.viewport.from,this.markers=this.buildMarkers(A)}update(A){(A.docChanged||A.viewportChanged||A.startState.facet(Ms)!=A.state.facet(Ms)||A.startState.field(Xs,!1)!=A.state.field(Xs,!1)||zi(A.startState)!=zi(A.state)||t.foldingChanged(A))&&(this.markers=this.buildMarkers(A.view))}buildMarkers(A){let $=new br;for(let F of A.viewportLineBlocks){let V=lu(A.state,F.from,F.to)?u:ou(A.state,F.from,F.to)?a:null;V&&$.add(F.from,F.from,V)}return $.finish()}}),{domEventHandlers:g}=t;return[p,rg({class:"cm-foldGutter",markers(A){var $;return(($=A.plugin(p))===null||$===void 0?void 0:$.markers)||Zn.empty},initialSpacer(){return new tf(t,!1)},domEventHandlers:{...g,click:(A,$,F)=>{if(g.click&&g.click(A,$,F))return!0;let V=lu(A.state,$.from,$.to);if(V)return A.dispatch({effects:Ea.of(V)}),!0;let z=ou(A.state,$.from,$.to);return z?(A.dispatch({effects:au.of(z)}),!0):!1}}}),zp()]}const r_=on.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class uu{constructor(t,a){this.specs=t;let u;function p($){let F=jr.newName();return(u||(u=Object.create(null)))["."+F]=$,F}const g=typeof a.all=="string"?a.all:a.all?p(a.all):void 0,A=a.scope;this.scope=A instanceof Xr?$=>$.prop(Ao)==A.data:A?$=>$==A:void 0,this.style=kp(t.map($=>({tag:$.tag,class:$.class||p(Object.assign({},$,{tag:null}))})),{all:g}).style,this.module=u?new jr(u):null,this.themeType=a.themeType}static define(t,a){return new uu(t,a||{})}}const nf=Dt.define(),s_=Dt.define({combine(f){return f.length?[f[0]]:null}});function rf(f){let t=f.facet(nf);return t.length?t:f.facet(s_)}function o_(f,t){let a=[l_],u;return f instanceof uu&&(f.module&&a.push(on.styleModule.of(f.module)),u=f.themeType),u?a.push(nf.computeN([on.darkTheme],p=>p.facet(on.darkTheme)==(u=="dark")?[f]:[])):a.push(nf.of(f)),a}class a_{constructor(t){this.markCache=Object.create(null),this.tree=zi(t.state),this.decorations=this.buildDeco(t,rf(t.state)),this.decoratedTo=t.viewport.to}update(t){let a=zi(t.state),u=rf(t.state),p=u!=rf(t.startState),{viewport:g}=t.view,A=t.changes.mapPos(this.decoratedTo,1);a.length<g.to&&!p&&a.type==this.tree.type&&A>=g.to?(this.decorations=this.decorations.map(t.changes),this.decoratedTo=A):(a!=this.tree||t.viewportChanged||p)&&(this.tree=a,this.decorations=this.buildDeco(t.view,u),this.decoratedTo=g.to)}buildDeco(t,a){if(!a||!this.tree.length)return mn.none;let u=new br;for(let{from:p,to:g}of t.visibleRanges)Mg(this.tree,a,(A,$,F)=>{u.add(A,$,this.markCache[F]||(this.markCache[F]=mn.mark({class:F})))},p,g);return u.finish()}}const l_=Di.high(Ri.fromClass(a_,{decorations:f=>f.decorations})),u_=on.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Up=1e4,Yp="()[]{}",Hp=Dt.define({combine(f){return Ot(f,{afterCursor:!0,brackets:Yp,maxScanDistance:Up,renderMatch:h_})}}),c_=mn.mark({class:"cm-matchingBracket"}),f_=mn.mark({class:"cm-nonmatchingBracket"});function h_(f){let t=[],a=f.matched?c_:f_;return t.push(a.range(f.start.from,f.start.to)),f.end&&t.push(a.range(f.end.from,f.end.to)),t}const p_=[wn.define({create(){return mn.none},update(f,t){if(!t.docChanged&&!t.selection)return f;let a=[],u=t.state.facet(Hp);for(let p of t.state.selection.ranges){if(!p.empty)continue;let g=rs(t.state,p.head,-1,u)||p.head>0&&rs(t.state,p.head-1,1,u)||u.afterCursor&&(rs(t.state,p.head,1,u)||p.head<t.state.doc.length&&rs(t.state,p.head+1,-1,u));g&&(a=a.concat(u.renderMatch(g,t.state)))}return mn.set(a,!0)},provide:f=>on.decorations.from(f)}),u_];function d_(f={}){return[Hp.of(f),p_]}const m_=new ci;function sf(f,t,a){let u=f.prop(t<0?ci.openedBy:ci.closedBy);if(u)return u;if(f.name.length==1){let p=a.indexOf(f.name);if(p>-1&&p%2==(t<0?1:0))return[a[p+t]]}return null}function of(f){let t=f.type.prop(m_);return t?t(f.node):f}function rs(f,t,a,u={}){let p=u.maxScanDistance||Up,g=u.brackets||Yp,A=zi(f),$=A.resolveInner(t,a);for(let F=$;F;F=F.parent){let V=sf(F.type,a,g);if(V&&F.from<F.to){let z=of(F);if(z&&(a>0?t>=z.from&&t<z.to:t>z.from&&t<=z.to))return g_(f,t,a,F,z,V,g)}}return __(f,t,a,A,$.type,p,g)}function g_(f,t,a,u,p,g,A){let $=u.parent,F={from:p.from,to:p.to},V=0,z=$?.cursor();if(z&&(a<0?z.childBefore(u.from):z.childAfter(u.to)))do if(a<0?z.to<=u.from:z.from>=u.to){if(V==0&&g.indexOf(z.type.name)>-1&&z.from<z.to){let ie=of(z);return{start:F,end:ie?{from:ie.from,to:ie.to}:void 0,matched:!0}}else if(sf(z.type,a,A))V++;else if(sf(z.type,-a,A)){if(V==0){let ie=of(z);return{start:F,end:ie&&ie.from<ie.to?{from:ie.from,to:ie.to}:void 0,matched:!1}}V--}}while(a<0?z.prevSibling():z.nextSibling());return{start:F,matched:!1}}function __(f,t,a,u,p,g,A){let $=a<0?f.sliceDoc(t-1,t):f.sliceDoc(t,t+1),F=A.indexOf($);if(F<0||F%2==0!=a>0)return null;let V={from:a<0?t-1:t,to:a>0?t+1:t},z=f.doc.iterRange(t,a>0?f.doc.length:0),ie=0;for(let oe=0;!z.next().done&&oe<=g;){let Ae=z.value;a<0&&(oe+=Ae.length);let $e=t+oe*a;for(let je=a>0?0:Ae.length-1,ot=a>0?Ae.length:-1;je!=ot;je+=a){let bt=A.indexOf(Ae[je]);if(!(bt<0||u.resolveInner($e+je,1).type!=p))if(bt%2==0==a>0)ie++;else{if(ie==1)return{start:V,end:{from:$e+je,to:$e+je+1},matched:bt>>1==F>>1};ie--}}a>0&&(oe+=Ae.length)}return z.done?{start:V,matched:!1}:null}const O_=Object.create(null),Kp=[mr.none],Jp=[],ed=Object.create(null),y_=Object.create(null);for(let[f,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])y_[f]=b_(O_,t);function af(f,t){Jp.indexOf(f)>-1||(Jp.push(f),console.warn(t))}function b_(f,t){let a=[];for(let $ of t.split(" ")){let F=[];for(let V of $.split(".")){let z=f[V]||st[V];z?typeof z=="function"?F.length?F=F.map(z):af(V,`Modifier ${V} used at start of tag`):F.length?af(V,`Tag ${V} used as modifier`):F=Array.isArray(z)?z:[z]:af(V,`Unknown highlighting tag ${V}`)}for(let V of F)a.push(V)}if(!a.length)return 0;let u=t.replace(/ /g,"_"),p=u+" "+a.map($=>$.id),g=ed[p];if(g)return g.id;let A=ed[p]=mr.define({id:Kp.length,name:u,props:[Pp({[u]:a})]});return Kp.push(A),A.id}Ai.RTL,Ai.LTR;const td=f=>{let{state:t}=f,a=t.doc.lineAt(t.selection.main.from),u=lf(f.state,a.from);return u.line?A_(f):u.block?C_(f):!1};function Ta(f,t){return({state:a,dispatch:u})=>{if(a.readOnly)return!1;let p=f(t,a);return p?(u(a.update(p)),!0):!1}}const A_=Ta(uf,0),v_=Ta(uf,1),x_=Ta(uf,2),nd=Ta(rd,0),C_=Ta((f,t)=>rd(f,t,w_(t)),0);function lf(f,t){let a=f.languageDataAt("commentTokens",t,1);return a.length?a[0]:{}}const Fa=50;function S_(f,{open:t,close:a},u,p){let g=f.sliceDoc(u-Fa,u),A=f.sliceDoc(p,p+Fa),$=/\s*$/.exec(g)[0].length,F=/^\s*/.exec(A)[0].length,V=g.length-$;if(g.slice(V-t.length,V)==t&&A.slice(F,F+a.length)==a)return{open:{pos:u-$,margin:$&&1},close:{pos:p+F,margin:F&&1}};let z,ie;p-u<=2*Fa?z=ie=f.sliceDoc(u,p):(z=f.sliceDoc(u,u+Fa),ie=f.sliceDoc(p-Fa,p));let oe=/^\s*/.exec(z)[0].length,Ae=/\s*$/.exec(ie)[0].length,$e=ie.length-Ae-a.length;return z.slice(oe,oe+t.length)==t&&ie.slice($e,$e+a.length)==a?{open:{pos:u+oe+t.length,margin:/\s/.test(z.charAt(oe+t.length))?1:0},close:{pos:p-Ae-a.length,margin:/\s/.test(ie.charAt($e-1))?1:0}}:null}function w_(f){let t=[];for(let a of f.selection.ranges){let u=f.doc.lineAt(a.from),p=a.to<=u.to?u:f.doc.lineAt(a.to);p.from>u.from&&p.from==a.to&&(p=a.to==u.to+1?u:f.doc.lineAt(a.to-1));let g=t.length-1;g>=0&&t[g].to>u.from?t[g].to=p.to:t.push({from:u.from+/^\s*/.exec(u.text)[0].length,to:p.to})}return t}function rd(f,t,a=t.selection.ranges){let u=a.map(g=>lf(t,g.from).block);if(!u.every(g=>g))return null;let p=a.map((g,A)=>S_(t,u[A],g.from,g.to));if(f!=2&&!p.every(g=>g))return{changes:t.changes(a.map((g,A)=>p[A]?[]:[{from:g.from,insert:u[A].open+" "},{from:g.to,insert:" "+u[A].close}]))};if(f!=1&&p.some(g=>g)){let g=[];for(let A=0,$;A<p.length;A++)if($=p[A]){let F=u[A],{open:V,close:z}=$;g.push({from:V.pos-F.open.length,to:V.pos+V.margin},{from:z.pos-z.margin,to:z.pos+F.close.length})}return{changes:g}}return null}function uf(f,t,a=t.selection.ranges){let u=[],p=-1;for(let{from:g,to:A}of a){let $=u.length,F=1e9,V=lf(t,g).line;if(V){for(let z=g;z<=A;){let ie=t.doc.lineAt(z);if(ie.from>p&&(g==A||A>ie.from)){p=ie.from;let oe=/^\s*/.exec(ie.text)[0].length,Ae=oe==ie.length,$e=ie.text.slice(oe,oe+V.length)==V?oe:-1;oe<ie.text.length&&oe<F&&(F=oe),u.push({line:ie,comment:$e,token:V,indent:oe,empty:Ae,single:!1})}z=ie.to+1}if(F<1e9)for(let z=$;z<u.length;z++)u[z].indent<u[z].line.text.length&&(u[z].indent=F);u.length==$+1&&(u[$].single=!0)}}if(f!=2&&u.some(g=>g.comment<0&&(!g.empty||g.single))){let g=[];for(let{line:$,token:F,indent:V,empty:z,single:ie}of u)(ie||!z)&&g.push({from:$.from+V,insert:F+" "});let A=t.changes(g);return{changes:A,selection:t.selection.map(A,1)}}else if(f!=1&&u.some(g=>g.comment>=0)){let g=[];for(let{line:A,comment:$,token:F}of u)if($>=0){let V=A.from+$,z=V+F.length;A.text[z-A.from]==" "&&z++,g.push({from:V,to:z})}return{changes:g}}return null}const cf=ti.define(),P_=ti.define(),M_=Dt.define(),sd=Dt.define({combine(f){return Ot(f,{minDepth:100,newGroupDelay:500,joinToEvent:(t,a)=>a},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,a)=>(u,p)=>t(u,p)||a(u,p)})}}),od=wn.define({create(){return ss.empty},update(f,t){let a=t.state.facet(sd),u=t.annotation(cf);if(u){let F=_r.fromTransaction(t,u.selection),V=u.side,z=V==0?f.undone:f.done;return F?z=fu(z,z.length,a.minDepth,F):z=cd(z,t.startState.selection),new ss(V==0?u.rest:z,V==0?z:u.rest)}let p=t.annotation(P_);if((p=="full"||p=="before")&&(f=f.isolate()),t.annotation(ui.addToHistory)===!1)return t.changes.empty?f:f.addMapping(t.changes.desc);let g=_r.fromTransaction(t),A=t.annotation(ui.time),$=t.annotation(ui.userEvent);return g?f=f.addChanges(g,A,$,a,t):t.selection&&(f=f.addSelection(t.startState.selection,A,$,a.newGroupDelay)),(p=="full"||p=="after")&&(f=f.isolate()),f},toJSON(f){return{done:f.done.map(t=>t.toJSON()),undone:f.undone.map(t=>t.toJSON())}},fromJSON(f){return new ss(f.done.map(_r.fromJSON),f.undone.map(_r.fromJSON))}});function k_(f={}){return[od,sd.of(f),on.domEventHandlers({beforeinput(t,a){let u=t.inputType=="historyUndo"?ff:t.inputType=="historyRedo"?Ra:null;return u?(t.preventDefault(),u(a)):!1}})]}function cu(f,t){return function({state:a,dispatch:u}){if(!t&&a.readOnly)return!1;let p=a.field(od,!1);if(!p)return!1;let g=p.pop(f,a,t);return g?(u(g),!0):!1}}const ff=cu(0,!1),Ra=cu(1,!1),ld=cu(0,!0),$_=cu(1,!0);class _r{constructor(t,a,u,p,g){this.changes=t,this.effects=a,this.mapped=u,this.startSelection=p,this.selectionsAfter=g}setSelAfter(t){return new _r(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,a,u;return{changes:(t=this.changes)===null||t===void 0?void 0:t.toJSON(),mapped:(a=this.mapped)===null||a===void 0?void 0:a.toJSON(),startSelection:(u=this.startSelection)===null||u===void 0?void 0:u.toJSON(),selectionsAfter:this.selectionsAfter.map(p=>p.toJSON())}}static fromJSON(t){return new _r(t.changes&&Vt.fromJSON(t.changes),[],t.mapped&&qt.fromJSON(t.mapped),t.startSelection&&ft.fromJSON(t.startSelection),t.selectionsAfter.map(ft.fromJSON))}static fromTransaction(t,a){let u=Fr;for(let p of t.startState.facet(M_)){let g=p(t);g.length&&(u=u.concat(g))}return!u.length&&t.changes.empty?null:new _r(t.changes.invert(t.startState.doc),u,void 0,a||t.startState.selection,Fr)}static selection(t){return new _r(void 0,Fr,void 0,void 0,t)}}function fu(f,t,a,u){let p=t+1>a+20?t-a-1:0,g=f.slice(p,t);return g.push(u),g}function D_(f,t){let a=[],u=!1;return f.iterChangedRanges((p,g)=>a.push(p,g)),t.iterChangedRanges((p,g,A,$)=>{for(let F=0;F<a.length;){let V=a[F++],z=a[F++];$>=V&&A<=z&&(u=!0)}}),u}function E_(f,t){return f.ranges.length==t.ranges.length&&f.ranges.filter((a,u)=>a.empty!=t.ranges[u].empty).length===0}function ud(f,t){return f.length?t.length?f.concat(t):f:t}const Fr=[],T_=200;function cd(f,t){if(f.length){let a=f[f.length-1],u=a.selectionsAfter.slice(Math.max(0,a.selectionsAfter.length-T_));return u.length&&u[u.length-1].eq(t)?f:(u.push(t),fu(f,f.length-1,1e9,a.setSelAfter(u)))}else return[_r.selection([t])]}function F_(f){let t=f[f.length-1],a=f.slice();return a[f.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),a}function hf(f,t){if(!f.length)return f;let a=f.length,u=Fr;for(;a;){let p=R_(f[a-1],t,u);if(p.changes&&!p.changes.empty||p.effects.length){let g=f.slice(0,a);return g[a-1]=p,g}else t=p.mapped,a--,u=p.selectionsAfter}return u.length?[_r.selection(u)]:Fr}function R_(f,t,a){let u=ud(f.selectionsAfter.length?f.selectionsAfter.map($=>$.map(t)):Fr,a);if(!f.changes)return _r.selection(u);let p=f.changes.map(t),g=t.mapDesc(f.changes,!0),A=f.mapped?f.mapped.composeDesc(g):g;return new _r(p,Et.mapEffects(f.effects,t),A,f.startSelection.map(g),u)}const B_=/^(input\.type|delete)($|\.)/;class ss{constructor(t,a,u=0,p=void 0){this.done=t,this.undone=a,this.prevTime=u,this.prevUserEvent=p}isolate(){return this.prevTime?new ss(this.done,this.undone):this}addChanges(t,a,u,p,g){let A=this.done,$=A[A.length-1];return $&&$.changes&&!$.changes.empty&&t.changes&&(!u||B_.test(u))&&(!$.selectionsAfter.length&&a-this.prevTime<p.newGroupDelay&&p.joinToEvent(g,D_($.changes,t.changes))||u=="input.type.compose")?A=fu(A,A.length-1,p.minDepth,new _r(t.changes.compose($.changes),ud(Et.mapEffects(t.effects,$.changes),$.effects),$.mapped,$.startSelection,Fr)):A=fu(A,A.length,p.minDepth,t),new ss(A,Fr,a,u)}addSelection(t,a,u,p){let g=this.done.length?this.done[this.done.length-1].selectionsAfter:Fr;return g.length>0&&a-this.prevTime<p&&u==this.prevUserEvent&&u&&/^select($|\.)/.test(u)&&E_(g[g.length-1],t)?this:new ss(cd(this.done,t),this.undone,a,u)}addMapping(t){return new ss(hf(this.done,t),hf(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,a,u){let p=t==0?this.done:this.undone;if(p.length==0)return null;let g=p[p.length-1],A=g.selectionsAfter[0]||a.selection;if(u&&g.selectionsAfter.length)return a.update({selection:g.selectionsAfter[g.selectionsAfter.length-1],annotations:cf.of({side:t,rest:F_(p),selection:A}),userEvent:t==0?"select.undo":"select.redo",scrollIntoView:!0});if(g.changes){let $=p.length==1?Fr:p.slice(0,p.length-1);return g.mapped&&($=hf($,g.mapped)),a.update({changes:g.changes,selection:g.startSelection,effects:g.effects,annotations:cf.of({side:t,rest:$,selection:A}),filter:!1,userEvent:t==0?"undo":"redo",scrollIntoView:!0})}else return null}}ss.empty=new ss(Fr,Fr);const Q_=[{key:"Mod-z",run:ff,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ra,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ra,preventDefault:!0},{key:"Mod-u",run:ld,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:$_,preventDefault:!0}];function Co(f,t){return ft.create(f.ranges.map(t),f.mainIndex)}function Wr(f,t){return f.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function zr({state:f,dispatch:t},a){let u=Co(f.selection,a);return u.eq(f.selection,!0)?!1:(t(Wr(f,u)),!0)}function hu(f,t){return ft.cursor(t?f.to:f.from)}function fd(f,t){return zr(f,a=>a.empty?f.moveByChar(a,t):hu(a,t))}function rr(f){return f.textDirectionAt(f.state.selection.main.head)==Ai.LTR}const pu=f=>fd(f,!rr(f)),du=f=>fd(f,rr(f));function hd(f,t){return zr(f,a=>a.empty?f.moveByGroup(a,t):hu(a,t))}const pd=f=>hd(f,!rr(f)),dd=f=>hd(f,rr(f));function L_(f,t,a){if(t.type.prop(a))return!0;let u=t.to-t.from;return u&&(u>2||/[^\s,.;:]/.test(f.sliceDoc(t.from,t.to)))||t.firstChild}function mu(f,t,a){let u=zi(f).resolveInner(t.head),p=a?ci.closedBy:ci.openedBy;for(let F=t.head;;){let V=a?u.childAfter(F):u.childBefore(F);if(!V)break;L_(f,V,p)?u=V:F=a?V.to:V.from}let g=u.type.prop(p),A,$;return g&&(A=a?rs(f,u.from,1):rs(f,u.to,-1))&&A.matched?$=a?A.end.to:A.end.from:$=a?u.to:u.from,ft.cursor($,a?-1:1)}const N_=f=>zr(f,t=>mu(f.state,t,!rr(f))),G_=f=>zr(f,t=>mu(f.state,t,rr(f)));function md(f,t){return zr(f,a=>{if(!a.empty)return hu(a,t);let u=f.moveVertically(a,t);return u.head!=a.head?u:f.moveToLineBoundary(a,t)})}const gu=f=>md(f,!1),_u=f=>md(f,!0);function gd(f){let t=f.scrollDOM.clientHeight<f.scrollDOM.scrollHeight-2,a=0,u=0,p;if(t){for(let g of f.state.facet(on.scrollMargins)){let A=g(f);A?.top&&(a=Math.max(A?.top,a)),A?.bottom&&(u=Math.max(A?.bottom,u))}p=f.scrollDOM.clientHeight-a-u}else p=(f.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:a,marginBottom:u,selfScroll:t,height:Math.max(f.defaultLineHeight,p-5)}}function _d(f,t){let a=gd(f),{state:u}=f,p=Co(u.selection,A=>A.empty?f.moveVertically(A,t,a.height):hu(A,t));if(p.eq(u.selection))return!1;let g;if(a.selfScroll){let A=f.coordsAtPos(u.selection.main.head),$=f.scrollDOM.getBoundingClientRect(),F=$.top+a.marginTop,V=$.bottom-a.marginBottom;A&&A.top>F&&A.bottom<V&&(g=on.scrollIntoView(p.main.head,{y:"start",yMargin:A.top-F}))}return f.dispatch(Wr(u,p),{effects:g}),!0}const Ba=f=>_d(f,!1),Po=f=>_d(f,!0);function ks(f,t,a){let u=f.lineBlockAt(t.head),p=f.moveToLineBoundary(t,a);if(p.head==t.head&&p.head!=(a?u.to:u.from)&&(p=f.moveToLineBoundary(t,a,!1)),!a&&p.head==u.from&&u.length){let g=/^\s*/.exec(f.state.sliceDoc(u.from,Math.min(u.from+100,u.to)))[0].length;g&&t.head!=u.from+g&&(p=ft.cursor(u.from+g))}return p}const pf=f=>zr(f,t=>ks(f,t,!0)),df=f=>zr(f,t=>ks(f,t,!1)),Z_=f=>zr(f,t=>ks(f,t,!rr(f))),I_=f=>zr(f,t=>ks(f,t,rr(f))),Od=f=>zr(f,t=>ft.cursor(f.lineBlockAt(t.head).from,1)),yd=f=>zr(f,t=>ft.cursor(f.lineBlockAt(t.head).to,-1));function V_(f,t,a){let u=!1,p=Co(f.selection,g=>{let A=rs(f,g.head,-1)||rs(f,g.head,1)||g.head>0&&rs(f,g.head-1,1)||g.head<f.doc.length&&rs(f,g.head+1,-1);if(!A||!A.end)return g;u=!0;let $=A.start.from==g.head?A.end.to:A.end.from;return ft.cursor($)});return u?(t(Wr(f,p)),!0):!1}const bd=({state:f,dispatch:t})=>V_(f,t);function Rr(f,t){let a=Co(f.state.selection,u=>{let p=t(u);return ft.range(u.anchor,p.head,p.goalColumn,p.bidiLevel||void 0)});return a.eq(f.state.selection)?!1:(f.dispatch(Wr(f.state,a)),!0)}function Ad(f,t){return Rr(f,a=>f.moveByChar(a,t))}const Ou=f=>Ad(f,!rr(f)),yu=f=>Ad(f,rr(f));function vd(f,t){return Rr(f,a=>f.moveByGroup(a,t))}const xd=f=>vd(f,!rr(f)),Cd=f=>vd(f,rr(f)),X_=f=>Rr(f,t=>mu(f.state,t,!rr(f))),W_=f=>Rr(f,t=>mu(f.state,t,rr(f)));function Sd(f,t){return Rr(f,a=>f.moveVertically(a,t))}const bu=f=>Sd(f,!1),Au=f=>Sd(f,!0);function wd(f,t){return Rr(f,a=>f.moveVertically(a,t,gd(f).height))}const vu=f=>wd(f,!1),xu=f=>wd(f,!0),mf=f=>Rr(f,t=>ks(f,t,!0)),gf=f=>Rr(f,t=>ks(f,t,!1)),z_=f=>Rr(f,t=>ks(f,t,!rr(f))),q_=f=>Rr(f,t=>ks(f,t,rr(f))),Pd=f=>Rr(f,t=>ft.cursor(f.lineBlockAt(t.head).from)),Md=f=>Rr(f,t=>ft.cursor(f.lineBlockAt(t.head).to)),Cu=({state:f,dispatch:t})=>(t(Wr(f,{anchor:0})),!0),Su=({state:f,dispatch:t})=>(t(Wr(f,{anchor:f.doc.length})),!0),wu=({state:f,dispatch:t})=>(t(Wr(f,{anchor:f.selection.main.anchor,head:0})),!0),Pu=({state:f,dispatch:t})=>(t(Wr(f,{anchor:f.selection.main.anchor,head:f.doc.length})),!0),kd=({state:f,dispatch:t})=>(t(f.update({selection:{anchor:0,head:f.doc.length},userEvent:"select"})),!0),$d=({state:f,dispatch:t})=>{let a=Du(f).map(({from:u,to:p})=>ft.range(u,Math.min(p+1,f.doc.length)));return t(f.update({selection:ft.create(a),userEvent:"select"})),!0},j_=({state:f,dispatch:t})=>{let a=Co(f.selection,u=>{let p=zi(f),g=p.resolveStack(u.from,1);if(u.empty){let A=p.resolveStack(u.from,-1);A.node.from>=g.node.from&&A.node.to<=g.node.to&&(g=A)}for(let A=g;A;A=A.next){let{node:$}=A;if(($.from<u.from&&$.to>=u.to||$.to>u.to&&$.from<=u.from)&&A.next)return ft.range($.to,$.from)}return u});return a.eq(f.selection)?!1:(t(Wr(f,a)),!0)};function Dd(f,t){let{state:a}=f,u=a.selection,p=a.selection.ranges.slice();for(let g of a.selection.ranges){let A=a.doc.lineAt(g.head);if(t?A.to<f.state.doc.length:A.from>0)for(let $=g;;){let F=f.moveVertically($,t);if(F.head<A.from||F.head>A.to){p.some(V=>V.head==F.head)||p.push(F);break}else{if(F.head==$.head)break;$=F}}}return p.length==u.ranges.length?!1:(f.dispatch(Wr(a,ft.create(p,p.length-1))),!0)}const U_=f=>Dd(f,!1),Y_=f=>Dd(f,!0),H_=({state:f,dispatch:t})=>{let a=f.selection,u=null;return a.ranges.length>1?u=ft.create([a.main]):a.main.empty||(u=ft.create([ft.cursor(a.main.head)])),u?(t(Wr(f,u)),!0):!1};function ko(f,t){if(f.state.readOnly)return!1;let a="delete.selection",{state:u}=f,p=u.changeByRange(g=>{let{from:A,to:$}=g;if(A==$){let F=t(g);F<A?(a="delete.backward",F=Mu(f,F,!1)):F>A&&(a="delete.forward",F=Mu(f,F,!0)),A=Math.min(A,F),$=Math.max($,F)}else A=Mu(f,A,!1),$=Mu(f,$,!0);return A==$?{range:g}:{changes:{from:A,to:$},range:ft.cursor(A,A<g.head?-1:1)}});return p.changes.empty?!1:(f.dispatch(u.update(p,{scrollIntoView:!0,userEvent:a,effects:a=="delete.selection"?on.announce.of(u.phrase("Selection deleted")):void 0})),!0)}function Mu(f,t,a){if(f instanceof on)for(let u of f.state.facet(on.atomicRanges).map(p=>p(f)))u.between(t,t,(p,g)=>{p<t&&g>t&&(t=a?g:p)});return t}const Ed=(f,t,a)=>ko(f,u=>{let p=u.from,{state:g}=f,A=g.doc.lineAt(p),$,F;if(a&&!t&&p>A.from&&p<A.from+200&&!/[^ \t]/.test($=A.text.slice(0,p-A.from))){if($[$.length-1]=="	")return p-1;let V=Rs($,g.tabSize),z=V%ru(g)||ru(g);for(let ie=0;ie<z&&$[$.length-1-ie]==" ";ie++)p--;F=p}else F=We(A.text,p-A.from,t,t)+A.from,F==p&&A.number!=(t?g.doc.lines:1)?F+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(A.text.slice(F-A.from,p-A.from))&&(F=We(A.text,F-A.from,!1,!1)+A.from);return F}),$o=f=>Ed(f,!1,!0),ku=f=>Ed(f,!0,!1),Td=(f,t)=>ko(f,a=>{let u=a.head,{state:p}=f,g=p.doc.lineAt(u),A=p.charCategorizer(u);for(let $=null;;){if(u==(t?g.to:g.from)){u==a.head&&g.number!=(t?p.doc.lines:1)&&(u+=t?1:-1);break}let F=We(g.text,u-g.from,t)+g.from,V=g.text.slice(Math.min(u,F)-g.from,Math.max(u,F)-g.from),z=A(V);if($!=null&&z!=$)break;(V!=" "||u!=a.head)&&($=z),u=F}return u}),$u=f=>Td(f,!1),Fd=f=>Td(f,!0),_f=f=>ko(f,t=>{let a=f.lineBlockAt(t.head).to;return t.head<a?a:Math.min(f.state.doc.length,t.head+1)}),K_=f=>ko(f,t=>{let a=f.lineBlockAt(t.head).from;return t.head>a?a:Math.max(0,t.head-1)}),J_=f=>ko(f,t=>{let a=f.moveToLineBoundary(t,!1).head;return t.head>a?a:Math.max(0,t.head-1)}),eO=f=>ko(f,t=>{let a=f.moveToLineBoundary(t,!0).head;return t.head<a?a:Math.min(f.state.doc.length,t.head+1)}),Rd=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=f.changeByRange(u=>({changes:{from:u.from,to:u.to,insert:K.of(["",""])},range:ft.cursor(u.from)}));return t(f.update(a,{scrollIntoView:!0,userEvent:"input"})),!0},Bd=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=f.changeByRange(u=>{if(!u.empty||u.from==0||u.from==f.doc.length)return{range:u};let p=u.from,g=f.doc.lineAt(p),A=p==g.from?p-1:We(g.text,p-g.from,!1)+g.from,$=p==g.to?p+1:We(g.text,p-g.from,!0)+g.from;return{changes:{from:A,to:$,insert:f.doc.slice(p,$).append(f.doc.slice(A,p))},range:ft.cursor($)}});return a.changes.empty?!1:(t(f.update(a,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Du(f){let t=[],a=-1;for(let u of f.selection.ranges){let p=f.doc.lineAt(u.from),g=f.doc.lineAt(u.to);if(!u.empty&&u.to==g.from&&(g=f.doc.lineAt(u.to-1)),a>=p.number){let A=t[t.length-1];A.to=g.to,A.ranges.push(u)}else t.push({from:p.from,to:g.to,ranges:[u]});a=g.number+1}return t}function Qd(f,t,a){if(f.readOnly)return!1;let u=[],p=[];for(let g of Du(f)){if(a?g.to==f.doc.length:g.from==0)continue;let A=f.doc.lineAt(a?g.to+1:g.from-1),$=A.length+1;if(a){u.push({from:g.to,to:A.to},{from:g.from,insert:A.text+f.lineBreak});for(let F of g.ranges)p.push(ft.range(Math.min(f.doc.length,F.anchor+$),Math.min(f.doc.length,F.head+$)))}else{u.push({from:A.from,to:g.from},{from:g.to,insert:f.lineBreak+A.text});for(let F of g.ranges)p.push(ft.range(F.anchor-$,F.head-$))}}return u.length?(t(f.update({changes:u,scrollIntoView:!0,selection:ft.create(p,f.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Ld=({state:f,dispatch:t})=>Qd(f,t,!1),Nd=({state:f,dispatch:t})=>Qd(f,t,!0);function Gd(f,t,a){if(f.readOnly)return!1;let u=[];for(let p of Du(f))a?u.push({from:p.from,insert:f.doc.slice(p.from,p.to)+f.lineBreak}):u.push({from:p.to,insert:f.lineBreak+f.doc.slice(p.from,p.to)});return t(f.update({changes:u,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Of=({state:f,dispatch:t})=>Gd(f,t,!1),yf=({state:f,dispatch:t})=>Gd(f,t,!0),Zd=f=>{if(f.state.readOnly)return!1;let{state:t}=f,a=t.changes(Du(t).map(({from:p,to:g})=>(p>0?p--:g<t.doc.length&&g++,{from:p,to:g}))),u=Co(t.selection,p=>{let g;if(f.lineWrapping){let A=f.lineBlockAt(p.head),$=f.coordsAtPos(p.head,p.assoc||1);$&&(g=A.bottom+f.documentTop-$.bottom+f.defaultLineHeight/2)}return f.moveVertically(p,!0,g)}).map(a);return f.dispatch({changes:a,selection:u,scrollIntoView:!0,userEvent:"delete.line"}),!0};function tO(f,t){if(/\(\)|\[\]|\{\}/.test(f.sliceDoc(t-1,t+1)))return{from:t,to:t};let a=zi(f).resolveInner(t),u=a.childBefore(t),p=a.childAfter(t),g;return u&&p&&u.to<=t&&p.from>=t&&(g=u.type.prop(ci.closedBy))&&g.indexOf(p.name)>-1&&f.doc.lineAt(u.to).from==f.doc.lineAt(p.from).from&&!/\S/.test(f.sliceDoc(u.to,p.from))?{from:u.to,to:p.from}:null}const Eu=Id(!1),nO=Id(!0);function Id(f){return({state:t,dispatch:a})=>{if(t.readOnly)return!1;let u=t.changeByRange(p=>{let{from:g,to:A}=p,$=t.doc.lineAt(g),F=!f&&g==A&&tO(t,g);f&&(g=A=(A<=$.to?$:t.doc.lineAt(A)).to);let V=new su(t,{simulateBreak:g,simulateDoubleBreak:!!F}),z=Kc(V,g);for(z==null&&(z=Rs(/^\s*/.exec(t.doc.lineAt(g).text)[0],t.tabSize));A<$.to&&/\s/.test($.text[A-$.from]);)A++;F?{from:g,to:A}=F:g>$.from&&g<$.from+100&&!/\S/.test($.text.slice(0,g))&&(g=$.from);let ie=["",Da(t,z)];return F&&ie.push(Da(t,V.lineIndent($.from,-1))),{changes:{from:g,to:A,insert:K.of(ie)},range:ft.cursor(g+1+ie[1].length)}});return a(t.update(u,{scrollIntoView:!0,userEvent:"input"})),!0}}function bf(f,t){let a=-1;return f.changeByRange(u=>{let p=[];for(let A=u.from;A<=u.to;){let $=f.doc.lineAt(A);$.number>a&&(u.empty||u.to>$.from)&&(t($,p,u),a=$.number),A=$.to+1}let g=f.changes(p);return{changes:p,range:ft.range(g.mapPos(u.anchor,1),g.mapPos(u.head,1))}})}const iO=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let a=Object.create(null),u=new su(f,{overrideIndentation:g=>{let A=a[g];return A??-1}}),p=bf(f,(g,A,$)=>{let F=Kc(u,g.from);if(F==null)return;/\S/.test(g.text)||(F=0);let V=/^\s*/.exec(g.text)[0],z=Da(f,F);(V!=z||$.from<g.from+V.length)&&(a[g.from]=F,A.push({from:g.from,to:g.from+V.length,insert:z}))});return p.changes.empty||t(f.update(p,{userEvent:"indent"})),!0},Tu=({state:f,dispatch:t})=>f.readOnly?!1:(t(f.update(bf(f,(a,u)=>{u.push({from:a.from,insert:f.facet($a)})}),{userEvent:"input.indent"})),!0),Fu=({state:f,dispatch:t})=>f.readOnly?!1:(t(f.update(bf(f,(a,u)=>{let p=/^\s*/.exec(a.text)[0];if(!p)return;let g=Rs(p,f.tabSize),A=0,$=Da(f,Math.max(0,g-ru(f)));for(;A<p.length&&A<$.length&&p.charCodeAt(A)==$.charCodeAt(A);)A++;u.push({from:a.from+A,to:a.from+p.length,insert:$.slice(A)})}),{userEvent:"delete.dedent"})),!0),rO=f=>(f.setTabFocusMode(),!0),sO=[{key:"Ctrl-b",run:pu,shift:Ou,preventDefault:!0},{key:"Ctrl-f",run:du,shift:yu},{key:"Ctrl-p",run:gu,shift:bu},{key:"Ctrl-n",run:_u,shift:Au},{key:"Ctrl-a",run:Od,shift:Pd},{key:"Ctrl-e",run:yd,shift:Md},{key:"Ctrl-d",run:ku},{key:"Ctrl-h",run:$o},{key:"Ctrl-k",run:_f},{key:"Ctrl-Alt-h",run:$u},{key:"Ctrl-o",run:Rd},{key:"Ctrl-t",run:Bd},{key:"Ctrl-v",run:Po}],oO=[{key:"ArrowLeft",run:pu,shift:Ou,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:pd,shift:xd,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Z_,shift:z_,preventDefault:!0},{key:"ArrowRight",run:du,shift:yu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dd,shift:Cd,preventDefault:!0},{mac:"Cmd-ArrowRight",run:I_,shift:q_,preventDefault:!0},{key:"ArrowUp",run:gu,shift:bu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Cu,shift:wu},{mac:"Ctrl-ArrowUp",run:Ba,shift:vu},{key:"ArrowDown",run:_u,shift:Au,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Su,shift:Pu},{mac:"Ctrl-ArrowDown",run:Po,shift:xu},{key:"PageUp",run:Ba,shift:vu},{key:"PageDown",run:Po,shift:xu},{key:"Home",run:df,shift:gf,preventDefault:!0},{key:"Mod-Home",run:Cu,shift:wu},{key:"End",run:pf,shift:mf,preventDefault:!0},{key:"Mod-End",run:Su,shift:Pu},{key:"Enter",run:Eu,shift:Eu},{key:"Mod-a",run:kd},{key:"Backspace",run:$o,shift:$o,preventDefault:!0},{key:"Delete",run:ku,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$u,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Fd,preventDefault:!0},{mac:"Mod-Backspace",run:J_,preventDefault:!0},{mac:"Mod-Delete",run:eO,preventDefault:!0}].concat(sO.map(f=>({mac:f.key,run:f.run,shift:f.shift}))),aO=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:N_,shift:X_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:G_,shift:W_},{key:"Alt-ArrowUp",run:Ld},{key:"Shift-Alt-ArrowUp",run:Of},{key:"Alt-ArrowDown",run:Nd},{key:"Shift-Alt-ArrowDown",run:yf},{key:"Mod-Alt-ArrowUp",run:U_},{key:"Mod-Alt-ArrowDown",run:Y_},{key:"Escape",run:H_},{key:"Mod-Enter",run:nO},{key:"Alt-l",mac:"Ctrl-l",run:$d},{key:"Mod-i",run:j_,preventDefault:!0},{key:"Mod-[",run:Fu},{key:"Mod-]",run:Tu},{key:"Mod-Alt-\\",run:iO},{key:"Shift-Mod-k",run:Zd},{key:"Shift-Mod-\\",run:bd},{key:"Mod-/",run:td},{key:"Alt-A",run:nd},{key:"Ctrl-m",mac:"Shift-Alt-m",run:rO}].concat(oO),lO={key:"Tab",run:Tu,shift:Fu},Vd=typeof String.prototype.normalize=="function"?f=>f.normalize("NFKD"):f=>f;class Do{constructor(t,a,u=0,p=t.length,g,A){this.test=A,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(u,p),this.bufferStart=u,this.normalize=g?$=>g(Vd($)):Vd,this.query=this.normalize(a)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ut(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let a=Nt(t),u=this.bufferStart+this.bufferPos;this.bufferPos+=St(t);let p=this.normalize(a);if(p.length)for(let g=0,A=u;;g++){let $=p.charCodeAt(g),F=this.match($,A,this.bufferPos+this.bufferStart);if(g==p.length-1){if(F)return this.value=F,this;break}A==u&&g<a.length&&a.charCodeAt(g)==$&&A++}}}match(t,a,u){let p=null;for(let g=0;g<this.matches.length;g+=2){let A=this.matches[g],$=!1;this.query.charCodeAt(A)==t&&(A==this.query.length-1?p={from:this.matches[g+1],to:u}:(this.matches[g]++,$=!0)),$||(this.matches.splice(g,2),g-=2)}return this.query.charCodeAt(0)==t&&(this.query.length==1?p={from:a,to:u}:this.matches.push(1,a)),p&&this.test&&!this.test(p.from,p.to,this.buffer,this.bufferStart)&&(p=null),p}}typeof Symbol<"u"&&(Do.prototype[Symbol.iterator]=function(){return this});const Xd={from:-1,to:-1,match:/.*/.exec("")},Af="gm"+(/x/.unicode==null?"":"u");class Wd{constructor(t,a,u,p=0,g=t.length){if(this.text=t,this.to=g,this.curLine="",this.done=!1,this.value=Xd,/\\[sWDnr]|\n|\r|\[\^/.test(a))return new zd(t,a,u,p,g);this.re=new RegExp(a,Af+(u?.ignoreCase?"i":"")),this.test=u?.test,this.iter=t.iter();let A=t.lineAt(p);this.curLineStart=A.from,this.matchPos=Ru(t,p),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let a=this.matchPos<=this.to&&this.re.exec(this.curLine);if(a){let u=this.curLineStart+a.index,p=u+a[0].length;if(this.matchPos=Ru(this.text,p+(u==p?1:0)),u==this.curLineStart+this.curLine.length&&this.nextLine(),(u<p||u>this.value.to)&&(!this.test||this.test(u,p,a)))return this.value={from:u,to:p,match:a},this;t=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),t=0;else return this.done=!0,this}}}const vf=new WeakMap;class Eo{constructor(t,a){this.from=t,this.text=a}get to(){return this.from+this.text.length}static get(t,a,u){let p=vf.get(t);if(!p||p.from>=u||p.to<=a){let $=new Eo(a,t.sliceString(a,u));return vf.set(t,$),$}if(p.from==a&&p.to==u)return p;let{text:g,from:A}=p;return A>a&&(g=t.sliceString(a,A)+g,A=a),p.to<u&&(g+=t.sliceString(p.to,u)),vf.set(t,new Eo(A,g)),new Eo(a,g.slice(a-A,u-A))}}class zd{constructor(t,a,u,p,g){this.text=t,this.to=g,this.done=!1,this.value=Xd,this.matchPos=Ru(t,p),this.re=new RegExp(a,Af+(u?.ignoreCase?"i":"")),this.test=u?.test,this.flat=Eo.get(t,p,this.chunkEnd(p+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,a=this.re.exec(this.flat.text);if(a&&!a[0]&&a.index==t&&(this.re.lastIndex=t+1,a=this.re.exec(this.flat.text)),a){let u=this.flat.from+a.index,p=u+a[0].length;if((this.flat.to>=this.to||a.index+a[0].length<=this.flat.text.length-10)&&(!this.test||this.test(u,p,a)))return this.value={from:u,to:p,match:a},this.matchPos=Ru(this.text,p+(u==p?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Eo.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Wd.prototype[Symbol.iterator]=zd.prototype[Symbol.iterator]=function(){return this});function uO(f){try{return new RegExp(f,Af),!0}catch{return!1}}function Ru(f,t){if(t>=f.length)return t;let a=f.lineAt(t),u;for(;t<a.to&&(u=a.text.charCodeAt(t-a.from))>=56320&&u<57344;)t++;return t}function xf(f){let t=String(f.state.doc.lineAt(f.state.selection.main.head).number),a=xi("input",{class:"cm-textfield",name:"line",value:t}),u=xi("form",{class:"cm-gotoLine",onkeydown:g=>{g.keyCode==27?(g.preventDefault(),f.dispatch({effects:Qa.of(!1)}),f.focus()):g.keyCode==13&&(g.preventDefault(),p())},onsubmit:g=>{g.preventDefault(),p()}},xi("label",f.state.phrase("Go to line"),": ",a)," ",xi("button",{class:"cm-button",type:"submit"},f.state.phrase("go")),xi("button",{name:"close",onclick:()=>{f.dispatch({effects:Qa.of(!1)}),f.focus()},"aria-label":f.state.phrase("close"),type:"button"},["×"]));function p(){let g=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(a.value);if(!g)return;let{state:A}=f,$=A.doc.lineAt(A.selection.main.head),[,F,V,z,ie]=g,oe=z?+z.slice(1):0,Ae=V?+V:$.number;if(V&&ie){let ot=Ae/100;F&&(ot=ot*(F=="-"?-1:1)+$.number/A.doc.lines),Ae=Math.round(A.doc.lines*ot)}else V&&F&&(Ae=Ae*(F=="-"?-1:1)+$.number);let $e=A.doc.line(Math.max(1,Math.min(A.doc.lines,Ae))),je=ft.cursor($e.from+Math.max(0,Math.min(oe,$e.length)));f.dispatch({effects:[Qa.of(!1),on.scrollIntoView(je.from,{y:"center"})],selection:je}),f.focus()}return{dom:u}}const Qa=Et.define(),qd=wn.define({create(){return!0},update(f,t){for(let a of t.effects)a.is(Qa)&&(f=a.value);return f},provide:f=>Ca.from(f,t=>t?xf:null)}),jd=f=>{let t=xa(f,xf);if(!t){let a=[Qa.of(!0)];f.state.field(qd,!1)==null&&a.push(Et.appendConfig.of([qd,cO])),f.dispatch({effects:a}),t=xa(f,xf)}return t&&t.dom.querySelector("input").select(),!0},cO=on.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),fO={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ud=Dt.define({combine(f){return Ot(f,fO,{highlightWordAroundCursor:(t,a)=>t||a,minSelectionLength:Math.min,maxMatches:Math.min})}});function hO(f){let t=[_O,gO];return f&&t.push(Ud.of(f)),t}const pO=mn.mark({class:"cm-selectionMatch"}),dO=mn.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Yd(f,t,a,u){return(a==0||f(t.sliceDoc(a-1,a))!=ee.Word)&&(u==t.doc.length||f(t.sliceDoc(u,u+1))!=ee.Word)}function mO(f,t,a,u){return f(t.sliceDoc(a,a+1))==ee.Word&&f(t.sliceDoc(u-1,u))==ee.Word}const gO=Ri.fromClass(class{constructor(f){this.decorations=this.getDeco(f)}update(f){(f.selectionSet||f.docChanged||f.viewportChanged)&&(this.decorations=this.getDeco(f.view))}getDeco(f){let t=f.state.facet(Ud),{state:a}=f,u=a.selection;if(u.ranges.length>1)return mn.none;let p=u.main,g,A=null;if(p.empty){if(!t.highlightWordAroundCursor)return mn.none;let F=a.wordAt(p.head);if(!F)return mn.none;A=a.charCategorizer(p.head),g=a.sliceDoc(F.from,F.to)}else{let F=p.to-p.from;if(F<t.minSelectionLength||F>200)return mn.none;if(t.wholeWords){if(g=a.sliceDoc(p.from,p.to),A=a.charCategorizer(p.head),!(Yd(A,a,p.from,p.to)&&mO(A,a,p.from,p.to)))return mn.none}else if(g=a.sliceDoc(p.from,p.to),!g)return mn.none}let $=[];for(let F of f.visibleRanges){let V=new Do(a.doc,g,F.from,F.to);for(;!V.next().done;){let{from:z,to:ie}=V.value;if((!A||Yd(A,a,z,ie))&&(p.empty&&z<=p.from&&ie>=p.to?$.push(dO.range(z,ie)):(z>=p.to||ie<=p.from)&&$.push(pO.range(z,ie)),$.length>t.maxMatches))return mn.none}}return mn.set($)}},{decorations:f=>f.decorations}),_O=on.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),OO=({state:f,dispatch:t})=>{let{selection:a}=f,u=ft.create(a.ranges.map(p=>f.wordAt(p.head)||ft.cursor(p.head)),a.mainIndex);return u.eq(a)?!1:(t(f.update({selection:u})),!0)};function yO(f,t){let{main:a,ranges:u}=f.selection,p=f.wordAt(a.head),g=p&&p.from==a.from&&p.to==a.to;for(let A=!1,$=new Do(f.doc,t,u[u.length-1].to);;)if($.next(),$.done){if(A)return null;$=new Do(f.doc,t,0,Math.max(0,u[u.length-1].from-1)),A=!0}else{if(A&&u.some(F=>F.from==$.value.from))continue;if(g){let F=f.wordAt($.value.from);if(!F||F.from!=$.value.from||F.to!=$.value.to)continue}return $.value}}const Cf=({state:f,dispatch:t})=>{let{ranges:a}=f.selection;if(a.some(g=>g.from===g.to))return OO({state:f,dispatch:t});let u=f.sliceDoc(a[0].from,a[0].to);if(f.selection.ranges.some(g=>f.sliceDoc(g.from,g.to)!=u))return!1;let p=yO(f,u);return p?(t(f.update({selection:f.selection.addRange(ft.range(p.from,p.to),!1),effects:on.scrollIntoView(p.to)})),!0):!1},Ws=Dt.define({combine(f){return Ot(f,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new kO(t),scrollToMatch:t=>on.scrollIntoView(t)})}});function bO(f){return f?[Ws.of(f),Ef]:Ef}class Hd{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||uO(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,(a,u)=>u=="n"?`
`:u=="r"?"\r":u=="t"?"	":"\\")}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new CO(this):new vO(this)}getCursor(t,a=0,u){let p=t.doc?t:at.create({doc:t});return u==null&&(u=p.doc.length),this.regexp?Bo(this,p,a,u):Fo(this,p,a,u)}}class Kd{constructor(t){this.spec=t}}function Fo(f,t,a,u){return new Do(t.doc,f.unquoted,a,u,f.caseSensitive?void 0:p=>p.toLowerCase(),f.wholeWord?AO(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}function AO(f,t){return(a,u,p,g)=>((g>a||g+p.length<u)&&(g=Math.max(0,a-2),p=f.sliceString(g,Math.min(f.length,u+2))),(t(Bu(p,a-g))!=ee.Word||t(Qu(p,a-g))!=ee.Word)&&(t(Qu(p,u-g))!=ee.Word||t(Bu(p,u-g))!=ee.Word))}class vO extends Kd{constructor(t){super(t)}nextMatch(t,a,u){let p=Fo(this.spec,t,u,t.doc.length).nextOverlapping();if(p.done){let g=Math.min(t.doc.length,a+this.spec.unquoted.length);p=Fo(this.spec,t,0,g).nextOverlapping()}return p.done||p.value.from==a&&p.value.to==u?null:p.value}prevMatchInRange(t,a,u){for(let p=u;;){let g=Math.max(a,p-1e4-this.spec.unquoted.length),A=Fo(this.spec,t,g,p),$=null;for(;!A.nextOverlapping().done;)$=A.value;if($)return $;if(g==a)return null;p-=1e4}}prevMatch(t,a,u){let p=this.prevMatchInRange(t,0,a);return p||(p=this.prevMatchInRange(t,Math.max(0,u-this.spec.unquoted.length),t.doc.length)),p&&(p.from!=a||p.to!=u)?p:null}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,a){let u=Fo(this.spec,t,0,t.doc.length),p=[];for(;!u.next().done;){if(p.length>=a)return null;p.push(u.value)}return p}highlight(t,a,u,p){let g=Fo(this.spec,t,Math.max(0,a-this.spec.unquoted.length),Math.min(u+this.spec.unquoted.length,t.doc.length));for(;!g.next().done;)p(g.value.from,g.value.to)}}function Bo(f,t,a,u){return new Wd(t.doc,f.search,{ignoreCase:!f.caseSensitive,test:f.wholeWord?xO(t.charCategorizer(t.selection.main.head)):void 0},a,u)}function Bu(f,t){return f.slice(We(f,t,!1),t)}function Qu(f,t){return f.slice(t,We(f,t))}function xO(f){return(t,a,u)=>!u[0].length||(f(Bu(u.input,u.index))!=ee.Word||f(Qu(u.input,u.index))!=ee.Word)&&(f(Qu(u.input,u.index+u[0].length))!=ee.Word||f(Bu(u.input,u.index+u[0].length))!=ee.Word)}class CO extends Kd{nextMatch(t,a,u){let p=Bo(this.spec,t,u,t.doc.length).next();return p.done&&(p=Bo(this.spec,t,0,a).next()),p.done?null:p.value}prevMatchInRange(t,a,u){for(let p=1;;p++){let g=Math.max(a,u-p*1e4),A=Bo(this.spec,t,g,u),$=null;for(;!A.next().done;)$=A.value;if($&&(g==a||$.from>g+10))return $;if(g==a)return null}}prevMatch(t,a,u){return this.prevMatchInRange(t,0,a)||this.prevMatchInRange(t,u,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(a,u)=>{if(u=="&")return t.match[0];if(u=="$")return"$";for(let p=u.length;p>0;p--){let g=+u.slice(0,p);if(g>0&&g<t.match.length)return t.match[g]+u.slice(p)}return a})}matchAll(t,a){let u=Bo(this.spec,t,0,t.doc.length),p=[];for(;!u.next().done;){if(p.length>=a)return null;p.push(u.value)}return p}highlight(t,a,u,p){let g=Bo(this.spec,t,Math.max(0,a-250),Math.min(u+250,t.doc.length));for(;!g.next().done;)p(g.value.from,g.value.to)}}const La=Et.define(),Sf=Et.define(),$s=wn.define({create(f){return new wf(Mf(f).create(),null)},update(f,t){for(let a of t.effects)a.is(La)?f=new wf(a.value.create(),f.panel):a.is(Sf)&&(f=new wf(f.query,a.value?Pf:null));return f},provide:f=>Ca.from(f,t=>t.panel)});class wf{constructor(t,a){this.query=t,this.panel=a}}const SO=mn.mark({class:"cm-searchMatch"}),wO=mn.mark({class:"cm-searchMatch cm-searchMatch-selected"}),PO=Ri.fromClass(class{constructor(f){this.view=f,this.decorations=this.highlight(f.state.field($s))}update(f){let t=f.state.field($s);(t!=f.startState.field($s)||f.docChanged||f.selectionSet||f.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:f,panel:t}){if(!t||!f.spec.valid)return mn.none;let{view:a}=this,u=new br;for(let p=0,g=a.visibleRanges,A=g.length;p<A;p++){let{from:$,to:F}=g[p];for(;p<A-1&&F>g[p+1].from-500;)F=g[++p].to;f.highlight(a.state,$,F,(V,z)=>{let ie=a.state.selection.ranges.some(oe=>oe.from==V&&oe.to==z);u.add(V,z,ie?wO:SO)})}return u.finish()}},{decorations:f=>f.decorations});function Na(f){return t=>{let a=t.state.field($s,!1);return a&&a.query.spec.valid?f(t,a):kf(t)}}const Lu=Na((f,{query:t})=>{let{to:a}=f.state.selection.main,u=t.nextMatch(f.state,a,a);if(!u)return!1;let p=ft.single(u.from,u.to),g=f.state.facet(Ws);return f.dispatch({selection:p,effects:[Df(f,u),g.scrollToMatch(p.main,f)],userEvent:"select.search"}),r0(f),!0}),Nu=Na((f,{query:t})=>{let{state:a}=f,{from:u}=a.selection.main,p=t.prevMatch(a,u,u);if(!p)return!1;let g=ft.single(p.from,p.to),A=f.state.facet(Ws);return f.dispatch({selection:g,effects:[Df(f,p),A.scrollToMatch(g.main,f)],userEvent:"select.search"}),r0(f),!0}),Jd=Na((f,{query:t})=>{let a=t.matchAll(f.state,1e3);return!a||!a.length?!1:(f.dispatch({selection:ft.create(a.map(u=>ft.range(u.from,u.to))),userEvent:"select.search.matches"}),!0)}),e0=({state:f,dispatch:t})=>{let a=f.selection;if(a.ranges.length>1||a.main.empty)return!1;let{from:u,to:p}=a.main,g=[],A=0;for(let $=new Do(f.doc,f.sliceDoc(u,p));!$.next().done;){if(g.length>1e3)return!1;$.value.from==u&&(A=g.length),g.push(ft.range($.value.from,$.value.to))}return t(f.update({selection:ft.create(g,A),userEvent:"select.search.matches"})),!0},t0=Na((f,{query:t})=>{let{state:a}=f,{from:u,to:p}=a.selection.main;if(a.readOnly)return!1;let g=t.nextMatch(a,u,u);if(!g)return!1;let A=g,$=[],F,V,z=[];A.from==u&&A.to==p&&(V=a.toText(t.getReplacement(A)),$.push({from:A.from,to:A.to,insert:V}),A=t.nextMatch(a,A.from,A.to),z.push(on.announce.of(a.phrase("replaced match on line $",a.doc.lineAt(u).number)+".")));let ie=f.state.changes($);return A&&(F=ft.single(A.from,A.to).map(ie),z.push(Df(f,A)),z.push(a.facet(Ws).scrollToMatch(F.main,f))),f.dispatch({changes:ie,selection:F,effects:z,userEvent:"input.replace"}),!0}),n0=Na((f,{query:t})=>{if(f.state.readOnly)return!1;let a=t.matchAll(f.state,1e9).map(p=>{let{from:g,to:A}=p;return{from:g,to:A,insert:t.getReplacement(p)}});if(!a.length)return!1;let u=f.state.phrase("replaced $ matches",a.length)+".";return f.dispatch({changes:a,effects:on.announce.of(u),userEvent:"input.replace.all"}),!0});function Pf(f){return f.state.facet(Ws).createPanel(f)}function Mf(f,t){var a,u,p,g,A;let $=f.selection.main,F=$.empty||$.to>$.from+100?"":f.sliceDoc($.from,$.to);if(t&&!F)return t;let V=f.facet(Ws);return new Hd({search:((a=t?.literal)!==null&&a!==void 0?a:V.literal)?F:F.replace(/\n/g,"\\n"),caseSensitive:(u=t?.caseSensitive)!==null&&u!==void 0?u:V.caseSensitive,literal:(p=t?.literal)!==null&&p!==void 0?p:V.literal,regexp:(g=t?.regexp)!==null&&g!==void 0?g:V.regexp,wholeWord:(A=t?.wholeWord)!==null&&A!==void 0?A:V.wholeWord})}function i0(f){let t=xa(f,Pf);return t&&t.dom.querySelector("[main-field]")}function r0(f){let t=i0(f);t&&t==f.root.activeElement&&t.select()}const kf=f=>{let t=f.state.field($s,!1);if(t&&t.panel){let a=i0(f);if(a&&a!=f.root.activeElement){let u=Mf(f.state,t.query.spec);u.valid&&f.dispatch({effects:La.of(u)}),a.focus(),a.select()}}else f.dispatch({effects:[Sf.of(!0),t?La.of(Mf(f.state,t.query.spec)):Et.appendConfig.of(Ef)]});return!0},$f=f=>{let t=f.state.field($s,!1);if(!t||!t.panel)return!1;let a=xa(f,Pf);return a&&a.dom.contains(f.root.activeElement)&&f.focus(),f.dispatch({effects:Sf.of(!1)}),!0},MO=[{key:"Mod-f",run:kf,scope:"editor search-panel"},{key:"F3",run:Lu,shift:Nu,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Lu,shift:Nu,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:$f,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e0},{key:"Mod-Alt-g",run:jd},{key:"Mod-d",run:Cf,preventDefault:!0}];class kO{constructor(t){this.view=t;let a=this.query=t.state.field($s).query.spec;this.commit=this.commit.bind(this),this.searchField=xi("input",{value:a.search,placeholder:Cr(t,"Find"),"aria-label":Cr(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=xi("input",{value:a.replace,placeholder:Cr(t,"Replace"),"aria-label":Cr(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=xi("input",{type:"checkbox",name:"case",form:"",checked:a.caseSensitive,onchange:this.commit}),this.reField=xi("input",{type:"checkbox",name:"re",form:"",checked:a.regexp,onchange:this.commit}),this.wordField=xi("input",{type:"checkbox",name:"word",form:"",checked:a.wholeWord,onchange:this.commit});function u(p,g,A){return xi("button",{class:"cm-button",name:p,onclick:g,type:"button"},A)}this.dom=xi("div",{onkeydown:p=>this.keydown(p),class:"cm-search"},[this.searchField,u("next",()=>Lu(t),[Cr(t,"next")]),u("prev",()=>Nu(t),[Cr(t,"previous")]),u("select",()=>Jd(t),[Cr(t,"all")]),xi("label",null,[this.caseField,Cr(t,"match case")]),xi("label",null,[this.reField,Cr(t,"regexp")]),xi("label",null,[this.wordField,Cr(t,"by word")]),...t.state.readOnly?[]:[xi("br"),this.replaceField,u("replace",()=>t0(t),[Cr(t,"replace")]),u("replaceAll",()=>n0(t),[Cr(t,"replace all")])],xi("button",{name:"close",onclick:()=>$f(t),"aria-label":Cr(t,"close"),type:"button"},["×"])])}commit(){let t=new Hd({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:La.of(t)}))}keydown(t){M1(this.view,t,"search-panel")?t.preventDefault():t.keyCode==13&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Nu:Lu)(this.view)):t.keyCode==13&&t.target==this.replaceField&&(t.preventDefault(),t0(this.view))}update(t){for(let a of t.transactions)for(let u of a.effects)u.is(La)&&!u.value.eq(this.query)&&this.setQuery(u.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ws).top}}function Cr(f,t){return f.state.phrase(t)}const Gu=30,Zu=/[\s\.,:;?!]/;function Df(f,{from:t,to:a}){let u=f.state.doc.lineAt(t),p=f.state.doc.lineAt(a).to,g=Math.max(u.from,t-Gu),A=Math.min(p,a+Gu),$=f.state.sliceDoc(g,A);if(g!=u.from){for(let F=0;F<Gu;F++)if(!Zu.test($[F+1])&&Zu.test($[F])){$=$.slice(F);break}}if(A!=p){for(let F=$.length-1;F>$.length-Gu;F--)if(!Zu.test($[F-1])&&Zu.test($[F])){$=$.slice(0,F);break}}return on.announce.of(`${f.state.phrase("current match")}. ${$} ${f.state.phrase("on line")} ${u.number}.`)}const $O=on.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ef=[$s,Di.low(PO),$O];class s0{constructor(t,a,u,p){this.state=t,this.pos=a,this.explicit=u,this.view=p,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(t){let a=zi(this.state).resolveInner(this.pos,-1);for(;a&&t.indexOf(a.name)<0;)a=a.parent;return a?{from:a.from,to:this.pos,text:this.state.sliceDoc(a.from,this.pos),type:a.type}:null}matchBefore(t){let a=this.state.doc.lineAt(this.pos),u=Math.max(a.from,this.pos-250),p=a.text.slice(u-a.from,this.pos-a.from),g=p.search(u0(t,!1));return g<0?null:{from:u+g,to:this.pos,text:p.slice(g)}}get aborted(){return this.abortListeners==null}addEventListener(t,a,u){t=="abort"&&this.abortListeners&&(this.abortListeners.push(a),u&&u.onDocChange&&(this.abortOnDocChange=!0))}}function o0(f){let t=Object.keys(f).join(""),a=/\w/.test(t);return a&&(t=t.replace(/\w/g,"")),`[${a?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function DO(f){let t=Object.create(null),a=Object.create(null);for(let{label:p}of f){t[p[0]]=!0;for(let g=1;g<p.length;g++)a[p[g]]=!0}let u=o0(t)+o0(a)+"*$";return[new RegExp("^"+u),new RegExp(u)]}function a0(f){let t=f.map(p=>typeof p=="string"?{label:p}:p),[a,u]=t.every(p=>/^\w+$/.test(p.label))?[/\w*$/,/\w+$/]:DO(t);return p=>{let g=p.matchBefore(u);return g||p.explicit?{from:g?g.from:p.pos,options:t,validFor:a}:null}}function EO(f,t){return a=>{for(let u=zi(a.state).resolveInner(a.pos,-1);u;u=u.parent){if(f.indexOf(u.name)>-1)return null;if(u.type.isTop)break}return t(a)}}class l0{constructor(t,a,u,p){this.completion=t,this.source=a,this.match=u,this.score=p}}function zs(f){return f.selection.main.from}function u0(f,t){var a;let{source:u}=f,p=t&&u[0]!="^",g=u[u.length-1]!="$";return!p&&!g?f:new RegExp(`${p?"^":""}(?:${u})${g?"$":""}`,(a=f.flags)!==null&&a!==void 0?a:f.ignoreCase?"i":"")}const Tf=ti.define();function TO(f,t,a,u){let{main:p}=f.selection,g=a-p.from,A=u-p.from;return{...f.changeByRange($=>{if($!=p&&a!=u&&f.sliceDoc($.from+g,$.from+A)!=f.sliceDoc(a,u))return{range:$};let F=f.toText(t);return{changes:{from:$.from+g,to:u==p.from?$.to:$.from+A,insert:F},range:ft.cursor($.from+g+F.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const c0=new WeakMap;function FO(f){if(!Array.isArray(f))return f;let t=c0.get(f);return t||c0.set(f,t=a0(f)),t}const Iu=Et.define(),Ga=Et.define();class RO{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let a=0;a<t.length;){let u=ut(t,a),p=St(u);this.chars.push(u);let g=t.slice(a,a+p),A=g.toUpperCase();this.folded.push(ut(A==g?g.toLowerCase():A,0)),a+=p}this.astral=t.length!=this.chars.length}ret(t,a){return this.score=t,this.matched=a,this}match(t){if(this.pattern.length==0)return this.ret(-100,[]);if(t.length<this.pattern.length)return null;let{chars:a,folded:u,any:p,precise:g,byWord:A}=this;if(a.length==1){let Xt=ut(t,0),Zt=St(Xt),an=Zt==t.length?0:-100;if(Xt!=a[0])if(Xt==u[0])an+=-200;else return null;return this.ret(an,[0,Zt])}let $=t.indexOf(this.pattern);if($==0)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let F=a.length,V=0;if($<0){for(let Xt=0,Zt=Math.min(t.length,200);Xt<Zt&&V<F;){let an=ut(t,Xt);(an==a[V]||an==u[V])&&(p[V++]=Xt),Xt+=St(an)}if(V<F)return null}let z=0,ie=0,oe=!1,Ae=0,$e=-1,je=-1,ot=/[a-z]/.test(t),bt=!0;for(let Xt=0,Zt=Math.min(t.length,200),an=0;Xt<Zt&&ie<F;){let Gt=ut(t,Xt);$<0&&(z<F&&Gt==a[z]&&(g[z++]=Xt),Ae<F&&(Gt==a[Ae]||Gt==u[Ae]?(Ae==0&&($e=Xt),je=Xt+1,Ae++):Ae=0));let nn,en=Gt<255?Gt>=48&&Gt<=57||Gt>=97&&Gt<=122?2:Gt>=65&&Gt<=90?1:0:(nn=Nt(Gt))!=nn.toLowerCase()?1:nn!=nn.toUpperCase()?2:0;(!Xt||en==1&&ot||an==0&&en!=0)&&(a[ie]==Gt||u[ie]==Gt&&(oe=!0)?A[ie++]=Xt:A.length&&(bt=!1)),an=en,Xt+=St(Gt)}return ie==F&&A[0]==0&&bt?this.result(-100+(oe?-200:0),A,t):Ae==F&&$e==0?this.ret(-200-t.length+(je==t.length?0:-100),[0,je]):$>-1?this.ret(-700-t.length,[$,$+this.pattern.length]):Ae==F?this.ret(-900-t.length,[$e,je]):ie==F?this.result(-100+(oe?-200:0)+-700+(bt?0:-1100),A,t):a.length==2?null:this.result((p[0]?-700:0)+-200+-1100,p,t)}result(t,a,u){let p=[],g=0;for(let A of a){let $=A+(this.astral?St(ut(u,A)):1);g&&p[g-1]==A?p[g-1]=$:(p[g++]=A,p[g++]=$)}return this.ret(t-u.length,p)}}class BO{constructor(t){this.pattern=t,this.matched=[],this.score=0,this.folded=t.toLowerCase()}match(t){if(t.length<this.pattern.length)return null;let a=t.slice(0,this.pattern.length),u=a==this.pattern?0:a.toLowerCase()==this.folded?-200:null;return u==null?null:(this.matched=[0,a.length],this.score=u+(t.length==this.pattern.length?0:-100),this)}}const Ui=Dt.define({combine(f){return Ot(f,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:QO,filterStrict:!1,compareCompletions:(t,a)=>(t.sortText||t.label).localeCompare(a.sortText||a.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,a)=>t&&a,closeOnBlur:(t,a)=>t&&a,icons:(t,a)=>t&&a,tooltipClass:(t,a)=>u=>f0(t(u),a(u)),optionClass:(t,a)=>u=>f0(t(u),a(u)),addToOptions:(t,a)=>t.concat(a),filterStrict:(t,a)=>t||a})}});function f0(f,t){return f?t?f+" "+t:f:t}function QO(f,t,a,u,p,g){let A=f.textDirection==Ai.RTL,$=A,F=!1,V="top",z,ie,oe=t.left-p.left,Ae=p.right-t.right,$e=u.right-u.left,je=u.bottom-u.top;if($&&oe<Math.min($e,Ae)?$=!1:!$&&Ae<Math.min($e,oe)&&($=!0),$e<=($?oe:Ae))z=Math.max(p.top,Math.min(a.top,p.bottom-je))-t.top,ie=Math.min(400,$?oe:Ae);else{F=!0,ie=Math.min(400,(A?t.right:p.right-t.left)-30);let Xt=p.bottom-t.bottom;Xt>=je||Xt>t.top?z=a.bottom-t.top:(V="bottom",z=t.bottom-a.top)}let ot=(t.bottom-t.top)/g.offsetHeight,bt=(t.right-t.left)/g.offsetWidth;return{style:`${V}: ${z/ot}px; max-width: ${ie/bt}px`,class:"cm-completionInfo-"+(F?A?"left-narrow":"right-narrow":$?"left":"right")}}function LO(f){let t=f.addToOptions.slice();return f.icons&&t.push({render(a){let u=document.createElement("div");return u.classList.add("cm-completionIcon"),a.type&&u.classList.add(...a.type.split(/\s+/g).map(p=>"cm-completionIcon-"+p)),u.setAttribute("aria-hidden","true"),u},position:20}),t.push({render(a,u,p,g){let A=document.createElement("span");A.className="cm-completionLabel";let $=a.displayLabel||a.label,F=0;for(let V=0;V<g.length;){let z=g[V++],ie=g[V++];z>F&&A.appendChild(document.createTextNode($.slice(F,z)));let oe=A.appendChild(document.createElement("span"));oe.appendChild(document.createTextNode($.slice(z,ie))),oe.className="cm-completionMatchedText",F=ie}return F<$.length&&A.appendChild(document.createTextNode($.slice(F))),A},position:50},{render(a){if(!a.detail)return null;let u=document.createElement("span");return u.className="cm-completionDetail",u.textContent=a.detail,u},position:80}),t.sort((a,u)=>a.position-u.position).map(a=>a.render)}function Ff(f,t,a){if(f<=a)return{from:0,to:f};if(t<0&&(t=0),t<=f>>1){let p=Math.floor(t/a);return{from:p*a,to:(p+1)*a}}let u=Math.floor((f-t)/a);return{from:f-(u+1)*a,to:f-u*a}}class NO{constructor(t,a,u){this.view=t,this.stateField=a,this.applyCompletion=u,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:F=>this.placeInfo(F),key:this},this.space=null,this.currentClass="";let p=t.state.field(a),{options:g,selected:A}=p.open,$=t.state.facet(Ui);this.optionContent=LO($),this.optionClass=$.optionClass,this.tooltipClass=$.tooltipClass,this.range=Ff(g.length,A,$.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",F=>{let{options:V}=t.state.field(a).open;for(let z=F.target,ie;z&&z!=this.dom;z=z.parentNode)if(z.nodeName=="LI"&&(ie=/-(\d+)$/.exec(z.id))&&+ie[1]<V.length){this.applyCompletion(t,V[+ie[1]]),F.preventDefault();return}}),this.dom.addEventListener("focusout",F=>{let V=t.state.field(this.stateField,!1);V&&V.tooltip&&t.state.facet(Ui).closeOnBlur&&F.relatedTarget!=t.contentDOM&&t.dispatch({effects:Ga.of(null)})}),this.showOptions(g,p.id)}mount(){this.updateSel()}showOptions(t,a){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,a,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(t){var a;let u=t.state.field(this.stateField),p=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),u!=p){let{options:g,selected:A,disabled:$}=u.open;(!p.open||p.open.options!=g)&&(this.range=Ff(g.length,A,t.state.facet(Ui).maxRenderedOptions),this.showOptions(g,u.id)),this.updateSel(),$!=((a=p.open)===null||a===void 0?void 0:a.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!$)}}updateTooltipClass(t){let a=this.tooltipClass(t);if(a!=this.currentClass){for(let u of this.currentClass.split(" "))u&&this.dom.classList.remove(u);for(let u of a.split(" "))u&&this.dom.classList.add(u);this.currentClass=a}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),a=t.open;(a.selected>-1&&a.selected<this.range.from||a.selected>=this.range.to)&&(this.range=Ff(a.options.length,a.selected,this.view.state.facet(Ui).maxRenderedOptions),this.showOptions(a.options,t.id));let u=this.updateSelectedOption(a.selected);if(u){this.destroyInfo();let{completion:p}=a.options[a.selected],{info:g}=p;if(!g)return;let A=typeof g=="string"?document.createTextNode(g):g(p);if(!A)return;"then"in A?A.then($=>{$&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane($,p)}).catch($=>Vi(this.view.state,$,"completion info")):(this.addInfoPane(A,p),u.setAttribute("aria-describedby",this.info.id))}}addInfoPane(t,a){this.destroyInfo();let u=this.info=document.createElement("div");if(u.className="cm-tooltip cm-completionInfo",u.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),t.nodeType!=null)u.appendChild(t),this.infoDestroy=null;else{let{dom:p,destroy:g}=t;u.appendChild(p),this.infoDestroy=g||null}this.dom.appendChild(u),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let a=null;for(let u=this.list.firstChild,p=this.range.from;u;u=u.nextSibling,p++)u.nodeName!="LI"||!u.id?p--:p==t?u.hasAttribute("aria-selected")||(u.setAttribute("aria-selected","true"),a=u):u.hasAttribute("aria-selected")&&(u.removeAttribute("aria-selected"),u.removeAttribute("aria-describedby"));return a&&ZO(this.list,a),a}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let a=this.dom.getBoundingClientRect(),u=this.info.getBoundingClientRect(),p=t.getBoundingClientRect(),g=this.space;if(!g){let A=this.dom.ownerDocument.documentElement;g={left:0,top:0,right:A.clientWidth,bottom:A.clientHeight}}return p.top>Math.min(g.bottom,a.bottom)-10||p.bottom<Math.max(g.top,a.top)+10?null:this.view.state.facet(Ui).positionInfo(this.view,a,p,u,g,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,a,u){const p=document.createElement("ul");p.id=a,p.setAttribute("role","listbox"),p.setAttribute("aria-expanded","true"),p.setAttribute("aria-label",this.view.state.phrase("Completions")),p.addEventListener("mousedown",A=>{A.target==p&&A.preventDefault()});let g=null;for(let A=u.from;A<u.to;A++){let{completion:$,match:F}=t[A],{section:V}=$;if(V){let oe=typeof V=="string"?V:V.name;if(oe!=g&&(A>u.from||u.from==0))if(g=oe,typeof V!="string"&&V.header)p.appendChild(V.header(V));else{let Ae=p.appendChild(document.createElement("completion-section"));Ae.textContent=oe}}const z=p.appendChild(document.createElement("li"));z.id=a+"-"+A,z.setAttribute("role","option");let ie=this.optionClass($);ie&&(z.className=ie);for(let oe of this.optionContent){let Ae=oe($,this.view.state,this.view,F);Ae&&z.appendChild(Ae)}}return u.from&&p.classList.add("cm-completionListIncompleteTop"),u.to<t.length&&p.classList.add("cm-completionListIncompleteBottom"),p}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function GO(f,t){return a=>new NO(a,f,t)}function ZO(f,t){let a=f.getBoundingClientRect(),u=t.getBoundingClientRect(),p=a.height/f.offsetHeight;u.top<a.top?f.scrollTop-=(a.top-u.top)/p:u.bottom>a.bottom&&(f.scrollTop+=(u.bottom-a.bottom)/p)}function h0(f){return(f.boost||0)*100+(f.apply?10:0)+(f.info?5:0)+(f.type?1:0)}function IO(f,t){let a=[],u=null,p=null,g=z=>{a.push(z);let{section:ie}=z.completion;if(ie){u||(u=[]);let oe=typeof ie=="string"?ie:ie.name;u.some(Ae=>Ae.name==oe)||u.push(typeof ie=="string"?{name:oe}:ie)}},A=t.facet(Ui);for(let z of f)if(z.hasResult()){let ie=z.result.getMatch;if(z.result.filter===!1)for(let oe of z.result.options)g(new l0(oe,z.source,ie?ie(oe):[],1e9-a.length));else{let oe=t.sliceDoc(z.from,z.to),Ae,$e=A.filterStrict?new BO(oe):new RO(oe);for(let je of z.result.options)if(Ae=$e.match(je.label)){let ot=je.displayLabel?ie?ie(je,Ae.matched):[]:Ae.matched,bt=Ae.score+(je.boost||0);if(g(new l0(je,z.source,ot,bt)),typeof je.section=="object"&&je.section.rank==="dynamic"){let{name:Xt}=je.section;p||(p=Object.create(null)),p[Xt]=Math.max(bt,p[Xt]||-1e9)}}}}if(u){let z=Object.create(null),ie=0,oe=(Ae,$e)=>(Ae.rank==="dynamic"&&$e.rank==="dynamic"?p[$e.name]-p[Ae.name]:0)||(typeof Ae.rank=="number"?Ae.rank:1e9)-(typeof $e.rank=="number"?$e.rank:1e9)||(Ae.name<$e.name?-1:1);for(let Ae of u.sort(oe))ie-=1e5,z[Ae.name]=ie;for(let Ae of a){let{section:$e}=Ae.completion;$e&&(Ae.score+=z[typeof $e=="string"?$e:$e.name])}}let $=[],F=null,V=A.compareCompletions;for(let z of a.sort((ie,oe)=>oe.score-ie.score||V(ie.completion,oe.completion))){let ie=z.completion;!F||F.label!=ie.label||F.detail!=ie.detail||F.type!=null&&ie.type!=null&&F.type!=ie.type||F.apply!=ie.apply||F.boost!=ie.boost?$.push(z):h0(z.completion)>h0(F)&&($[$.length-1]=z),F=z.completion}return $}class Qo{constructor(t,a,u,p,g,A){this.options=t,this.attrs=a,this.tooltip=u,this.timestamp=p,this.selected=g,this.disabled=A}setSelected(t,a){return t==this.selected||t>=this.options.length?this:new Qo(this.options,p0(a,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,a,u,p,g,A){if(p&&!A&&t.some(V=>V.isPending))return p.setDisabled();let $=IO(t,a);if(!$.length)return p&&t.some(V=>V.isPending)?p.setDisabled():null;let F=a.facet(Ui).selectOnOpen?0:-1;if(p&&p.selected!=F&&p.selected!=-1){let V=p.options[p.selected].completion;for(let z=0;z<$.length;z++)if($[z].completion==V){F=z;break}}return new Qo($,p0(u,F),{pos:t.reduce((V,z)=>z.hasResult()?Math.min(V,z.from):V,1e8),create:jO,above:g.aboveCursor},p?p.timestamp:Date.now(),F,!1)}map(t){return new Qo(this.options,this.attrs,{...this.tooltip,pos:t.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Qo(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Vu{constructor(t,a,u){this.active=t,this.id=a,this.open=u}static start(){return new Vu(zO,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(t){let{state:a}=t,u=a.facet(Ui),g=(u.override||a.languageDataAt("autocomplete",zs(a)).map(FO)).map(F=>(this.active.find(z=>z.source==F)||new Br(F,this.active.some(z=>z.state!=0)?1:0)).update(t,u));g.length==this.active.length&&g.every((F,V)=>F==this.active[V])&&(g=this.active);let A=this.open,$=t.effects.some(F=>F.is(Rf));A&&t.docChanged&&(A=A.map(t.changes)),t.selection||g.some(F=>F.hasResult()&&t.changes.touchesRange(F.from,F.to))||!VO(g,this.active)||$?A=Qo.build(g,a,this.id,A,u,$):A&&A.disabled&&!g.some(F=>F.isPending)&&(A=null),!A&&g.every(F=>!F.isPending)&&g.some(F=>F.hasResult())&&(g=g.map(F=>F.hasResult()?new Br(F.source,0):F));for(let F of t.effects)F.is(m0)&&(A=A&&A.setSelected(F.value,this.id));return g==this.active&&A==this.open?this:new Vu(g,this.id,A)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?XO:WO}}function VO(f,t){if(f==t)return!0;for(let a=0,u=0;;){for(;a<f.length&&!f[a].hasResult();)a++;for(;u<t.length&&!t[u].hasResult();)u++;let p=a==f.length,g=u==t.length;if(p||g)return p==g;if(f[a++].result!=t[u++].result)return!1}}const XO={"aria-autocomplete":"list"},WO={};function p0(f,t){let a={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":f};return t>-1&&(a["aria-activedescendant"]=f+"-"+t),a}const zO=[];function d0(f,t){if(f.isUserEvent("input.complete")){let u=f.annotation(Tf);if(u&&t.activateOnCompletion(u))return 12}let a=f.isUserEvent("input.type");return a&&t.activateOnTyping?5:a?1:f.isUserEvent("delete.backward")?2:f.selection?8:f.docChanged?16:0}class Br{constructor(t,a,u=!1){this.source=t,this.state=a,this.explicit=u}hasResult(){return!1}get isPending(){return this.state==1}update(t,a){let u=d0(t,a),p=this;(u&8||u&16&&this.touches(t))&&(p=new Br(p.source,0)),u&4&&p.state==0&&(p=new Br(this.source,1)),p=p.updateFor(t,u);for(let g of t.effects)if(g.is(Iu))p=new Br(p.source,1,g.value);else if(g.is(Ga))p=new Br(p.source,0);else if(g.is(Rf))for(let A of g.value)A.source==p.source&&(p=A);return p}updateFor(t,a){return this.map(t.changes)}map(t){return this}touches(t){return t.changes.touchesRange(zs(t.state))}}class Lo extends Br{constructor(t,a,u,p,g,A){super(t,3,a),this.limit=u,this.result=p,this.from=g,this.to=A}hasResult(){return!0}updateFor(t,a){var u;if(!(a&3))return this.map(t.changes);let p=this.result;p.map&&!t.changes.empty&&(p=p.map(p,t.changes));let g=t.changes.mapPos(this.from),A=t.changes.mapPos(this.to,1),$=zs(t.state);if($>A||!p||a&2&&(zs(t.startState)==this.from||$<this.limit))return new Br(this.source,a&4?1:0);let F=t.changes.mapPos(this.limit);return qO(p.validFor,t.state,g,A)?new Lo(this.source,this.explicit,F,p,g,A):p.update&&(p=p.update(p,g,A,new s0(t.state,$,!1)))?new Lo(this.source,this.explicit,F,p,p.from,(u=p.to)!==null&&u!==void 0?u:zs(t.state)):new Br(this.source,1,this.explicit)}map(t){return t.empty?this:(this.result.map?this.result.map(this.result,t):this.result)?new Lo(this.source,this.explicit,t.mapPos(this.limit),this.result,t.mapPos(this.from),t.mapPos(this.to,1)):new Br(this.source,0)}touches(t){return t.changes.touchesRange(this.from,this.to)}}function qO(f,t,a,u){if(!f)return!1;let p=t.sliceDoc(a,u);return typeof f=="function"?f(p,a,u,t):u0(f,!0).test(p)}const Rf=Et.define({map(f,t){return f.map(a=>a.map(t))}}),m0=Et.define(),Or=wn.define({create(){return Vu.start()},update(f,t){return f.update(t)},provide:f=>[Bc.from(f,t=>t.tooltip),on.contentAttributes.from(f,t=>t.attrs)]});function Bf(f,t){const a=t.completion.apply||t.completion.label;let u=f.state.field(Or).active.find(p=>p.source==t.source);return u instanceof Lo?(typeof a=="string"?f.dispatch({...TO(f.state,a,u.from,u.to),annotations:Tf.of(t.completion)}):a(f,t.completion,u.from,u.to),!0):!1}const jO=GO(Or,Bf);function Ds(f,t="option"){return a=>{let u=a.state.field(Or,!1);if(!u||!u.open||u.open.disabled||Date.now()-u.open.timestamp<a.state.facet(Ui).interactionDelay)return!1;let p=1,g;t=="page"&&(g=sp(a,u.open.tooltip))&&(p=Math.max(2,Math.floor(g.dom.offsetHeight/g.dom.querySelector("li").offsetHeight)-1));let{length:A}=u.open.options,$=u.open.selected>-1?u.open.selected+p*(f?1:-1):f?0:A-1;return $<0?$=t=="page"?0:A-1:$>=A&&($=t=="page"?A-1:0),a.dispatch({effects:m0.of($)}),!0}}const Qf=f=>{let t=f.state.field(Or,!1);return f.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<f.state.facet(Ui).interactionDelay?!1:Bf(f,t.open.options[t.open.selected])},Xu=f=>f.state.field(Or,!1)?(f.dispatch({effects:Iu.of(!0)}),!0):!1,g0=f=>{let t=f.state.field(Or,!1);return!t||!t.active.some(a=>a.state!=0)?!1:(f.dispatch({effects:Ga.of(null)}),!0)};class UO{constructor(t,a){this.active=t,this.context=a,this.time=Date.now(),this.updates=[],this.done=void 0}}const YO=50,HO=1e3,KO=Ri.fromClass(class{constructor(f){this.view=f,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of f.state.field(Or).active)t.isPending&&this.startQuery(t)}update(f){let t=f.state.field(Or),a=f.state.facet(Ui);if(!f.selectionSet&&!f.docChanged&&f.startState.field(Or)==t)return;let u=f.transactions.some(g=>{let A=d0(g,a);return A&8||(g.selection||g.docChanged)&&!(A&3)});for(let g=0;g<this.running.length;g++){let A=this.running[g];if(u||A.context.abortOnDocChange&&f.docChanged||A.updates.length+f.transactions.length>YO&&Date.now()-A.time>HO){for(let $ of A.context.abortListeners)try{$()}catch(F){Vi(this.view.state,F)}A.context.abortListeners=null,this.running.splice(g--,1)}else A.updates.push(...f.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),f.transactions.some(g=>g.effects.some(A=>A.is(Iu)))&&(this.pendingStart=!0);let p=this.pendingStart?50:a.activateOnTypingDelay;if(this.debounceUpdate=t.active.some(g=>g.isPending&&!this.running.some(A=>A.active.source==g.source))?setTimeout(()=>this.startUpdate(),p):-1,this.composing!=0)for(let g of f.transactions)g.isUserEvent("input.type")?this.composing=2:this.composing==2&&g.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:f}=this.view,t=f.field(Or);for(let a of t.active)a.isPending&&!this.running.some(u=>u.active.source==a.source)&&this.startQuery(a);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ui).updateSyncTime))}startQuery(f){let{state:t}=this.view,a=zs(t),u=new s0(t,a,f.explicit,this.view),p=new UO(f,u);this.running.push(p),Promise.resolve(f.source(u)).then(g=>{p.context.aborted||(p.done=g||null,this.scheduleAccept())},g=>{this.view.dispatch({effects:Ga.of(null)}),Vi(this.view.state,g)})}scheduleAccept(){this.running.every(f=>f.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ui).updateSyncTime))}accept(){var f;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],a=this.view.state.facet(Ui),u=this.view.state.field(Or);for(let p=0;p<this.running.length;p++){let g=this.running[p];if(g.done===void 0)continue;if(this.running.splice(p--,1),g.done){let $=zs(g.updates.length?g.updates[0].startState:this.view.state),F=Math.min($,g.done.from+(g.active.explicit?0:1)),V=new Lo(g.active.source,g.active.explicit,F,g.done,g.done.from,(f=g.done.to)!==null&&f!==void 0?f:$);for(let z of g.updates)V=V.update(z,a);if(V.hasResult()){t.push(V);continue}}let A=u.active.find($=>$.source==g.active.source);if(A&&A.isPending)if(g.done==null){let $=new Br(g.active.source,0);for(let F of g.updates)$=$.update(F,a);$.isPending||t.push($)}else this.startQuery(A)}(t.length||u.open&&u.open.disabled)&&this.view.dispatch({effects:Rf.of(t)})}},{eventHandlers:{blur(f){let t=this.view.state.field(Or,!1);if(t&&t.tooltip&&this.view.state.facet(Ui).closeOnBlur){let a=t.open&&sp(this.view,t.open.tooltip);(!a||!a.dom.contains(f.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ga.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Iu.of(!1)}),20),this.composing=0}}}),JO=typeof navigator=="object"&&/Win/.test(navigator.platform),ey=Di.highest(on.domEventHandlers({keydown(f,t){let a=t.state.field(Or,!1);if(!a||!a.open||a.open.disabled||a.open.selected<0||f.key.length>1||f.ctrlKey&&!(JO&&f.altKey)||f.metaKey)return!1;let u=a.open.options[a.open.selected],p=a.active.find(A=>A.source==u.source),g=u.completion.commitCharacters||p.result.commitCharacters;return g&&g.indexOf(f.key)>-1&&Bf(t,u),!1}})),_0=on.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ty{constructor(t,a,u,p){this.field=t,this.line=a,this.from=u,this.to=p}}class Lf{constructor(t,a,u){this.field=t,this.from=a,this.to=u}map(t){let a=t.mapPos(this.from,-1,$t.TrackDel),u=t.mapPos(this.to,1,$t.TrackDel);return a==null||u==null?null:new Lf(this.field,a,u)}}class Nf{constructor(t,a){this.lines=t,this.fieldPositions=a}instantiate(t,a){let u=[],p=[a],g=t.doc.lineAt(a),A=/^\s*/.exec(g.text)[0];for(let F of this.lines){if(u.length){let V=A,z=/^\t*/.exec(F)[0].length;for(let ie=0;ie<z;ie++)V+=t.facet($a);p.push(a+V.length-z),F=V+F.slice(z)}u.push(F),a+=F.length+1}let $=this.fieldPositions.map(F=>new Lf(F.field,p[F.line]+F.from,p[F.line]+F.to));return{text:u,ranges:$}}static parse(t){let a=[],u=[],p=[],g;for(let A of t.split(/\r\n?|\n/)){for(;g=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(A);){let $=g[1]?+g[1]:null,F=g[2]||g[3]||"",V=-1,z=F.replace(/\\[{}]/g,ie=>ie[1]);for(let ie=0;ie<a.length;ie++)($!=null?a[ie].seq==$:z&&a[ie].name==z)&&(V=ie);if(V<0){let ie=0;for(;ie<a.length&&($==null||a[ie].seq!=null&&a[ie].seq<$);)ie++;a.splice(ie,0,{seq:$,name:z}),V=ie;for(let oe of p)oe.field>=V&&oe.field++}for(let ie of p)if(ie.line==u.length&&ie.from>g.index){let oe=g[2]?3+(g[1]||"").length:2;ie.from-=oe,ie.to-=oe}p.push(new ty(V,u.length,g.index,g.index+z.length)),A=A.slice(0,g.index)+F+A.slice(g.index+g[0].length)}A=A.replace(/\\([{}])/g,($,F,V)=>{for(let z of p)z.line==u.length&&z.from>V&&(z.from--,z.to--);return F}),u.push(A)}return new Nf(u,p)}}let ny=mn.widget({widget:new class extends vr{toDOM(){let f=document.createElement("span");return f.className="cm-snippetFieldPosition",f}ignoreEvent(){return!1}}}),iy=mn.mark({class:"cm-snippetField"});class Go{constructor(t,a){this.ranges=t,this.active=a,this.deco=mn.set(t.map(u=>(u.from==u.to?ny:iy).range(u.from,u.to)),!0)}map(t){let a=[];for(let u of this.ranges){let p=u.map(t);if(!p)return null;a.push(p)}return new Go(a,this.active)}selectionInsideField(t){return t.ranges.every(a=>this.ranges.some(u=>u.field==this.active&&u.from<=a.from&&u.to>=a.to))}}const Za=Et.define({map(f,t){return f&&f.map(t)}}),ry=Et.define(),Ia=wn.define({create(){return null},update(f,t){for(let a of t.effects){if(a.is(Za))return a.value;if(a.is(ry)&&f)return new Go(f.ranges,a.value)}return f&&t.docChanged&&(f=f.map(t.changes)),f&&t.selection&&!f.selectionInsideField(t.selection)&&(f=null),f},provide:f=>on.decorations.from(f,t=>t?t.deco:mn.none)});function Gf(f,t){return ft.create(f.filter(a=>a.field==t).map(a=>ft.range(a.from,a.to)))}function sy(f){let t=Nf.parse(f);return(a,u,p,g)=>{let{text:A,ranges:$}=t.instantiate(a.state,p),{main:F}=a.state.selection,V={changes:{from:p,to:g==F.from?F.to:g,insert:K.of(A)},scrollIntoView:!0,annotations:u?[Tf.of(u),ui.userEvent.of("input.complete")]:void 0};if($.length&&(V.selection=Gf($,0)),$.some(z=>z.field>0)){let z=new Go($,0),ie=V.effects=[Za.of(z)];a.state.field(Ia,!1)===void 0&&ie.push(Et.appendConfig.of([Ia,ay,ly,_0]))}a.dispatch(a.state.update(V))}}function O0(f){return({state:t,dispatch:a})=>{let u=t.field(Ia,!1);if(!u||f<0&&u.active==0)return!1;let p=u.active+f,g=f>0&&!u.ranges.some(A=>A.field==p+f);return a(t.update({selection:Gf(u.ranges,p),effects:Za.of(g?null:new Go(u.ranges,p)),scrollIntoView:!0})),!0}}const oy=[{key:"Tab",run:O0(1),shift:O0(-1)},{key:"Escape",run:({state:f,dispatch:t})=>f.field(Ia,!1)?(t(f.update({effects:Za.of(null)})),!0):!1}],y0=Dt.define({combine(f){return f.length?f[0]:oy}}),ay=Di.highest(Zl.compute([y0],f=>f.facet(y0)));function yr(f,t){return{...t,apply:sy(f)}}const ly=on.domEventHandlers({mousedown(f,t){let a=t.state.field(Ia,!1),u;if(!a||(u=t.posAtCoords({x:f.clientX,y:f.clientY}))==null)return!1;let p=a.ranges.find(g=>g.from<=u&&g.to>=u);return!p||p.field==a.active?!1:(t.dispatch({selection:Gf(a.ranges,p.field),effects:Za.of(a.ranges.some(g=>g.field>p.field)?new Go(a.ranges,p.field):null),scrollIntoView:!0}),!0)}}),Va={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},qs=Et.define({map(f,t){let a=t.mapPos(f,-1,$t.TrackAfter);return a??void 0}}),Zf=new class extends kt{};Zf.startSide=1,Zf.endSide=-1;const b0=wn.define({create(){return Zn.empty},update(f,t){if(f=f.map(t.changes),t.selection){let a=t.state.doc.lineAt(t.selection.main.head);f=f.update({filter:u=>u>=a.from&&u<=a.to})}for(let a of t.effects)a.is(qs)&&(f=f.update({add:[Zf.range(a.value,a.value+1)]}));return f}});function uy(){return[fy,b0]}const If="()[]{}<>«»»«［］｛｝";function A0(f){for(let t=0;t<If.length;t+=2)if(If.charCodeAt(t)==f)return If.charAt(t+1);return Nt(f<128?f:f+1)}function v0(f,t){return f.languageDataAt("closeBrackets",t)[0]||Va}const cy=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),fy=on.inputHandler.of((f,t,a,u)=>{if((cy?f.composing:f.compositionStarted)||f.state.readOnly)return!1;let p=f.state.selection.main;if(u.length>2||u.length==2&&St(ut(u,0))==1||t!=p.from||a!=p.to)return!1;let g=py(f.state,u);return g?(f.dispatch(g),!0):!1}),hy=({state:f,dispatch:t})=>{if(f.readOnly)return!1;let u=v0(f,f.selection.main.head).brackets||Va.brackets,p=null,g=f.changeByRange(A=>{if(A.empty){let $=dy(f.doc,A.head);for(let F of u)if(F==$&&Wu(f.doc,A.head)==A0(ut(F,0)))return{changes:{from:A.head-F.length,to:A.head+F.length},range:ft.cursor(A.head-F.length)}}return{range:p=A}});return p||t(f.update(g,{scrollIntoView:!0,userEvent:"delete.backward"})),!p};function py(f,t){let a=v0(f,f.selection.main.head),u=a.brackets||Va.brackets;for(let p of u){let g=A0(ut(p,0));if(t==p)return g==p?_y(f,p,u.indexOf(p+p+p)>-1,a):my(f,p,g,a.before||Va.before);if(t==g&&x0(f,f.selection.main.from))return gy(f,p,g)}return null}function x0(f,t){let a=!1;return f.field(b0).between(0,f.doc.length,u=>{u==t&&(a=!0)}),a}function Wu(f,t){let a=f.sliceString(t,t+2);return a.slice(0,St(ut(a,0)))}function dy(f,t){let a=f.sliceString(t-2,t);return St(ut(a,0))==a.length?a:a.slice(1)}function my(f,t,a,u){let p=null,g=f.changeByRange(A=>{if(!A.empty)return{changes:[{insert:t,from:A.from},{insert:a,from:A.to}],effects:qs.of(A.to+t.length),range:ft.range(A.anchor+t.length,A.head+t.length)};let $=Wu(f.doc,A.head);return!$||/\s/.test($)||u.indexOf($)>-1?{changes:{insert:t+a,from:A.head},effects:qs.of(A.head+t.length),range:ft.cursor(A.head+t.length)}:{range:p=A}});return p?null:f.update(g,{scrollIntoView:!0,userEvent:"input.type"})}function gy(f,t,a){let u=null,p=f.changeByRange(g=>g.empty&&Wu(f.doc,g.head)==a?{changes:{from:g.head,to:g.head+a.length,insert:a},range:ft.cursor(g.head+a.length)}:u={range:g});return u?null:f.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function _y(f,t,a,u){let p=u.stringPrefixes||Va.stringPrefixes,g=null,A=f.changeByRange($=>{if(!$.empty)return{changes:[{insert:t,from:$.from},{insert:t,from:$.to}],effects:qs.of($.to+t.length),range:ft.range($.anchor+t.length,$.head+t.length)};let F=$.head,V=Wu(f.doc,F),z;if(V==t){if(C0(f,F))return{changes:{insert:t+t,from:F},effects:qs.of(F+t.length),range:ft.cursor(F+t.length)};if(x0(f,F)){let oe=a&&f.sliceDoc(F,F+t.length*3)==t+t+t?t+t+t:t;return{changes:{from:F,to:F+oe.length,insert:oe},range:ft.cursor(F+oe.length)}}}else{if(a&&f.sliceDoc(F-2*t.length,F)==t+t&&(z=S0(f,F-2*t.length,p))>-1&&C0(f,z))return{changes:{insert:t+t+t+t,from:F},effects:qs.of(F+t.length),range:ft.cursor(F+t.length)};if(f.charCategorizer(F)(V)!=ee.Word&&S0(f,F,p)>-1&&!Oy(f,F,t,p))return{changes:{insert:t+t,from:F},effects:qs.of(F+t.length),range:ft.cursor(F+t.length)}}return{range:g=$}});return g?null:f.update(A,{scrollIntoView:!0,userEvent:"input.type"})}function C0(f,t){let a=zi(f).resolveInner(t+1);return a.parent&&a.from==t}function Oy(f,t,a,u){let p=zi(f).resolveInner(t,-1),g=u.reduce((A,$)=>Math.max(A,$.length),0);for(let A=0;A<5;A++){let $=f.sliceDoc(p.from,Math.min(p.to,p.from+a.length+g)),F=$.indexOf(a);if(!F||F>-1&&u.indexOf($.slice(0,F))>-1){let z=p.firstChild;for(;z&&z.from==p.from&&z.to-z.from>a.length+F;){if(f.sliceDoc(z.to-a.length,z.to)==a)return!1;z=z.firstChild}return!0}let V=p.to==t&&p.parent;if(!V)break;p=V}return!1}function S0(f,t,a){let u=f.charCategorizer(t);if(u(f.sliceDoc(t-1,t))!=ee.Word)return t;for(let p of a){let g=t-p.length;if(f.sliceDoc(g,t)==p&&u(f.sliceDoc(g-1,g))!=ee.Word)return g}return-1}function yy(f={}){return[ey,Or,Ui.of(f),KO,Ay,_0]}const by=[{key:"Ctrl-Space",run:Xu},{mac:"Alt-`",run:Xu},{mac:"Alt-i",run:Xu},{key:"Escape",run:g0},{key:"ArrowDown",run:Ds(!0)},{key:"ArrowUp",run:Ds(!1)},{key:"PageDown",run:Ds(!0,"page")},{key:"PageUp",run:Ds(!1,"page")},{key:"Enter",run:Qf}],Ay=Di.highest(Zl.computeN([Ui],f=>f.facet(Ui).defaultKeymap?[by]:[]));class w0{constructor(t,a,u){this.from=t,this.to=a,this.diagnostic=u}}class js{constructor(t,a,u){this.diagnostics=t,this.panel=a,this.selected=u}static init(t,a,u){let p=u.facet(Xa).markerFilter;p&&(t=p(t,u));let g=t.slice().sort((Ae,$e)=>Ae.from-$e.from||Ae.to-$e.to),A=new br,$=[],F=0,V=u.doc.iter(),z=0,ie=u.doc.length;for(let Ae=0;;){let $e=Ae==g.length?null:g[Ae];if(!$e&&!$.length)break;let je,ot;if($.length)je=F,ot=$.reduce((Zt,an)=>Math.min(Zt,an.to),$e&&$e.from>je?$e.from:1e8);else{if(je=$e.from,je>ie)break;ot=$e.to,$.push($e),Ae++}for(;Ae<g.length;){let Zt=g[Ae];if(Zt.from==je&&(Zt.to>Zt.from||Zt.to==je))$.push(Zt),Ae++,ot=Math.min(Zt.to,ot);else{ot=Math.min(Zt.from,ot);break}}ot=Math.min(ot,ie);let bt=!1;if($.some(Zt=>Zt.from==je&&(Zt.to==ot||ot==ie))&&(bt=je==ot,!bt&&ot-je<10)){let Zt=je-(z+V.value.length);Zt>0&&(V.next(Zt),z=je);for(let an=je;;){if(an>=ot){bt=!0;break}if(!V.lineBreak&&z+V.value.length>an)break;an=z+V.value.length,z+=V.value.length,V.next()}}let Xt=Ty($);if(bt)A.add(je,je,mn.widget({widget:new ky(Xt),diagnostics:$.slice()}));else{let Zt=$.reduce((an,Gt)=>Gt.markClass?an+" "+Gt.markClass:an,"");A.add(je,ot,mn.mark({class:"cm-lintRange cm-lintRange-"+Xt+Zt,diagnostics:$.slice(),inclusiveEnd:$.some(an=>an.to>ot)}))}if(F=ot,F==ie)break;for(let Zt=0;Zt<$.length;Zt++)$[Zt].to<=F&&$.splice(Zt--,1)}let oe=A.finish();return new js(oe,a,Zo(oe))}}function Zo(f,t=null,a=0){let u=null;return f.between(a,1e9,(p,g,{spec:A})=>{if(!(t&&A.diagnostics.indexOf(t)<0))if(!u)u=new w0(p,g,t||A.diagnostics[0]);else{if(A.diagnostics.indexOf(u.diagnostic)<0)return!1;u=new w0(u.from,g,u.diagnostic)}}),u}function vy(f,t){let a=t.pos,u=t.end||a,p=f.state.facet(Xa).hideOn(f,a,u);if(p!=null)return p;let g=f.startState.doc.lineAt(t.pos);return!!(f.effects.some(A=>A.is(P0))||f.changes.touchesRange(g.from,Math.max(g.to,u)))}function xy(f,t){return f.field(Sr,!1)?t:t.concat(Et.appendConfig.of(Fy))}const P0=Et.define(),Vf=Et.define(),M0=Et.define(),Sr=wn.define({create(){return new js(mn.none,null,null)},update(f,t){if(t.docChanged&&f.diagnostics.size){let a=f.diagnostics.map(t.changes),u=null,p=f.panel;if(f.selected){let g=t.changes.mapPos(f.selected.from,1);u=Zo(a,f.selected.diagnostic,g)||Zo(a,null,g)}!a.size&&p&&t.state.facet(Xa).autoPanel&&(p=null),f=new js(a,p,u)}for(let a of t.effects)if(a.is(P0)){let u=t.state.facet(Xa).autoPanel?a.value.length?Wa.open:null:f.panel;f=js.init(a.value,u,t.state)}else a.is(Vf)?f=new js(f.diagnostics,a.value?Wa.open:null,f.selected):a.is(M0)&&(f=new js(f.diagnostics,f.panel,a.value));return f},provide:f=>[Ca.from(f,t=>t.panel),on.decorations.from(f,t=>t.diagnostics)]}),Cy=mn.mark({class:"cm-lintRange cm-lintRange-active"});function Sy(f,t,a){let{diagnostics:u}=f.state.field(Sr),p,g=-1,A=-1;u.between(t-(a<0?1:0),t+(a>0?1:0),(F,V,{spec:z})=>{if(t>=F&&t<=V&&(F==V||(t>F||a>0)&&(t<V||a<0)))return p=z.diagnostics,g=F,A=V,!1});let $=f.state.facet(Xa).tooltipFilter;return p&&$&&(p=$(p,f.state)),p?{pos:g,end:A,above:f.state.doc.lineAt(g).to<A,create(){return{dom:wy(f,p)}}}:null}function wy(f,t){return xi("ul",{class:"cm-tooltip-lint"},t.map(a=>E0(f,a,!1)))}const Py=f=>{let t=f.state.field(Sr,!1);(!t||!t.panel)&&f.dispatch({effects:xy(f.state,[Vf.of(!0)])});let a=xa(f,Wa.open);return a&&a.dom.querySelector(".cm-panel-lint ul").focus(),!0},k0=f=>{let t=f.state.field(Sr,!1);return!t||!t.panel?!1:(f.dispatch({effects:Vf.of(!1)}),!0)},My=f=>{let t=f.state.field(Sr,!1);if(!t)return!1;let a=f.state.selection.main,u=t.diagnostics.iter(a.to+1);return!u.value&&(u=t.diagnostics.iter(0),!u.value||u.from==a.from&&u.to==a.to)?!1:(f.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0}),!0)},Xa=Dt.define({combine(f){return{sources:f.map(t=>t.source).filter(t=>t!=null),...Ot(f.map(t=>t.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:$0,tooltipFilter:$0,needsRefresh:(t,a)=>t?a?u=>t(u)||a(u):t:a,hideOn:(t,a)=>t?a?(u,p,g)=>t(u,p,g)||a(u,p,g):t:a,autoPanel:(t,a)=>t||a})}}});function $0(f,t){return f?t?(a,u)=>t(f(a,u),u):f:t}function D0(f){let t=[];if(f)e:for(let{name:a}of f){for(let u=0;u<a.length;u++){let p=a[u];if(/[a-zA-Z]/.test(p)&&!t.some(g=>g.toLowerCase()==p.toLowerCase())){t.push(p);continue e}}t.push("")}return t}function E0(f,t,a){var u;let p=a?D0(t.actions):[];return xi("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},xi("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(f):t.message),(u=t.actions)===null||u===void 0?void 0:u.map((g,A)=>{let $=!1,F=Ae=>{if(Ae.preventDefault(),$)return;$=!0;let $e=Zo(f.state.field(Sr).diagnostics,t);$e&&g.apply(f,$e.from,$e.to)},{name:V}=g,z=p[A]?V.indexOf(p[A]):-1,ie=z<0?V:[V.slice(0,z),xi("u",V.slice(z,z+1)),V.slice(z+1)],oe=g.markClass?" "+g.markClass:"";return xi("button",{type:"button",class:"cm-diagnosticAction"+oe,onclick:F,onmousedown:F,"aria-label":` Action: ${V}${z<0?"":` (access key "${p[A]})"`}.`},ie)}),t.source&&xi("div",{class:"cm-diagnosticSource"},t.source))}class ky extends vr{constructor(t){super(),this.sev=t}eq(t){return t.sev==this.sev}toDOM(){return xi("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class T0{constructor(t,a){this.diagnostic=a,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=E0(t,a,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Wa{constructor(t){this.view=t,this.items=[];let a=p=>{if(p.keyCode==27)k0(this.view),this.view.focus();else if(p.keyCode==38||p.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(p.keyCode==40||p.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(p.keyCode==36)this.moveSelection(0);else if(p.keyCode==35)this.moveSelection(this.items.length-1);else if(p.keyCode==13)this.view.focus();else if(p.keyCode>=65&&p.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:g}=this.items[this.selectedIndex],A=D0(g.actions);for(let $=0;$<A.length;$++)if(A[$].toUpperCase().charCodeAt(0)==p.keyCode){let F=Zo(this.view.state.field(Sr).diagnostics,g);F&&g.actions[$].apply(t,F.from,F.to)}}else return;p.preventDefault()},u=p=>{for(let g=0;g<this.items.length;g++)this.items[g].dom.contains(p.target)&&this.moveSelection(g)};this.list=xi("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:a,onclick:u}),this.dom=xi("div",{class:"cm-panel-lint"},this.list,xi("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>k0(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(Sr).selected;if(!t)return-1;for(let a=0;a<this.items.length;a++)if(this.items[a].diagnostic==t.diagnostic)return a;return-1}update(){let{diagnostics:t,selected:a}=this.view.state.field(Sr),u=0,p=!1,g=null,A=new Set;for(t.between(0,this.view.state.doc.length,($,F,{spec:V})=>{for(let z of V.diagnostics){if(A.has(z))continue;A.add(z);let ie=-1,oe;for(let Ae=u;Ae<this.items.length;Ae++)if(this.items[Ae].diagnostic==z){ie=Ae;break}ie<0?(oe=new T0(this.view,z),this.items.splice(u,0,oe),p=!0):(oe=this.items[ie],ie>u&&(this.items.splice(u,ie-u),p=!0)),a&&oe.diagnostic==a.diagnostic?oe.dom.hasAttribute("aria-selected")||(oe.dom.setAttribute("aria-selected","true"),g=oe):oe.dom.hasAttribute("aria-selected")&&oe.dom.removeAttribute("aria-selected"),u++}});u<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)p=!0,this.items.pop();this.items.length==0&&(this.items.push(new T0(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),p=!0),g?(this.list.setAttribute("aria-activedescendant",g.id),this.view.requestMeasure({key:this,read:()=>({sel:g.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:$,panel:F})=>{let V=F.height/this.list.offsetHeight;$.top<F.top?this.list.scrollTop-=(F.top-$.top)/V:$.bottom>F.bottom&&(this.list.scrollTop+=($.bottom-F.bottom)/V)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),p&&this.sync()}sync(){let t=this.list.firstChild;function a(){let u=t;t=u.nextSibling,u.remove()}for(let u of this.items)if(u.dom.parentNode==this.list){for(;t!=u.dom;)a();t=u.dom.nextSibling}else this.list.insertBefore(u.dom,t);for(;t;)a()}moveSelection(t){if(this.selectedIndex<0)return;let a=this.view.state.field(Sr),u=Zo(a.diagnostics,this.items[t].diagnostic);u&&this.view.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:M0.of(u)})}static open(t){return new Wa(t)}}function $y(f,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(f)}</svg>')`}function zu(f){return $y(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${f}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Dy=on.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:zu("#d11")},".cm-lintRange-warning":{backgroundImage:zu("orange")},".cm-lintRange-info":{backgroundImage:zu("#999")},".cm-lintRange-hint":{backgroundImage:zu("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Ey(f){return f=="error"?4:f=="warning"?3:f=="info"?2:1}function Ty(f){let t="hint",a=1;for(let u of f){let p=Ey(u.severity);p>a&&(a=p,t=u.severity)}return t}const Fy=[Sr,on.decorations.compute([Sr],f=>{let{selected:t,panel:a}=f.field(Sr);return!t||!a||t.from==t.to?mn.none:mn.set([Cy.range(t.from,t.to)])}),eg(Sy,{hideOn:vy}),Dy];class qu{constructor(t,a,u,p,g,A,$,F,V,z=0,ie){this.p=t,this.stack=a,this.state=u,this.reducePos=p,this.pos=g,this.score=A,this.buffer=$,this.bufferBase=F,this.curContext=V,this.lookAhead=z,this.parent=ie}toString(){return`[${this.stack.filter((t,a)=>a%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,a,u=0){let p=t.parser.context;return new qu(t,[],a,u,u,0,[],0,p?new F0(p,p.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,a){this.stack.push(this.state,a,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var a;let u=t>>19,p=t&65535,{parser:g}=this.p,A=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),$=g.dynamicPrecedence(p);if($&&(this.score+=$),u==0){this.pushState(g.getGoto(this.state,p,!0),this.reducePos),p<g.minRepeatTerm&&this.storeNode(p,this.reducePos,this.reducePos,A?8:4,!0),this.reduceContext(p,this.reducePos);return}let F=this.stack.length-(u-1)*3-(t&262144?6:0),V=F?this.stack[F-2]:this.p.ranges[0].from,z=this.reducePos-V;z>=2e3&&!(!((a=this.p.parser.nodeSet.types[p])===null||a===void 0)&&a.isAnonymous)&&(V==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=z):this.p.lastBigReductionSize<z&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=V,this.p.lastBigReductionSize=z));let ie=F?this.stack[F-1]:0,oe=this.bufferBase+this.buffer.length-ie;if(p<g.minRepeatTerm||t&131072){let Ae=g.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(p,V,Ae,oe+4,!0)}if(t&262144)this.state=this.stack[F];else{let Ae=this.stack[F-3];this.state=g.getGoto(Ae,p,!0)}for(;this.stack.length>F;)this.stack.pop();this.reduceContext(p,V)}storeNode(t,a,u,p=4,g=!1){if(t==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let A=this,$=this.buffer.length;if($==0&&A.parent&&($=A.bufferBase-A.parent.bufferBase,A=A.parent),$>0&&A.buffer[$-4]==0&&A.buffer[$-1]>-1){if(a==u)return;if(A.buffer[$-2]>=a){A.buffer[$-2]=u;return}}}if(!g||this.pos==u)this.buffer.push(t,a,u,p);else{let A=this.buffer.length;if(A>0&&(this.buffer[A-4]!=0||this.buffer[A-1]<0)){let $=!1;for(let F=A;F>0&&this.buffer[F-2]>u;F-=4)if(this.buffer[F-1]>=0){$=!0;break}if($)for(;A>0&&this.buffer[A-2]>u;)this.buffer[A]=this.buffer[A-4],this.buffer[A+1]=this.buffer[A-3],this.buffer[A+2]=this.buffer[A-2],this.buffer[A+3]=this.buffer[A-1],A-=4,p>4&&(p-=4)}this.buffer[A]=t,this.buffer[A+1]=a,this.buffer[A+2]=u,this.buffer[A+3]=p}}shift(t,a,u,p){if(t&131072)this.pushState(t&65535,this.pos);else if((t&262144)==0){let g=t,{parser:A}=this.p;(p>this.pos||a<=A.maxNode)&&(this.pos=p,A.stateFlag(g,1)||(this.reducePos=p)),this.pushState(g,u),this.shiftContext(a,u),a<=A.maxNode&&this.buffer.push(a,u,p,4)}else this.pos=p,this.shiftContext(a,u),a<=this.p.parser.maxNode&&this.buffer.push(a,u,p,4)}apply(t,a,u,p){t&65536?this.reduce(t):this.shift(t,a,u,p)}useNode(t,a){let u=this.p.reused.length-1;(u<0||this.p.reused[u]!=t)&&(this.p.reused.push(t),u++);let p=this.pos;this.reducePos=this.pos=p+t.length,this.pushState(a,p),this.buffer.push(u,p,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,a=t.buffer.length;for(;a>0&&t.buffer[a-2]>t.reducePos;)a-=4;let u=t.buffer.slice(a),p=t.bufferBase+a;for(;t&&p==t.bufferBase;)t=t.parent;return new qu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,u,p,this.curContext,this.lookAhead,t)}recoverByDelete(t,a){let u=t<=this.p.parser.maxNode;u&&this.storeNode(t,this.pos,a,4),this.storeNode(0,this.pos,a,u?8:4),this.pos=this.reducePos=a,this.score-=190}canShift(t){for(let a=new Ry(this);;){let u=this.p.parser.stateSlot(a.state,4)||this.p.parser.hasAction(a.state,t);if(u==0)return!1;if((u&65536)==0)return!0;a.reduce(u)}}recoverByInsert(t){if(this.stack.length>=300)return[];let a=this.p.parser.nextStates(this.state);if(a.length>8||this.stack.length>=120){let p=[];for(let g=0,A;g<a.length;g+=2)(A=a[g+1])!=this.state&&this.p.parser.hasAction(A,t)&&p.push(a[g],A);if(this.stack.length<120)for(let g=0;p.length<8&&g<a.length;g+=2){let A=a[g+1];p.some(($,F)=>F&1&&$==A)||p.push(a[g],A)}a=p}let u=[];for(let p=0;p<a.length&&u.length<4;p+=2){let g=a[p+1];if(g==this.state)continue;let A=this.split();A.pushState(g,this.pos),A.storeNode(0,A.pos,A.pos,4,!0),A.shiftContext(a[p],this.pos),A.reducePos=this.pos,A.score-=200,u.push(A)}return u}forceReduce(){let{parser:t}=this.p,a=t.stateSlot(this.state,5);if((a&65536)==0)return!1;if(!t.validAction(this.state,a)){let u=a>>19,p=a&65535,g=this.stack.length-u*3;if(g<0||t.getGoto(this.stack[g],p,!1)<0){let A=this.findForcedReduction();if(A==null)return!1;a=A}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(a),!0}findForcedReduction(){let{parser:t}=this.p,a=[],u=(p,g)=>{if(!a.includes(p))return a.push(p),t.allActions(p,A=>{if(!(A&393216))if(A&65536){let $=(A>>19)-g;if($>1){let F=A&65535,V=this.stack.length-$*3;if(V>=0&&t.getGoto(this.stack[V],F,!1)>=0)return $<<19|65536|F}}else{let $=u(A,g+1);if($!=null)return $}})};return u(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:t}=this.p;return t.data[t.stateSlot(this.state,1)]==65535&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let a=0;a<this.stack.length;a+=3)if(this.stack[a]!=t.stack[a])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,a){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(a)))}reduceContext(t,a){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(a)))}emitContext(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||this.buffer[t]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let a=new F0(this.curContext.tracker,t);a.hash!=this.curContext.hash&&this.emitContext(),this.curContext=a}}setLookAhead(t){return t<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=t,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class F0{constructor(t,a){this.tracker=t,this.context=a,this.hash=t.strict?t.hash(a):0}}class Ry{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let a=t&65535,u=t>>19;u==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(u-1)*3;let p=this.start.p.parser.getGoto(this.stack[this.base-3],a,!0);this.state=p}}class ju{constructor(t,a,u){this.stack=t,this.pos=a,this.index=u,this.buffer=t.buffer,this.index==0&&this.maybeNext()}static create(t,a=t.bufferBase+t.buffer.length){return new ju(t,a,a-t.bufferBase)}maybeNext(){let t=this.stack.parent;t!=null&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ju(this.stack,this.pos,this.index)}}function za(f,t=Uint16Array){if(typeof f!="string")return f;let a=null;for(let u=0,p=0;u<f.length;){let g=0;for(;;){let A=f.charCodeAt(u++),$=!1;if(A==126){g=65535;break}A>=92&&A--,A>=34&&A--;let F=A-32;if(F>=46&&(F-=46,$=!0),g+=F,$)break;g*=46}a?a[p++]=g:a=new t(g)}return a}class Uu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const R0=new Uu;class By{constructor(t,a){this.input=t,this.ranges=a,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=R0,this.rangeIndex=0,this.pos=this.chunkPos=a[0].from,this.range=a[0],this.end=a[a.length-1].to,this.readNext()}resolveOffset(t,a){let u=this.range,p=this.rangeIndex,g=this.pos+t;for(;g<u.from;){if(!p)return null;let A=this.ranges[--p];g-=u.from-A.to,u=A}for(;a<0?g>u.to:g>=u.to;){if(p==this.ranges.length-1)return null;let A=this.ranges[++p];g+=A.from-u.to,u=A}return g}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let a of this.ranges)if(a.to>t)return Math.max(t,a.from);return this.end}peek(t){let a=this.chunkOff+t,u,p;if(a>=0&&a<this.chunk.length)u=this.pos+t,p=this.chunk.charCodeAt(a);else{let g=this.resolveOffset(t,1);if(g==null)return-1;if(u=g,u>=this.chunk2Pos&&u<this.chunk2Pos+this.chunk2.length)p=this.chunk2.charCodeAt(u-this.chunk2Pos);else{let A=this.rangeIndex,$=this.range;for(;$.to<=u;)$=this.ranges[++A];this.chunk2=this.input.chunk(this.chunk2Pos=u),u+this.chunk2.length>$.to&&(this.chunk2=this.chunk2.slice(0,$.to-u)),p=this.chunk2.charCodeAt(0)}}return u>=this.token.lookAhead&&(this.token.lookAhead=u+1),p}acceptToken(t,a=0){let u=a?this.resolveOffset(a,-1):this.pos;if(u==null||u<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=u}acceptTokenTo(t,a){this.token.value=t,this.token.end=a}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:a}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=a,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),a=this.pos+t.length;this.chunk=a>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,a){if(a?(this.token=a,a.start=t,a.lookAhead=t+1,a.value=a.extended=-1):this.token=R0,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,a){if(t>=this.chunkPos&&a<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,a-this.chunkPos);if(t>=this.chunk2Pos&&a<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,a-this.chunk2Pos);if(t>=this.range.from&&a<=this.range.to)return this.input.read(t,a);let u="";for(let p of this.ranges){if(p.from>=a)break;p.to>t&&(u+=this.input.read(Math.max(p.from,t),Math.min(p.to,a)))}return u}}class Io{constructor(t,a){this.data=t,this.id=a}token(t,a){let{parser:u}=a.p;B0(this.data,t,a,this.id,u.data,u.tokenPrecTable)}}Io.prototype.contextual=Io.prototype.fallback=Io.prototype.extend=!1;class Xf{constructor(t,a,u){this.precTable=a,this.elseToken=u,this.data=typeof t=="string"?za(t):t}token(t,a){let u=t.pos,p=0;for(;;){let g=t.next<0,A=t.resolveOffset(1,1);if(B0(this.data,t,a,0,this.data,this.precTable),t.token.value>-1)break;if(this.elseToken==null)return;if(g||p++,A==null)break;t.reset(A,t.token)}p&&(t.reset(u,t.token),t.acceptToken(this.elseToken,p))}}Xf.prototype.contextual=Io.prototype.fallback=Io.prototype.extend=!1;class qa{constructor(t,a={}){this.token=t,this.contextual=!!a.contextual,this.fallback=!!a.fallback,this.extend=!!a.extend}}function B0(f,t,a,u,p,g){let A=0,$=1<<u,{dialect:F}=a.p.parser;e:for(;($&f[A])!=0;){let V=f[A+1];for(let Ae=A+3;Ae<V;Ae+=2)if((f[Ae+1]&$)>0){let $e=f[Ae];if(F.allows($e)&&(t.token.value==-1||t.token.value==$e||Qy($e,t.token.value,p,g))){t.acceptToken($e);break}}let z=t.next,ie=0,oe=f[A+2];if(t.next<0&&oe>ie&&f[V+oe*3-3]==65535){A=f[V+oe*3-1];continue e}for(;ie<oe;){let Ae=ie+oe>>1,$e=V+Ae+(Ae<<1),je=f[$e],ot=f[$e+1]||65536;if(z<je)oe=Ae;else if(z>=ot)ie=Ae+1;else{A=f[$e+2],t.advance();continue e}}break}}function Q0(f,t,a){for(let u=t,p;(p=f[u])!=65535;u++)if(p==a)return u-t;return-1}function Qy(f,t,a,u){let p=Q0(a,u,t);return p<0||Q0(a,u,f)<p}const wr=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Wf=null;function L0(f,t,a){let u=f.cursor(Wi.IncludeAnonymous);for(u.moveTo(t);;)if(!(a<0?u.childBefore(t):u.childAfter(t)))for(;;){if((a<0?u.to<t:u.from>t)&&!u.type.isError)return a<0?Math.max(0,Math.min(u.to-1,t-25)):Math.min(f.length,Math.max(u.from+1,t+25));if(a<0?u.prevSibling():u.nextSibling())break;if(!u.parent())return a<0?0:f.length}}class Ly{constructor(t,a){this.fragments=t,this.nodeSet=a,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?L0(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?L0(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let a=this.trees.length-1;if(a<0)return this.nextFragment(),null;let u=this.trees[a],p=this.index[a];if(p==u.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let g=u.children[p],A=this.start[a]+u.positions[p];if(A>t)return this.nextStart=A,null;if(g instanceof Gi){if(A==t){if(A<this.safeFrom)return null;let $=A+g.length;if($<=this.safeTo){let F=g.prop(ci.lookAhead);if(!F||$+F<this.fragment.to)return g}}this.index[a]++,A+g.length>=Math.max(this.safeFrom,t)&&(this.trees.push(g),this.start.push(A),this.index.push(0))}else this.index[a]++,this.nextStart=A+g.length}}}class Ny{constructor(t,a){this.stream=a,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map(u=>new Uu)}getActions(t){let a=0,u=null,{parser:p}=t.p,{tokenizers:g}=p,A=p.stateSlot(t.state,3),$=t.curContext?t.curContext.hash:0,F=0;for(let V=0;V<g.length;V++){if((1<<V&A)==0)continue;let z=g[V],ie=this.tokens[V];if(!(u&&!z.fallback)&&((z.contextual||ie.start!=t.pos||ie.mask!=A||ie.context!=$)&&(this.updateCachedToken(ie,z,t),ie.mask=A,ie.context=$),ie.lookAhead>ie.end+25&&(F=Math.max(ie.lookAhead,F)),ie.value!=0)){let oe=a;if(ie.extended>-1&&(a=this.addActions(t,ie.extended,ie.end,a)),a=this.addActions(t,ie.value,ie.end,a),!z.extend&&(u=ie,a>oe))break}}for(;this.actions.length>a;)this.actions.pop();return F&&t.setLookAhead(F),!u&&t.pos==this.stream.end&&(u=new Uu,u.value=t.p.parser.eofTerm,u.start=u.end=t.pos,a=this.addActions(t,u.value,u.end,a)),this.mainToken=u,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let a=new Uu,{pos:u,p}=t;return a.start=u,a.end=Math.min(u+1,p.stream.end),a.value=u==p.stream.end?p.parser.eofTerm:0,a}updateCachedToken(t,a,u){let p=this.stream.clipPos(u.pos);if(a.token(this.stream.reset(p,t),u),t.value>-1){let{parser:g}=u.p;for(let A=0;A<g.specialized.length;A++)if(g.specialized[A]==t.value){let $=g.specializers[A](this.stream.read(t.start,t.end),u);if($>=0&&u.p.parser.dialect.allows($>>1)){($&1)==0?t.value=$>>1:t.extended=$>>1;break}}}else t.value=0,t.end=this.stream.clipPos(p+1)}putAction(t,a,u,p){for(let g=0;g<p;g+=3)if(this.actions[g]==t)return p;return this.actions[p++]=t,this.actions[p++]=a,this.actions[p++]=u,p}addActions(t,a,u,p){let{state:g}=t,{parser:A}=t.p,{data:$}=A;for(let F=0;F<2;F++)for(let V=A.stateSlot(g,F?2:1);;V+=3){if($[V]==65535)if($[V+1]==1)V=_s($,V+2);else{p==0&&$[V+1]==2&&(p=this.putAction(_s($,V+2),a,u,p));break}$[V]==a&&(p=this.putAction(_s($,V+1),a,u,p))}return p}}class Gy{constructor(t,a,u,p){this.parser=t,this.input=a,this.ranges=p,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new By(a,p),this.tokens=new Ny(t,this.stream),this.topTerm=t.top[1];let{from:g}=p[0];this.stacks=[qu.start(this,t.top[0],g)],this.fragments=u.length&&this.stream.end-g>t.bufferLength*4?new Ly(u,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t=this.stacks,a=this.minStackPos,u=this.stacks=[],p,g;if(this.bigReductionCount>300&&t.length==1){let[A]=t;for(;A.forceReduce()&&A.stack.length&&A.stack[A.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let A=0;A<t.length;A++){let $=t[A];for(;;){if(this.tokens.mainToken=null,$.pos>a)u.push($);else{if(this.advanceStack($,u,t))continue;{p||(p=[],g=[]),p.push($);let F=this.tokens.getMainToken($);g.push(F.value,F.end)}}break}}if(!u.length){let A=p&&Vy(p);if(A)return wr&&console.log("Finish with "+this.stackID(A)),this.stackToTree(A);if(this.parser.strict)throw wr&&p&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+a);this.recovering||(this.recovering=5)}if(this.recovering&&p){let A=this.stoppedAt!=null&&p[0].pos>this.stoppedAt?p[0]:this.runRecovery(p,g,u);if(A)return wr&&console.log("Force-finish "+this.stackID(A)),this.stackToTree(A.forceAll())}if(this.recovering){let A=this.recovering==1?1:this.recovering*3;if(u.length>A)for(u.sort(($,F)=>F.score-$.score);u.length>A;)u.pop();u.some($=>$.reducePos>a)&&this.recovering--}else if(u.length>1){e:for(let A=0;A<u.length-1;A++){let $=u[A];for(let F=A+1;F<u.length;F++){let V=u[F];if($.sameState(V)||$.buffer.length>500&&V.buffer.length>500)if(($.score-V.score||$.buffer.length-V.buffer.length)>0)u.splice(F--,1);else{u.splice(A--,1);continue e}}}u.length>12&&(u.sort((A,$)=>$.score-A.score),u.splice(12,u.length-12))}this.minStackPos=u[0].pos;for(let A=1;A<u.length;A++)u[A].pos<this.minStackPos&&(this.minStackPos=u[A].pos);return null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,a,u){let p=t.pos,{parser:g}=this,A=wr?this.stackID(t)+" -> ":"";if(this.stoppedAt!=null&&p>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let V=t.curContext&&t.curContext.tracker.strict,z=V?t.curContext.hash:0;for(let ie=this.fragments.nodeAt(p);ie;){let oe=this.parser.nodeSet.types[ie.type.id]==ie.type?g.getGoto(t.state,ie.type.id):-1;if(oe>-1&&ie.length&&(!V||(ie.prop(ci.contextHash)||0)==z))return t.useNode(ie,oe),wr&&console.log(A+this.stackID(t)+` (via reuse of ${g.getName(ie.type.id)})`),!0;if(!(ie instanceof Gi)||ie.children.length==0||ie.positions[0]>0)break;let Ae=ie.children[0];if(Ae instanceof Gi&&ie.positions[0]==0)ie=Ae;else break}}let $=g.stateSlot(t.state,4);if($>0)return t.reduce($),wr&&console.log(A+this.stackID(t)+` (via always-reduce ${g.getName($&65535)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let F=this.tokens.getActions(t);for(let V=0;V<F.length;){let z=F[V++],ie=F[V++],oe=F[V++],Ae=V==F.length||!u,$e=Ae?t:t.split(),je=this.tokens.mainToken;if($e.apply(z,ie,je?je.start:$e.pos,oe),wr&&console.log(A+this.stackID($e)+` (via ${(z&65536)==0?"shift":`reduce of ${g.getName(z&65535)}`} for ${g.getName(ie)} @ ${p}${$e==t?"":", split"})`),Ae)return!0;$e.pos>p?a.push($e):u.push($e)}return!1}advanceFully(t,a){let u=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>u)return N0(t,a),!0}}runRecovery(t,a,u){let p=null,g=!1;for(let A=0;A<t.length;A++){let $=t[A],F=a[A<<1],V=a[(A<<1)+1],z=wr?this.stackID($)+" -> ":"";if($.deadEnd&&(g||(g=!0,$.restart(),wr&&console.log(z+this.stackID($)+" (restarted)"),this.advanceFully($,u))))continue;let ie=$.split(),oe=z;for(let Ae=0;Ae<10&&ie.forceReduce()&&(wr&&console.log(oe+this.stackID(ie)+" (via force-reduce)"),!this.advanceFully(ie,u));Ae++)wr&&(oe=this.stackID(ie)+" -> ");for(let Ae of $.recoverByInsert(F))wr&&console.log(z+this.stackID(Ae)+" (via recover-insert)"),this.advanceFully(Ae,u);this.stream.end>$.pos?(V==$.pos&&(V++,F=0),$.recoverByDelete(F,V),wr&&console.log(z+this.stackID($)+` (via recover-delete ${this.parser.getName(F)})`),N0($,u)):(!p||p.score<$.score)&&(p=$)}return p}stackToTree(t){return t.close(),Gi.build({buffer:ju.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let a=(Wf||(Wf=new WeakMap)).get(t);return a||Wf.set(t,a=String.fromCodePoint(this.nextStackID++)),a+t}}function N0(f,t){for(let a=0;a<t.length;a++){let u=t[a];if(u.pos==f.pos&&u.sameState(f)){t[a].score<f.score&&(t[a]=f);return}}t.push(f)}class Zy{constructor(t,a,u){this.source=t,this.flags=a,this.disabled=u}allows(t){return!this.disabled||this.disabled[t]==0}}const zf=f=>f;class Iy{constructor(t){this.start=t.start,this.shift=t.shift||zf,this.reduce=t.reduce||zf,this.reuse=t.reuse||zf,this.hash=t.hash||(()=>0),this.strict=t.strict!==!1}}class Yu extends wp{constructor(t){if(super(),this.wrappers=[],t.version!=14)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let a=t.nodeNames.split(" ");this.minRepeatTerm=a.length;for(let $=0;$<t.repeatNodeCount;$++)a.push("");let u=Object.keys(t.topRules).map($=>t.topRules[$][1]),p=[];for(let $=0;$<a.length;$++)p.push([]);function g($,F,V){p[$].push([F,F.deserialize(String(V))])}if(t.nodeProps)for(let $ of t.nodeProps){let F=$[0];typeof F=="string"&&(F=ci[F]);for(let V=1;V<$.length;){let z=$[V++];if(z>=0)g(z,F,$[V++]);else{let ie=$[V+-z];for(let oe=-z;oe>0;oe--)g($[V++],F,ie);V++}}}this.nodeSet=new Zc(a.map(($,F)=>mr.define({name:F>=this.minRepeatTerm?void 0:$,id:F,props:p[F],top:u.indexOf(F)>-1,error:F==0,skipped:t.skippedNodes&&t.skippedNodes.indexOf(F)>-1}))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Op;let A=za(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let $=0;$<this.specializerSpecs.length;$++)this.specialized[$]=this.specializerSpecs[$].term;this.specializers=this.specializerSpecs.map(G0),this.states=za(t.states,Uint32Array),this.data=za(t.stateData),this.goto=za(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map($=>typeof $=="number"?new Io(A,$):$),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,a,u){let p=new Gy(this,t,a,u);for(let g of this.wrappers)p=g(p,t,a,u);return p}getGoto(t,a,u=!1){let p=this.goto;if(a>=p[0])return-1;for(let g=p[a+1];;){let A=p[g++],$=A&1,F=p[g++];if($&&u)return F;for(let V=g+(A>>1);g<V;g++)if(p[g]==t)return F;if($)return-1}}hasAction(t,a){let u=this.data;for(let p=0;p<2;p++)for(let g=this.stateSlot(t,p?2:1),A;;g+=3){if((A=u[g])==65535)if(u[g+1]==1)A=u[g=_s(u,g+2)];else{if(u[g+1]==2)return _s(u,g+2);break}if(A==a||A==0)return _s(u,g+1)}return 0}stateSlot(t,a){return this.states[t*6+a]}stateFlag(t,a){return(this.stateSlot(t,0)&a)>0}validAction(t,a){return!!this.allActions(t,u=>u==a?!0:null)}allActions(t,a){let u=this.stateSlot(t,4),p=u?a(u):void 0;for(let g=this.stateSlot(t,1);p==null;g+=3){if(this.data[g]==65535)if(this.data[g+1]==1)g=_s(this.data,g+2);else break;p=a(_s(this.data,g+1))}return p}nextStates(t){let a=[];for(let u=this.stateSlot(t,1);;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=_s(this.data,u+2);else break;if((this.data[u+2]&1)==0){let p=this.data[u+1];a.some((g,A)=>A&1&&g==p)||a.push(this.data[u],p)}}return a}configure(t){let a=Object.assign(Object.create(Yu.prototype),this);if(t.props&&(a.nodeSet=this.nodeSet.extend(...t.props)),t.top){let u=this.topRules[t.top];if(!u)throw new RangeError(`Invalid top rule name ${t.top}`);a.top=u}return t.tokenizers&&(a.tokenizers=this.tokenizers.map(u=>{let p=t.tokenizers.find(g=>g.from==u);return p?p.to:u})),t.specializers&&(a.specializers=this.specializers.slice(),a.specializerSpecs=this.specializerSpecs.map((u,p)=>{let g=t.specializers.find($=>$.from==u.external);if(!g)return u;let A=Object.assign(Object.assign({},u),{external:g.to});return a.specializers[p]=G0(A),A})),t.contextTracker&&(a.context=t.contextTracker),t.dialect&&(a.dialect=this.parseDialect(t.dialect)),t.strict!=null&&(a.strict=t.strict),t.wrap&&(a.wrappers=a.wrappers.concat(t.wrap)),t.bufferLength!=null&&(a.bufferLength=t.bufferLength),a}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let a=this.dynamicPrecedences;return a==null?0:a[t]||0}parseDialect(t){let a=Object.keys(this.dialects),u=a.map(()=>!1);if(t)for(let g of t.split(" ")){let A=a.indexOf(g);A>=0&&(u[A]=!0)}let p=null;for(let g=0;g<a.length;g++)if(!u[g])for(let A=this.dialects[a[g]],$;($=this.data[A++])!=65535;)(p||(p=new Uint8Array(this.maxTerm+1)))[$]=1;return new Zy(t,u,p)}static deserialize(t){return new Yu(t)}}function _s(f,t){return f[t]|f[t+1]<<16}function Vy(f){let t=null;for(let a of f){let u=a.p.stoppedAt;(a.pos==a.p.stream.end||u!=null&&a.pos>u)&&a.p.parser.stateFlag(a.state,2)&&(!t||t.score<a.score)&&(t=a)}return t}function G0(f){if(f.external){let t=f.extend?1:0;return(a,u)=>f.external(a,u)<<1|t}return f.get}const Xy=316,Wy=317,Z0=1,zy=2,qy=3,jy=4,Uy=318,Yy=320,Hy=321,Ky=5,Jy=6,eb=0,qf=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],I0=125,tb=59,jf=47,nb=42,ib=43,rb=45,sb=60,ob=44,ab=63,lb=46,ub=91,cb=new Iy({start:!1,shift(f,t){return t==Ky||t==Jy||t==Yy?f:t==Hy},strict:!1}),fb=new qa((f,t)=>{let{next:a}=f;(a==I0||a==-1||t.context)&&f.acceptToken(Uy)},{contextual:!0,fallback:!0}),hb=new qa((f,t)=>{let{next:a}=f,u;qf.indexOf(a)>-1||a==jf&&((u=f.peek(1))==jf||u==nb)||a!=I0&&a!=tb&&a!=-1&&!t.context&&f.acceptToken(Xy)},{contextual:!0}),pb=new qa((f,t)=>{f.next==ub&&!t.context&&f.acceptToken(Wy)},{contextual:!0}),db=new qa((f,t)=>{let{next:a}=f;if(a==ib||a==rb){if(f.advance(),a==f.next){f.advance();let u=!t.context&&t.canShift(Z0);f.acceptToken(u?Z0:zy)}}else a==ab&&f.peek(1)==lb&&(f.advance(),f.advance(),(f.next<48||f.next>57)&&f.acceptToken(qy))},{contextual:!0});function Uf(f,t){return f>=65&&f<=90||f>=97&&f<=122||f==95||f>=192||!t&&f>=48&&f<=57}const mb=new qa((f,t)=>{if(f.next!=sb||!t.dialectEnabled(eb)||(f.advance(),f.next==jf))return;let a=0;for(;qf.indexOf(f.next)>-1;)f.advance(),a++;if(Uf(f.next,!0)){for(f.advance(),a++;Uf(f.next,!1);)f.advance(),a++;for(;qf.indexOf(f.next)>-1;)f.advance(),a++;if(f.next==ob)return;for(let u=0;;u++){if(u==7){if(!Uf(f.next,!0))return;break}if(f.next!="extends".charCodeAt(u))break;f.advance(),a++}}f.acceptToken(jy,-a)}),gb=Pp({"get set async static":st.modifier,"for while do if else switch try catch finally return throw break continue default case defer":st.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":st.operatorKeyword,"let var const using function class extends":st.definitionKeyword,"import export from":st.moduleKeyword,"with debugger new":st.keyword,TemplateString:st.special(st.string),super:st.atom,BooleanLiteral:st.bool,this:st.self,null:st.null,Star:st.modifier,VariableName:st.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":st.function(st.variableName),VariableDefinition:st.definition(st.variableName),Label:st.labelName,PropertyName:st.propertyName,PrivatePropertyName:st.special(st.propertyName),"CallExpression/MemberExpression/PropertyName":st.function(st.propertyName),"FunctionDeclaration/VariableDefinition":st.function(st.definition(st.variableName)),"ClassDeclaration/VariableDefinition":st.definition(st.className),"NewExpression/VariableName":st.className,PropertyDefinition:st.definition(st.propertyName),PrivatePropertyDefinition:st.definition(st.special(st.propertyName)),UpdateOp:st.updateOperator,"LineComment Hashbang":st.lineComment,BlockComment:st.blockComment,Number:st.number,String:st.string,Escape:st.escape,ArithOp:st.arithmeticOperator,LogicOp:st.logicOperator,BitOp:st.bitwiseOperator,CompareOp:st.compareOperator,RegExp:st.regexp,Equals:st.definitionOperator,Arrow:st.function(st.punctuation),": Spread":st.punctuation,"( )":st.paren,"[ ]":st.squareBracket,"{ }":st.brace,"InterpolationStart InterpolationEnd":st.special(st.brace),".":st.derefOperator,", ;":st.separator,"@":st.meta,TypeName:st.typeName,TypeDefinition:st.definition(st.typeName),"type enum interface implements namespace module declare":st.definitionKeyword,"abstract global Privacy readonly override":st.modifier,"is keyof unique infer asserts":st.operatorKeyword,JSXAttributeValue:st.attributeValue,JSXText:st.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":st.angleBracket,"JSXIdentifier JSXNameSpacedName":st.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":st.attributeName,"JSXBuiltin/JSXIdentifier":st.standard(st.tagName)}),_b={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},Ob={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},yb={__proto__:null,"<":193},bb=Yu.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:cb,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[gb],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[hb,pb,db,mb,2,3,4,5,6,7,8,9,10,11,12,13,14,fb,new Xf("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new Xf("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:f=>_b[f]||-1},{term:343,get:f=>Ob[f]||-1},{term:95,get:f=>yb[f]||-1}],tokenPrec:15201}),V0=[yr("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),yr("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),yr("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),yr("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),yr("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),yr(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),yr("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),yr(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),yr(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),yr('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),yr('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Ab=V0.concat([yr("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),yr("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),yr("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),X0=new Ag,W0=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function ja(f){return(t,a)=>{let u=t.node.getChild("VariableDefinition");return u&&a(u,f),!0}}const vb=["FunctionDeclaration"],xb={FunctionDeclaration:ja("function"),ClassDeclaration:ja("class"),ClassExpression:()=>!0,EnumDeclaration:ja("constant"),TypeAliasDeclaration:ja("type"),NamespaceDeclaration:ja("namespace"),VariableDefinition(f,t){f.matchContext(vb)||t(f,"variable")},TypeDefinition(f,t){t(f,"type")},__proto__:null};function z0(f,t){let a=X0.get(t);if(a)return a;let u=[],p=!0;function g(A,$){let F=f.sliceString(A.from,A.to);u.push({label:F,type:$})}return t.cursor(Wi.IncludeAnonymous).iterate(A=>{if(p)p=!1;else if(A.name){let $=xb[A.name];if($&&$(A,g)||W0.has(A.name))return!1}else if(A.to-A.from>8192){for(let $ of z0(f,A.node))u.push($);return!1}}),X0.set(t,u),u}const q0=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,j0=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Cb(f){let t=zi(f.state).resolveInner(f.pos,-1);if(j0.indexOf(t.name)>-1)return null;let a=t.name=="VariableName"||t.to-t.from<20&&q0.test(f.state.sliceDoc(t.from,t.to));if(!a&&!f.explicit)return null;let u=[];for(let p=t;p;p=p.parent)W0.has(p.name)&&(u=u.concat(z0(f.state.doc,p)));return{options:u,from:a?t.from:f.pos,validFor:q0}}const Us=nu.define({name:"javascript",parser:bb.configure({props:[Bp.add({IfStatement:ef({except:/^\s*({|else\b)/}),TryStatement:ef({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Ig,SwitchBody:f=>{let t=f.textAfter,a=/^\s*\}/.test(t),u=/^\s*(case|default)\b/.test(t);return f.baseIndent+(a?0:u?1:2)*f.unit},Block:Zg({closing:"}"}),ArrowFunction:f=>f.baseIndent+f.unit,"TemplateString BlockComment":()=>null,"Statement Property":ef({except:/^\s*{/}),JSXElement(f){let t=/^\s*<\//.test(f.textAfter);return f.lineIndent(f.node.from)+(t?0:f.unit)},JSXEscape(f){let t=/\s*\}/.test(f.textAfter);return f.lineIndent(f.node.from)+(t?0:f.unit)},"JSXOpenTag JSXSelfClosingTag"(f){return f.column(f.node.from)+f.unit}}),Np.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":zg,BlockComment(f){return{from:f.from+2,to:f.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),U0={test:f=>/^JSX/.test(f.name),facet:Ep({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Sb=Us.configure({dialect:"ts"},"typescript"),wb=Us.configure({dialect:"jsx",props:[Yc.add(f=>f.isTop?[U0]:void 0)]}),Pb=Us.configure({dialect:"jsx ts",props:[Yc.add(f=>f.isTop?[U0]:void 0)]},"typescript");let Y0=f=>({label:f,type:"keyword"});const H0="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Y0),Mb=H0.concat(["declare","implements","private","protected","public"].map(Y0));function kb(f={}){let t=f.jsx?f.typescript?Pb:wb:f.typescript?Sb:Us,a=f.typescript?Ab.concat(Mb):V0.concat(H0);return new Tg(t,[Us.data.of({autocomplete:EO(j0,a0(a))}),Us.data.of({autocomplete:Cb}),f.jsx?Eb:[]])}function $b(f){for(;;){if(f.name=="JSXOpenTag"||f.name=="JSXSelfClosingTag"||f.name=="JSXFragmentTag")return f;if(f.name=="JSXEscape"||!f.parent)return null;f=f.parent}}function K0(f,t,a=f.length){for(let u=t?.firstChild;u;u=u.nextSibling)if(u.name=="JSXIdentifier"||u.name=="JSXBuiltin"||u.name=="JSXNamespacedName"||u.name=="JSXMemberExpression")return f.sliceString(u.from,Math.min(u.to,a));return""}const Db=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Eb=on.inputHandler.of((f,t,a,u,p)=>{if((Db?f.composing:f.compositionStarted)||f.state.readOnly||t!=a||u!=">"&&u!="/"||!Us.isActiveAt(f.state,t,-1))return!1;let g=p(),{state:A}=g,$=A.changeByRange(F=>{var V;let{head:z}=F,ie=zi(A).resolveInner(z-1,-1),oe;if(ie.name=="JSXStartTag"&&(ie=ie.parent),!(A.doc.sliceString(z-1,z)!=u||ie.name=="JSXAttributeValue"&&ie.to>z)){if(u==">"&&ie.name=="JSXFragmentTag")return{range:F,changes:{from:z,insert:"</>"}};if(u=="/"&&ie.name=="JSXStartCloseTag"){let Ae=ie.parent,$e=Ae.parent;if($e&&Ae.from==z-2&&((oe=K0(A.doc,$e.firstChild,z))||((V=$e.firstChild)===null||V===void 0?void 0:V.name)=="JSXFragmentTag")){let je=`${oe}>`;return{range:ft.cursor(z+je.length,-1),changes:{from:z,insert:je}}}}else if(u==">"){let Ae=$b(ie);if(Ae&&Ae.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(A.doc.sliceString(z,z+2))&&(oe=K0(A.doc,Ae,z)))return{range:F,changes:{from:z,insert:`</${oe}>`}}}}return{range:F}});return $.changes.empty?!1:(f.dispatch([g,A.update($,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Yf="#2e3440",J0="#3b4252",em="#434c5e",Xo="#4c566a",Ua="#d8dee9",Tb="#e5e9f0",Fb="#eceff4",Ys="#8fbcbb",tm="#88c0d0",Rb="#81a1c1",os="#5e81ac",Bb="#bf616a",nm="#d08770",Hf="#ebcb8b",Hu="#a3be8c",Kf="#b48ead",im="#d30102",Qb="#252a33",Jf=Xo,Lb=Yf,eh=J0,Nb=Xo,rm=Ua,Gb=on.theme({"&":{color:Ua,backgroundColor:Lb},".cm-content":{caretColor:rm},".cm-cursor, .cm-dropCursor":{borderLeftColor:rm},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Nb},".cm-panels":{backgroundColor:Qb,color:Xo},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"transparent",outline:`1px solid ${Ys}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ua,color:Yf},".cm-activeLine":{backgroundColor:Jf},".cm-selectionMatch":{backgroundColor:Tb,color:J0},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ys}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Fb,color:em},".cm-gutters":{backgroundColor:Yf,color:Xo,border:"none"},".cm-activeLineGutter":{backgroundColor:Jf,color:Ua},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:eh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:eh,borderBottomColor:eh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Jf,color:Xo}}},{dark:!0}),Zb=uu.define([{tag:st.keyword,color:os},{tag:[st.name,st.deleted,st.character,st.propertyName,st.macroName],color:tm},{tag:[st.variableName],color:Ys},{tag:[st.function(st.variableName)],color:Ys},{tag:[st.labelName],color:Rb},{tag:[st.color,st.constant(st.name),st.standard(st.name)],color:os},{tag:[st.definition(st.name),st.separator],color:Hu},{tag:[st.brace],color:Ys},{tag:[st.annotation],color:im},{tag:[st.number,st.changed,st.annotation,st.modifier,st.self,st.namespace],color:Kf},{tag:[st.typeName,st.className],color:Hf},{tag:[st.operator,st.operatorKeyword],color:Hu},{tag:[st.tagName],color:Kf},{tag:[st.squareBracket],color:Bb},{tag:[st.angleBracket],color:nm},{tag:[st.attributeName],color:Hf},{tag:[st.regexp],color:os},{tag:[st.quote],color:Kf},{tag:[st.string],color:Hu},{tag:st.link,color:Hu,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[st.url,st.escape,st.special(st.string)],color:Ys},{tag:[st.meta],color:tm},{tag:[st.monospace],color:Ua,fontStyle:"italic"},{tag:[st.comment],color:Xo,fontStyle:"italic"},{tag:st.strong,fontWeight:"bold",color:os},{tag:st.emphasis,fontStyle:"italic",color:os},{tag:st.strikethrough,textDecoration:"line-through"},{tag:st.heading,fontWeight:"bold",color:os},{tag:st.special(st.heading1),fontWeight:"bold",color:os},{tag:st.heading1,fontWeight:"bold",color:os},{tag:[st.heading2,st.heading3,st.heading4],fontWeight:"bold",color:os},{tag:[st.heading5,st.heading6],color:os},{tag:[st.atom,st.bool,st.special(st.variableName)],color:nm},{tag:[st.processingInstruction,st.inserted],color:Ys},{tag:[st.contentSeparator],color:Hf},{tag:st.invalid,color:em,borderBottom:`1px dotted ${im}`}]),Ib=[Gb,o_(Zb)],sm=f=>t=>{const a=f==="down";let u=t.state.selection;for(const p of u.ranges)u=u.addRange(t.moveVertically(p,a));return t.dispatch({selection:u}),!0},Vb=[{key:"Ctrl-Space",run:Xu},{key:"Escape",run:g0},{key:"ArrowDown",run:Ds(!0)},{key:"ArrowUp",run:Ds(!1)},{key:"PageDown",run:Ds(!0,"page")},{key:"PageUp",run:Ds(!1,"page")},{key:"Enter",run:Qf},{key:"Tab",run:Qf},{key:"Mod-f",run:kf,scope:"editor search-panel"},{key:"Escape",run:$f,scope:"editor search-panel"},{key:"Alt-Enter",run:Jd,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:n0,scope:"editor search-panel"},{key:"Ctrl-g",run:jd},{key:"Mod-d",run:Cf,preventDefault:!0},{key:"Shift-Mod-l",run:e0},{key:"Enter",run:Eu,shift:Eu},{key:"ArrowLeft",run:pu,shift:Ou,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:pd,shift:xd},{key:"ArrowRight",run:du,shift:yu,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dd,shift:Cd},{key:"ArrowUp",run:gu,shift:bu,preventDefault:!0},{key:"ArrowDown",run:_u,shift:Au,preventDefault:!0},{key:"Home",run:df,shift:gf},{mac:"Cmd-ArrowLeft",run:df,shift:gf},{key:"Mod-Home",run:Cu,shift:wu},{mac:"Cmd-ArrowUp",run:Cu,shift:wu},{key:"PageUp",run:Ba,shift:vu},{mac:"Ctrl-ArrowUp",run:Ba,shift:vu},{key:"PageDown",run:Po,shift:xu},{mac:"Ctrl-ArrowDown",run:Po,shift:xu},{key:"End",run:pf,shift:mf},{mac:"Cmd-ArrowRight",run:pf,shift:mf},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:sm("up"),preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:sm("down"),preventDefault:!0},{key:"Shift-Alt-i",run:f=>{let t=null;for(const a of f.state.selection.ranges)if(!a.empty)for(let u=a.from;u<=a.to;){const p=f.state.doc.lineAt(u),g=Math.min(p.to,a.to);t?t=t.addRange(ft.range(g,g)):t=ft.single(g),u=p.to+1}return t?(f.dispatch({selection:t}),!0):!1}},{key:"Mod-End",run:Su,shift:Pu},{mac:"Cmd-ArrowDown",run:Su,shift:Pu},{key:"Mod-a",run:kd},{key:"Backspace",run:hy},{key:"Backspace",run:$o,shift:$o},{key:"Delete",run:ku},{key:"Mod-Backspace",mac:"Alt-Backspace",run:$u},{key:"Mod-Delete",mac:"Alt-Delete",run:Fd},{mac:"Mod-Backspace",run:K_},{mac:"Mod-Delete",run:_f},{mac:"Ctrl-b",run:pu,shift:Ou,preventDefault:!0},{mac:"Ctrl-f",run:du,shift:yu},{mac:"Ctrl-p",run:gu,shift:bu},{mac:"Ctrl-n",run:_u,shift:Au},{mac:"Ctrl-a",run:Od,shift:Pd},{mac:"Ctrl-e",run:yd,shift:Md},{mac:"Ctrl-d",run:ku},{mac:"Ctrl-h",run:$o},{mac:"Ctrl-k",run:_f},{mac:"Ctrl-Alt-h",run:$u},{mac:"Ctrl-o",run:Rd},{mac:"Ctrl-t",run:Bd},{mac:"Ctrl-v",run:Po},{mac:"Alt-v",run:Ba},{key:"Shift-Mod-k",run:Zd},{key:"Alt-ArrowDown",run:Nd},{key:"Alt-ArrowUp",run:Ld},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:yf},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Of},{key:"Mod-l",run:$d,preventDefault:!0},{key:"Shift-Mod-\\",run:bd},{key:"Tab",run:Tu,shift:Fu,preventDefault:!0},{key:"Mod-[",run:Fu},{key:"Mod-]",run:Tu},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Yg},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Hg},{key:"Mod-k Mod-0",run:Kg},{key:"Mod-k Mod-j",run:Jg},{key:"Mod-k Mod-c",run:v_},{key:"Mod-k Mod-u",run:x_},{key:"Mod-/",run:td},{key:"Shift-Alt-a",run:nd},{key:"Mod-z",run:ff,preventDefault:!0},{key:"Mod-y",run:Ra,preventDefault:!0},{key:"Mod-Shift-z",run:Ra,preventDefault:!0},{key:"Mod-u",run:ld,preventDefault:!0},{key:"Mod-Shift-m",run:Py},{key:"F8",run:My}];window.CM={EditorView:on,EditorState:at,Compartment:Je,Prec:Di,javascript:kb,nord:Ib,keymap:Zl,vscodeKeymap:Vb,indentWithTab:lO,indentUnit:$a,autocompletion:yy,lineNumbers:fg,history:k_,foldGutter:i_,highlightActiveLineGutter:dg,drawSelection:F1,dropCursor:N1,indentOnInput:Xg,bracketMatching:d_,closeBrackets:uy,rectangularSelection:V1,crosshairCursor:z1,defaultKeymap:aO,historyKeymap:Q_,highlightSelectionMatches:hO,searchKeymap:MO,search:bO,selectNextOccurrence:Cf,copyLineDown:yf,copyLineUp:Of,StateField:wn,StateEffect:Et,Decoration:mn}})();const DOM$1={};DOM$1.dataset_obj={},DOM$1.dataset_id=0,DOM$1.el=(e,o=document)=>(typeof o=="string"&&(o=DOM$1.el(o)),o.querySelector(e)),DOM$1.els=(e,o=document)=>(typeof o=="string"&&(o=DOM$1.el(o)),Array.from(o.querySelectorAll(e))),DOM$1.el_or_self=(e,o=document)=>{o=DOM$1.element(o);let l=o.querySelector(e);return l||o.classList.contains(DOM$1.clean_dot(e))&&(l=o),l},DOM$1.els_or_self=(e,o=document)=>{o=DOM$1.element(o);let l=Array.from(o.querySelectorAll(e));return l.length===0&&o.classList.contains(DOM$1.clean_dot(e))&&(l=[o]),l},DOM$1.clone=e=>(e=DOM$1.element(e),e.cloneNode(!0)),DOM$1.clone_children=e=>{e=DOM$1.element(e);let o=Array.from(e.children),l=[];for(let d of o)l.push(DOM$1.clone(d));return l},DOM$1.dataset=(e,o,l)=>{if(e=DOM$1.element(e),!e)return;let d=e.dataset.dataset_id;if(d||(d=DOM$1.dataset_id,DOM$1.dataset_id+=1,e.dataset.dataset_id=d,DOM$1.dataset_obj[d]={}),l!==void 0)DOM$1.dataset_obj[d][o]=l;else return DOM$1.dataset_obj[d][o]},DOM$1.create=(e,o="",l="")=>{let d=document.createElement(e);if(o){let b=o.split(" ").filter(S=>S!=="");for(let S of b)d.classList.add(S)}return l&&(d.id=l),d},DOM$1.ev=(e,o,l,d)=>{e=DOM$1.element(e),e.addEventListener(o,l,d)},DOM$1.evs=(e,o,l,d)=>{e=DOM$1.element(e);for(let b of o)e.addEventListener(b,l,d)},DOM$1.index=e=>(e=DOM$1.element(e),Array.from(e.parentNode.children).indexOf(e)),DOM$1.class=(e,o)=>{e=DOM$1.element(e);for(let l of o)if(e.classList.contains(DOM$1.clean_dot(l)))return!0;return!1},DOM$1.parent=(e,o)=>{e=DOM$1.element(e);for(let l of o){let d=e.closest(l);if(d)return d}},DOM$1.clean_dot=e=>e.replace(".",""),DOM$1.show=(e,o=1)=>{e=DOM$1.element(e),e.classList.remove(DOM$1.hidden(o))},DOM$1.hide=(e,o=1)=>{e=DOM$1.element(e),e.classList.add(DOM$1.hidden(o))},DOM$1.hidden=(e=1)=>{let o="hidden";return e>1&&(o+=`_${e}`),o},DOM$1.is_hidden=(e,o=1)=>e.classList.contains(DOM$1.hidden(o)),DOM$1.element=e=>typeof e=="string"?DOM$1.el(e):e,typeof window<"u"&&(window.DOM=DOM$1),(function(e,o){var l=o(e);typeof module<"u"&&"exports"in module?module.exports=l:typeof define=="function"&&define.amd?define([],function(){return l}):e.jdenticon=l})(typeof self<"u"?self:void 0,function(e){function o(Je,tt,qe){return parseInt(Je.substr(tt,qe),16)}function l(Je){return Je|=0,Je<0?"00":Je<16?"0"+Je.toString(16):Je<256?Je.toString(16):"ff"}function d(Je,tt,qe){return qe=qe<0?qe+6:qe>6?qe-6:qe,l(255*(qe<1?Je+(tt-Je)*qe:qe<3?tt:qe<4?Je+(tt-Je)*(4-qe):Je))}function b(Je){if(/^#[0-9a-f]{3,8}$/i.test(Je)){var tt,qe=Je.length;if(qe<6){var _t=Je[1],Ft=Je[2],Wt=Je[3],Rt=Je[4]||"";tt="#"+_t+_t+Ft+Ft+Wt+Wt+Rt+Rt}return(qe==7||qe>8)&&(tt=Je),tt}}function S(Je){var tt=o(Je,7,2),qe;if(isNaN(tt))qe=Je;else{var _t=o(Je,1,2),Ft=o(Je,3,2),Wt=o(Je,5,2);qe="rgba("+_t+","+Ft+","+Wt+","+(tt/255).toFixed(2)+")"}return qe}function M(Je,tt,qe){var _t;if(tt==0){var Ft=l(qe*255);_t=Ft+Ft+Ft}else{var Wt=qe<=.5?qe*(tt+1):qe+tt-qe*tt,Rt=qe*2-Wt;_t=d(Rt,Wt,Je*6+2)+d(Rt,Wt,Je*6)+d(Rt,Wt,Je*6-2)}return"#"+_t}function E(Je,tt,qe){var _t=[.55,.5,.5,.46,.6,.55,.55],Ft=_t[Je*6+.5|0];return qe=qe<.5?qe*Ft*2:Ft+(qe-.5)*(1-Ft)*2,M(Je,tt,qe)}var L=e,R={G:"jdenticon_config",n:"config"},Z={};function q(Je){Z=Je}function K(Je){return arguments.length&&(Z[R.n]=Je),Z[R.n]}function U(Je,tt){var qe=typeof Je=="object"&&Je||Z[R.n]||L[R.G]||{},_t=qe.lightness||{},Ft=qe.saturation||{},Wt="color"in Ft?Ft.color:Ft,Rt=Ft.grayscale,un=qe.backColor,Bt=qe.padding;function ln(Oi,yi){var ti=_t[Oi];return ti&&ti.length>1||(ti=yi),function(ii){return ii=ti[0]+ii*(ti[1]-ti[0]),ii<0?0:ii>1?1:ii}}function pn(Oi){var yi=qe.hues,ti;return yi&&yi.length>0&&(ti=yi[0|.999*Oi*yi.length]),typeof ti=="number"?(ti/360%1+1)%1:Oi}return{X:pn,p:typeof Wt=="number"?Wt:.5,H:typeof Rt=="number"?Rt:0,q:ln("color",[.4,.8]),I:ln("grayscale",[.3,.9]),J:b(un),Y:typeof Je=="number"?Je:typeof Bt=="number"?Bt:tt}}var se=1,re=2,ae={t:"data-jdenticon-hash",o:"data-jdenticon-value"},de="["+ae.t+"],["+ae.o+"]",ve=typeof document<"u"&&document.querySelectorAll.bind(document);function Ee(Je){if(Je){var tt=Je.tagName;if(/^svg$/i.test(tt))return se;if(/^canvas$/i.test(tt)&&"getContext"in Je)return re}}function le(Je){if(typeof MutationObserver<"u"){var tt=new MutationObserver(function(_t){for(var Ft=0;Ft<_t.length;Ft++){for(var Wt=_t[Ft],Rt=Wt.addedNodes,un=0;Rt&&un<Rt.length;un++){var Bt=Rt[un];if(Bt.nodeType==1)if(Ee(Bt))Je(Bt);else for(var ln=Bt.querySelectorAll(de),pn=0;pn<ln.length;pn++)Je(ln[pn])}Wt.type=="attributes"&&Ee(Wt.target)&&Je(Wt.target)}});tt.observe(document.body,{childList:!0,attributes:!0,attributeFilter:[ae.o,ae.t,"width","height"],subtree:!0})}}function _e(Je,tt){this.x=Je,this.y=tt}function Ce(Je,tt,qe,_t){this.u=Je,this.v=tt,this.K=qe,this.Z=_t}Ce.prototype.L=function(tt,qe,_t,Ft){var Wt=this.u+this.K,Rt=this.v+this.K,un=this.Z;return un===1?new _e(Wt-qe-(Ft||0),this.v+tt):un===2?new _e(Wt-tt-(_t||0),Rt-qe-(Ft||0)):un===3?new _e(this.u+qe,Rt-tt-(_t||0)):new _e(this.u+tt,this.v+qe)};var We=new Ce(0,0,0,0);function He(Je){this.M=Je,this.A=We}var Mt=He.prototype;Mt.g=function(tt,qe){for(var _t=this,Ft=qe?-2:2,Wt=[],Rt=qe?tt.length-2:0;Rt<tt.length&&Rt>=0;Rt+=Ft)Wt.push(_t.A.L(tt[Rt],tt[Rt+1]));this.M.g(Wt)},Mt.h=function(tt,qe,_t,Ft){var Wt=this.A.L(tt,qe,_t,_t);this.M.h(Wt,_t,Ft)},Mt.i=function(tt,qe,_t,Ft,Wt){this.g([tt,qe,tt+_t,qe,tt+_t,qe+Ft,tt,qe+Ft],Wt)},Mt.j=function(tt,qe,_t,Ft,Wt,Rt){var un=[tt+_t,qe,tt+_t,qe+Ft,tt,qe+Ft,tt,qe];un.splice((Wt||0)%4*2,2),this.g(un,Rt)},Mt.N=function(tt,qe,_t,Ft,Wt){this.g([tt+_t/2,qe,tt+_t,qe+Ft/2,tt+_t/2,qe+Ft,tt,qe+Ft/2],Wt)};function ut(Je,tt,qe,_t){Je=Je%14;var Ft,Wt,Rt,un,Bt,ln;Je?Je==1?(Rt=0|qe*.5,un=0|qe*.8,tt.j(qe-Rt,0,Rt,un,2)):Je==2?(Rt=0|qe/3,tt.i(Rt,Rt,qe-Rt,qe-Rt)):Je==3?(Bt=qe*.1,ln=qe<6?1:qe<8?2:0|qe*.25,Bt=Bt>1?0|Bt:Bt>.5?1:Bt,tt.i(ln,ln,qe-Bt-ln,qe-Bt-ln)):Je==4?(Wt=0|qe*.15,Rt=0|qe*.5,tt.h(qe-Rt-Wt,qe-Rt-Wt,Rt)):Je==5?(Bt=qe*.1,ln=Bt*4,ln>3&&(ln=0|ln),tt.i(0,0,qe,qe),tt.g([ln,ln,qe-Bt,ln,ln+(qe-ln-Bt)/2,qe-Bt],!0)):Je==6?tt.g([0,0,qe,0,qe,qe*.7,qe*.4,qe*.4,qe*.7,qe,0,qe]):Je==7?tt.j(qe/2,qe/2,qe/2,qe/2,3):Je==8?(tt.i(0,0,qe,qe/2),tt.i(0,qe/2,qe/2,qe/2),tt.j(qe/2,qe/2,qe/2,qe/2,1)):Je==9?(Bt=qe*.14,ln=qe<4?1:qe<6?2:0|qe*.35,Bt=qe<8?Bt:0|Bt,tt.i(0,0,qe,qe),tt.i(ln,ln,qe-ln-Bt,qe-ln-Bt,!0)):Je==10?(Bt=qe*.12,ln=Bt*3,tt.i(0,0,qe,qe),tt.h(ln,ln,qe-Bt-ln,!0)):Je==11?tt.j(qe/2,qe/2,qe/2,qe/2,3):Je==12?(Wt=qe*.25,tt.i(0,0,qe,qe),tt.N(Wt,Wt,qe-Wt,qe-Wt,!0)):!_t&&(Wt=qe*.4,Rt=qe*1.2,tt.h(Wt,Wt,Rt)):(Ft=qe*.42,tt.g([0,0,qe,0,qe,qe-Ft*2,qe-Ft,qe,0,qe]))}function Nt(Je,tt,qe){Je=Je%4;var _t;Je?Je==1?tt.j(0,qe/2,qe,qe/2,0):Je==2?tt.N(0,0,qe,qe):(_t=qe/6,tt.h(_t,_t,qe-2*_t)):tt.j(0,0,qe,qe,0)}function St(Je,tt){return Je=tt.X(Je),[E(Je,tt.H,tt.I(0)),E(Je,tt.p,tt.q(.5)),E(Je,tt.H,tt.I(1)),E(Je,tt.p,tt.q(1)),E(Je,tt.p,tt.q(0))]}function xt(Je,tt,qe){var _t=U(qe,.08);_t.J&&Je.m(_t.J);var Ft=Je.k,Wt=.5+Ft*_t.Y|0;Ft-=Wt*2;var Rt=new He(Je),un=0|Ft/4,Bt=0|Wt+Ft/2-un*2,ln=0|Wt+Ft/2-un*2;function pn(ui,Li,cn,Bn,pi){var bi=o(tt,cn,1),Ni=Bn?o(tt,Bn,1):0;Je.O(yi[ti[ui]]);for(var Hi=0;Hi<pi.length;Hi++)Rt.A=new Ce(Bt+pi[Hi][0]*un,ln+pi[Hi][1]*un,un,Ni++%4),Li(bi,Rt,un,Hi);Je.P()}var Oi=o(tt,-7)/268435455,yi=St(Oi,_t),ti=[],ii;function Fi(ui){if(ui.indexOf(ii)>=0){for(var Li=0;Li<ui.length;Li++)if(ti.indexOf(ui[Li])>=0)return!0}}for(var Et=0;Et<3;Et++)ii=o(tt,8+Et,1)%yi.length,(Fi([0,4])||Fi([2,3]))&&(ii=1),ti.push(ii);pn(0,Nt,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),pn(1,Nt,4,5,[[0,0],[3,0],[3,3],[0,3]]),pn(2,ut,1,null,[[1,1],[2,1],[2,2],[1,2]]),Je.finish()}function $t(Je){var tt=40,qe=16,_t=0,Ft=0,Wt=encodeURI(Je)+"%80",Rt=[],un,Bt=[],ln=1732584193,pn=4023233417,Oi=~ln,yi=~pn,ti=3285377520,ii=[ln,pn,Oi,yi,ti],Fi=0,Et="";function ui(Li,cn){return Li<<cn|Li>>>32-cn}for(;_t<Wt.length;Ft++)Rt[Ft>>2]=Rt[Ft>>2]|(Wt[_t]=="%"?parseInt(Wt.substring(_t+1,_t+=3),16):Wt.charCodeAt(_t++))<<(3-(Ft&3))*8;for(un=((Ft+7>>6)+1)*qe,Rt[un-1]=Ft*8-8;Fi<un;Fi+=qe){for(_t=0;_t<80;_t++)Ft=ui(ln,5)+ti+(_t<20?(pn&Oi^~pn&yi)+1518500249:_t<40?(pn^Oi^yi)+1859775393:_t<60?(pn&Oi^pn&yi^Oi&yi)+2400959708:(pn^Oi^yi)+3395469782)+(Bt[_t]=_t<qe?Rt[Fi+_t]|0:ui(Bt[_t-3]^Bt[_t-8]^Bt[_t-14]^Bt[_t-16],1)),ti=yi,yi=Oi,Oi=ui(pn,30),pn=ln,ln=Ft;ii[0]=ln=ii[0]+ln|0,ii[1]=pn=ii[1]+pn|0,ii[2]=Oi=ii[2]+Oi|0,ii[3]=yi=ii[3]+yi|0,ii[4]=ti=ii[4]+ti|0}for(_t=0;_t<tt;_t++)Et+=(ii[_t>>3]>>>(7-(_t&7))*4&15).toString(16);return Et}function qt(Je){return/^[0-9a-f]{11,}$/i.test(Je)&&Je}function Vt(Je){return $t(Je==null?"":""+Je)}function Ut(Je,tt){var qe=Je.canvas,_t=qe.width,Ft=qe.height;Je.save(),tt||(tt=Math.min(_t,Ft),Je.translate((_t-tt)/2|0,(Ft-tt)/2|0)),this.l=Je,this.k=tt,Je.clearRect(0,0,tt,tt)}var Yt=Ut.prototype;Yt.m=function(tt){var qe=this.l,_t=this.k;qe.fillStyle=S(tt),qe.fillRect(0,0,_t,_t)},Yt.O=function(tt){var qe=this.l;qe.fillStyle=S(tt),qe.beginPath()},Yt.P=function(){this.l.fill()},Yt.g=function(tt){var qe=this.l;qe.moveTo(tt[0].x,tt[0].y);for(var _t=1;_t<tt.length;_t++)qe.lineTo(tt[_t].x,tt[_t].y);qe.closePath()},Yt.h=function(tt,qe,_t){var Ft=this.l,Wt=qe/2;Ft.moveTo(tt.x+Wt,tt.y+Wt),Ft.arc(tt.x+Wt,tt.y+Wt,Wt,0,Math.PI*2,_t),Ft.closePath()},Yt.finish=function(){this.l.restore()};function ai(Je,tt,qe,_t){if(!Je)throw new Error("No canvas specified.");xt(new Ut(Je,qe),qt(tt)||Vt(tt),_t)}function si(Je){return(Je*10+.5|0)/10}function di(){this.B=""}var At=di.prototype;At.g=function(tt){for(var qe="",_t=0;_t<tt.length;_t++)qe+=(_t?"L":"M")+si(tt[_t].x)+" "+si(tt[_t].y);this.B+=qe+"Z"},At.h=function(tt,qe,_t){var Ft=_t?0:1,Wt=si(qe/2),Rt=si(qe),un="a"+Wt+","+Wt+" 0 1,"+Ft+" ";this.B+="M"+si(tt.x)+" "+si(tt.y+qe/2)+un+Rt+",0"+un+-Rt+",0"};function hn(Je){this.C,this.D={},this.R=Je,this.k=Je.k}var ft=hn.prototype;ft.m=function(tt){var qe=/^(#......)(..)?/.exec(tt),_t=qe[2]?o(qe[2],0)/255:1;this.R.m(qe[1],_t)},ft.O=function(tt){this.C=this.D[tt]||(this.D[tt]=new di)},ft.P=function(){},ft.g=function(tt){this.C.g(tt)},ft.h=function(tt,qe,_t){this.C.h(tt,qe,_t)},ft.finish=function(){var tt=this,qe=this.D;for(var _t in qe)qe.hasOwnProperty(_t)&&tt.R.S(_t,qe[_t].B)};var Xn={T:"http://www.w3.org/2000/svg",U:"width",V:"height"};function zn(Je){this.k=Je,this.F='<svg xmlns="'+Xn.T+'" width="'+Je+'" height="'+Je+'" viewBox="0 0 '+Je+" "+Je+'">'}var Dt=zn.prototype;Dt.m=function(tt,qe){qe&&(this.F+='<rect width="100%" height="100%" fill="'+tt+'" opacity="'+qe.toFixed(2)+'"/>')},Dt.S=function(tt,qe){this.F+='<path fill="'+tt+'" d="'+qe+'"/>'},Dt.toString=function(){return this.F+"</svg>"};function ei(Je,tt,qe){var _t=new zn(tt);return xt(new hn(_t),qt(Je)||Vt(Je),qe),_t.toString()}function fi(Je,tt){for(var qe=[],_t=arguments.length-2;_t-- >0;)qe[_t]=arguments[_t+2];for(var Ft=document.createElementNS(Xn.T,tt),Wt=0;Wt+1<qe.length;Wt+=2)Ft.setAttribute(qe[Wt],qe[Wt+1]);Je.appendChild(Ft)}function Qi(Je){var tt=this.k=Math.min(Number(Je.getAttribute(Xn.U))||100,Number(Je.getAttribute(Xn.V))||100);for(this.W=Je;Je.firstChild;)Je.removeChild(Je.firstChild);Je.setAttribute("viewBox","0 0 "+tt+" "+tt),Je.setAttribute("preserveAspectRatio","xMidYMid meet")}var Ei=Qi.prototype;Ei.m=function(tt,qe){qe&&fi(this.W,"rect",Xn.U,"100%",Xn.V,"100%","fill",tt,"opacity",qe)},Ei.S=function(tt,qe){fi(this.W,"path","fill",tt,"d",qe)};function gi(){ve&&Ti(de)}function Ti(Je,tt,qe){wn(Je,tt,qe,function(_t,Ft){if(Ft)return Ft==se?new hn(new Qi(_t)):new Ut(_t.getContext("2d"))})}function wn(Je,tt,qe,_t){if(typeof Je=="string"){if(ve)for(var Ft=ve(Je),Wt=0;Wt<Ft.length;Wt++)wn(Ft[Wt],tt,qe,_t);return}var Rt=qt(tt)||tt!=null&&Vt(tt)||qt(Je.getAttribute(ae.t))||Je.hasAttribute(ae.o)&&Vt(Je.getAttribute(ae.o));if(Rt){var un=_t(Je,Ee(Je));un&&xt(un,Rt,qe)}}function Bi(Je,tt){return this.each(function(qe,_t){Ti(_t,Je,tt)}),this}var vi=gi;q(vi),vi.configure=K,vi.drawIcon=ai,vi.toSvg=ei,vi.update=Ti,vi.updateCanvas=Ti,vi.updateSvg=Ti,vi.version="3.1.1",vi.bundle="browser-umd";var Di=L.jQuery;Di&&(Di.fn.jdenticon=Bi);function sr(){var Je=(vi[R.n]||L[R.G]||{}).replaceMode;Je!="never"&&(gi(),Je=="observe"&&le(Ti))}return typeof setTimeout=="function"&&setTimeout(sr,0),vi});const m$2=(function(){const e=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function b(M,E){if(!d[M]){d[M]={};for(let L=0;L<M.length;L++)d[M][M.charAt(L)]=L}return d[M][E]}const S={compressToBase64:function(M){if(M==null)return"";const E=S._compress(M,6,function(L){return o.charAt(L)});switch(E.length%4){default:case 0:return E;case 1:return E+"===";case 2:return E+"==";case 3:return E+"="}},decompressFromBase64:function(M){return M==null?"":M==""?null:S._decompress(M.length,32,function(E){return b(o,M.charAt(E))})},compressToUTF16:function(M){return M==null?"":S._compress(M,15,function(E){return e(E+32)})+" "},decompressFromUTF16:function(M){return M==null?"":M==""?null:S._decompress(M.length,16384,function(E){return M.charCodeAt(E)-32})},compressToUint8Array:function(M){const E=S.compress(M),L=new Uint8Array(E.length*2);for(let R=0,Z=E.length;R<Z;R++){const q=E.charCodeAt(R);L[R*2]=q>>>8,L[R*2+1]=q%256}return L},decompressFromUint8Array:function(M){if(M==null)return S.decompress(M);{const E=new Array(M.length/2);for(let R=0,Z=E.length;R<Z;R++)E[R]=M[R*2]*256+M[R*2+1];const L=[];return E.forEach(function(R){L.push(e(R))}),S.decompress(L.join(""))}},compressToEncodedURIComponent:function(M){return M==null?"":S._compress(M,6,function(E){return l.charAt(E)})},decompressFromEncodedURIComponent:function(M){return M==null?"":M==""?null:(M=M.replace(/ /g,"+"),S._decompress(M.length,32,function(E){return b(l,M.charAt(E))}))},compress:function(M){return S._compress(M,16,function(E){return e(E)})},_compress:function(M,E,L){if(M==null)return"";let R,Z;const q={},K={};let U="",se="",re="",ae=2,de=3,ve=2;const Ee=[];let le=0,_e=0,Ce;for(Ce=0;Ce<M.length;Ce+=1)if(U=M.charAt(Ce),Object.prototype.hasOwnProperty.call(q,U)||(q[U]=de++,K[U]=!0),se=re+U,Object.prototype.hasOwnProperty.call(q,se))re=se;else{if(Object.prototype.hasOwnProperty.call(K,re)){if(re.charCodeAt(0)<256){for(R=0;R<ve;R++)le=le<<1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++;for(Z=re.charCodeAt(0),R=0;R<8;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1}else{for(Z=1,R=0;R<ve;R++)le=le<<1|Z,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=0;for(Z=re.charCodeAt(0),R=0;R<16;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1}ae--,ae==0&&(ae=Math.pow(2,ve),ve++),delete K[re]}else for(Z=q[re],R=0;R<ve;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1;ae--,ae==0&&(ae=Math.pow(2,ve),ve++),q[se]=de++,re=String(U)}if(re!==""){if(Object.prototype.hasOwnProperty.call(K,re)){if(re.charCodeAt(0)<256){for(R=0;R<ve;R++)le=le<<1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++;for(Z=re.charCodeAt(0),R=0;R<8;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1}else{for(Z=1,R=0;R<ve;R++)le=le<<1|Z,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=0;for(Z=re.charCodeAt(0),R=0;R<16;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1}ae--,ae==0&&(ae=Math.pow(2,ve),ve++),delete K[re]}else for(Z=q[re],R=0;R<ve;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1;ae--,ae==0&&(ae=Math.pow(2,ve),ve++)}for(Z=2,R=0;R<ve;R++)le=le<<1|Z&1,_e==E-1?(_e=0,Ee.push(L(le)),le=0):_e++,Z=Z>>1;for(;;)if(le=le<<1,_e==E-1){Ee.push(L(le));break}else _e++;return Ee.join("")},decompress:function(M){return M==null?"":M==""?null:S._decompress(M.length,32768,function(E){return M.charCodeAt(E)})},_decompress:function(M,E,L){const R=[];let Z=4,q=4,K=3,U="";const se=[];let re,ae,de,ve,Ee,le,_e;const Ce={val:L(0),position:E,index:1};for(re=0;re<3;re+=1)R[re]=String(re);for(de=0,Ee=Math.pow(2,2),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;switch(de){case 0:for(de=0,Ee=Math.pow(2,8),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;_e=e(de);break;case 1:for(de=0,Ee=Math.pow(2,16),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;_e=e(de);break;case 2:return""}for(R[3]=String(_e),ae=String(_e),se.push(String(_e));;){if(Ce.index>M)return"";for(de=0,Ee=Math.pow(2,K),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;switch(_e=de){case 0:for(de=0,Ee=Math.pow(2,8),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;R[q++]=e(de),_e=q-1,Z--;break;case 1:for(de=0,Ee=Math.pow(2,16),le=1;le!=Ee;)ve=Ce.val&Ce.position,Ce.position>>=1,Ce.position==0&&(Ce.position=E,Ce.val=L(Ce.index++)),de|=(ve>0?1:0)*le,le<<=1;R[q++]=e(de),_e=q-1,Z--;break;case 2:return se.join("")}if(Z==0&&(Z=Math.pow(2,K),K++),R[_e])U=String(R[_e]);else if(_e===q)U=ae+ae.charAt(0);else return null;se.push(U),R[q++]=ae+U.charAt(0),Z--,ae=U,Z==0&&(Z=Math.pow(2,K),K++)}}};return S})(),NeedContext$1={};NeedContext$1.created=!1,NeedContext$1.after_show=()=>{},NeedContext$1.after_hide=()=>{},NeedContext$1.min_width="25px",NeedContext$1.min_height="25px",NeedContext$1.back_icon="⬅️",NeedContext$1.back_text="Back",NeedContext$1.clear_text="Clear",NeedContext$1.item_sep="4px",NeedContext$1.layers={},NeedContext$1.level=0,NeedContext$1.gap="0.5rem",NeedContext$1.side_padding="0.5rem",NeedContext$1.compact_padding="0.3rem",NeedContext$1.center_top=20,NeedContext$1.dragging=!1,NeedContext$1.autohide_delay=500,NeedContext$1.autoclick_delay=500,NeedContext$1.autohide_threshold=5,NeedContext$1.set_defaults=()=>{NeedContext$1.open=!1,NeedContext$1.mousedown=!1,NeedContext$1.first_mousedown=!1,NeedContext$1.keydown=!1,NeedContext$1.filtered=!1,NeedContext$1.last_x=0,NeedContext$1.last_y=0,NeedContext$1.layers={},NeedContext$1.mouse_activity={},NeedContext$1.autohide_enabled=!1,NeedContext$1.reset_debouncers()},NeedContext$1.clear_filter=()=>{NeedContext$1.filter.value="",NeedContext$1.do_filter(),NeedContext$1.filter.focus()},NeedContext$1.do_filter=()=>{let e=NeedContext$1.filter.value,o=NeedContext$1.remove_spaces_2(e).toLowerCase(),l=o.includes(":"),d=!1;for(let M of document.querySelectorAll(".needcontext-separator"))o?M.classList.add("needcontext-hidden"):M.classList.remove("needcontext-hidden");for(let M of document.querySelectorAll(".needcontext-text")){let E=M.closest(".needcontext-item"),L=M.textContent.toLowerCase();L=NeedContext$1.remove_spaces(L),l||(L=L.replace(/:/g,"")),L.includes(o)?(E.classList.remove("needcontext-hidden"),d||(NeedContext$1.select_item(parseInt(E.dataset.index)),d=!0)):E.classList.add("needcontext-hidden")}let b=document.querySelector("#needcontext-back"),S=document.querySelector("#needcontext-clear");if(NeedContext$1.filtered=o!=="",NeedContext$1.filtered){let M=document.querySelector("#needcontext-clear-text");M.textContent=e.trim(),S.classList.remove("needcontext-hidden"),b&&b.classList.add("needcontext-hidden")}else S.classList.add("needcontext-hidden"),b&&b.classList.remove("needcontext-hidden");NeedContext$1.scroll_to_selected()},NeedContext$1.def_args=(e,o)=>{for(let l in e)o[l]===void 0&&e[l]!==void 0&&(o[l]=e[l])},NeedContext$1.show=(e={})=>{let o={root:!0,expand:!1,picker_mode:!1,margin:0,compact:!1,autohide:!1,autoclick:!1};if(NeedContext$1.def_args(o,e),!e.items.length)return;if(NeedContext$1.reset_debouncers(),NeedContext$1.created||NeedContext$1.create(),e.e&&e.e.clientX!==void 0&&e.e.clientY!==void 0)e.x=e.e.clientX,e.y=e.e.clientY;else if(e.element){let R=e.element.getBoundingClientRect();e.x=R.left,e.y=R.top+e.margin}e.root&&(NeedContext$1.level=0);let l=e.x===void 0||e.y===void 0;if(e.items=e.items.slice(0),e.index===void 0){let R=e.items.filter(Z=>!Z.separator);for(let[Z,q]of R.entries())if(q.selected){e.index=Z;break}}e.index===void 0&&(e.index=0),e.index>=e.items.length&&(e.index=e.items.length-1);let d,b=NeedContext$1.get_layer();b?d=b.last_index:d=e.index,d=d||0;for(let[R,Z]of e.items.entries())R===d?Z.selected=!0:Z.selected=!1;let S=0,M=NeedContext$1.container;if(M.innerHTML="",M.style.left="unset",M.style.top="unset",M.style.transform="unset",M.style.minWidth="unset",M.style.minHeight="unset",e.title&&!e.compact){let R=document.createElement("div");R.id="needcontext-title",e.title_icon&&(document.createElement("div").classList.add("needcontext-title-icon"),R.append(e.title_icon));let Z=document.createElement("div");if(Z.textContent=e.title.trim(),R.append(Z),M.append(R),e.title_number){let q=document.createElement("div");q.classList.add("needcontext-title-number"),R.append(q)}M.classList.add("with_title"),M.classList.remove("without_title")}else M.classList.remove("with_title"),M.classList.add("without_title");e.root||M.append(NeedContext$1.back_button()),M.append(NeedContext$1.clear_button());let E=[];e.compact?M.classList.add("needcontext-compact"):M.classList.remove("needcontext-compact");for(let R of e.items){if(e.compact&&!R.icon)continue;let Z=document.createElement("div");if(Z.classList.add("needcontext-item"),R.separator)Z.classList.add("needcontext-separator");else{if(Z.classList.add("needcontext-normal"),R.highlight&&Z.classList.add("needcontext-highlight"),R.image){let q=document.createElement("img");q.loading="lazy",q.addEventListener("error",K=>{K.target.classList.add("needcontext-hidden")}),q.classList.add("needcontext-image"),q.src=R.image,Z.append(q)}if(R.icon){let q=document.createElement("div");q.classList.add("needcontext-icon"),R.icon_action&&q.addEventListener("click",K=>{R.icon_action(K,q)}),q.append(R.icon),Z.append(q)}if(R.text){let q=document.createElement("div");q.classList.add("needcontext-text"),q.textContent=R.text.trim(),Z.append(q)}if(e.compact){if(e.compact){let q=[R.text,R.info].filter(Boolean);Z.title=q.join(" - ")}}else R.info&&(Z.title=R.info.trim());R.bold&&Z.classList.add("needcontext-bold"),R.direct_action&&Z.addEventListener("click",()=>{R.direct_action(),NeedContext$1.hide()}),Z.dataset.index=S,R.index=S,Z.addEventListener("mousemove",()=>{let q=parseInt(Z.dataset.index);NeedContext$1.index!==q&&NeedContext$1.select_item(q)}),S+=1,E.push(R)}e.on_drag&&(Z.draggable=!0),R.element=Z,R.picked=!1,M.append(Z)}NeedContext$1.layers[NeedContext$1.level]={root:e.root,items:e.items,normal_items:E,last_index:d,x:e.x,y:e.y},NeedContext$1.main.classList.remove("needcontext-hidden"),NeedContext$1.update_title(),l&&(M.style.left="50%",M.style.transform="translateX(-50%)",e.y=NeedContext$1.center_top),e.y<5&&(e.y=5),e.x<5&&(e.x=5);let L=5;if(e.y+M.offsetHeight+5>window.innerHeight){let R=Math.abs(e.y+M.offsetHeight-window.innerHeight);e.y-=R+L}if(e.x+M.offsetWidth+5>window.innerWidth){let R=Math.abs(e.x+M.offsetWidth-window.innerWidth);e.x-=R+L}NeedContext$1.last_x=e.x,NeedContext$1.last_y=e.y,e.x=Math.max(e.x,0),e.y=Math.max(e.y,0),M.style.top=`${e.y}px`,l||(M.style.left=`${e.x}px`,M.style.transform="unset"),NeedContext$1.filter.value="",NeedContext$1.filter.focus(),e.expand&&e.element?M.style.minWidth=`${e.element.clientWidth}px`:M.style.minWidth=NeedContext$1.min_width,M.style.minHeight=NeedContext$1.min_height,NeedContext$1.filter.value="",NeedContext$1.filtered=!1,NeedContext$1.select_item(d),NeedContext$1.scroll_to_selected(),NeedContext$1.open=!0,NeedContext$1.after_show(),e.root&&(NeedContext$1.args=e)},NeedContext$1.hide=e=>{NeedContext$1.open&&(NeedContext$1.main.classList.add("needcontext-hidden"),NeedContext$1.set_defaults(),NeedContext$1.after_hide(),NeedContext$1.args.after_hide&&NeedContext$1.args.after_hide(e))},NeedContext$1.select_item=e=>{let o=Array.from(document.querySelectorAll(".needcontext-normal"));for(let l of o)parseInt(l.dataset.index)===e?l.classList.add("needcontext-item-selected"):l.classList.remove("needcontext-item-selected");NeedContext$1.index=e},NeedContext$1.scroll_to_selected=(e="center")=>{let o=document.querySelector(".needcontext-item-selected");o&&o.scrollIntoView({block:e})},NeedContext$1.select_next=(e="down",o=!1)=>{let l=!1,d,b=NeedContext$1.get_layer().normal_items.slice(0);b=b.filter(S=>!S.removed),e==="up"&&b.reverse();for(let S of b)if(NeedContext$1.is_visible(S.element)){if(d===void 0&&(d=S.index),l){NeedContext$1.select_item(S.index),NeedContext$1.scroll_to_selected("nearest");return}S.index===NeedContext$1.index&&(l=!0)}if(!o)return NeedContext$1.select_item(d),NeedContext$1.scroll_to_selected("nearest"),!0;NeedContext$1.select_next("up")},NeedContext$1.select_action=(e,o=NeedContext$1.index,l="mouse")=>{if(l==="mouse"&&!e.target.closest(".needcontext-normal"))return;let d=NeedContext$1.get_layer().normal_items[o];if(!d)return;let b=NeedContext$1.last_x,S=NeedContext$1.last_y,M=R=>{NeedContext$1.get_layer().last_index=o,NeedContext$1.level+=1,e.clientY&&(S=e.clientY),NeedContext$1.show({x:b,y:S,items:R,root:!1})},E=R=>{R.length===1&&R[0].direct?NeedContext$1.action(R[0],e):M(R)};async function L(){if(d.action){e.shiftKey?d.shift_action&&NeedContext$1.shift_action(d,e):e.ctrlKey?d.ctrl_action&&NeedContext$1.ctrl_action(d,e):e.altKey?d.alt_action&&NeedContext$1.alt_action(d,e):NeedContext$1.action(d,e);return}else if(d.items)E(d.items);else if(d.get_items){let R=await d.get_items();E(R)}}if(l==="keyboard"){L();return}e.button===0?e.shiftKey?d.shift_action&&NeedContext$1.shift_action(d,e):e.ctrlKey?d.ctrl_action&&NeedContext$1.ctrl_action(d,e):e.altKey?d.alt_action&&NeedContext$1.alt_action(d,e):L():e.button===1?d.middle_action&&NeedContext$1.middle_action(d,e):e.button===2&&d.context_action&&NeedContext$1.context_action(d,e)},NeedContext$1.is_visible=e=>!e.classList.contains("needcontext-hidden"),NeedContext$1.remove_spaces=e=>e.replace(/[\s-]+/g,""),NeedContext$1.remove_spaces_2=e=>e.replace(/\s+/g,""),NeedContext$1.init=()=>{let e=document.createElement("style"),o=`
    #needcontext-main {
      position: fixed;
      z-index: 999999999;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .needcontext-hidden {
      display: none !important;
    }

    #needcontext-container {
      z-index: 2;
      position: absolute;
      background-color: white;
      color: black;
      font-size: 16px;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      user-select: none;
      border: 1px solid #2B2F39;
      border-radius: 5px;
      padding-bottom: 5px;
      max-height: 80vh;
      overflow-y: auto;
      overflow-x: hidden;
      text-align: left;
      max-width: 98%;
    }

    #needcontext-container.needcontext-compact {
      flex-direction: row;
      flex-wrap: wrap;
      padding-left: ${NeedContext$1.compact_padding};
      padding-right: ${NeedContext$1.compact_padding};
    }

    .needcontext-compact .needcontext-text {
      display: none;
    }

    .needcontext-compact .needcontext-separator {
      display: none;
    }

    #needcontext-container.without_title {
      padding-top: 5px;
    }

    #needcontext-title {
      font-weight: bold;
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      background-color: rgba(67, 220, 255, 0.47);
      padding-top: 4px;
      padding-bottom: 4px;
      margin-bottom: 2px;
      display: flex;
      flex-direction: row;
      gap: ${NeedContext$1.gap};
      align-items: center;
      justify-content: flex-start;
    }

    #needcontext-filter {
      opacity: 0;
    }

    .needcontext-item {
      white-space: nowrap;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: ${NeedContext$1.gap};
    }

    .needcontext-normal {
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      padding-top: ${NeedContext$1.item_sep};
      padding-bottom: ${NeedContext$1.item_sep};
      cursor: pointer;
    }

    .needcontext-highlight {
      border: 1px solid currentColor !important;
      border-radius: 10px;
    }

    .needcontext-picked .needcontext-text {
      text-decoration: line-through;
      opacity: 0.7;
    }

    .needcontext-button {
      padding-left: ${NeedContext$1.side_padding};
      padding-right: ${NeedContext$1.side_padding};
      padding-top: ${NeedContext$1.item_sep};
      padding-bottom: ${NeedContext$1.item_sep};
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: ${NeedContext$1.gap};
      cursor: pointer;
    }

    .needcontext-button:hover {
      text-shadow: 0 0 1rem currentColor;
    }

    .needcontext-separator {
      border-top: 1px solid currentColor;
      margin-left: ${NeedContext$1.side_padding};
      margin-right: ${NeedContext$1.side_padding};
      margin-top: ${NeedContext$1.item_sep};
      margin-bottom: ${NeedContext$1.item_sep};
      opacity: 0.7;
    }

    .needcontext-item-selected {
      background-color: rgba(0, 0, 0, 0.18);
    }

    .needcontext-icon {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .needcontext-image {
      width: 1.11rem;
      height: 1.11rem;
      object-fit: contain;
      margin-right: 0.1rem;
    }

    .needcontext-bold {
      font-weight: bold;
    }
  `;e.innerText=o,document.head.appendChild(e),document.addEventListener("mousedown",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.first_mousedown=!0,l.target.closest("#needcontext-container")&&(NeedContext$1.mousedown=!0))}),document.addEventListener("mouseup",l=>{!NeedContext$1.open||!l.target||(l.target.closest("#needcontext-container")?l.target.closest(".needcontext-back")?l.button===0&&NeedContext$1.go_back():l.target.closest(".needcontext-clear")?l.button===0&&NeedContext$1.clear_filter():NeedContext$1.mousedown&&NeedContext$1.select_action(l):NeedContext$1.first_mousedown&&NeedContext$1.dismiss(l),NeedContext$1.mousedown=!1)}),document.addEventListener("mousemove",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.check_mouse_range(l),NeedContext$1.check_auto_funcs(l))}),document.addEventListener("mouseover",l=>{!NeedContext$1.open||!l.target||(NeedContext$1.check_mouse_range(l),NeedContext$1.check_auto_funcs(l))}),document.documentElement.addEventListener("mouseleave",l=>{NeedContext$1.open&&NeedContext$1.args.autohide&&NeedContext$1.autohide_debouncer.call_2(l)}),document.addEventListener("keydown",l=>{NeedContext$1.open&&(NeedContext$1.keydown=!0,["ArrowUp","ArrowLeft"].includes(l.key)?(NeedContext$1.select_next("up"),l.preventDefault()):["ArrowDown","ArrowRight"].includes(l.key)?(NeedContext$1.select_next(),l.preventDefault()):l.key==="Backspace"&&(NeedContext$1.filtered||(NeedContext$1.go_back(),l.preventDefault())))}),document.addEventListener("keyup",l=>{NeedContext$1.open&&NeedContext$1.keydown&&(NeedContext$1.keydown=!1,l.key==="Escape"?(NeedContext$1.dismiss(l),l.preventDefault()):l.key==="Enter"&&(NeedContext$1.select_action(l,void 0,"keyboard"),l.preventDefault()))}),NeedContext$1.start_autohide(),NeedContext$1.start_autoclick(),NeedContext$1.set_defaults()},NeedContext$1.create=()=>{NeedContext$1.main=document.createElement("div"),NeedContext$1.main.id="needcontext-main",NeedContext$1.main.classList.add("needcontext-hidden"),NeedContext$1.container=document.createElement("div"),NeedContext$1.container.id="needcontext-container",NeedContext$1.filter=document.createElement("input"),NeedContext$1.filter.id="needcontext-filter",NeedContext$1.filter.type="text",NeedContext$1.filter.autocomplete="off",NeedContext$1.filter.spellcheck=!1,NeedContext$1.filter.placeholder="Filter",NeedContext$1.filter.addEventListener("input",e=>{NeedContext$1.do_filter()}),NeedContext$1.main.addEventListener("contextmenu",e=>{e.preventDefault()}),NeedContext$1.container.addEventListener("dragstart",e=>{NeedContext$1.dragging=!0,NeedContext$1.dragstart_action(e)}),NeedContext$1.container.addEventListener("dragenter",e=>{NeedContext$1.dragenter_action(e)}),NeedContext$1.container.addEventListener("dragend",e=>{NeedContext$1.dragging=!1,NeedContext$1.dragend_action(e)}),NeedContext$1.main.append(NeedContext$1.filter),NeedContext$1.main.append(NeedContext$1.container),document.body.appendChild(NeedContext$1.main),NeedContext$1.created=!0},NeedContext$1.dragstart_action=e=>{NeedContext$1.dragged_item=e.target;let o=NeedContext$1.container,l=Array.from(o.querySelectorAll(".needcontext-item"));NeedContext$1.dragged_index=l.indexOf(e.target)},NeedContext$1.dragenter_action=e=>{let o=NeedContext$1.dragged_item;if(o===e.target)return;let l=NeedContext$1.container,d=Array.from(l.querySelectorAll(".needcontext-item")),b=d.indexOf(o),S=d.indexOf(e.target);if(b<0||S<0)return;b<S?l.insertBefore(o,e.target.nextSibling):l.insertBefore(o,e.target),d=Array.from(l.querySelectorAll(".needcontext-item"));let M=d.indexOf(o),E=d.indexOf(e.target);o.dataset.index=M,e.target.dataset.index=E,NeedContext$1.select_item(M)},NeedContext$1.dragend_action=e=>{let o=NeedContext$1.container,l=NeedContext$1.dragged_item,b=Array.from(o.querySelectorAll(".needcontext-item")).indexOf(l);NeedContext$1.hide(e),NeedContext$1.args.on_drag(NeedContext$1.dragged_index,b)},NeedContext$1.get_layer=()=>NeedContext$1.layers[NeedContext$1.level],NeedContext$1.prev_layer=()=>NeedContext$1.layers[NeedContext$1.level-1],NeedContext$1.go_back=()=>{if(NeedContext$1.level===0)return;let e=NeedContext$1.prev_layer();NeedContext$1.level-=1;let o={x:e.x,y:e.y,items:e.items,root:e.root};o.compact=NeedContext$1.args.compact,o.autohide=NeedContext$1.args.autohide,o.autoclick=NeedContext$1.args.autoclick,NeedContext$1.show(o)},NeedContext$1.back_button=()=>{let e=document.createElement("div");e.id="needcontext-back",e.classList.add("needcontext-back"),e.classList.add("needcontext-button");let o=document.createElement("div");o.append(NeedContext$1.back_icon);let l=document.createElement("div");return l.textContent=NeedContext$1.back_text.trim(),e.append(o),e.append(l),e.title="Shortcut: Backspace",e},NeedContext$1.clear_button=()=>{let e=document.createElement("div");e.id="needcontext-clear",e.classList.add("needcontext-clear"),e.classList.add("needcontext-button"),e.classList.add("needcontext-hidden");let o=document.createElement("div");o.append(NeedContext$1.back_icon);let l=document.createElement("div");return l.id="needcontext-clear-text",l.textContent=NeedContext$1.clear_text.trim(),e.append(o),e.append(l),e.title="Type to filter. Click to clear",e},NeedContext$1.action=(e,o)=>{if(e.element&&(!NeedContext$1.is_visible(e.element)||o.target.closest(".needcontext-icon")&&e.icon_action))return;let l=NeedContext$1.args,d=NeedContext$1.args.after_action;if(l.picker_mode){e.element.classList.add("needcontext-picked"),NeedContext$1.filter.focus(),e.picked=!0;let b=!0;for(let S of l.items)if(!S.picked){b=!1;break}b&&NeedContext$1.hide(o)}else NeedContext$1.hide(o);e.action(o),d&&d(o)},NeedContext$1.dismiss=e=>{NeedContext$1.args.after_dismiss&&NeedContext$1.args.after_dismiss(e),NeedContext$1.hide(e)},NeedContext$1.shift_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_shift_action&&NeedContext$1.args.after_shift_action(o),NeedContext$1.hide(o),e.shift_action(o))},NeedContext$1.ctrl_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_ctrl_action&&NeedContext$1.args.after_ctrl_action(o),NeedContext$1.hide(o),e.ctrl_action(o))},NeedContext$1.alt_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_alt_action&&NeedContext$1.args.after_alt_action(o),NeedContext$1.hide(o),e.alt_action(o))},NeedContext$1.middle_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_middle_action&&NeedContext$1.args.after_middle_action(o),NeedContext$1.args.middle_action_remove?NeedContext$1.remove_item(e):NeedContext$1.hide(o),e.middle_action(o))},NeedContext$1.context_action=(e,o)=>{e.element&&!NeedContext$1.is_visible(e.element)||(NeedContext$1.args.after_context_action&&NeedContext$1.args.after_context_action(o),NeedContext$1.hide(o),e.context_action(o))},NeedContext$1.remove_item=e=>{NeedContext$1.select_next("down",!0),e.removed=!0,e.element.remove(),NeedContext$1.update_title()},NeedContext$1.update_title=()=>{let e=document.querySelector("#needcontext-title");if(!e)return;let o=e.querySelector(".needcontext-title-number");if(!o)return;let l=NeedContext$1.count_items();o.textContent=`(${l})`},NeedContext$1.count_items=()=>{let e=NeedContext$1.get_layer().normal_items;return e=e.filter(o=>!o.removed),e=e.filter(o=>!o.fake),e.length},NeedContext$1.create_debouncer=(e,o)=>{let l,d={};function b(){clearTimeout(l),l=void 0}function S(...M){e(...M)}return d.call=(...M)=>{b(),l=setTimeout(()=>{S(...M)},o)},d.call_2=(...M)=>{l||d.call(M)},d.now=(...M)=>{b(),S(...M)},d.cancel=()=>{b()},d},NeedContext$1.reset_debouncers=()=>{NeedContext$1.autohide_debouncer.cancel(),NeedContext$1.autoclick_debouncer.cancel()},NeedContext$1.check_auto_funcs=e=>{if(!NeedContext$1.open||!e.target)return;let o=e.target.id==="needcontext-main";if(o||NeedContext$1.reset_debouncers(),NeedContext$1.args.autohide&&o&&NeedContext$1.autohide_enabled&&NeedContext$1.autohide_debouncer.call_2(e),NeedContext$1.args.autoclick){let l=e.target.closest(".needcontext-item");l||(l=e.target.closest(".needcontext-back")),l&&NeedContext$1.autoclick_debouncer.call(l,e)}},NeedContext$1.check_mouse_range=e=>{if(NeedContext$1.autohide_enabled||e.target.id!=="needcontext-main")return;let o=e.clientX,l=e.clientY;if(NeedContext$1.mouse_activity.initial_x===void 0){NeedContext$1.mouse_activity.initial_x=o,NeedContext$1.mouse_activity.initial_y=l;return}let d=NeedContext$1.container.getBoundingClientRect();function b(S){let M=S>NeedContext$1.autohide_threshold;return M&&(NeedContext$1.autohide_enabled=!0),M}if(l<d.top&&l<NeedContext$1.mouse_activity.initial_y&&l<d.top){let S=d.top-l;if(b(S))return}if(l>d.bottom&&l>NeedContext$1.mouse_activity.initial_y&&l>d.bottom){let S=l-d.bottom;if(b(S))return}if(o<d.left&&o<NeedContext$1.mouse_activity.initial_x&&o<d.left){let S=d.left-o;if(b(S))return}if(o>d.right&&o>NeedContext$1.mouse_activity.initial_x&&o>d.right){let S=o-d.right;if(b(S))return}},NeedContext$1.start_autohide=e=>{NeedContext$1.autohide_debouncer=NeedContext$1.create_debouncer(o=>{NeedContext$1.hide(o)},e||NeedContext$1.autohide_delay)},NeedContext$1.start_autoclick=e=>{NeedContext$1.autoclick_debouncer=NeedContext$1.create_debouncer((o,l)=>{o.closest(".needcontext-item")?NeedContext$1.select_action(l):o.closest(".needcontext-back")&&NeedContext$1.go_back()},e||NeedContext$1.autoclick_delay)},typeof window<"u"&&(window.NeedContext=NeedContext$1),App.create_about_modal=()=>{let e=App.create_modal("about"),o=DOM.el(".modal-header",e),l=DOM.create("img","","modal-about-image");l.src="/img/slide.png",o.prepend(l);let d=DOM.el(".modal-title",e),b=`v${App.config.version}`;d.textContent=`Slide | ${b} | Merkoba | 2025 | ${App.commit_hash}`,d.id="modal-title-about",d.title="Name | Version | Company | Year | Commit Hash";let S=DOM.el(".modal-body",e);S.id="modal-body-about",S.innerHTML=`
    <div class="about-item">Slide is a music player that uses <a target=_blank class="popup" href="https://strudel.cc">strudel</a> code.</div>
    <div class="about-item">It's meant to allow automatic & seamless code updates.</div>
    <div class="about-item">There's a song picker to play elaborate tunes.</div>
    <div class="about-item">The code can be edited in real time and applied with Play.</div>
    <div class="about-item">The scope visualizer can be clicked in the left/center/right.</div>
    <div class="about-item">Clicking the scope produces a tone and a reverb affect.</div>
    <div class="about-item">Clicking the scope on the left produces left panning.</div>
    <div class="about-item">Clicking the scope on the right produces right panning.</div>
    <div class="about-item">A straight line to the left on the scope sets the next visual.</div>
    <div class="about-item">A straight line to the right on the scope opens a random song.</div>
    <div class="about-item">Ctrl+s = Starts playback / Updates code.</div>
    <div class="about-item">Escape = Closes top modal or stops playback.</div>
    <div class="about-item">Ctrl+1 = Show the sound context.</div>
    <div class="about-item">Ctrl+2 = Show the note context.</div>
    <div class="about-item">Ctrl+3 = Show the bank context.</div>
    <div class="about-item">Try drawing a triangle on the scope.</div>
    <div class="about-item">Try drawing a rectangle on the scope.</div>
    <div class="about-item">Try drawing a circle on the scope.</div>
    <hr>
    <div class="about-item">Credit: Gemini</div>
    <div class="about-item">Credit: ChatGPT</div>
    <div class="about-item">Credit: Claude</div>
  `},App.open_about_modal=()=>{App.open_modal("about")},App.beep_sound=()=>{try{let e=App.get_audio_context(),o=e.createOscillator(),l=e.createGain();o.type="triangle",o.frequency.setValueAtTime(440,e.currentTime),o.frequency.linearRampToValueAtTime(445,e.currentTime+.1),l.gain.setValueAtTime(.05,e.currentTime),l.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2),o.connect(l),l.connect(e.destination),o.start(),o.stop(e.currentTime+.2)}catch(e){console.error("Failed to play sound",e)}},App.get_audio_context=()=>{if(window.master_fx&&window.master_fx.context)return window.master_fx.context;if(App.audio_context)return App.audio_context;try{return App.audio_context=new(AudioContext||window.webkitAudioContext),App.audio_context}catch{return console.error("Web Audio API is not supported"),null}},App.splash_reverb=e=>{window.master_fx.splash_reverb(e)},App.set_panning=(e,o=0)=>{if(window.master_fx.set_panning(e),o>0){clearInterval(App.panning_interval);let l=e/(o*1e3/50),d=e;App.panning_interval=setInterval(()=>{d-=l,Math.abs(d)<=Math.abs(l)?(window.master_fx.set_panning(0),clearInterval(App.panning_interval)):window.master_fx.set_panning(d)},50)}},App.get_panning=()=>App.panning.pan.value,App.set_gain=e=>{window.master_fx.set_volume(e)},App.get_gain=()=>window.master_fx.get_volume(),App.set_eq=(e,o,l)=>{window.master_fx.set_eq_freqs(e,o,l)},App.start_auto_pan=(e=2,o=.8)=>{window.master_fx.set_auto_pan(e,o)},App.stop_auto_pan=()=>{window.master_fx.set_auto_pan(0,0)},App.spin_panning=(e=2e3)=>{App.start_auto_pan(4,1),setTimeout(()=>{App.stop_auto_pan()},e)},App.auto_delay=5,App.auto_endpoint="/status",App.setup_auto=()=>{let e=DOM.el("#auto-start");e&&DOM.ev(e,"click",()=>{let S=DOM.el("#auto-input");S&&App.start_auto(S.value)});let o=DOM.el("#auto-stop");o&&DOM.ev(o,"click",()=>{App.stop_status_watch()});let l=DOM.el("#auto-default");l&&DOM.ev(l,"click",()=>{App.start_auto("/status")});let d=DOM.el("#auto-input");d&&DOM.ev(d,"keydown",S=>{if(S.key==="Enter"){S.preventDefault();let M=DOM.el("#auto-input");M&&App.start_auto(M.value)}});let b=DOM.el("#auto-delay");b&&DOM.ev(b,"change",S=>{App.auto_delay=parseInt(S.target.value,10),App.stor_save_auto_delay(),App.fetch_timer&&App.strudel_watch_status()})},App.create_auto_modal=()=>{let e=App.create_modal("auto"),o=DOM.el(".modal-title",e);o.textContent="Auto Mode";let l=DOM.el(".modal-body",e);l.id="modal-body-auto";let d=DOM.create("div","","auto-info");d.textContent="Code will be fetched periodically";let b=DOM.create("select","modal-select","auto-delay");b.innerHTML=`
    <option value="1">1 second</option>
    <option value="5" selected>5 seconds</option>
    <option value="10">10 seconds</option>
    <option value="30">30 seconds</option>
    <option value="60">1 minute</option>
    <option value="300">5 minutes</option>
    <option value="600">10 minutes</option>
    <option value="900">15 minutes</option>
    <option value="1200">20 minutes</option>
    <option value="1800">30 minutes</option>
    <option value="3600">1 hour</option>
  `;let S=DOM.create("input","","auto-input");S.classList.add("modal-input"),S.placeholder="Endpoint URL";let M=DOM.create("div","modal-buttons","auto-buttons");M.innerHTML=`
    <button id="auto-default">Default</button>
    <button id="auto-stop">Stop</button>
    <button id="auto-start">Start</button>
  `,l.appendChild(d),l.appendChild(b),l.appendChild(S),l.appendChild(M)},App.open_auto_modal=()=>{App.open_modal("auto"),DOM.el("#auto-delay").value=App.auto_delay,DOM.el("#auto-input").value=App.auto_endpoint,App.fetch_timer?(DOM.hide("#auto-start"),DOM.show("#auto-stop")):(DOM.show("#auto-start"),DOM.hide("#auto-stop"))},App.start_auto=async e=>{if(App.close_modal("auto"),!e||!e.trim()){App.set_status("Invalid endpoint");return}App.auto_endpoint=e.trim(),App.stor_save_auto_endpoint(),App.strudel_watch_status()},App.fetch_status_code=async()=>{const e=await fetch(App.auto_endpoint,{cache:"no-store"});if(!e.ok)throw new Error(`Status endpoint returned ${e.status}`);return e.text()},App.strudel_watch_status=()=>{if(!App.strudel_watch_status){console.warn("Polling function missing. Did strudel bundle load?");return}if(!App.auto_delay||App.auto_delay<=0){console.error("Provide a fetch interval in seconds greater than zero");return}App.status_watch_cancelled=!1;const e=App.auto_delay*1e3,o=async()=>{if(console.info("🤖 Fetching auto code"),!App.fetch_in_flight){App.fetch_in_flight=!0;try{const d=(await App.fetch_status_code()).trim();if(!d)return;if(App.status_watch_cancelled){console.info("Status watch was cancelled, skipping play action");return}App.set_song_context(),App.audio_started?await App.play_action(d):App.code_to_play=d}catch(l){console.error("Failed to update Strudel status",l)}finally{App.fetch_in_flight=!1}}};App.stop_status_watch(!1),o(),App.fetch_timer=setInterval(()=>{o()},e),console.info("Interval started.")},App.stop_status_watch=(e=!0)=>{App.close_modal("auto"),App.fetch_timer&&(console.info("Interval cleared 🖐"),clearInterval(App.fetch_timer),App.fetch_timer=void 0,e&&(App.status_watch_cancelled=!0))},App.strudel_banks=["AJKPercusyn","AkaiLinn","AkaiMPC60","AkaiXR10","AlesisHR16","AlesisSR16","BossDR110","BossDR220","BossDR55","BossDR550","CasioRZ1","CasioSK1","CasioVL1","DoepferMS404","EmuDrumulator","EmuSP12","KorgDDM110","KorgKPR77","KorgKR55","KorgKRZ","KorgM1","KorgMinipops","KorgPoly800","KorgT3","Linn9000","LinnLM1","LinnLM2","MoogConcertMateMG1","OberheimDMX","RhodesPolaris","RhythmAce","RolandCompurhythm1000","RolandCompurhythm78","RolandCompurhythm8000","RolandD110","RolandD70","RolandDDR30","RolandJD990","RolandMC202","RolandMC303","RolandMT32","RolandR8","RolandS50","RolandSH09","RolandSystem100","RolandTR505","RolandTR606","RolandTR626","RolandTR707","RolandTR727","RolandTR808","RolandTR909","SakataDPM48","SequentialCircuitsDrumtracks","SequentialCircuitsTom","SimmonsSDS400","SimmonsSDS5","SoundmastersR88","UnivoxMicroRhythmer12","ViscoSpaceDrum","XdrumLM8953","YamahaRM50","YamahaRX21","YamahaRX5","YamahaRY30","YamahaTG33"],App.colors_enabled=!0,App.apply_color=e=>{let o=DOM.el("#volume-value"),l=DOM.el("#volume-slider"),d=DOM.el("#tempo-value"),b=DOM.el("#tempo-slider"),S=DOM.el("#status"),M=DOM.el("#image");o&&(o.style.color=e),l&&(l.style.accentColor=e),d&&(d.style.color=e),b&&(b.style.accentColor=e),S&&(S.style.color=e),M&&(M.style.filter=`drop-shadow(0 0 0.15rem ${e})`)},App.start_color_cycle=()=>{App.colors_enabled&&(App.color_cycle_timer||(App.color_index=0,App.apply_color(App.cycle_colors[0],0),App.color_cycle_timer=setInterval(()=>{App.color_index=(App.color_index+1)%App.cycle_colors.length,App.apply_color(App.cycle_colors[App.color_index],App.color_index)},3*1e3)))},App.stop_color_cycle=()=>{App.color_cycle_timer&&(clearInterval(App.color_cycle_timer),App.color_cycle_timer=void 0),App.color_index=0;let e=App.cycle_colors[0],o=DOM.el("#volume-value"),l=DOM.el("#volume-slider"),d=DOM.el("#tempo-value"),b=DOM.el("#tempo-slider"),S=DOM.el("#status"),M=DOM.el("#image");o&&(o.style.color=e),l&&(l.style.accentColor=e),d&&(d.style.color=e),b&&(b.style.accentColor=e),S&&(S.style.color=e),M&&(M.style.filter="")},App.toggle_colors=()=>{App.colors_enabled=!App.colors_enabled,App.stor_save_colors(),App.is_playing&&(App.colors_enabled?App.start_color_cycle():App.is_playing&&App.stop_color_cycle())},App.color_interface=e=>{let o=App[`scope_click_color_${e}`];App.do_color_interface(o)},App.restore_interface_colors=()=>{App.do_color_interface(App.border_color)},App.do_color_interface=e=>{App.set_input_border(e);let o=App.get_scope_wrapper();o.style.borderColor=e},NeedContext.init(),NeedContext.after_hide=()=>{App.focus_input()},App.show_generic_context=(e,o,l)=>{let d=e.map(b=>({text:b,action:()=>{App.add_text_to_input(b)}}));App.show_context(d,l,o)},App.show_sounds_context=e=>{App.show_generic_context(App.strudel_sounds,"Sounds",e)},App.show_notes_context=e=>{App.show_generic_context(App.strudel_notes,"Notes",e)},App.show_banks_context=e=>{App.show_generic_context(App.strudel_banks,"Banks",e)},App.show_context=(e,o,l)=>{let d={items:e,title:l};o&&(d.x=o.x,d.y=o.y),NeedContext.show(d)},App.filter_code=e=>(e=e.replace(/\n\s*\n\s*\n+/g,`

`),e.trim()),App.max_scope_slide_y_dff=50,App.scope_panning_zone=100,App.scope_padding_amount=.9,App.scope_slide_distance=180,App.scope_slide_delay=800,App.scope_gestures_enabled=!1,App.many_clicks_amount=100,App.gesture_actions=()=>{App.glow_input(),App.canvas_effect_1()},App.check_gestures=()=>{if(Date.now()-App.scope_mousedown_date<=App.scope_slide_delay&&App.check_scope_slide()){App.scope_gestures_enabled=!1;return}if(App.scope_gestures_enabled){if(App.triangle_gesture()){App.gesture_function(2,()=>{App.gesture_actions()});return}else if(App.square_gesture()){App.gesture_function(3,()=>{App.gesture_actions()});return}else if(App.circle_gesture()){App.gesture_function(4,()=>{App.gesture_actions()});return}else if(App.scope_clicks.length>=App.many_clicks_amount){App.gesture_function(5,()=>{App.gesture_actions()});return}}Date.now()-App.scope_mousedown_date<=App.scope_beep_delay&&(App.splash_reverb(2),App.check_scope_panning()||App.beep_sound())},App.check_scope_slide=()=>{let e=App.mouse_down_coords,o=App.mouse_up_coords;if(!(Math.abs(App.scope_max_y-App.scope_min_y)>=App.max_scope_slide_y_dff))return Math.abs(e.x-o.x)>=App.scope_slide_distance?(e.x<o.x?App.random_song():App.next_visual(),App.clear_clicks(),!0):!1},App.check_scope_panning=()=>{let e=App.mouse_down_coords,o=App.mouse_up_coords,{width:l,height:d}=App.get_scope_dimensions(),b=App.scope_panning_zone,S=App.scope_padding_amount;return e.x<=b||o.x<=b?(App.set_panning(-S,3),!0):e.x>=l-b||o.x>=l-b?(App.set_panning(S,3),!0):!1},App.circle_gesture=()=>{let e=App.scope_clicks;if(!e||!Array.isArray(e))return!1;let o=e.length;if(o<8)return!1;let l=1/0,d=-1/0,b=1/0,S=-1/0,M=0,E=0;for(let We=0;We<o;We++){let He=e[We];He.x<l&&(l=He.x),He.x>d&&(d=He.x),He.y<b&&(b=He.y),He.y>S&&(S=He.y),M+=He.x,E+=He.y}let L=Math.hypot(d-l,S-b),R=e[0],Z=e[o-1];if(Math.hypot(R.x-Z.x,R.y-Z.y)/L>.35)return!1;let K=d-l,U=S-b,se=K/U;if(se<.4||se>2.5)return!1;let re=M/o,ae=E/o,de=0,ve=[];for(let We=0;We<o;We++){let He=e[We].x-re,Mt=e[We].y-ae,ut=Math.hypot(He,Mt);ve.push(ut),de+=ut}let Ee=de/o,le=0;for(let We=0;We<o;We++){let He=ve[We]-Ee;le+=He*He}return Math.sqrt(le/o)/Ee<.35},App.triangle_gesture=()=>{let e=(S,M)=>{let E=S.x-M.x,L=S.y-M.y;return E*E+L*L},o=(S,M,E)=>{let L=e(M,E);if(L===0)return e(S,M);let R=((S.x-M.x)*(E.x-M.x)+(S.y-M.y)*(E.y-M.y))/L;return R=Math.max(0,Math.min(1,R)),e(S,{x:M.x+R*(E.x-M.x),y:M.y+R*(E.y-M.y)})},l=(S,M,E)=>{let L={x:S.x-M.x,y:S.y-M.y},R={x:E.x-M.x,y:E.y-M.y},Z=L.x*R.x+L.y*R.y,q=Math.sqrt(L.x*L.x+L.y*L.y),K=Math.sqrt(R.x*R.x+R.y*R.y);if(q*K===0)return 0;let U=Z/(q*K);return U=Math.max(-1,Math.min(1,U)),Math.acos(U)*(180/Math.PI)},d=(S,M)=>{if(S.length<=2)return S;let E=0,L=0,R=S.length-1;for(let Z=1;Z<R;Z++){let q=o(S[Z],S[0],S[R]);q>E&&(E=q,L=Z)}if(E>M*M){let Z=d(S.slice(0,L+1),M),q=d(S.slice(L),M);return Z.slice(0,Z.length-1).concat(q)}return[S[0],S[R]]};return(S=>{let M=S.length;if(M<10)return!1;let E=1/0,L=-1/0,R=1/0,Z=-1/0;for(let le=0;le<M;le++)E=Math.min(E,S[le].x),L=Math.max(L,S[le].x),R=Math.min(R,S[le].y),Z=Math.max(Z,S[le].y);let q=Math.hypot(L-E,Z-R),K=S[0],U=S[M-1];if(Math.hypot(K.x-U.x,K.y-U.y)/q>.2)return!1;let re=q*.15,ae=d(S,re),de=ae.length;if(de<3||de>4)return!1;let ve=ae.slice(0,3),Ee=[l(ve[2],ve[0],ve[1]),l(ve[0],ve[1],ve[2]),l(ve[1],ve[2],ve[0])];for(let le=0;le<3;le++)if(Ee[le]<10||Ee[le]>170)return!1;return!0})(App.scope_clicks)},App.square_gesture=()=>{let e=App.scope_clicks;if(!e||!Array.isArray(e))return!1;let o=e.length;if(o<10)return!1;let l=(le,_e)=>{let Ce=le.x-_e.x,We=le.y-_e.y;return Ce*Ce+We*We},d=(le,_e,Ce)=>{let We=l(_e,Ce);if(We===0)return l(le,_e);let He=((le.x-_e.x)*(Ce.x-_e.x)+(le.y-_e.y)*(Ce.y-_e.y))/We;return He=Math.max(0,Math.min(1,He)),l(le,{x:_e.x+He*(Ce.x-_e.x),y:_e.y+He*(Ce.y-_e.y)})},b=(le,_e)=>{if(le.length<=2)return le;let Ce=0,We=0,He=le.length-1;for(let Mt=1;Mt<He;Mt++){let ut=d(le[Mt],le[0],le[He]);ut>Ce&&(Ce=ut,We=Mt)}if(Ce>_e*_e){let Mt=b(le.slice(0,We+1),_e),ut=b(le.slice(We),_e);return Mt.slice(0,Mt.length-1).concat(ut)}return[le[0],le[He]]},S=1/0,M=-1/0,E=1/0,L=-1/0;for(let le=0;le<o;le++){let _e=e[le];S=Math.min(S,_e.x),M=Math.max(M,_e.x),E=Math.min(E,_e.y),L=Math.max(L,_e.y)}let R=Math.hypot(M-S,L-E),Z=e[0],q=e[o-1];if(Math.hypot(Z.x-q.x,Z.y-q.y)/R>.4)return!1;let U=M-S,se=L-E,re=U/se;if(re<.15||re>6)return!1;let ae=R*.06,de=b(e,ae),ve=de.length;if(ve<4||ve>6)return!1;let Ee=0;for(let le=1;le<ve-1;le++){let _e=de[le-1],Ce=de[le],We=de[le+1],He=Ce.x-_e.x,Mt=Ce.y-_e.y,ut=We.x-Ce.x,Nt=We.y-Ce.y,St=He*ut+Mt*Nt,xt=Math.hypot(He,Mt),$t=Math.hypot(ut,Nt),qt=St/(xt*$t);Math.abs(qt)<.5&&Ee++}return Ee>=2},App.gesture_function=(e,o)=>{App.scope_gestures_enabled=!1,App.increase_scope_click_level(e),App.spin_panning(),o()},App.input_mirror_time=3*1e3,App.input_grow_time=3*1e3,App.lines_enabled=!0,App.setup_input=()=>{App.create_editor(),App.setup_editor_autocomplete(),App.max_button=App.get_max_button(),App.lines_enabled?App.enable_lines():App.disable_lines(),App.max_debouncer=App.create_debouncer(()=>{App.max_input_if_larger()},300)},App.create_editor=()=>{let{EditorView:e,EditorState:o,Compartment:l,lineNumbers:d,highlightActiveLineGutter:b,foldGutter:S,history:M,drawSelection:E,dropCursor:L,indentOnInput:R,bracketMatching:Z,closeBrackets:q,rectangularSelection:K,crosshairCursor:U,keymap:se,defaultKeymap:re,historyKeymap:ae,indentWithTab:de,highlightSelectionMatches:ve,searchKeymap:Ee,search:le,selectNextOccurrence:_e,javascript:Ce,nord:We,vscodeKeymap:He,Prec:Mt,copyLineDown:ut,copyLineUp:Nt}=window.CM;App.lineNumbers=d,App.compartment=new l;let St=DOM.el("#code-input-wrapper"),xt=e.theme(App.editor_theme,{dark:!0});App.setup_strudel_mirror();let $t=[d(),b(),S()],qt=[We,xt,App.compartment.of($t),o.allowMultipleSelections.of(!0),Mt.highest(se.of([{key:"Ctrl-Shift-Alt-ArrowDown",run:ut},{key:"Ctrl-Shift-Alt-ArrowUp",run:Nt},{key:"Mod-d",run:_e,preventDefault:!0},...He])),le(),M(),E(),L(),q(),R(),Z(),K(),U(),ve(),App.highlight_extension,se.of([...re,...ae,...Ee,de]),Ce(),e.lineWrapping],Vt=o.create({doc:"",extensions:qt});App.editor=new e({state:Vt,parent:St}),App.editor.dom.id="codemirror-wrapper"},App.get_input=()=>DOM.el("#codemirror-wrapper"),App.get_input_wrapper=()=>DOM.el("#code-input-wrapper"),App.get_input_value=()=>App.editor.state.doc.toString(),App.set_input=e=>{App.get_input_value()!==e&&(App.editor.dispatch({changes:{from:0,to:App.editor.state.doc.length,insert:e}}),App.scroll_input_to_top(),App.reset_code_scroll_for_content())},App.init_code_input_controls=()=>{let e=App.get_input_wrapper(),o=DOM.el("#code-input-scroll"),l=App.get_max_button(),d=DOM.el("#code-input-top"),b=DOM.el("#code-input-bottom"),S=DOM.el("#code-input-sounds"),M=DOM.el("#code-input-notes"),E=DOM.el("#code-input-banks");d&&DOM.ev(d,"click",R=>{R.preventDefault(),App.scroll_input_to_top(),App.reset_code_scroll_for_content()}),b&&DOM.ev(b,"click",R=>{R.preventDefault(),App.scroll_input_to_bottom(),App.reset_code_scroll_for_content({direction:-1})}),o&&DOM.ev(o,"click",R=>{if(R.preventDefault(),App.code_scroll_active){App.stop_code_scroll();return}App.start_code_scroll()}),l&&DOM.ev(l,"click",R=>{App.max_input()}),S&&DOM.ev(S,"click",R=>{R.preventDefault(),App.show_sounds_context(R)}),M&&DOM.ev(M,"click",R=>{R.preventDefault(),App.show_notes_context(R)}),E&&DOM.ev(E,"click",R=>{R.preventDefault(),App.show_banks_context(R)});let L=App.get_input();if(DOM.ev(L,"pointerdown",R=>{if(!App.code_scroll_active)return;let q=R.target.getBoundingClientRect();R.clientX>q.right-20&&R.clientY>q.bottom-20||App.stop_code_scroll()}),e){let R=DOM.el("#resize-handle");if(R){let Z=!1;DOM.ev(R,"mousedown",q=>{let K=App.get_scope_wrapper();q.preventDefault(),Z=!0,document.body.style.userSelect="none",document.body.style.cursor="se-resize",App.activate_top_input_controls(),App.activate_bottom_input_controls(),R.style.opacity="1",R.style.pointerEvents="auto",R.classList.add("active");let U=q.clientX,se=q.clientY,re=e.offsetWidth,ae=e.offsetHeight,de=Ee=>{if(!Z)return;let le=re+(Ee.clientX-U),_e=ae+(Ee.clientY-se),Ce=getComputedStyle(document.documentElement),We=parseInt(Ce.getPropertyValue("--input_min_width")),He=parseInt(Ce.getPropertyValue("--input_min_height"));le=Math.max(We,le),_e=Math.max(He,_e),e.style.width=`${le}px`,e.style.height=`${_e}px`,K.style.width=`${le}px`},ve=()=>{Z=!1,document.body.style.userSelect="",document.body.style.cursor="",App.deactivate_top_input_controls(),App.deactivate_bottom_input_controls(),R.style.opacity="",R.style.pointerEvents="",R.classList.remove("active"),App.resize_scope(),document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",ve)};DOM.ev(document,"mousemove",de),DOM.ev(document,"mouseup",ve)}),DOM.ev(R,"dblclick",q=>{App.restore_input()})}DOM.ev(e,"mouseover",()=>{App.check_max_button()})}DOM.ev(L,"wheel",R=>{App.code_scroll_active&&App.stop_code_scroll()},{passive:!0})},App.restore_input=()=>{let e=App.get_input_wrapper();if(!e)return;let o=getComputedStyle(document.documentElement),l=parseInt(o.getPropertyValue("--input_height")),d=parseInt(o.getPropertyValue("--input_max_width"));e.style.height=`${l}px`,e.style.width=`${d}%`},App.input_is_maxed=()=>{let e=App.get_input_wrapper(),o=parseInt(e.style.height),l=parseInt(e.style.width),[d,b]=App.max_input(!0);return o===d&&l===b},App.add_text_to_input=e=>{App.editor.dispatch(App.editor.state.replaceSelection(e)),App.editor.focus()},App.focus_input=()=>{App.editor.focus()},App.activate_top_input_controls=()=>{let e=DOM.el("#code-input-controls-top");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.add("active"))},App.activate_bottom_input_controls=()=>{let e=DOM.el("#code-input-controls-bottom");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.add("active"))},App.deactivate_top_input_controls=()=>{let e=DOM.el("#code-input-controls-top");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.remove("active"))},App.deactivate_bottom_input_controls=()=>{let e=DOM.el("#code-input-controls-bottom");e&&(e.style.opacity="1",e.style.pointerEvents="auto",e.classList.remove("active"))},App.mirror_input=()=>{let e=App.get_input();e.classList.add("mirror"),clearTimeout(App.input_mirror_timeout),App.input_mirror_timeout=setTimeout(()=>{e.classList.remove("mirror")},App.input_mirror_time)},App.glow_input=()=>{let e=App.get_input();e.classList.add("glow"),clearTimeout(App.input_grow_timeout),App.input_grow_timeout=setTimeout(()=>{e.classList.remove("glow")},App.input_grow_time)},App.cursive_input=()=>{let e=App.get_input();e.classList.add("cursive"),clearTimeout(App.input_grow_timeout),App.input_grow_timeout=setTimeout(()=>{e.classList.remove("cursive")},App.input_grow_time)},App.max_input=(e=!1,o="normal")=>{let l=App.get_input_wrapper(),d=getComputedStyle(document.documentElement),b=parseInt(d.getPropertyValue("--input_max_width")),S=App.get_input_diff();return e||(o==="normal"?(l.style.height=`${S}px`,l.style.width=`${b}%`):o==="width"?l.style.width=`${b}%`:o==="height"&&(l.style.height=`${S}px`),App.resize_scope(),App.check_max_button()),[S,b]},App.get_input_diff=()=>{let e=App.get_top_height(),o=App.get_scope_height(),l=App.get_bottom_height(),d=e+o+l;return App.viewport_height()-d-50},App.check_max_button=()=>{App.input_is_maxed()?App.disable_max_button():App.enable_max_button()},App.get_max_button=()=>DOM.el("#code-input-max"),App.enable_max_button=()=>{App.max_button.classList.remove("disabled")},App.disable_max_button=()=>{App.max_button.classList.add("disabled")},App.get_input_height=()=>App.editor.scrollDOM.scrollHeight,App.get_input_client_height=()=>App.editor.scrollDOM.clientHeight,App.set_input_border=e=>{App.editor.dom.style.borderColor=e},App.toggle_lines=()=>{App.lines_enabled=!App.lines_enabled,App.lines_enabled?App.enable_lines():App.disable_lines(),App.stor_save_lines()},App.enable_lines=()=>{App.editor.dispatch({effects:App.compartment.reconfigure(App.lineNumbers())})},App.disable_lines=()=>{App.editor.dispatch({effects:App.compartment.reconfigure([])})},App.max_input_if_larger=()=>{let e=App.get_input_wrapper(),o=parseInt(e.style.height),[l,d]=App.max_input(!0);o>l&&App.max_input(!1,"height")},App.start_keyboard=()=>{DOM.ev(document,"keydown",e=>{if(e.key==="s")e.ctrlKey&&(e.preventDefault(),App.play_action());else if(e.key==="Escape"){if(e.preventDefault(),NeedContext.open)return;App.modal_open()?App.close_current_modal():App.stop_action()}else e.key==="1"?e.ctrlKey&&App.show_sounds_context():e.key==="2"?e.ctrlKey&&App.show_notes_context():e.key==="3"&&e.ctrlKey&&App.show_banks_context()})},App.generic_hint=(e,o,l)=>{let d=e.getCursor(),b=e.getTokenAt(d),S=b.string.replace(/['"]/g,""),M=l.filter(E=>E.toLowerCase().startsWith(S.toLowerCase()));M.length===0?console.log("⚠️ No matches found for:",S):console.log(`✅ Found ${M.length} matches`),o({list:M,from:{line:d.line,ch:b.start+1},to:{line:d.line,ch:b.end}})},App.sounds_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_sounds)},App.notes_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_notes)},App.banks_hint=(e,o)=>{App.generic_hint(e,o,App.strudel_banks)},App.sounds_hint.async=!0,App.notes_hint.async=!0,App.banks_hint.async=!0,App.sound_hint_func=e=>{let o=e.getCursor();return{list:App.strudel_sounds,from:o,to:o}},App.custom_completion_source=e=>{let o=e.matchBefore(/(note|bank|sound)\(["']/);if(!o)return null;let l=[];return o.text.startsWith("note")?l=App.notes_hint:o.text.startsWith("bank")?l=App.banks_hint:o.text.startsWith("sound")&&(l=App.sounds_hint),{from:e.pos,options:l.map(d=>({label:d,type:"text"}))}},App.setup_editor_autocomplete=()=>{let{autocompletion:e}=window.CM;return e({override:[App.custom_completion_source],defaultKeymap:!0})},typeof globalThis.process>"u"&&(globalThis.process={env:{}}),typeof globalThis.process.env>"u"&&(globalThis.process.env={}),typeof globalThis.process.env.NODE_ENV>"u"&&(globalThis.process.env.NODE_ENV="production");let clean=Symbol("clean"),listenerQueue=[],lqIndex=0;const QUEUE_ITEMS_PER_LISTENER=4;let atom=e=>{let o=[],l={get(){return l.lc||l.listen(()=>{})(),l.value},lc:0,listen(d){return l.lc=o.push(d),()=>{for(let S=lqIndex+QUEUE_ITEMS_PER_LISTENER;S<listenerQueue.length;)listenerQueue[S]===d?listenerQueue.splice(S,QUEUE_ITEMS_PER_LISTENER):S+=QUEUE_ITEMS_PER_LISTENER;let b=o.indexOf(d);~b&&(o.splice(b,1),--l.lc||l.off())}},notify(d,b){let S=!listenerQueue.length;for(let M of o)listenerQueue.push(M,l.value,d,b);if(S){for(lqIndex=0;lqIndex<listenerQueue.length;lqIndex+=QUEUE_ITEMS_PER_LISTENER)listenerQueue[lqIndex](listenerQueue[lqIndex+1],listenerQueue[lqIndex+2],listenerQueue[lqIndex+3]);listenerQueue.length=0}},off(){},set(d){let b=l.value;b!==d&&(l.value=d,l.notify(b))},subscribe(d){let b=l.listen(d);return d(l.value),b},value:e};return process.env.NODE_ENV!=="production"&&(l[clean]=()=>{o=[],l.lc=0,l.off()}),l},map=(e={})=>{let o=atom(e);return o.setKey=function(l,d){let b=o.value;typeof d>"u"&&l in o.value?(o.value={...o.value},delete o.value[l],o.notify(b,l)):o.value[l]!==d&&(o.value={...o.value,[l]:d},o.notify(b,l))},o};if(typeof DelayNode<"u"){class e extends DelayNode{constructor(l,d,b,S){super(l),d=Math.abs(d),this.delayTime.value=b;const M=l.createGain();M.gain.value=Math.min(Math.abs(S),.995),this.feedback=M.gain;const E=l.createGain();return E.gain.value=d,this.delayGain=E,this.connect(M),this.connect(E),M.connect(this),this.connect=L=>E.connect(L),this}start(l){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,l+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(o,l,d){return new e(this,o,l,d)}}var jt={};jt.generateReverb=function(e,o){for(var l=e.audioContext||new AudioContext,d=l.sampleRate,b=e.numChannels||2,S=e.decayTime*1.5,M=Math.round(e.decayTime*d),E=Math.round(S*d),L=Math.round((e.fadeInTime||0)*d),R=Math.pow(1/1e3,1/M),Z=l.createBuffer(b,E,d),q=0;q<b;q++){for(var K=Z.getChannelData(q),U=0;U<E;U++)K[U]=Wn()*Math.pow(R,U);for(var U=0;U<L;U++)K[U]*=U/L}Gn(Z,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,o)},jt.generateGraph=function(e,o,l,d,b){var S=document.createElement("canvas");S.width=o,S.height=l;var M=S.getContext("2d");M.fillStyle="#000",M.fillRect(0,0,S.width,S.height),M.fillStyle="#fff";for(var E=o/e.length,L=l/(b-d),R=0;R<e.length;R++)M.fillRect(R*E,l-(e[R]-d)*L,1,1);return S};var Gn=function(e,o,l,d,b){if(o==0){b(e);return}var S=Vn(e),M=new OfflineAudioContext(e.numberOfChannels,S[0].length,e.sampleRate),E=M.createBufferSource();E.buffer=e;var L=M.createBiquadFilter();o=Math.min(o,e.sampleRate/2),l=Math.min(l,e.sampleRate/2),L.type="lowpass",L.Q.value=1e-4,L.frequency.setValueAtTime(o,0),L.frequency.linearRampToValueAtTime(l,d),E.connect(L),L.connect(M.destination),E.start(),M.oncomplete=function(R){b(R.renderedBuffer)},M.startRendering(),window.filterNode=L},Vn=function(e){for(var o=[],l=0;l<e.numberOfChannels;l++)o[l]=e.getChannelData(l);return o},Wn=function(){return Math.random()*2-1};let fe=e=>console.log(e);const N=(...e)=>fe(...e),Mn=e=>{if(typeof e!="string")return[];const[o,l="",d]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return o?[o,l,d?Number(d):void 0]:[]},xn={c:0,d:2,e:4,f:5,g:7,a:9,b:11},gn={"#":1,b:-1,s:1,f:-1},zt=(e,o=3)=>{const[l,d,b=o]=Mn(e);if(!l)throw new Error('not a note: "'+e+'"');const S=xn[l.toLowerCase()],M=d?.split("").reduce((E,L)=>E+gn[L],0)||0;return(Number(b)+1)*12+S+M},Me=e=>Math.pow(2,(e-69)/12)*440,D$1=(e,o,l)=>Math.min(Math.max(e,o),l),Ln=e=>12*Math.log(e/440)/Math.LN2+69,Kn=(e,o)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:l,note:d}=e;return typeof l=="number"?Ln(l):typeof d=="string"?zt(d):typeof d=="number"?d:o};function O(e,o=0,l){return isNaN(Number(e))?(!l&&N(`"${e}" is not a number, falling back to ${o}`,"warning"),o):e}const xe=(e,o)=>(e%o+o)%o,he=(e,o)=>xe(Math.round(O(e,0)),o);function ge(e,o){const{s:l,n:d=0}=e;let b=Kn(e,36),S=b-36,M,E=0;if(Array.isArray(o))E=he(d,o.length),M=o[E];else{const R=q=>zt(q)-b,Z=Object.keys(o).filter(q=>!q.startsWith("_")).reduce((q,K,U)=>!q||Math.abs(R(K))<Math.abs(R(q))?K:q,null);S=-R(Z),E=he(d,o[Z].length),M=o[Z][E]}const L=`${l}:${E}`;return{transpose:S,url:M,index:E,midi:b,label:L}}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,o,l=1,d=0){const b=Math.floor(D$1(d,0,1)*o.length),S=o.sampleRate*e,M=this.createBuffer(o.numberOfChannels,o.length,o.sampleRate);for(let E=0;E<o.numberOfChannels;E++){let L=o.getChannelData(E),R=M.getChannelData(E);for(let Z=0;Z<S;Z++){let q=(b+Z*Math.abs(l))%L.length;l<1&&(q=q*-1),R[Z]=L.at(q)||0}}return M},AudioContext.prototype.createReverb=function(e,o,l,d,b,S,M){const E=this.createConvolver();return E.generate=(L=2,R=.1,Z=15e3,q=1e3,K,U,se)=>{E.duration=L,E.fade=R,E.lp=Z,E.dim=q,E.ir=K,E.irspeed=U,E.irbegin=se,K?E.buffer=this.adjustLength(L,K,U,se):jt.generateReverb({audioContext:this,numChannels:2,decayTime:L,fadeInTime:R,lpFreqStart:Z,lpFreqEnd:q},re=>{E.buffer=re})},E.generate(e,o,l,d,b,S,M),E});var pe={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(l,d){if(super(l),!pe[d])throw new Error("vowel: unknown vowel "+d);const{gains:b,qs:S,freqs:M}=pe[d],E=l.createGain();for(let L=0;L<5;L++){const R=l.createGain();R.gain.value=b[L];const Z=l.createBiquadFilter();Z.type="bandpass",Z.Q.value=S[L],Z.frequency.value=M[L],this.connect(Z),Z.connect(R),R.connect(E)}return E.gain.value=8,this.connect=L=>E.connect(L),this}}AudioContext.prototype.createVowelFilter=function(o){return new e(this,o)}}const Tn="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oQyl7InVzZSBzdHJpY3QiO3ZhciBUZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIHllPShDLEQsTCk9PkQgaW4gQz9UZShDLEQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkx9KTpDW0RdPUw7dmFyIFN0PShDLEQsTCk9PnllKEMsdHlwZW9mIEQhPSJzeW1ib2wiP0QrIiI6RCxMKTtjbGFzcyBMIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBpPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIWk/ITE6KHRoaXMuc3RhcnRlZD1pLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBrdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYz1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYyksZVtzKzFdPS1NYXRoLnNpbihjKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsaT0xO3RoaXMuc2l6ZT5pO2k8PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgbz0wO288dGhpcy5fYml0cmV2Lmxlbmd0aDtvKyspe3RoaXMuX2JpdHJldltvXT0wO2Zvcih2YXIgYT0wO2E8dGhpcy5fd2lkdGg7YSs9Mil7dmFyIHU9dGhpcy5fd2lkdGgtYS0yO3RoaXMuX2JpdHJldltvXXw9KG8+Pj5hJjMpPDx1fX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IGQ9dVthXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG8sZCxyKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgZD11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQobyxkLHIpfXZhciBjPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7aT1lL3I8PDE7dmFyIGY9aT4+PjI7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIHA9bytmLGw9byxtPTA7bDxwO2wrPTIsbSs9cil7Y29uc3QgZD1sLGI9ZCtmLEk9YitmLHY9SStmLFA9dFtkXSx3PXRbZCsxXSxUPXRbYl0sQj10W2IrMV0sQT10W0ldLHk9dFtJKzFdLE89dFt2XSxxPXRbdisxXSx4PVAsRT13LE49aFttXSxGPWMqaFttKzFdLFY9VCpOLUIqRixrPVQqRitCKk4sUj1oWzIqbV0sWD1jKmhbMiptKzFdLHR0PUEqUi15KlgsZXQ9QSpYK3kqUixzdD1oWzMqbV0scnQ9YypoWzMqbSsxXSxudD1PKnN0LXEqcnQsaXQ9TypydCtxKnN0LG90PXgrdHQsSz1FK2V0LGo9eC10dCxhdD1FLWV0LGN0PVYrbnQsWj1rK2l0LCQ9YyooVi1udCksdXQ9Yyooay1pdCksbHQ9b3QrY3QsZ3Q9SytaLGJ0PW90LWN0LEl0PUstWixfdD1qK3V0LEJ0PWF0LSQsTXQ9ai11dCxQdD1hdCskO3RbZF09bHQsdFtkKzFdPWd0LHRbYl09X3QsdFtiKzFdPUJ0LHRbSV09YnQsdFtJKzFdPUl0LHRbdl09TXQsdFt2KzFdPVB0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2UrMV0sdT1pW2Urc10sYz1pW2UrcysxXSxoPW8rdSxmPWErYyxwPW8tdSxsPWEtYztyW3RdPWgsclt0KzFdPWYsclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPXRoaXMuX2ludj8tMToxLGE9cyoyLHU9cyozLGM9aVtlXSxoPWlbZSsxXSxmPWlbZStzXSxwPWlbZStzKzFdLGw9aVtlK2FdLG09aVtlK2ErMV0sZD1pW2UrdV0sYj1pW2UrdSsxXSxJPWMrbCx2PWgrbSxQPWMtbCx3PWgtbSxUPWYrZCxCPXArYixBPW8qKGYtZCkseT1vKihwLWIpLE89SStULHE9ditCLHg9UCt5LEU9dy1BLE49SS1ULEY9di1CLFY9UC15LGs9dytBO3JbdF09TyxyW3QrMV09cSxyW3QrMl09eCxyW3QrM109RSxyW3QrNF09TixyW3QrNV09RixyW3QrNl09VixyW3QrN109a31fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxpPWUvcjw8MSxvLGEsdT10aGlzLl9iaXRyZXY7aWYoaT09PTQpZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCB3dD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKG8sd3Q+Pj4xLHI+Pj4xKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3Qgd3Q9dVthXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChvLHd0Pj4+MSxyPj4+MSl9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+MSxwPWY+Pj4xLGw9cD4+PjE7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIG09MCxkPTA7bTw9bDttKz0yLGQrPXIpe3ZhciBiPW8rbSxJPWIrcCx2PUkrcCxQPXYrcCx3PXRbYl0sVD10W2IrMV0sQj10W0ldLEE9dFtJKzFdLHk9dFt2XSxPPXRbdisxXSxxPXRbUF0seD10W1ArMV0sRT13LE49VCxGPWhbZF0sVj1jKmhbZCsxXSxrPUIqRi1BKlYsUj1CKlYrQSpGLFg9aFsyKmRdLHR0PWMqaFsyKmQrMV0sZXQ9eSpYLU8qdHQsc3Q9eSp0dCtPKlgscnQ9aFszKmRdLG50PWMqaFszKmQrMV0saXQ9cSpydC14Km50LG90PXEqbnQreCpydCxLPUUrZXQsaj1OK3N0LGF0PUUtZXQsY3Q9Ti1zdCxaPWsraXQsJD1SK290LHV0PWMqKGstaXQpLGx0PWMqKFItb3QpLGd0PUsrWixidD1qKyQsSXQ9YXQrbHQsX3Q9Y3QtdXQ7aWYodFtiXT1ndCx0W2IrMV09YnQsdFtJXT1JdCx0W0krMV09X3QsbT09PTApe3ZhciBCdD1LLVosTXQ9ai0kO3Rbdl09QnQsdFt2KzFdPU10O2NvbnRpbnVlfWlmKG0hPT1sKXt2YXIgUHQ9YXQsbWU9LWN0LHZlPUssZ2U9LWosYmU9LWMqbHQsSWU9LWMqdXQsX2U9LWMqJCxCZT0tYypaLE1lPVB0K2JlLFBlPW1lK0llLHdlPXZlK0JlLFNlPWdlLV9lLEN0PW8rcC1tLEV0PW8rZi1tO3RbQ3RdPU1lLHRbQ3QrMV09UGUsdFtFdF09d2UsdFtFdCsxXT1TZX19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2Urc10sdT1vK2EsYz1vLWE7clt0XT11LHJbdCsxXT0wLHJbdCsyXT1jLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89dGhpcy5faW52Py0xOjEsYT1zKjIsdT1zKjMsYz1pW2VdLGg9aVtlK3NdLGY9aVtlK2FdLHA9aVtlK3VdLGw9YytmLG09Yy1mLGQ9aCtwLGI9byooaC1wKSxJPWwrZCx2PW0sUD0tYix3PWwtZCxUPW0sQj1iO3JbdF09SSxyW3QrMV09MCxyW3QrMl09dixyW3QrM109UCxyW3QrNF09dyxyW3QrNV09MCxyW3QrNl09VCxyW3QrN109Qn19bGV0IER0PW49PmNvbnNvbGUubG9nKG4pO2NvbnN0IHp0PSguLi5uKT0+RHQoLi4ubikscXQ9KG4sdCxlKT0+TWF0aC5taW4oTWF0aC5tYXgobix0KSxlKSxUdD1uPT5uLygxK24pLFd0PShuLHQpPT4obiV0K3QpJXQsTHQ9KG4sdCk9PigxK3QpKm4vKDErdCpNYXRoLmFicyhuKSksWT0obix0KT0+TWF0aC50YW5oKG4qKDErdCkpLFl0PShuLHQpPT5xdCgoMSt0KSpuLC0xLDEpLHl0PShuLHQpPT57bGV0IGU9KDErLjUqdCkqbjtjb25zdCBzPVd0KGUrMSw0KTtyZXR1cm4gMS1NYXRoLmFicyhzLTIpfSxIdD0obix0KT0+TWF0aC5zaW4oTWF0aC5QSS8yKnl0KG4sdCkpLFV0PShuLHQpPT57Y29uc3QgZT1UdChNYXRoLmxvZzFwKHQpKSxzPShuLWUvMypuKm4qbikvKDEtZS8zKTtyZXR1cm4gWShzLHQpfSxBdD0obix0LGU9ITEpPT57Y29uc3Qgcz0xKzIqdCxpPS4wNypUdChNYXRoLmxvZzFwKHQpKSxvPVkobitpLDIqdCksYT1ZKGU/aTotbitpLDIqdCksdT1vLWEsYz0xL01hdGguY29zaChzKmkpLGg9YypjLGY9TWF0aC5tYXgoMWUtOCwoZT8xOjIpKnMqaCk7cmV0dXJuIFkodS9mLHQpfSxPdD17c2N1cnZlOkx0LHNvZnQ6WSxoYXJkOll0LGN1YmljOlV0LGRpb2RlOkF0LGFzeW06KG4sdCk9PkF0KG4sdCwhMCksZm9sZDp5dCxzaW5lZm9sZDpIdCxjaGVieXNoZXY6KG4sdCk9Pntjb25zdCBlPTEwKk1hdGgubG9nMXAodCk7bGV0IHM9MSxyPW4saSxvPTA7Zm9yKGxldCBhPTE7YTw2NDthKyspe2lmKGE8Mil7bys9YT09MD9zOnI7Y29udGludWV9aT0yKm4qcy1yLHI9cyxzPWksYSUyPT09MCYmKG8rPU1hdGgubWluKDEuMyplL2EsMikqaSl9cmV0dXJuIFkobyxlLzIwKX19LEc9T2JqZWN0LmZyZWV6ZShPYmplY3Qua2V5cyhPdCkpLEt0PW49PntsZXQgdD1uO3R5cGVvZiBuPT0ic3RyaW5nIiYmKHQ9Ry5pbmRleE9mKG4pLHQ9PT0tMSYmKHp0KGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7bn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7Ry5qb2luKCIsICIpfS4KICAgICAgICBEZWZhdWx0aW5nIHRvICR7R1swXX0uYCksdD0wKSk7Y29uc3QgZT1HW3QlRy5sZW5ndGhdO3JldHVybiBPdFtlXX0sTT0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHh0PShuLHQpPT4obiV0K3QpJXQsanQ9KG4sdCxlKT0+ZSoodC1uKStuLFM9KG4sdCk9Pm5bdF0/P25bMF0sVz1uPT5uLU1hdGguZmxvb3IobiksZnQ9bj0+bnwwLE50PShuLHQsZSk9Pm48Mj8wOmp0KC10Ki41LHQqLjUsZS8obi0xKSksSD0obix0KT0+bipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIEZ0KG4sdD0xKXtyZXR1cm4gbj49dD9uLT10Om48MCYmKG4rPXQpLG59Y29uc3QgVT0xMjg7ZnVuY3Rpb24gWnQobix0KXtyZXR1cm4gdD1NYXRoLm1pbih0LDEtdCksbjx0PyhuLz10LG4rbi1uKm4tMSk6bj4xLXQ/KG49KG4tMSkvdCxuKm4rbituKzEpOjB9Y29uc3QgcHQ9e3RyaShuLHQ9LjUpe2NvbnN0IGU9MS10O3JldHVybiBuPj10PzEvZS1uL2U6bi90fSxzaW5lKG4pe3JldHVybiBNYXRoLnNpbihNYXRoLlBJKjIqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPU0odFtzXSwwLDEpLGE9TSh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtWnQobix0KX19O2Z1bmN0aW9uIFEobix0KXtyZXR1cm4gdC5sZW5ndGg+MT90W25dOnRbMF19Y29uc3QgJHQ9T2JqZWN0LmtleXMocHQpO2NsYXNzIEd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InRpbWUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToic2tldyIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToicGhhc2VvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiY3VydmUiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZGNvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZX1pbmNyZW1lbnRQaGFzZSh0KXt0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2U9dGhpcy5waGFzZS0xKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXMuYmVnaW5bMF07aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1yKXJldHVybiEwO2NvbnN0IGk9ZVswXSxvPXMuZnJlcXVlbmN5WzBdLGE9cy50aW1lWzBdLHU9cy5kZXB0aFswXSxjPXMuc2tld1swXSxoPXMucGhhc2VvZmZzZXRbMF0sZj1zLmN1cnZlWzBdLHA9cy5kY29mZnNldFswXSxsPXMubWluWzBdLG09cy5tYXhbMF0sZD0kdFtzLnNoYXBlWzBdXSxiPWlbMF0ubGVuZ3RoPz8wO3RoaXMucGhhc2U9PW51bGwmJih0aGlzLnBoYXNlPXh0KGEqbytoLDEpKTtjb25zdCBJPW8vc2FtcGxlUmF0ZTtmb3IobGV0IHY9MDt2PGI7disrKXtmb3IobGV0IFA9MDtQPGkubGVuZ3RoO1ArKyl7bGV0IHc9KHB0W2RdKHRoaXMucGhhc2UsYykrcCkqdTt3PU1hdGgucG93KHcsZiksaVtQXVt2XT1NKHcsbCxtKX10aGlzLmluY3JlbWVudFBoYXNlKEkpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsR3QpO2NsYXNzIFF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5jb2Fyc2VbMF0/PzA7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8VTt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspaVtjXVt1XT11JWE9PT0wP3JbY11bdV06aVtjXVt1LTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsUXQpO2NsYXNzIEp0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNydXNoWzBdPz84O2E9TWF0aC5tYXgoMSxhKTtmb3IobGV0IHU9MDt1PFU7dSsrKWZvcihsZXQgYz0wO2M8ci5sZW5ndGg7YysrKXtjb25zdCBoPU1hdGgucG93KDIsYS0xKTtpW2NdW3VdPU1hdGgucm91bmQocltjXVt1XSpoKS9ofXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixKdCk7Y2xhc3MgWHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuc2hhcGVbMF07YT1hPDE/YTouOTk5OTk5OTk5NixhPTIqYS8oMS1hKTtjb25zdCB1PU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxzLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBjPTA7YzxVO2MrKylmb3IobGV0IGg9MDtoPHIubGVuZ3RoO2grKylpW2hdW2NdPSgxK2EpKnJbaF1bY10vKDErYSpNYXRoLmFicyhyW2hdW2NdKSkqdTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsWHQpO2NsYXNzIFZ0e2NvbnN0cnVjdG9yKCl7U3QodGhpcywiczAiLDApO1N0KHRoaXMsInMxIiwwKX11cGRhdGUodCxlLHM9MCl7cz1NKHMsMCwxKSxlPU0oZSwwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCByPU0oMipNYXRoLnNpbihlKihkdC9zYW1wbGVSYXRlKSksMCwxLjE0KSxvPTEtTWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgdGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBWdCxuZXcgVnRdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9TShzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgcD0wO3A8VTtwKyspdT09Im5vbmUiP2lbZl1bcF09cltmXVtwXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW3BdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW3BdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtwXT1yW2ZdW3BdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW3BdPXJbZl1bcF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIsdGUpO2Z1bmN0aW9uIHoobil7Y29uc3QgdD1uKm47cmV0dXJuIG4qKDI3K3QpLygyNys5KnQpfWNvbnN0IGR0PTMuMTQxNTkyNjUzNTk7Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NTAwfSx7bmFtZToicSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkcml2ZSIsZGVmYXVsdFZhbHVlOi42OX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5wMD1bMCwwXSx0aGlzLnAxPVswLDBdLHRoaXMucDI9WzAsMF0sdGhpcy5wMz1bMCwwXSx0aGlzLnAzMj1bMCwwXSx0aGlzLnAzMz1bMCwwXSx0aGlzLnAzND1bMCwwXX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9cy5xWzBdLHU9TShNYXRoLmV4cChzLmRyaXZlWzBdKSwuMSwyZTMpO2xldCBjPXMuZnJlcXVlbmN5WzBdO2M9YyoyKmR0L3NhbXBsZVJhdGUsYz1jPjE/MTpjO2NvbnN0IGg9TWF0aC5taW4oOCxhKi4xMyk7bGV0IGY9MS91Kk1hdGgubWluKDEuNzUsMStoKTtmb3IobGV0IHA9MDtwPFU7cCsrKWZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXtjb25zdCBtPXRoaXMucDNbbF0qLjM2MDg5MSt0aGlzLnAzMltsXSouNDE3MjkrdGhpcy5wMzNbbF0qLjE3Nzg5Nit0aGlzLnAzNFtsXSouMDQzOTcyNTt0aGlzLnAzNFtsXT10aGlzLnAzM1tsXSx0aGlzLnAzM1tsXT10aGlzLnAzMltsXSx0aGlzLnAzMltsXT10aGlzLnAzW2xdLHRoaXMucDBbbF0rPSh6KHJbbF1bcF0qdS1oKm0pLXoodGhpcy5wMFtsXSkpKmMsdGhpcy5wMVtsXSs9KHoodGhpcy5wMFtsXSkteih0aGlzLnAxW2xdKSkqYyx0aGlzLnAyW2xdKz0oeih0aGlzLnAxW2xdKS16KHRoaXMucDJbbF0pKSpjLHRoaXMucDNbbF0rPSh6KHRoaXMucDJbbF0pLXoodGhpcy5wM1tsXSkpKmMsaVtsXVtwXT1tKmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsYWRkZXItcHJvY2Vzc29yIixlZSk7Y2xhc3Mgc2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZGlzdG9ydCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih7cHJvY2Vzc29yT3B0aW9uczp0fSl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5hbGdvcml0aG09S3QodC5hbGdvcml0aG0pfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87Zm9yKGxldCBhPTA7YTxVO2ErKyl7Y29uc3QgdT1NKFMocy5wb3N0Z2FpbixhKSwuMDAxLDEpLGM9TWF0aC5leHBtMShTKHMuZGlzdG9ydCxhKSk7Zm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspe2NvbnN0IGY9cltoXVthXTtpW2hdW2FdPXUqdGhpcy5hbGdvcml0aG0oZixjKX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJkaXN0b3J0LXByb2Nlc3NvciIsc2UpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2ZvcihsZXQgaT0wO2k8clswXS5sZW5ndGg7aSsrKXtjb25zdCBvPVMocy5kZXR1bmUsaSksYT1TKHMudm9pY2VzLGkpLHU9UyhzLmZyZXFzcHJlYWQsaSksYz1TKHMucGFuc3ByZWFkLGkpKi41Ky41LGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyk7bGV0IHA9UyhzLmZyZXF1ZW5jeSxpKTtwPUgocCxvLzEwMCk7Zm9yKGxldCBsPTA7bDxhO2wrKyl7Y29uc3QgbT0obCYxKT09MTtsZXQgZD1oLGI9ZjttJiYoZD1mLGI9aCk7Y29uc3QgST1IKHAsTnQoYSx1LGwpKSx2PXh0KEkvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2xdPXRoaXMucGhhc2VbbF0/P01hdGgucmFuZG9tKCk7Y29uc3QgUD1wdC5zYXdibGVwKHRoaXMucGhhc2VbbF0sdik7clswXVtpXT1yWzBdW2ldK1AqZCxyWzFdW2ldPXJbMV1baV0rUCpiLHRoaXMucGhhc2VbbF09RnQodGhpcy5waGFzZVtsXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixyZSk7Y29uc3QgbmU9MjA0ODtmdW5jdGlvbiBpZShuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3Mgb2UgZXh0ZW5kcyBMe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOm5lfSxzdXBlcih0KSx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy50aW1lQ3Vyc29yPTAsdGhpcy5oYW5uV2luZG93PWllKHRoaXMuYmxvY2tTaXplKSx0aGlzLmZmdD1uZXcga3QodGhpcy5mZnRTaXplKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMudGltZUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5tYWduaXR1ZGVzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5mZnRTaXplLzIrMSksdGhpcy5wZWFrSW5kZXhlcz1uZXcgSW50MzJBcnJheSh0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSx0aGlzLm5iUGVha3M9MH1wcm9jZXNzT0xBKHQsZSxzKXtsZXQgcj1zLnBpdGNoRmFjdG9yW3MucGl0Y2hGYWN0b3IubGVuZ3RoLTFdO3I8MCYmKHI9ciouMjUpLHI9TWF0aC5tYXgoMCxyKzEpO2Zvcih2YXIgaT0wO2k8dGhpcy5uYklucHV0cztpKyspZm9yKHZhciBvPTA7bzx0W2ldLmxlbmd0aDtvKyspe3ZhciBhPXRbaV1bb10sdT1lW2ldW29dO3RoaXMuYXBwbHlIYW5uV2luZG93KGEpLHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlcixhKSx0aGlzLmNvbXB1dGVNYWduaXR1ZGVzKCksdGhpcy5maW5kUGVha3MoKSx0aGlzLnNoaWZ0UGVha3MociksdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkKSx0aGlzLmZmdC5mcm9tQ29tcGxleEFycmF5KHRoaXMudGltZUNvbXBsZXhCdWZmZXIsdSksdGhpcy5hcHBseUhhbm5XaW5kb3codSl9dGhpcy50aW1lQ3Vyc29yKz10aGlzLmhvcFNpemV9YXBwbHlIYW5uV2luZG93KHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5ibG9ja1NpemU7ZSsrKXRbZV09dFtlXSp0aGlzLmhhbm5XaW5kb3dbZV0qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2Zvcih2YXIgdD0wLGU9MDt0PHRoaXMubWFnbml0dWRlcy5sZW5ndGg7KXtsZXQgcz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2VdLHI9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlKzFdO3RoaXMubWFnbml0dWRlc1t0XT1zKioyK3IqKjIsdCs9MSxlKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDt2YXIgdD0yO2xldCBlPXRoaXMubWFnbml0dWRlcy5sZW5ndGgtMjtmb3IoO3Q8ZTspe2xldCBzPXRoaXMubWFnbml0dWRlc1t0XTtpZih0aGlzLm1hZ25pdHVkZXNbdC0xXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QtMl0+PXMpe3QrKztjb250aW51ZX1pZih0aGlzLm1hZ25pdHVkZXNbdCsxXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QrMl0+PXMpe3QrKztjb250aW51ZX10aGlzLnBlYWtJbmRleGVzW3RoaXMubmJQZWFrc109dCx0aGlzLm5iUGVha3MrKyx0Kz0yfX1zaGlmdFBlYWtzKHQpe3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkLmZpbGwoMCk7Zm9yKHZhciBlPTA7ZTx0aGlzLm5iUGVha3M7ZSsrKXtsZXQgbz10aGlzLnBlYWtJbmRleGVzW2VdLGE9TWF0aC5yb3VuZChvKnQpO2lmKGE+dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhazt2YXIgcz0wLHI9dGhpcy5mZnRTaXplO2lmKGU+MCl7bGV0IGg9dGhpcy5wZWFrSW5kZXhlc1tlLTFdO3M9by1NYXRoLmZsb29yKChvLWgpLzIpfWlmKGU8dGhpcy5uYlBlYWtzLTEpe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZSsxXTtyPW8rTWF0aC5jZWlsKChoLW8pLzIpfWxldCB1PXMtbyxjPXItbztmb3IodmFyIGk9dTtpPGM7aSsrKXtsZXQgaD1vK2ksZj1hK2k7aWYoZj49dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztsZXQgcD0yKk1hdGguUEkqKGYtaCkvdGhpcy5mZnRTaXplLGw9TWF0aC5jb3MocCp0aGlzLnRpbWVDdXJzb3IpLG09TWF0aC5zaW4ocCp0aGlzLnRpbWVDdXJzb3IpLGQ9aCoyLGI9ZCsxLEk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltkXSx2PXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbYl0sUD1JKmwtdiptLHc9SSptK3YqbCxUPWYqMixCPVQrMTt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtUXSs9UCx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtCXSs9d319fX1yZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2Rlci1wcm9jZXNzb3IiLG9lKTtjbGFzcyBhZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waT1kdCx0aGlzLnBoaT0tdGhpcy5waSx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9dGhpcy5waSx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2xldCBpPTEsbztmb3IobGV0IGE9MDthPChyWzBdLmxlbmd0aD8/MCk7YSsrKXtjb25zdCB1PSgxLU0oUShhLHMucHVsc2V3aWR0aCksLS45OSwuOTkpKSp0aGlzLnBpLGM9UShhLHMuZGV0dW5lKSxoPUgoUShhLHMuZnJlcXVlbmN5KSxjLzEwMCk7bz1oKih0aGlzLnBpLyhzYW1wbGVSYXRlKi41KSksdGhpcy5kcGhpZis9LjEqKG8tdGhpcy5kcGhpZiksaSo9Ljk5OTgsdGhpcy5lbnZmKz0uMSooaS10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpoKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49dGhpcy5waSYmKHRoaXMucGhpLT0yKnRoaXMucGkpO2xldCBmPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkwKTt0aGlzLlkwPS41KihmK3RoaXMuWTApO2xldCBwPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkxK3UpO3RoaXMuWTE9LjUqKHArdGhpcy5ZMSk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVthXT0uMTUqKGYtcCkqdGhpcy5lbnZmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigicHVsc2Utb3NjaWxsYXRvciIsYWUpO2NvbnN0IG10PXtiaXRDOmZ1bmN0aW9uKG4sdCxlKXtyZXR1cm4gbiZ0P2U6MH0sYnI6ZnVuY3Rpb24obix0PTgpe2lmKHQ+MzIpdGhyb3cgbmV3IEVycm9yKCJicigpIFNpemUgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAzMiIpO3tsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dC0wO3MrKyllKz1tdC5iaXRDKG4sMioqcywyKioodC0ocysxKSkpO3JldHVybiBlfX0sc2luZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zaW4obi8oMTI4L01hdGguUEkpKX0sY29zZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5jb3Mobi8oMTI4L01hdGguUEkpKX0sdGFuZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4obi8oMTI4L01hdGguUEkpKX0scmVnRzpmdW5jdGlvbihuLHQpe3JldHVybiB0LnRlc3Qobi50b1N0cmluZygyKSl9fTtsZXQgSixodDtmdW5jdGlvbiBjZShuKXtpZigoSnx8aHQpPT1udWxsKXtKPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE1hdGgpLGh0PUoubWFwKHM9Pk1hdGhbc10pO2NvbnN0IHQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobXQpLGU9dC5tYXAocz0+bXRbc10pO0oucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxodC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5lKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLkosInQiLGByZXR1cm4gMCwKJHtufHwwfTtgKS5iaW5kKGdsb2JhbFRoaXMsLi4uaHQpfWNsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBvcnQub25tZXNzYWdlPXQ9PntsZXR7Y29kZVRleHQ6ZX09dC5kYXRhO2NvbnN0e2J5dGVCZWF0U3RhcnRUaW1lOnN9PXQuZGF0YTtzIT1udWxsJiYodGhpcy50PTAsdGhpcy5pbml0aWFsT2Zmc2V0PU1hdGguZmxvb3IocykpLGU9ZS50cmltKCkucmVwbGFjZSgvXmV2YWxcKHVuZXNjYXBlXChlc2NhcGUoPzpgfFwoJ3xcKCJ8XChgKSguKj8pKD86YHwnXCl8IlwpfGBcKSkucmVwbGFjZVwoXC91XChcLlwuXClcL2csWyInYF1cJDElWyInYF1cKVwpXCkkLywocixpKT0+dW5lc2NhcGUoZXNjYXBlKGkpLnJlcGxhY2UoL3UoLi4pL2csIiQxJSIpKSksdGhpcy5mdW5jPWNlKGUpfSx0aGlzLmluaXRpYWxPZmZzZXQ9bnVsbCx0aGlzLnQ9bnVsbCx0aGlzLmZ1bmM9bnVsbH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH1dfXByb2Nlc3ModCxlLHMpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTt0aGlzLnQ9PW51bGwmJih0aGlzLnQ9cy5iZWdpblswXSpzYW1wbGVSYXRlKTtjb25zdCByPWVbMF07Zm9yKGxldCBpPTA7aTxyWzBdLmxlbmd0aDtpKyspe2NvbnN0IG89UShpLHMuZGV0dW5lKSxhPUgoUShpLHMuZnJlcXVlbmN5KSxvLzEwMCk7bGV0IHU9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqYSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgZj0oKHRoaXMuZnVuYyh1KSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1baV09TShmLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsdWUpO2NvbnN0IGc9T2JqZWN0LmZyZWV6ZSh7Tk9ORTowLEFTWU06MSxNSVJST1I6MixCRU5EUDozLEJFTkRNOjQsQkVORE1QOjUsU1lOQzo2LFFVQU5UOjcsRk9MRDo4LFBXTTo5LE9SQklUOjEwLFNQSU46MTEsQ0hBT1M6MTIsUFJJTUVTOjEzLEJJTkFSWToxNCxCUk9XTklBTjoxNSxSRUNJUFJPQ0FMOjE2LFdPUk1IT0xFOjE3LExPR0lTVElDOjE4LFNJR01PSUQ6MTksRlJBQ1RBTDoyMCxGTElQOjIxfSk7ZnVuY3Rpb24gaGUobil7cmV0dXJuIG49bisyMTI3OTEyMjE0KyhuPDwxMiksbj1uXjMzNDUwNzI3MDBebj4+PjE5LG49biszNzQ3NjEzOTMrKG48PDUpLG49biszNTUwNjM1MTE2Xm48PDksbj1uKzQyNTE5OTM3OTcrKG48PDMpLG49bl4zMDQyNTk0NTY5Xm4+Pj4xNixuPj4+MH1jb25zdCBSdD1uPT4oaGUobik+Pj44KS8xNjc3NzIxNjtmdW5jdGlvbiBsZShuLHQpe2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllPWU8PDF8biYxLG4+Pj49MTtyZXR1cm4gZX1mdW5jdGlvbiBmZShuKXtjb25zdCB0PU1hdGguZmxvb3IobiksZT1uLXQscz1SdCh0KSxyPVJ0KHQrMSk7cmV0dXJuIHMrKHItcykqZX1mdW5jdGlvbiBwZShuLHQ9NCl7bGV0IGU9LjUscz0wLHI9MCxpPTE7Zm9yKGxldCBvPTA7bzx0O28rKylzKz1lKmZlKG4qaSkscis9ZSxlKj0uNSxpKj0yO3JldHVybiBzL3IqMi0xfWNvbnN0IHZ0PXt9O2NsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxc3ByZWFkIixkZWZhdWx0VmFsdWU6LjE4LG1pbjowfSx7bmFtZToicG9zaXRpb24iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwTW9kZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZToxLG1pbjoxfSx7bmFtZToicGFuc3ByZWFkIixkZWZhdWx0VmFsdWU6LjcsbWluOjAsbWF4OjF9LHtuYW1lOiJwaGFzZXJhbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfV19Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5mcmFtZUxlbj0wLHRoaXMubnVtRnJhbWVzPTAsdGhpcy5waGFzZT1bXSx0aGlzLmludlNSPTEvc2FtcGxlUmF0ZSx0aGlzLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHt0eXBlOnMscGF5bG9hZDpyfT1lLmRhdGF8fHt9O2lmKHM9PT0idGFibGUiKXtjb25zdCBpPXIua2V5O2lmKHRoaXMuZnJhbWVMZW49ci5mcmFtZUxlbiwhdnRbaV0pe2NvbnN0IG89W3IuZnJhbWVzXTtsZXQgYT1vWzBdO2ZvcihsZXQgdT0xO3U8MTt1Kyspe2NvbnN0IGM9YS5sZW5ndGg+PjEsaD1hLm1hcChmPT57Y29uc3QgcD1uZXcgRmxvYXQzMkFycmF5KGMpO2ZvcihsZXQgbD0wO2w8YztsKyspcFtsXT0oZlsyKmxdK2ZbMipsKzFdKS8yO3JldHVybiBwfSk7aWYoby5wdXNoKGgpLGE9aCxjPD0zMilicmVha312dFtpXT1vfXRoaXMudGFibGVzPXZ0W2ldLHRoaXMubnVtRnJhbWVzPXRoaXMudGFibGVzWzBdLmxlbmd0aH19fV9taXJyb3IodCl7cmV0dXJuIDEtTWF0aC5hYnMoMip0LTEpfV90b0JpdHModCxlPTIscz0xMil7Y29uc3Qgcj1zKyhlLXMpKnQ7cmV0dXJue2I6cixuOk1hdGgucm91bmQoTWF0aC5wb3coMixyKSl9fV93YXJwUGhhc2UodCxlLHMpe3N3aXRjaChzKXtjYXNlIGcuTk9ORTpyZXR1cm4gdDtjYXNlIGcuQVNZTTp7Y29uc3Qgcj0uMDErLjk5KmU7cmV0dXJuIHQ8cj8uNSp0L3I6LjUrLjUqKHQtcikvKDEtcil9Y2FzZSBnLk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LGUsZy5BU1lNKSk7Y2FzZSBnLkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMyplKTtjYXNlIGcuQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKmUpKTtjYXNlIGcuQkVORE1QOnJldHVybiBlPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMiplLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqZS0xLDIpO2Nhc2UgZy5TWU5DOntjb25zdCByPU1hdGgucG93KDE2LGUqZSk7cmV0dXJuIHQqciUxfWNhc2UgZy5RVUFOVDp7Y29uc3R7bjpyfT10aGlzLl90b0JpdHMoZSk7cmV0dXJuIGZ0KHQqcikvcn1jYXNlIGcuRk9MRDp7Y29uc3QgaT0xK01hdGgubWF4KDEsTWF0aC5yb3VuZCg3KmUpKTtyZXR1cm4gTWF0aC5hYnMoVyhpKnQpLS41KSoyfWNhc2UgZy5QV006e2NvbnN0IHI9TSguNSsuNDkqKDIqZS0xKSwwLDEpO3JldHVybiB0PHI/dC9yKi41Oi41Kyh0LXIpLygxLXIpKi41fWNhc2UgZy5PUkJJVDp7Y29uc3Qgcj0uNSplO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqMyp0KSl9Y2FzZSBnLlNQSU46e2NvbnN0IHI9LjUqZSx7bjppfT10aGlzLl90b0JpdHMoZSwxLDYpO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqaSp0KSl9Y2FzZSBnLkNIQU9TOntjb25zdCBpPSgzLjcrLjMqZSkqdCooMS10KTtyZXR1cm4gTSgoMS1lKSp0K2UqaSwwLDEpfWNhc2UgZy5QUklNRVM6e2NvbnN0IHI9bz0+e2lmKG88MilyZXR1cm4hMTtpZihvJTI9PT0wKXJldHVybiBvPT09Mjtmb3IobGV0IGE9MzthKmE8PW87YSs9MilpZihvJWE9PT0wKXJldHVybiExO3JldHVybiEwfTtsZXR7bjppfT10aGlzLl90b0JpdHMoZSwzKTtmb3IoOyFyKGkpOylpKys7cmV0dXJuIGZ0KHQqaSkvaX1jYXNlIGcuQklOQVJZOntsZXR7YjpyfT10aGlzLl90b0JpdHMoZSwzKTtyPU1hdGgucm91bmQocik7Y29uc3QgaT0xPDxyLG89ZnQodCppKTtyZXR1cm4gbGUobyxyKS9pfWNhc2UgZy5NT0RVTEFSOntjb25zdHtuOnJ9PXRoaXMuX3RvQml0cyhlKSxpPS41KmUsbz1XKHQqcikvcjtyZXR1cm4gVyh0K2kqbyl9Y2FzZSBnLkJST1dOSUFOOntjb25zdCByPS4yNSplKnBlKDY0KnQsNCk7cmV0dXJuIFcodCtyKX1jYXNlIGcuUkVDSVBST0NBTDp7Y29uc3Qgcj0yKzQqZSxpPXQqcixvPXQrKDEtdCkqcixhPW8+MWUtMTI/aS9vOjA7cmV0dXJuIE0oYSwwLDEpfWNhc2UgZy5XT1JNSE9MRTp7Y29uc3Qgcj1NKC44KmUsMCwxKSxpPS41KigxLXIpLG89LjUqKDErcik7cmV0dXJuIHQ8aT90L2kqLjU6dD5vPy41KigxKyh0LW8pLygxLW8pKTouNX1jYXNlIGcuTE9HSVNUSUM6e2xldCByPXQ7Y29uc3QgaT0zLjYrLjQqZSxvPTErTWF0aC5yb3VuZCgyKmUpO2ZvcihsZXQgYT0wO2E8bzthKyspcj1pKnIqKDEtcik7cmV0dXJuIE0ociwwLDEpfWNhc2UgZy5TSUdNT0lEOntjb25zdCByPTErMTAqZSxpPXQtLjUsbz0xLygxK01hdGguZXhwKC1yKmkpKSxhPTEvKDErTWF0aC5leHAoLjUqcikpLHU9MS8oMStNYXRoLmV4cCgtLjUqcikpO3JldHVybihvLWEpLyh1LWEpfWNhc2UgZy5GUkFDVEFMOntjb25zdCByPS41Kk1hdGguc2luKDIqTWF0aC5QSSp0KSplO3JldHVybiBXKHQrcil9Y2FzZSBnLkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQsZSl7Y29uc3Qgcz10Lmxlbmd0aCxyPWUqcztsZXQgaT1yfDA7aT49cyYmKGk9MCk7Y29uc3Qgbz1yLWksYT10W2ldO2xldCB1PWkrMTt1Pj1zJiYodT0wKTtjb25zdCBjPXRbdV07cmV0dXJuIGErKGMtYSkqb31fY2hvb3NlTWlwKHQpe3ZhciByO2NvbnN0IGU9TSh0LDFlLTYsNjQpO2xldCBzPTA7Zm9yKDtzKzE8KCgocj10aGlzLnRhYmxlcyk9PW51bGw/dm9pZCAwOnIubGVuZ3RoKXx8MSkmJmU8dGhpcy50YWJsZXNbc11bMF0ubGVuZ3RoLzg7KXMrKztyZXR1cm4gc31wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgcj1lWzBdWzBdLGk9ZVswXVsxXXx8ZVswXVswXTtpZighdGhpcy50YWJsZXMpcmV0dXJuIHIuZmlsbCgwKSxpIT09ciYmaS5zZXQociksITA7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKyspe2NvbnN0IGE9UyhzLmRldHVuZSxvKSx1PVMocy5mcmVxc3ByZWFkLG8pLGg9TShTKHMucG9zaXRpb24sbyksMCwxKSoodGhpcy5udW1GcmFtZXMtMSksZj1ofDAscD1oLWYsbD1NKFMocy53YXJwLG8pLDAsMSksbT1TKHMud2FycE1vZGUsbyksZD1TKHMudm9pY2VzLG8pLGI9TShTKHMucGhhc2VyYW5kLG8pLDAsMSksST1kPjE/TShTKHMucGFuc3ByZWFkLG8pLDAsMSk6MCx2PU1hdGguc3FydCguNS0uNSpJKSxQPU1hdGguc3FydCguNSsuNSpJKTtsZXQgdz1TKHMuZnJlcXVlbmN5LG8pO3c9SCh3LGEvMTAwKTtjb25zdCBUPTEvTWF0aC5zcXJ0KGQpO2ZvcihsZXQgQj0wO0I8ZDtCKyspe2NvbnN0IEE9KEImMSk9PTE7bGV0IHk9dixPPVA7QSYmKHk9UCxPPXYpO2NvbnN0IHg9SCh3LE50KGQsdSxCKSkqdGhpcy5pbnZTUixFPXRoaXMuX2Nob29zZU1pcCh4KSxOPXRoaXMudGFibGVzW0VdO3RoaXMucGhhc2VbQl09dGhpcy5waGFzZVtCXT8/TWF0aC5yYW5kb20oKSpiO2NvbnN0IEY9dGhpcy5fd2FycFBoYXNlKHRoaXMucGhhc2VbQl0sbCxtKSxWPXRoaXMuX3NhbXBsZUZyYW1lKE5bZl0sRiksaz10aGlzLl9zYW1wbGVGcmFtZShOW01hdGgubWluKHRoaXMubnVtRnJhbWVzLTEsZisxKV0sRik7bGV0IFI9Visoay1WKSpwO209PT1nLkZMSVAmJnRoaXMucGhhc2VbQl08bCYmKFI9LVIpLHJbb10rPVIqeSpULGlbb10rPVIqTypULHRoaXMucGhhc2VbQl09RnQodGhpcy5waGFzZVtCXSt4KX19cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixkZSksQy5XYXJwTW9kZT1nLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxDfSh7fSk7Cg==";let Lt;const Rn=()=>(Lt=new AudioContext,Lt),x$2=()=>Lt||Rn();let Ct={};function Le(e,o){const l=x$2();if(Ct[e])return Ct[e];const d=2*l.sampleRate,b=l.createBuffer(1,d,l.sampleRate),S=b.getChannelData(0);let M=0,E,L,R,Z,q,K,U;E=L=R=Z=q=K=U=0;for(let se=0;se<d;se++)if(e==="white")S[se]=Math.random()*2-1;else if(e==="brown"){let re=Math.random()*2-1;S[se]=(M+.02*re)/1.02,M=S[se]}else if(e==="pink"){let re=Math.random()*2-1;E=.99886*E+re*.0555179,L=.99332*L+re*.0750759,R=.969*R+re*.153852,Z=.8665*Z+re*.3104856,q=.55*q+re*.5329522,K=-.7616*K-re*.016898,S[se]=E+L+R+Z+q+K+U+re*.5362,S[se]*=.11,U=re*.115926}else if(e==="crackle"){const re=o*.01;Math.random()<re?S[se]=Math.random()*2-1:S[se]=0}return e!=="crackle"&&(Ct[e]=b),b}function Jt(e="white",o,l=.02){const d=x$2().createBufferSource();return d.buffer=Le(e,l),d.loop=!0,d.start(o),{node:d,stop:b=>d.stop(b)}}function Sn(e,o,l){const d=Jt("pink",l);return{node:Yn(e,d.node,o),stop:b=>d?.stop(b)}}const Ke=["pink","white","brown","crackle"];function C$1(e){const o=x$2().createGain();return o.gain.value=e,o}const me=(e,o,l,d)=>d-l===0?0:(o-e)/(d-l);function I(e,o,l,d){const b=new AudioWorkletNode(e,o,d);return Object.entries(l).forEach(([S,M])=>{M!==void 0&&(b.parameters.get(S).value=M)}),b}const k=(e,o,l,d,b,S,M,E,L,R="exponential")=>{o=O(o),l=O(l),d=O(d),b=O(b);const Z=R==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";R==="exponential"&&(S=S===0?.001:S,M=M===0?.001:M);const q=M-S,K=M,U=S+d*q,se=L-E,re=ae=>{let de;if(o>ae){let ve=me(S,K,0,o);de=ae*ve+(S>K?S:0)}else de=(ae-o)*me(K,U,0,l)+K;return R==="exponential"&&(de=de||.001),de};e.setValueAtTime(S,E),o>se?e[Z](re(se),L):o+l>se?(e[Z](re(o),E+o),e[Z](re(se),L)):(e[Z](re(o),E+o),e[Z](re(o+l),E+o+l),e.setValueAtTime(U,L)),e[Z](S,L+b)};function Nn(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function Tt(e,o,l,d={}){const{shape:b=0,...S}=d,{dcoffset:M=-.5,depth:E=1}=d,L={frequency:1,depth:E,skew:.5,phaseoffset:0,time:o,begin:o,end:l,shape:Nn(b),dcoffset:M,min:M*E,max:M*E+E,curve:1,...S};return I(e,"lfo-processor",L)}const Q$1=(e,o="linear",l)=>{const[d,b,S,M]=e;if(d==null&&b==null&&S==null&&M==null)return l??[.001,.001,1,.01];const E=S??(d!=null&&b==null||d==null&&b==null?1:.001);return[Math.max(d??0,.001),Math.max(b??0,.001),Math.min(E,1),Math.max(M??0,.01)]};function be(e,o,l,d,b,S){let{amount:M,offset:E,defaultAmount:L=1,curve:R="linear",values:Z,holdEnd:q,defaultValues:K}=b;M==null&&(M=Z.some(le=>le!=null)?L:0);const U=E??0,se=M+U;if(Math.abs(se-U)){const[le,_e,Ce,We]=Q$1(Z,R,K);k(o,le,_e,Ce,We,U,se,l,q,R)}let re,{defaultDepth:ae=1,depth:de,dcoffset:ve,...Ee}=S;return de==null&&(de=Object.values(Ee).some(le=>le!=null)?ae:0),de&&(re=Tt(e,l,d,{depth:de,dcoffset:ve,...Ee}),re.connect(o)),{lfo:re,disconnect:()=>re?.disconnect()}}let Ze=e=>e<.5?1:1-(e-.5)/.5;function Yn(e,o,l=0){const d=x$2();if(!l)return e;let b=d.createGain(),S=d.createGain();e.connect(b),o.connect(S),b.gain.value=Ze(l),S.gain.value=Ze(1-l);let M=d.createGain();return b.connect(M),S.connect(M),M}let Fn=["linear","exponential"];function ht(e,o,l,d){if((o.pattack??o.pdecay??o.psustain??o.prelease??o.penv)===void 0)return;const b=O(o.penv,1,!0),S=Fn[o.pcurve??0];let[M,E,L,R]=Q$1([o.pattack,o.pdecay,o.psustain,o.prelease],S,[.2,.001,1,.001]),Z=o.panchor??L;const q=b*100,K=0-q*Z,U=q-q*Z;k(e,M,E,L,R,K,U,l,d,S)}function pt(e,o,l){const{vibmod:d=.5,vib:b}=o;let S;if(b>0){S=x$2().createOscillator(),S.frequency.value=b;const M=x$2().createGain();return M.gain.value=d*100,S.connect(M),M.connect(e),S.start(l),S}}function rt(e,o,l,d){const b=new ConstantSourceNode(e),S=C$1(0);return S.connect(e.destination),b.connect(S),b.onended=()=>{try{S.disconnect()}catch{}try{b.disconnect()}catch{}o()},b.start(l),b.stop(d),b}const Cn=(e,o=1,l="sine")=>{const d=x$2();let b;Ke.includes(l)?(b=d.createBufferSource(),b.buffer=Le(l,2),b.loop=!0):(b=d.createOscillator(),b.type=l,b.frequency.value=e),b.start();const S=new GainNode(d,{gain:o});return b.connect(S),{node:S,stop:M=>b.stop(M)}},Hn=(e,o,l,d="sine")=>{const b=e.value*o,S=b*l;return Cn(b,S,d)};function Kt(e,o,l){const{fmh:d=1,fmi:b,fmenv:S="exp",fmattack:M,fmdecay:E,fmsustain:L,fmrelease:R,fmvelocity:Z,fmwave:q="sine",duration:K}=o;let U,se=()=>{};if(b){const re=x$2().createGain(),ae=Hn(e,d,b,q);if(U=ae.node,se=ae.stop,![M,E,L,R,Z].some(de=>de!==void 0))U.connect(e);else{const[de,ve,Ee,le]=Q$1([M,E,L,R]),_e=l+K;k(re.gain,de,ve,Ee,le,0,1,l,_e,S==="exp"?"exponential":"linear"),U.connect(re),re.connect(e)}}return{stop:se}}const ze=e=>e/(1+e),In=(e,o)=>(e%o+o)%o,Pn=(e,o)=>(1+o)*e/(1+o*Math.abs(e)),nt=(e,o)=>Math.tanh(e*(1+o)),kn=(e,o)=>D$1((1+o)*e,-1,1),Te=(e,o)=>{let l=(1+.5*o)*e;const d=In(l+1,4);return 1-Math.abs(d-2)},Qn=(e,o)=>Math.sin(Math.PI/2*Te(e,o)),Jn=(e,o)=>{const l=ze(Math.log1p(o)),d=(e-l/3*e*e*e)/(1-l/3);return nt(d,o)},Re=(e,o,l=!1)=>{const d=1+2*o,b=.07*ze(Math.log1p(o)),S=nt(e+b,2*o),M=nt(l?b:-e+b,2*o),E=S-M,L=1/Math.cosh(d*b),R=L*L,Z=Math.max(1e-8,(l?1:2)*d*R);return nt(E/Z,o)},Un=(e,o)=>Re(e,o,!0),vn=(e,o)=>{const l=10*Math.log1p(o);let d=1,b=e,S,M=0;for(let E=1;E<64;E++){if(E<2){M+=E==0?d:b;continue}S=2*e*d-b,b=d,d=S,E%2===0&&(M+=Math.min(1.3*l/E,2)*S)}return nt(M,l/20)},Se={scurve:Pn,soft:nt,hard:kn,cubic:Jn,diode:Re,asym:Un,fold:Te,sinefold:Qn,chebyshev:vn};Object.freeze(Object.keys(Se));const et=(e,o=36)=>{let{note:l,freq:d}=e;return l=l||o,typeof l=="string"&&(l=zt(l)),!d&&typeof l=="number"&&(d=Me(l)),Number(d)},it=e=>{e!=null&&(e.disconnect(),e.parameters.get("end")?.setValueAtTime(0,0))},It={};function jn(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],b=-1;do e/=l,++b;while(e>=l);return e.toFixed(1)+" "+d[b]}function On(e,o){const{speed:l=1}=e,{transpose:d,url:b,index:S,midi:M,label:E}=ge(e,o);let L=Math.abs(l)*Math.pow(2,d/12);return{transpose:d,url:b,index:S,midi:M,label:E,playbackRate:L}}const En=async(e,o,l)=>{let{url:d,label:b,playbackRate:S}=On(e,o);const M=x$2(),E=await Ne(d,M,b);return e.unit==="c"&&(S=S*E.duration),{buffer:E,playbackRate:S}},Dn=async(e,o,l)=>{let{buffer:d,playbackRate:b}=await En(e,o);e.speed<0&&(d=An(d));const S=x$2().createBufferSource();S.buffer=d,S.playbackRate.value=b;const{loopBegin:M=0,loopEnd:E=1,begin:L=0,end:R=1}=e,Z=L*S.buffer.duration;e.loop&&(S.loop=!0,S.loopStart=M*S.buffer.duration-Z,S.loopEnd=E*S.buffer.duration-Z);const q=S.buffer.duration/S.playbackRate.value,K=(R-L)*q;return{bufferSource:S,offset:Z,bufferDuration:q,sliceDuration:K}},Ne=(e,o,l,d=0)=>{const b=l?`sound "${l}:${d}"`:"sample";if(e=e.replace("#","%23"),!It[e]){N(`[sampler] load ${b}..`,"load-sample",{url:e});const S=Date.now();It[e]=fetch(e).then(M=>M.arrayBuffer()).then(async M=>{const E=Date.now()-S,L=jn(M.byteLength);return N(`[sampler] load ${b}... done! loaded ${L} in ${E}ms`,"loaded-sample",{url:e}),await o.decodeAudioData(M)})}return It[e]};function An(e){const o=x$2(),l=o.createBuffer(e.numberOfChannels,e.length,o.sampleRate);for(let d=0;d<e.numberOfChannels;d++)l.copyToChannel(e.getChannelData(d).slice().reverse(),d,d);return l}function we(e){if(e.startsWith("bubo:")){const[o,l]=e.split(":");e=`github:Bubobubobubobubo/dough-${l}`}return e}function Ye(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let l=e.slice(7);l=l.endsWith("/")?l.slice(0,-1):l;let d=l.split("/"),b=d[0],S=d.length>=2?d[1]:"samples",M=d.length>=3?d[2]:"main",E=d.slice(3);return E.push(o||""),E=E.join("/"),`https://raw.githubusercontent.com/${b}/${S}/${M}/${E}`}const qn=(e,o,l=e._base||"")=>Object.entries(e).forEach(([d,b])=>{if(typeof b=="string"&&(b=[b]),typeof b!="object")throw new Error("wrong sample map format for "+d);l=b._base||l,l=we(l),l.startsWith("github:")&&(l=Ye(l,""));const S=M=>l+M;Array.isArray(b)?b=b.map(S):b=Object.fromEntries(Object.entries(b).map(([M,E])=>[M,(typeof E=="string"?[E]:E).map(S)])),o(d,b)});let Fe={};function $n(e){const o=Object.entries(Fe).find(([l])=>e.startsWith(l));if(o)return o[1]}async function _n(e){const o=$n(e);if(o)return o(e);if(e=we(e),e.startsWith("github:")&&(e=Ye(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[b,S]=e.split("shabda:");e=`https://shabda.ndre.gr/${S}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[b,S]=e.split("shabda/speech");S=S.startsWith("/")?S.substring(1):S;let[M,E]=S.split(":"),L="f",R="en-GB";M&&([R,L]=M.split("/")),e=`https://shabda.ndre.gr/speech/${E}.json?gender=${L}&language=${R}&strudel=1'`}if(typeof fetch!="function")return;const l=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const d=await fetch(e).then(b=>b.json()).catch(b=>{throw console.error(b),new Error(`error loading "${e}"`)});return[d,d._base||l]}const to=async(e,o=e._base||"",l={})=>{if(typeof e=="string"){const[S,M]=await _n(e);return to(S,o||M,l)}const{prebake:d,tag:b}=l;qn(e,(S,M)=>{oo(S,M,{baseUrl:o,prebake:d,tag:b})},o)},Xe=[];async function eo(e,o,l,d,b){let{s:S,nudge:M=0,cut:E,loop:L,clip:R=void 0,n:Z=0,speed:q=1,duration:K}=o;if(q===0)return;const U=x$2();let[se,re,ae,de]=Q$1([o.attack,o.decay,o.sustain,o.release]);const{bufferSource:ve,sliceDuration:Ee,offset:le}=await Dn(o,d);if(U.currentTime>e){N(`[sampler] still loading sound "${S}:${Z}"`,"highlight");return}if(!ve){N(`[sampler] could not load "${S}:${Z}"`,"error");return}let _e=pt(ve.detune,o,e);const Ce=e+M;ve.start(Ce,le);const We=U.createGain(),He=ve.connect(We);R==null&&L==null&&o.release==null&&(K=Ee);let Mt=e+K;k(He.gain,se,re,ae,de,0,1,e,Mt,"linear"),ht(ve.detune,o,e,Mt);const ut=U.createGain();He.connect(ut),ve.onended=function(){ve.disconnect(),_e?.stop(),He.disconnect(),ut.disconnect(),l()};let Nt=Mt+de+.01;ve.stop(Nt);const St={node:ut,bufferSource:ve,stop:xt=>{ve.stop(xt)}};if(E!==void 0){const xt=Xe[E];xt&&(xt.node.gain.setValueAtTime(1,Ce),xt.node.gain.linearRampToValueAtTime(0,Ce+.01)),Xe[E]=St}return St}function no(e,o,l){j(e,(d,b,S)=>eo(d,b,S,o),{type:"sample",samples:o,...l})}function oo(e,o,l){e.startsWith("wt_")?Be(e,o,l):no(e,o,l)}const vt="System Standard",B=map();function j(e,o,l={}){e=e.toLowerCase().replace(/\s+/g,"_"),B.setKey(e,{onTrigger:o,data:l})}const uo=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(l=>l.kind==="audiooutput"&&l.deviceId!=="default");const o=new Map;return o.set(vt,""),e.forEach(l=>{o.set(l.label,l.deviceId)}),o};let mt={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};new Map(Object.entries(mt));let Qe=[],Pt;function mo(){if(!Pt){const e=x$2(),o=Qe.concat([Tn]);Pt=Promise.all(o.map(l=>e.audioWorklet.addModule(l)))}return Pt}async function bo(e={}){const{disableWorklets:o=!1,maxPolyphony:l,audioDeviceName:d=vt,multiChannelOrbits:b=!1}=e;if(typeof window>"u")return;const S=x$2();if(d!=null&&d!=vt)try{const M=(await uo()).get(d),E=(M??"").length>0;S.sinkId!==M&&E&&await S.setSinkId(M),N(`[superdough] Audio Device set to ${d}, it might take a few seconds before audio plays on all output channels`)}catch{N("[superdough] failed to set audio interface","warning")}if(await S.resume(),o){N("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await mo(),N("[superdough] AudioWorklets loaded")}catch(M){console.warn("could not load AudioWorklet effects",M)}N("[superdough] ready")}const Vo=["triangle","square","sawtooth","sine"],Wo=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function fo(e,o){const l=e,d=new Float32Array(o);for(let b=0;b<o;b++){const S=b*2/o-1;d[b]=Math.tanh(S*l)}return d}function ec(){[...Vo].forEach(e=>{j(e,(o,l,d)=>{const[b,S,M,E]=Q$1([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]);let L=xo(e,o,l),{node:R,stop:Z}=L;const q=C$1(.3),{duration:K}=l;R.onended=()=>{R.disconnect(),q.disconnect(),d()};const U=C$1(1);let se=R.connect(q).connect(U);const re=o+K;k(se.gain,b,S,M,E,0,1,o,re,"linear");const ae=re+E+.01;return Z(ae),{node:se,stop:de=>{Z(de)}}},{type:"synth",prebake:!0})}),j("sbd",(e,o,l)=>{const{duration:d,decay:b=.5,pdecay:S=.5,penv:M=36,clip:E}=o,L=x$2(),R=.02,Z=1.2,q=.025,K=1,U=L.createOscillator();U.type="triangle",U.frequency.value=et(o,29),U.detune.setValueAtTime(M*100,0),U.detune.setValueAtTime(M*100,e),U.detune.exponentialRampToValueAtTime(.001,e+S);const se=C$1(1);se.gain.setValueAtTime(1,e+R),se.gain.exponentialRampToValueAtTime(.001,e+R+b),U.start(e);const re=Jt("brown",e,2),ae=C$1(1);ae.gain.setValueAtTime(Z,e),ae.gain.exponentialRampToValueAtTime(.001,e+q);const de=new WaveShaperNode(L);de.curve=fo(2,L.sampleRate);const ve=C$1(K);U.onended=()=>{U.disconnect(),se.disconnect(),de.disconnect(),re.node.disconnect(),ae.disconnect(),ve.disconnect(),l()};const Ee=U.connect(de).connect(se).connect(ve);re.node.connect(ae).connect(ve);let le=e+b+.01;return E!=null&&(le=Math.min(e+E*d,le)),ve.gain.setValueAtTime(K,le-.01),ve.gain.linearRampToValueAtTime(0,le),U.stop(le),re.stop(le),{node:Ee,stop:_e=>{U.stop(_e)}}},{type:"synth",prebake:!0}),j("supersaw",(e,o,l)=>{const d=x$2();let{duration:b,n:S,unison:M=5,spread:E=.6,detune:L}=o;L=L??S??.18;const R=et(o),[Z,q,K,U]=Q$1([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),se=e+b,re=se+U+.01,ae=D$1(M,1,100);let de=ae>1?D$1(E,0,1):0,ve=I(d,"supersaw-oscillator",{frequency:R,begin:e,end:re,freqspread:L,voices:ae,panspread:de},{outputChannelCount:[2]});const Ee=1/Math.sqrt(ae);ht(ve.parameters.get("detune"),o,e,se);const le=pt(ve.parameters.get("detune"),o,e),_e=Kt(ve.parameters.get("frequency"),o,e);let Ce=C$1(1);Ce=ve.connect(Ce),k(Ce.gain,Z,q,K,U,0,.3*Ee,e,se,"linear");let We=rt(d,()=>{it(ve),Ce.disconnect(),l(),_e?.stop(),le?.stop()},e,re);return{node:Ce,stop:He=>{We.stop(He)}}},{prebake:!0,type:"synth"}),j("bytebeat",(e,o,l)=>{const d=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:b=0}=o,S=et(o),{byteBeatExpression:M=d[b%d.length],byteBeatStartTime:E}=o,L=x$2();let{duration:R}=o;const[Z,q,K,U]=Q$1([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),se=e+R,re=se+U+.01;let ae=I(L,"byte-beat-processor",{frequency:S,begin:e,end:re},{outputChannelCount:[2]});ae.port.postMessage({codeText:M,byteBeatStartTime:E,frequency:S});let de=C$1(1);de=ae.connect(de),k(de.gain,Z,q,K,U,0,1,e,se,"linear");let ve=rt(L,()=>{it(ae),de.disconnect(),l()},e,re);return{node:de,stop:Ee=>{ve.stop(Ee)}}},{prebake:!0,type:"synth"}),j("pulse",(e,o,l)=>{const d=x$2();let{pwrate:b,pwsweep:S}=o;S==null&&(b!=null?S=.3:S=0),b==null&&S!=null&&(b=1);let{duration:M,pw:E=.5}=o;const L=et(o),[R,Z,q,K]=Q$1([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),U=e+M,se=U+K+.01;let re=I(d,"pulse-oscillator",{frequency:L,begin:e,end:se,pulsewidth:E},{outputChannelCount:[2]});ht(re.parameters.get("detune"),o,e,U);const ae=pt(re.parameters.get("detune"),o,e),de=Kt(re.parameters.get("frequency"),o,e);let ve=C$1(1);ve=re.connect(ve),k(ve.gain,R,Z,q,K,0,1,e,U,"linear");let Ee;S!=0&&(Ee=Tt(d,e,se,{frequency:b,depth:S}),Ee.connect(re.parameters.get("pulsewidth")));let le=rt(d,()=>{it(re),it(Ee),ve.disconnect(),l(),de?.stop(),ae?.stop()},e,se);return{node:ve,stop:_e=>{le.stop(_e)}}},{prebake:!0,type:"synth"}),[...Ke].forEach(e=>{j(e,(o,l,d)=>{const[b,S,M,E]=Q$1([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]);let L,{density:R}=l;L=Jt(e,o,R);let{node:Z,stop:q,triggerRelease:K}=L;const U=C$1(.3),{duration:se}=l;Z.onended=()=>{Z.disconnect(),U.disconnect(),d()};const re=C$1(1);let ae=Z.connect(U).connect(re);const de=o+se;k(ae.gain,b,S,M,E,0,1,o,de,"linear");const ve=de+E+.01;return K?.(ve),q(ve),{node:ae,stop:Ee=>{q(Ee)}}},{type:"synth",prebake:!0})}),Wo.forEach(([e,o])=>B.set({...B.get(),[e]:B.get()[o]}))}function Mo(e,o){const l=new Float32Array(e+1),d=new Float32Array(e+1),b=x$2(),S=b.createOscillator(),M={sawtooth:R=>[0,-1/R],square:R=>[0,R%2===0?0:1/R],triangle:R=>[R%2===0?0:1/(R*R),0]};if(!M[o])throw new Error(`unknown wave type ${o}`);l[0]=0,d[0]=0;let E=1;for(;E<=e;){const[R,Z]=M[o](E);l[E]=R,d[E]=Z,E++}const L=b.createPeriodicWave(l,d);return S.setPeriodicWave(L),S}function xo(e,o,l){let{n:d,duration:b,noise:S=0}=l,M;!d||e==="sine"?(M=x$2().createOscillator(),M.type=e||"triangle"):M=Mo(d,e),M.frequency.value=et(l),M.start(o);let E=pt(M.detune,l,o);ht(M.detune,l,o,o+b);const L=Kt(M.frequency,l,o);let R;return S&&(R=Sn(M,S,o)),{node:R?.node||M,stop:Z=>{L.stop(Z),E?.stop(Z),R?.stop(Z),M.stop(Z)},triggerRelease:Z=>{}}}let ct;const Ue=()=>{};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?Ue():e.data?.dough&&ct?.node.port.postMessage(e.data)});const Ge=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),Ve=new Set;async function zo(e,o,l=2048){const d=`${e},${l}`;if(!Ve.has(d)){const b=(await No(e,o)).getChannelData(0),S=b.length,M=Math.max(1,Math.floor(S/l)),E=new Array(M);for(let L=0;L<M;L++){const R=L*l;E[L]=b.subarray(R,R+l)}return Ve.add(d),{frames:E,frameLen:l,numFrames:M,key:d}}return{frameLen:l,key:d}}function To(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],b=-1;do e/=l,++b;while(e>=l);return e.toFixed(1)+" "+d[b]}function Ro(e){const o=new DataView(e);let l=12;for(;l+8<=o.byteLength;){const d=String.fromCharCode(o.getUint8(l),o.getUint8(l+1),o.getUint8(l+2),o.getUint8(l+3)),b=o.getUint32(l+4,!0);if(d==="fmt ")return o.getUint32(l+12,!0);l+=8+b+(b&1)}return null}async function So(e){const o=Ro(e)||44100;return await new OfflineAudioContext(1,1,o).decodeAudioData(e)}const Qt={},No=(e,o)=>{if(e=e.replace("#","%23"),!Qt[e]){N(`[wavetable] load table ${o}..`,"load-table",{url:e});const l=Date.now();Qt[e]=fetch(e).then(d=>d.arrayBuffer()).then(async d=>{const b=Date.now()-l,S=To(d.byteLength);return N(`[wavetable] load table ${o}... done! loaded ${S} in ${b}ms`,"loaded-table",{url:e}),await So(d)})}return Qt[e]};function Be(e,o,l){j(e,(d,b,S,M)=>wo(d,b,S,o,M,l?.frameLen??2048),{type:"wavetable",tables:o,...l})}async function wo(e,o,l,d,b,S){const{s:M,n:E=0,duration:L,clip:R}=o,Z=x$2(),[q,K,U,se]=Q$1([o.attack,o.decay,o.sustain,o.release]);let{warpmode:re}=o;typeof re=="string"&&(re=Ge[re.toUpperCase()]??Ge.NONE);const ae=et(o),{url:de,label:ve}=ge(o,d),Ee=await zo(de,ve,S);let le=e+L;R!==void 0&&(le=Math.min(e+R*L,le));const _e=le+se,Ce=_e+.01,We=I(Z,"wavetable-oscillator-processor",{begin:e,end:Ce,frequency:ae,freqspread:o.detune,position:o.wt,warp:o.warp,warpMode:re,voices:Math.max(o.unison??1,1),panspread:o.spread,phaserand:o.wtphaserand??o.unison>1?1:0},{outputChannelCount:[2]});if(We.port.postMessage({type:"table",payload:Ee}),Z.currentTime>e){N(`[wavetable] still loading sound "${M}:${E}"`,"highlight");return}const He=[o.wtattack,o.wtdecay,o.wtsustain,o.wtrelease],Mt=[o.warpattack,o.warpdecay,o.warpsustain,o.warprelease],ut=We.parameters,Nt=ut.get("position"),St=ut.get("warp");let xt=o.wtrate;o.wtsync!=null&&(xt=b*o.wtsync);const $t=be(Z,Nt,e,_e,{offset:o.wt,amount:o.wtenv,defaultAmount:.5,values:He,holdEnd:le,defaultValues:[0,.5,0,.1]},{frequency:xt,depth:o.wtdepth,defaultDepth:.5,shape:o.wtshape,skew:o.wtskew,dcoffset:o.wtdc??0});let qt=o.warprate;o.warpsync!=null&&(qt=qt=b*o.warpsync);const Vt=be(Z,St,e,_e,{offset:o.warp,amount:o.warpenv,defaultAmount:.5,values:Mt,holdEnd:le,defaultValues:[0,.5,0,.1]},{frequency:qt,depth:o.warpdepth,defaultDepth:.5,shape:o.warpshape,skew:o.warpskew,dcoffset:o.warpdc??0}),Ut=pt(We.parameters.get("detune"),o,e),Yt=Kt(We.parameters.get("frequency"),o,e),ai=Z.createGain(),si=We.connect(ai);k(si.gain,q,K,U,se,0,.3,e,le,"linear"),ht(We.parameters.get("detune"),o,e,le);const di={node:si,source:We},At=rt(Z,()=>{it(We),Ut?.stop(),Yt?.stop(),si.disconnect(),$t?.disconnect(),Vt?.disconnect(),l()},e,Ce);return di.stop=hn=>{At.stop(hn)},di}typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_THREE=BigInt(3),C_FIVE=BigInt(5),C_TEN=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(e,o){try{e=BigInt(e)}catch{throw InvalidParameter()}return e*o}function ifloor(e){return typeof e=="bigint"?e:Math.floor(e)}function newFraction(e,o){if(o===C_ZERO)throw DivisionByZero();const l=Object.create(Fraction.prototype);l.s=e<C_ZERO?-C_ONE:C_ONE,e=e<C_ZERO?-e:e;const d=gcd$1(e,o);return l.n=e/d,l.d=o/d,l}const FACTORSTEPS=[C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO,C_TWO*C_TWO,C_TWO*C_THREE,C_TWO,C_TWO*C_THREE];function factorize(e){const o=Object.create(null);if(e<=C_ONE)return o[e]=C_ONE,o;const l=d=>{o[d]=(o[d]||C_ZERO)+C_ONE};for(;e%C_TWO===C_ZERO;)l(C_TWO),e/=C_TWO;for(;e%C_THREE===C_ZERO;)l(C_THREE),e/=C_THREE;for(;e%C_FIVE===C_ZERO;)l(C_FIVE),e/=C_FIVE;for(let d=0,b=C_TWO+C_FIVE;b*b<=e;){for(;e%b===C_ZERO;)l(b),e/=b;b+=FACTORSTEPS[d],d=d+1&7}return e>C_ONE&&l(e),o}const parse$7=function(e,o){let l=C_ZERO,d=C_ONE,b=C_ONE;if(e!=null)if(o!==void 0){if(typeof e=="bigint")l=e;else{if(isNaN(e))throw InvalidParameter();if(e%1!==0)throw NonIntegerParameter();l=BigInt(e)}if(typeof o=="bigint")d=o;else{if(isNaN(o))throw InvalidParameter();if(o%1!==0)throw NonIntegerParameter();d=BigInt(o)}b=l*d}else if(typeof e=="object"){if("d"in e&&"n"in e)l=BigInt(e.n),d=BigInt(e.d),"s"in e&&(l*=BigInt(e.s));else if(0 in e)l=BigInt(e[0]),1 in e&&(d=BigInt(e[1]));else if(typeof e=="bigint")l=e;else throw InvalidParameter();b=l*d}else if(typeof e=="number"){if(isNaN(e))throw InvalidParameter();if(e<0&&(b=-C_ONE,e=-e),e%1===0)l=BigInt(e);else{let S=1,M=0,E=1,L=1,R=1,Z=1e7;for(e>=1&&(S=10**Math.floor(1+Math.log10(e)),e/=S);E<=Z&&R<=Z;){let q=(M+L)/(E+R);if(e===q){E+R<=Z?(l=M+L,d=E+R):R>E?(l=L,d=R):(l=M,d=E);break}else e>q?(M+=L,E+=R):(L+=M,R+=E),E>Z?(l=L,d=R):(l=M,d=E)}l=BigInt(l)*BigInt(S),d=BigInt(d)}}else if(typeof e=="string"){let S=0,M=C_ZERO,E=C_ZERO,L=C_ZERO,R=C_ONE,Z=C_ONE,q=e.replace(/_/g,"").match(/\d+|./g);if(q===null)throw InvalidParameter();if(q[S]==="-"?(b=-C_ONE,S++):q[S]==="+"&&S++,q.length===S+1?E=assign(q[S++],b):q[S+1]==="."||q[S]==="."?(q[S]!=="."&&(M=assign(q[S++],b)),S++,(S+1===q.length||q[S+1]==="("&&q[S+3]===")"||q[S+1]==="'"&&q[S+3]==="'")&&(E=assign(q[S],b),R=C_TEN**BigInt(q[S].length),S++),(q[S]==="("&&q[S+2]===")"||q[S]==="'"&&q[S+2]==="'")&&(L=assign(q[S+1],b),Z=C_TEN**BigInt(q[S+1].length)-C_ONE,S+=3)):q[S+1]==="/"||q[S+1]===":"?(E=assign(q[S],b),R=assign(q[S+2],C_ONE),S+=3):q[S+3]==="/"&&q[S+1]===" "&&(M=assign(q[S],b),E=assign(q[S+2],b),R=assign(q[S+4],C_ONE),S+=5),q.length<=S)d=R*Z,b=l=L+d*M+Z*E;else throw InvalidParameter()}else if(typeof e=="bigint")l=e,b=e,d=C_ONE;else throw InvalidParameter();if(d===C_ZERO)throw DivisionByZero();P.s=b<C_ZERO?-C_ONE:C_ONE,P.n=l<C_ZERO?-l:l,P.d=d<C_ZERO?-d:d};function modpow(e,o,l){let d=C_ONE;for(;o>C_ZERO;e=e*e%l,o>>=C_ONE)o&C_ONE&&(d=d*e%l);return d}function cycleLen(e,o){for(;o%C_TWO===C_ZERO;o/=C_TWO);for(;o%C_FIVE===C_ZERO;o/=C_FIVE);if(o===C_ONE)return C_ZERO;let l=C_TEN%o,d=1;for(;l!==C_ONE;d++)if(l=l*C_TEN%o,d>MAX_CYCLE_LEN)return C_ZERO;return BigInt(d)}function cycleStart(e,o,l){let d=C_ONE,b=modpow(C_TEN,l,o);for(let S=0;S<300;S++){if(d===b)return BigInt(S);d=d*C_TEN%o,b=b*C_TEN%o}return 0}function gcd$1(e,o){if(!e)return o;if(!o)return e;for(;;){if(e%=o,!e)return o;if(o%=e,!o)return e}}function Fraction(e,o){if(parse$7(e,o),this instanceof Fraction)e=gcd$1(P.d,P.n),this.s=P.s,this.n=P.n/e,this.d=P.d/e;else return newFraction(P.s*P.n,P.d)}const DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(e,o){return parse$7(e,o),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(e,o){return parse$7(e,o),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(e,o){return parse$7(e,o),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(e,o){return parse$7(e,o),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(e,o){if(e===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$7(e,o),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(e,o){return parse$7(e,o),newFraction(gcd$1(P.n,this.n)*gcd$1(P.d,this.d),P.d*this.d)},lcm:function(e,o){return parse$7(e,o),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd$1(P.n,this.n)*gcd$1(P.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(e,o){if(parse$7(e,o),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let l=factorize(this.n),d=factorize(this.d),b=C_ONE,S=C_ONE;for(let M in l)if(M!=="1"){if(M==="0"){b=C_ZERO;break}if(l[M]*=P.n,l[M]%P.d===C_ZERO)l[M]/=P.d;else return null;b*=BigInt(M)**l[M]}for(let M in d)if(M!=="1"){if(d[M]*=P.n,d[M]%P.d===C_ZERO)d[M]/=P.d;else return null;S*=BigInt(M)**d[M]}return P.s<C_ZERO?newFraction(S,b):newFraction(b,S)},log:function(e,o){if(parse$7(e,o),this.s<=C_ZERO||P.s<=C_ZERO)return null;const l=Object.create(null),d=factorize(P.n),b=factorize(P.d),S=factorize(this.n),M=factorize(this.d);for(const R in b)d[R]=(d[R]||C_ZERO)-b[R];for(const R in M)S[R]=(S[R]||C_ZERO)-M[R];for(const R in d)R!=="1"&&(l[R]=!0);for(const R in S)R!=="1"&&(l[R]=!0);let E=null,L=null;for(const R in l){const Z=d[R]||C_ZERO,q=S[R]||C_ZERO;if(Z===C_ZERO){if(q!==C_ZERO)return null;continue}let K=q,U=Z;const se=gcd$1(K,U);if(K/=se,U/=se,E===null&&L===null)E=K,L=U;else if(K*L!==E*U)return null}return E!==null&&L!==null?newFraction(E,L):null},equals:function(e,o){return parse$7(e,o),this.s*this.n*P.d===P.s*P.n*this.d},lt:function(e,o){return parse$7(e,o),this.s*this.n*P.d<P.s*P.n*this.d},lte:function(e,o){return parse$7(e,o),this.s*this.n*P.d<=P.s*P.n*this.d},gt:function(e,o){return parse$7(e,o),this.s*this.n*P.d>P.s*P.n*this.d},gte:function(e,o){return parse$7(e,o),this.s*this.n*P.d>=P.s*P.n*this.d},compare:function(e,o){parse$7(e,o);let l=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<l)-(l<C_ZERO)},ceil:function(e){return e=C_TEN**BigInt(e||0),newFraction(ifloor(this.s*e*this.n/this.d)+(e*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),e)},floor:function(e){return e=C_TEN**BigInt(e||0),newFraction(ifloor(this.s*e*this.n/this.d)-(e*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),e)},round:function(e){return e=C_TEN**BigInt(e||0),newFraction(ifloor(this.s*e*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(e*this.n%this.d)>this.d?C_ONE:C_ZERO),e)},roundTo:function(e,o){parse$7(e,o);const l=this.n*P.d,d=this.d*P.n,b=l%d;let S=ifloor(l/d);return b+b>=d&&S++,newFraction(this.s*S*P.n,P.d)},divisible:function(e,o){return parse$7(e,o),P.n===C_ZERO?!1:this.n*P.d%(P.n*this.d)===C_ZERO},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e=15){let o=this.n,l=this.d,d=cycleLen(o,l),b=cycleStart(o,l,d),S=this.s<C_ZERO?"-":"";if(S+=ifloor(o/l),o%=l,o*=C_TEN,o&&(S+="."),d){for(let M=b;M--;)S+=ifloor(o/l),o%=l,o*=C_TEN;S+="(";for(let M=d;M--;)S+=ifloor(o/l),o%=l,o*=C_TEN;S+=")"}else for(let M=e;o&&M--;)S+=ifloor(o/l),o%=l,o*=C_TEN;return S},toFraction:function(e=!1){let o=this.n,l=this.d,d=this.s<C_ZERO?"-":"";if(l===C_ONE)d+=o;else{const b=ifloor(o/l);e&&b>C_ZERO&&(d+=b,d+=" ",o%=l),d+=o,d+="/",d+=l}return d},toLatex:function(e=!1){let o=this.n,l=this.d,d=this.s<C_ZERO?"-":"";if(l===C_ONE)d+=o;else{const b=ifloor(o/l);e&&b>C_ZERO&&(d+=b,o%=l),d+="\\frac{",d+=o,d+="}{",d+=l,d+="}"}return d},toContinued:function(){let e=this.n,o=this.d;const l=[];for(;o;){l.push(ifloor(e/o));const d=e%o;e=o,o=d}return l},simplify:function(e=.001){const o=BigInt(Math.ceil(1/e)),l=this.abs(),d=l.toContinued();for(let b=1;b<d.length;b++){let S=newFraction(d[b-1],C_ONE);for(let E=b-2;E>=0;E--)S=S.inverse().add(d[E]);let M=S.sub(l);if(M.n*o<M.d)return S.mul(this.s)}return this}};const logKey="strudel.log";let debounce=1e3,lastMessage,lastTime;function errorLogger$1(e,o="cyclist"){process.env.NODE_ENV==="development"&&console.error(e),logger$2(`[${o}] error: ${e.message}`)}function logger$2(e,o,l={}){let d=performance.now();lastMessage===e&&d-lastTime<debounce||(lastMessage=e,lastTime=d,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:e,type:o,data:l}})))}logger$2.key=logKey;const isNoteWithOctave=e=>/^[a-gA-G][#bsf]*[0-9]*$/.test(e),isNote=e=>/^[a-gA-G][#bsf]*-?[0-9]*$/.test(e),tokenizeNote$3=e=>{if(typeof e!="string")return[];const[o,l="",d]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return o?[o,l,d?Number(d):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset$1=e=>e?.split("").reduce((o,l)=>o+accs$2[l],0)||0,noteToMidi$1=(e,o=3)=>{const[l,d,b=o]=tokenizeNote$3(e);if(!l)throw new Error('not a note: "'+e+'"');const S=chromas$2[l.toLowerCase()],M=getAccidentalsOffset$1(d);return(Number(b)+1)*12+S+M},midiToFreq$2=e=>Math.pow(2,(e-69)/12)*440,freqToMidi$2=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi$1=(e,o)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:l,note:d}=e;if(typeof l=="number")return freqToMidi$2(l);if(typeof d=="string")return noteToMidi$1(d);if(typeof d=="number")return d;if(!o)throw new Error("valueToMidi: expected freq or note to be set");return o},getEventOffsetMs=(e,o)=>(e-o)*1e3,getFreq=e=>midiToFreq$2(typeof e=="number"?e:noteToMidi$1(e)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=e=>{const o=Math.floor(e/12)-1;return pcs$1[e%12]+o},_mod$2=(e,o)=>(e%o+o)%o,averageArray=e=>e.reduce((o,l)=>o+l)/e.length;function nanFallback$1(e,o=0){return isNaN(Number(e))?(logger$2(`"${e}" is not a number, falling back to ${o}`,"warning"),o):e}const getSoundIndex$1=(e,o)=>_mod$2(Math.round(nanFallback$1(e??0,0)),o),getPlayableNoteValue=e=>{let{value:o,context:l}=e,d=o;if(typeof d=="object"&&!Array.isArray(d)&&(d=d.note||d.n||d.value,d===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(o)}`);if(typeof d=="number"&&l.type!=="frequency")d=midiToFreq$2(e.value);else if(typeof d=="number"&&l.type==="frequency")d=e.value;else if(typeof d!="string"||!isNote(d))throw new Error("not a note: "+JSON.stringify(d));return d},getFrequency=e=>{let{value:o,context:l}=e;if(typeof o=="object")return o.freq?o.freq:getFreq(o.note||o.n||o.value);if(typeof o=="number"&&l.type!=="frequency")o=midiToFreq$2(e.value);else if(typeof o=="string"&&isNote(o))o=midiToFreq$2(noteToMidi$1(e.value));else if(typeof o!="number")throw new Error("not a note or frequency: "+o);return o},rotate$2=(e,o)=>e.slice(o).concat(e.slice(0,o)),pipe=(...e)=>e.reduce((o,l)=>(...d)=>o(l(...d)),o=>o),compose=(...e)=>pipe(...e.reverse()),removeUndefineds=e=>e.filter(o=>o!=null),flatten=e=>[].concat(...e),id=e=>e,constant=(e,o)=>e,listRange=(e,o)=>Array.from({length:o-e+1},(l,d)=>d+e);function curry(e,o,l=e.length){const d=function b(...S){if(S.length>=l)return e.apply(this,S);{const M=function(...E){return b.apply(this,S.concat(E))};return o&&o(M,S),M}};return o&&o(d,[]),d}function parseNumeral(e){const o=Number(e);if(!isNaN(o))return o;if(isNote(e))return noteToMidi$1(e);throw new Error(`cannot parse as numeral: "${e}"`)}function mapArgs(e,o){return(...l)=>e(...l.map(o))}function numeralArgs(e){return mapArgs(e,parseNumeral)}function parseFractional(e){const o=Number(e);if(!isNaN(o))return o;const l={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof l<"u")return l;throw new Error(`cannot parse as fractional: "${e}"`)}const fractionalArgs=e=>mapArgs(e,parseFractional),splitAt=function(e,o){return[o.slice(0,e),o.slice(e)]},zipWith=(e,o,l)=>o.map((d,b)=>e(d,l[b])),pairs=function(e){const o=[];for(let l=0;l<e.length-1;++l)o.push([e[l],e[l+1]]);return o},clamp$1=(e,o,l)=>Math.min(Math.max(e,o),l),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(e,o="letters")=>{const d=(o==="solfeggio"?solfeggio:o==="indian"?indian:o==="german"?german:o==="byzantine"?byzantine:o==="japanese"?japanese:english)[e%12],b=Math.floor(e/12)-1;return d+b};function uniq(e){var o={};return e.filter(function(l){return o.hasOwn(l)?!1:o[l]=!0})}function uniqsort(e){return e.sort().filter(function(o,l,d){return!l||o!=d[l-1]})}function uniqsortr(e){return e.sort((o,l)=>o.compare(l)).filter(function(o,l,d){return!l||o.ne(d[l-1])})}function unicodeToBase64(e){const o=new TextEncoder().encode(e);return btoa(String.fromCharCode(...o))}function base64ToUnicode(e){const o=new Uint8Array(atob(e).split("").map(d=>d.charCodeAt(0)));return new TextDecoder().decode(o)}function code2hash(e){return encodeURIComponent(unicodeToBase64(e))}function hash2code(e){return base64ToUnicode(decodeURIComponent(e))}function objectMap(e,o){return Array.isArray(e)?e.map(o):Object.fromEntries(Object.entries(e).map(([l,d],b)=>[l,o(d,l,b)]))}function cycleToSeconds$1(e,o){return e/o}class ClockCollator{constructor({getTargetClockTime:o=getUnixTimeSeconds,weight:l=16,offsetDelta:d=.005,checkAfterTime:b=2,resetAfterTime:S=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=o,this.weight=l,this.offsetDelta=d,this.checkAfterTime=b,this.resetAfterTime=S,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(o){const l=this.getTargetClockTime(),d=l-this.timeAtPrevOffsetSample,b=l-o;if(d>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=b),this.prevOffsetTimes.push(b),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||d>this.checkAfterTime){this.timeAtPrevOffsetSample=l;const S=averageArray(this.prevOffsetTimes);Math.abs(S-this.offsetTime)>this.offsetDelta&&(this.offsetTime=S)}return this.offsetTime}calculateTimestamp(o,l){return this.calculateOffset(o)+l}}function getPerformanceTimeSeconds(){return performance.now()*.001}function getUnixTimeSeconds(){return Date.now()*.001}const keyAlias=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let keyState;function getCurrentKeyboardState(){if(keyState==null){if(typeof window>"u")return;keyState={},window.addEventListener("keydown",e=>{keyState[e.key]=!0}),window.addEventListener("keyup",e=>{keyState[e.key]=!1})}return{...keyState}}function stringifyValues(e,o=!1){return typeof e=="object"?o?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Fraction.prototype.sam=function(){return this.floor()},Fraction.prototype.nextSam=function(){return this.sam().add(1)},Fraction.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction.prototype.lt=function(e){return this.compare(e)<0},Fraction.prototype.gt=function(e){return this.compare(e)>0},Fraction.prototype.lte=function(e){return this.compare(e)<=0},Fraction.prototype.gte=function(e){return this.compare(e)>=0},Fraction.prototype.eq=function(e){return this.compare(e)==0},Fraction.prototype.ne=function(e){return this.compare(e)!=0},Fraction.prototype.max=function(e){return this.gt(e)?this:e},Fraction.prototype.maximum=function(...e){return e=e.map(o=>new Fraction(o)),e.reduce((o,l)=>l.max(o),this)},Fraction.prototype.min=function(e){return this.lt(e)?this:e},Fraction.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0},Fraction.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0},Fraction.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0},Fraction.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0},Fraction.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction.prototype.or=function(e){return this.eq(0)?e:this};const fraction$1=e=>Fraction(e),gcd=(...e)=>{if(e=removeUndefineds(e),e.length!==0)return e.reduce((o,l)=>o.gcd(l),fraction$1(1))},lcm=(...e)=>{if(e=removeUndefineds(e),e.length===0)return;const o=e.pop();return e.reduce((l,d)=>l===void 0||d===void 0?void 0:l.lcm(d),o)},isFraction=e=>e instanceof Fraction;fraction$1._original=Fraction;class TimeSpan{constructor(o,l){this.begin=fraction$1(o),this.end=fraction$1(l)}get spanCycles(){const o=[];var l=this.begin;const d=this.end,b=d.sam();if(l.equals(d))return[new TimeSpan(l,d)];for(;d.gt(l);){if(l.sam().equals(b)){o.push(new TimeSpan(l,this.end));break}const S=l.nextSam();o.push(new TimeSpan(l,S)),l=S}return o}get duration(){return this.end.sub(this.begin)}cycleArc(){const o=this.begin.cyclePos(),l=o.add(this.duration);return new TimeSpan(o,l)}withTime(o){return new TimeSpan(o(this.begin),o(this.end))}withEnd(o){return new TimeSpan(this.begin,o(this.end))}withCycle(o){const l=this.begin.sam(),d=l.add(o(this.begin.sub(l))),b=l.add(o(this.end.sub(l)));return new TimeSpan(d,b)}intersection(o){const l=this.begin.max(o.begin),d=this.end.min(o.end);if(!l.gt(d)&&!(l.equals(d)&&(l.equals(this.end)&&this.begin.lt(this.end)||l.equals(o.end)&&o.begin.lt(o.end))))return new TimeSpan(l,d)}intersection_e(o){const l=this.intersection(o);if(l==null)throw"TimeSpans do not intersect";return l}midpoint(){return this.begin.add(this.duration.div(fraction$1(2)))}equals(o){return this.begin.equals(o.begin)&&this.end.equals(o.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(o,l,d,b={},S=!1){this.whole=o,this.part=l,this.value=d,this.context=b,this.stateful=S,S&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let o;return typeof this.value?.duration=="number"?o=fraction$1(this.value.duration):o=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?o.mul(this.value.clip):o}get endClipped(){return this.whole.begin.add(this.duration)}isActive(o){return this.whole.begin<=o&&this.endClipped>=o}isInPast(o){return o>this.endClipped}isInNearPast(o,l){return l-o<=this.endClipped}isInFuture(o){return o<this.whole.begin}isInNearFuture(o,l){return l<this.whole.begin&&l>this.whole.begin-o}isWithinTime(o,l){return this.whole.begin<=l&&this.endClipped>=o}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(o){const l=this.whole?o(this.whole):void 0;return new Hap(l,o(this.part),this.value,this.context)}withValue(o){return new Hap(this.whole,this.part,o(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(o){return this.context.tags?.includes(o)}resolveState(o){if(this.stateful&&this.hasOnset()){console.log("stateful");const l=this.value,[d,b]=l(o);return[d,new Hap(this.whole,this.part,b,this.context,!1)]}return[o,this]}spanEquals(o){return this.whole==null&&o.whole==null||this.whole.equals(o.whole)}equals(o){return this.spanEquals(o)&&this.part.equals(o.part)&&this.value===o.value}show(o=!1){const l=typeof this.value=="object"?o?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var d="";if(this.whole==null)d="~"+this.part.show;else{var b=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(d=this.whole.begin.show()+" ⇜ "),b||(d+="("),d+=this.part.show(),b||(d+=")"),this.whole.end.equals(this.part.end)||(d+=" ⇝ "+this.whole.end.show())}return"[ "+d+" | "+l+" ]"}showWhole(o=!1){return`${this.whole==null?"~":this.whole.show()}: ${stringifyValues(this.value,o)}`}combineContext(o){const l=this;return{...l.context,...o.context,locations:(l.context.locations||[]).concat(o.context.locations||[])}}setContext(o){return new Hap(this.whole,this.part,this.value,o)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(o,l={}){this.span=o,this.controls=l}setSpan(o){return new State(o,this.controls)}withSpan(o){return this.setSpan(o(this.span))}setControls(o){return new State(this.span,{...this.controls,...o})}}function unionWithObj(e,o,l){if(o?.value!==void 0&&Object.keys(o).length===1)return logger$2("[warn]: Can't do arithmetic on control pattern."),e;const d=Object.keys(e).filter(b=>Object.keys(o).includes(b));return Object.assign({},e,o,Object.fromEntries(d.map(b=>[b,l(e[b],o[b])])))}curry((e,o)=>e*o),curry((e,o)=>o.map(e));function drawLine(e,o=60){let l=0,d=fraction$1(0),b=[""],S="";for(;b[0].length<o;){const M=e.queryArc(l,l+1),E=M.filter(Z=>Z.hasOnset()).map(Z=>Z.duration),L=gcd(...E),R=L.inverse();b=b.map(Z=>Z+"|"),S+="|";for(let Z=0;Z<R;Z++){const[q,K]=[d,d.add(L)],U=M.filter(re=>re.whole.begin.lte(q)&&re.whole.end.gte(K)),se=U.length-b.length;se>0&&(b=b.concat(Array(se).fill(S))),b=b.map((re,ae)=>{const de=U[ae];if(de){const Ee=de.whole.begin.eq(q)?""+de.value:"-";return re+Ee}return re+"."}),S+=".",d=d.add(L)}l++}return b.join(`
`)}let stringParser,__steps=!0;const calculateSteps=function(e){__steps=!!e},setStringParser=e=>stringParser=e;let Pattern$1=class Yi{constructor(o,l=void 0){this.query=o,this._Pattern=!0,this._steps=l}get _steps(){return this.__steps}set _steps(o){this.__steps=o===void 0?void 0:fraction$1(o)}setSteps(o){return this._steps=o,this}withSteps(o){return __steps?new Yi(this.query,this._steps===void 0?void 0:o(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(o){const l=new Yi(d=>this.query(d).map(b=>b.withValue(o)));return l._steps=this._steps,l}withState(o){return new Yi(l=>this.query(o(l)))}fmap(o){return this.withValue(o)}appWhole(o,l){const d=this,b=function(S){const M=d.query(S),E=l.query(S),L=function(R,Z){const q=R.part.intersection(Z.part);if(q!=null)return new Hap(o(R.whole,Z.whole),q,R.value(Z.value),Z.combineContext(R))};return flatten(M.map(R=>removeUndefineds(E.map(Z=>L(R,Z)))))};return new Yi(b)}appBoth(o){const l=this,d=function(S,M){if(!(S==null||M==null))return S.intersection_e(M)},b=l.appWhole(d,o);return __steps&&(b._steps=lcm(o._steps,l._steps)),b}appLeft(o){const l=this,d=function(S){const M=[];for(const E of l.query(S)){const L=o.query(S.setSpan(E.wholeOrPart()));for(const R of L){const Z=E.whole,q=E.part.intersection(R.part);if(q){const K=E.value(R.value),U=R.combineContext(E),se=new Hap(Z,q,K,U);M.push(se)}}}return M},b=new Yi(d);return b._steps=this._steps,b}appRight(o){const l=this,d=function(S){const M=[];for(const E of o.query(S)){const L=l.query(S.setSpan(E.wholeOrPart()));for(const R of L){const Z=E.whole,q=R.part.intersection(E.part);if(q){const K=R.value(E.value),U=E.combineContext(R),se=new Hap(Z,q,K,U);M.push(se)}}}return M},b=new Yi(d);return b._steps=o._steps,b}bindWhole(o,l){const d=this,b=function(S){const M=function(L,R){return new Hap(o(L.whole,R.whole),R.part,R.value,Object.assign({},L.context,R.context,{locations:(L.context.locations||[]).concat(R.context.locations||[])}))},E=function(L){return l(L.value).query(S.setSpan(L.part)).map(R=>M(L,R))};return flatten(d.query(S).map(L=>E(L)))};return new Yi(b)}bind(o){const l=function(d,b){if(!(d==null||b==null))return d.intersection_e(b)};return this.bindWhole(l,o)}join(){return this.bind(id)}outerBind(o){return this.bindWhole(l=>l,o).setSteps(this._steps)}outerJoin(){return this.outerBind(id)}innerBind(o){return this.bindWhole((l,d)=>d,o)}innerJoin(){return this.innerBind(id)}resetJoin(o=!1){const l=this;return new Yi(d=>l.discreteOnly().query(d).map(b=>b.value.late(o?b.whole.begin:b.whole.begin.cyclePos()).query(d).map(S=>new Hap(S.whole?S.whole.intersection(b.whole):void 0,S.part.intersection(b.part),S.value).setContext(b.combineContext(S))).filter(S=>S.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const o=this;function l(d){const b=o.discreteOnly().query(d);function S(E){const R=E.value._focusSpan(E.wholeOrPart()).query(d.setSpan(E.part));function Z(q,K){let U;if(K.whole&&q.whole&&(U=K.whole.intersection(q.whole),!U))return;const se=K.part.intersection(q.part);if(!se)return;const re=K.combineContext(q);return new Hap(U,se,K.value,re)}return R.map(q=>Z(E,q))}return flatten(b.map(S)).filter(E=>E)}return new Yi(l)}squeezeBind(o){return this.fmap(o).squeezeJoin()}polyJoin=function(){const o=this;return o.fmap(l=>l.extend(o._steps.div(l._steps))).outerJoin()};polyBind(o){return this.fmap(o).polyJoin()}queryArc(o,l,d={}){try{return this.query(new State(new TimeSpan(o,l),d))}catch(b){return errorLogger$1(b,"query"),[]}}splitQueries(){const o=this,l=d=>flatten(d.span.spanCycles.map(b=>o.query(d.setSpan(b))));return new Yi(l)}withQuerySpan(o){return new Yi(l=>this.query(l.withSpan(o)))}withQuerySpanMaybe(o){const l=this;return new Yi(d=>{const b=d.withSpan(o);return b.span?l.query(b):[]})}withQueryTime(o){return new Yi(l=>this.query(l.withSpan(d=>d.withTime(o))))}withHapSpan(o){return new Yi(l=>this.query(l).map(d=>d.withSpan(o)))}withHapTime(o){return this.withHapSpan(l=>l.withTime(o))}withHaps(o){const l=new Yi(d=>o(this.query(d),d));return l._steps=this._steps,l}withHap(o){return this.withHaps(l=>l.map(o))}setContext(o){return this.withHap(l=>l.setContext(o))}withContext(o){const l=this.withHap(d=>d.setContext(o(d.context)));return this.__pure!==void 0&&(l.__pure=this.__pure,l.__pure_loc=this.__pure_loc),l}stripContext(){return this.withHap(o=>o.setContext({}))}withLoc(o,l){const d={start:o,end:l},b=this.withContext(S=>{const M=(S.locations||[]).concat([d]);return{...S,locations:M}});return this.__pure&&(b.__pure=this.__pure,b.__pure_loc=d),b}filterHaps(o){return new Yi(l=>this.query(l).filter(o))}filterValues(o){return new Yi(l=>this.query(l).filter(d=>o(d.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(o=>o!=null)}onsetsOnly(){return this.filterHaps(o=>o.hasOnset())}discreteOnly(){return this.filterHaps(o=>o.whole)}defragmentHaps(){return this.discreteOnly().withHaps(l=>{const d=[];for(var b=0;b<l.length;++b){for(var S=!0,M=l[b];S;){const R=JSON.stringify(l[b].value);for(var E=!1,L=b+1;L<l.length;L++){const Z=l[L];if(M.whole.equals(Z.whole)){if(M.part.begin.eq(Z.part.end)){if(R===JSON.stringify(Z.value)){M=new Hap(M.whole,new TimeSpan(Z.part.begin,M.part.end),M.value),l.splice(L,1),E=!0;break}}else if(Z.part.begin.eq(M.part.end)&&R==JSON.stringify(Z.value)){M=new Hap(M.whole,new TimeSpan(M.part.begin,Z.part.end),M.value),l.splice(L,1),E=!0;break}}}S=E}d.push(M)}return d})}firstCycle(o=!1){var l=this;return o||(l=l.stripContext()),l.query(new State(new TimeSpan(fraction$1(0),fraction$1(1))))}get firstCycleValues(){return this.firstCycle().map(o=>o.value)}get showFirstCycle(){return this.firstCycle().map(o=>`${o.value}: ${o.whole.begin.toFraction()} - ${o.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(o=>o.sort((l,d)=>l.part.begin.sub(d.part.begin).or(l.part.end.sub(d.part.end)).or(l.whole.begin.sub(d.whole.begin).or(l.whole.end.sub(d.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(o,l){return this.fmap(l).appLeft(reify(o))}_opOut(o,l){return this.fmap(l).appRight(reify(o))}_opMix(o,l){return this.fmap(l).appBoth(reify(o))}_opSqueeze(o,l){const d=reify(o);return this.fmap(b=>d.fmap(S=>l(b)(S))).squeezeJoin()}_opSqueezeOut(o,l){const d=this;return reify(o).fmap(S=>d.fmap(M=>l(M)(S))).squeezeJoin()}_opReset(o,l){return reify(o).fmap(b=>this.fmap(S=>l(S)(b))).resetJoin()}_opRestart(o,l){return reify(o).fmap(b=>this.fmap(S=>l(S)(b))).restartJoin()}_opPoly(o,l){const d=reify(o);return this.fmap(b=>d.fmap(S=>l(S)(b))).polyJoin()}layer(...o){return stack(...o.map(l=>l(this)))}superimpose(...o){return this.stack(...o.map(l=>l(this)))}stack(...o){return stack(this,...o)}sequence(...o){return sequence(this,...o)}seq(...o){return sequence(this,...o)}cat(...o){return cat(this,...o)}fastcat(...o){return fastcat(this,...o)}slowcat(...o){return slowcat(this,...o)}onTrigger(o,l=!0){return this.withHap(d=>d.setContext({...d.context,onTrigger:(...b)=>{d.context.onTrigger?.(...b),o(...b)},dominantTrigger:d.context.dominantTrigger||l}))}log(o=d=>`[hap] ${d.showWhole(!0)}`,l=d=>({hap:d})){return this.onTrigger((...d)=>{logger$2(o(...d),void 0,l(...d))},!1)}logValues(o=l=>`[hap] ${stringifyValues(l,!0)}`){return this.log(l=>o(l.value))}drawLine(){return console.log(drawLine(this)),this}unjoin(o,l=id){return o.withHap(d=>d.withValue(b=>b?l(this.ribbon(d.whole.begin,d.whole.duration)):this))}into(o,l){return this.unjoin(o,l).innerJoin()}};function groupHapsBy(e,o){let l=[];return o.forEach(d=>{const b=l.findIndex(([S])=>e(d,S));b===-1?l.push([d]):l[b].push(d)}),l}const congruent=(e,o)=>e.spanEquals(o);Pattern$1.prototype.collect=function(){return this.withHaps(e=>groupHapsBy(congruent,e).map(o=>new Hap(o[0].whole,o[0].part,o,{})))};const arpWith=register("arpWith",(e,o)=>o.collect().fmap(l=>reify(e(l))).innerJoin().withHap(l=>new Hap(l.whole,l.part,l.value.value,l.combineContext(l.value)))),arp=register("arp",(e,o)=>o.arpWith(l=>reify(e).fmap(d=>l[d%l.length])),!1);function _nonArrayObject(e){return!Array.isArray(e)&&typeof e=="object"&&!isFraction(e)}function _composeOp(e,o,l){return _nonArrayObject(e)||_nonArrayObject(o)?(_nonArrayObject(e)||(e={value:e}),_nonArrayObject(o)||(o={value:o}),unionWithObj(e,o,l)):l(e,o)}(function(){const e={set:[(l,d)=>d],keep:[l=>l],keepif:[(l,d)=>d?l:void 0],add:[numeralArgs((l,d)=>l+d)],sub:[numeralArgs((l,d)=>l-d)],mul:[numeralArgs((l,d)=>l*d)],div:[numeralArgs((l,d)=>l/d)],mod:[numeralArgs(_mod$2)],pow:[numeralArgs(Math.pow)],log2:[numeralArgs(Math.log2)],band:[numeralArgs((l,d)=>l&d)],bor:[numeralArgs((l,d)=>l|d)],bxor:[numeralArgs((l,d)=>l^d)],blshift:[numeralArgs((l,d)=>l<<d)],brshift:[numeralArgs((l,d)=>l>>d)],lt:[(l,d)=>l<d],gt:[(l,d)=>l>d],lte:[(l,d)=>l<=d],gte:[(l,d)=>l>=d],eq:[(l,d)=>l==d],eqt:[(l,d)=>l===d],ne:[(l,d)=>l!=d],net:[(l,d)=>l!==d],and:[(l,d)=>l&&d],or:[(l,d)=>l||d],func:[(l,d)=>d(l)]},o=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[l,[d,b]]of Object.entries(e)){Pattern$1.prototype["_"+l]=function(S){return this.fmap(M=>d(M,S))},Object.defineProperty(Pattern$1.prototype,l,{get:function(){const S=this,M=(...E)=>S[l].in(...E);for(const E of o)M[E.toLowerCase()]=function(...L){var R=S;L=sequence(L),b&&(R=b(R),L=b(L));var Z;return l==="keepif"?(Z=R["_op"+E](L,q=>K=>d(q,K)),Z=Z.removeUndefineds()):Z=R["_op"+E](L,q=>K=>_composeOp(q,K,d)),Z};return M.squeezein=M.squeeze,M}});for(const S of o)Pattern$1.prototype[S.toLowerCase()]=function(...M){return this.set[S.toLowerCase()](M)}}Pattern$1.prototype.struct=function(...l){return this.keepif.out(...l)},Pattern$1.prototype.structAll=function(...l){return this.keep.out(...l)},Pattern$1.prototype.mask=function(...l){return this.keepif.in(...l)},Pattern$1.prototype.maskAll=function(...l){return this.keep.in(...l)},Pattern$1.prototype.reset=function(...l){return this.keepif.reset(...l)},Pattern$1.prototype.resetAll=function(...l){return this.keep.reset(...l)},Pattern$1.prototype.restart=function(...l){return this.keepif.restart(...l)},Pattern$1.prototype.restartAll=function(...l){return this.keep.restart(...l)}})();const polyrhythm=stack,pr=stack,pm=polymeter,gap=e=>new Pattern$1(()=>[],e),silence=gap(1),nothing=gap(0);function pure(e){function o(d){return d.span.spanCycles.map(b=>new Hap(fraction$1(b.begin).wholeCycle(),b,e))}const l=new Pattern$1(o,1);return l.__pure=e,l}function isPattern(e){return e instanceof Pattern$1||e?._Pattern}function reify(e){return isPattern(e)?e:stringParser&&typeof e=="string"?stringParser(e):pure(e)}function sequenceP(e){let o=pure([]);for(const l of e)o=o.bind(d=>l.fmap(b=>d.concat([b])));return o}function stack(...e){e=e.map(d=>Array.isArray(d)?sequence(...d):reify(d));const o=d=>flatten(e.map(b=>b.query(d))),l=new Pattern$1(o);return __steps&&(l._steps=lcm(...e.map(d=>d._steps))),l}function _stackWith(e,o){if(o=o.map(S=>Array.isArray(S)?sequence(...S):reify(S)),o.length===0)return silence;if(o.length===1)return o[0];const[l,...d]=o.map(S=>S._steps),b=__steps?l.maximum(...d):void 0;return stack(...e(b,o))}function stackLeft(...e){return _stackWith((o,l)=>l.map(d=>d._steps.eq(o)?d:stepcat(d,gap(o.sub(d._steps)))),e)}function stackRight(...e){return _stackWith((o,l)=>l.map(d=>d._steps.eq(o)?d:stepcat(gap(o.sub(d._steps)),d)),e)}function stackCentre(...e){return _stackWith((o,l)=>l.map(d=>{if(d._steps.eq(o))return d;const b=gap(o.sub(d._steps).div(2));return stepcat(b,d,b)}),e)}function stackBy(e,...o){const[l,...d]=o.map(M=>M._steps),b=l.maximum(...d),S={centre:stackCentre,left:stackLeft,right:stackRight,expand:stack,repeat:(...M)=>polymeter(...M).steps(b)};return e.inhabit(S).fmap(M=>M(...o)).innerJoin().setSteps(b)}function slowcat(...e){if(e=e.map(d=>Array.isArray(d)?fastcat(...d):reify(d)),e.length==1)return e[0];const o=function(d){const b=d.span,S=_mod$2(b.begin.sam(),e.length),M=e[S];if(!M)return[];const E=b.begin.floor().sub(b.begin.div(e.length).floor());return M.withHapTime(L=>L.add(E)).query(d.setSpan(b.withTime(L=>L.sub(E))))},l=__steps?lcm(...e.map(d=>d._steps)):void 0;return new Pattern$1(o).splitQueries().setSteps(l)}function slowcatPrime(...e){e=e.map(reify);const o=function(l){const d=Math.floor(l.span.begin)%e.length;return e[d]?.query(l)||[]};return new Pattern$1(o).splitQueries()}function cat(...e){return slowcat(...e)}function arrange(...e){const o=e.reduce((l,[d])=>l+d,0);return e=e.map(([l,d])=>[l,d.fast(l)]),stepcat(...e).slow(o)}function seqPLoop(...e){let o=fraction$1(0);for(let l of e)l.length==2&&l.unshift(o),o=l[1];return stack(...e.map(([l,d,b])=>pure(reify(b)).compress(fraction$1(l).div(o),fraction$1(d).div(o)))).slow(o).innerJoin()}function fastcat(...e){let o=slowcat(...e);return e.length>1&&(o=o._fast(e.length),o._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),o}function sequence(...e){return fastcat(...e)}function seq(...e){return fastcat(...e)}function _sequenceCount(e){return Array.isArray(e)?e.length==0?[silence,0]:e.length==1?_sequenceCount(e[0]):[fastcat(...e.map(o=>_sequenceCount(o)[0])),e.length]:[reify(e),1]}const mask=curry((e,o)=>reify(o).mask(e)),struct=curry((e,o)=>reify(o).struct(e)),superimpose=curry((e,o)=>reify(o).superimpose(...e)),withValue=curry((e,o)=>reify(o).withValue(e)),bind=curry((e,o)=>reify(o).bind(e)),innerBind=curry((e,o)=>reify(o).innerBind(e)),outerBind=curry((e,o)=>reify(o).outerBind(e)),squeezeBind=curry((e,o)=>reify(o).squeezeBind(e)),stepBind=curry((e,o)=>reify(o).stepBind(e)),polyBind=curry((e,o)=>reify(o).polyBind(e)),set=curry((e,o)=>reify(o).set(e)),keep=curry((e,o)=>reify(o).keep(e)),keepif=curry((e,o)=>reify(o).keepif(e)),add$5=curry((e,o)=>reify(o).add(e)),sub=curry((e,o)=>reify(o).sub(e)),mul=curry((e,o)=>reify(o).mul(e)),div=curry((e,o)=>reify(o).div(e)),mod$3=curry((e,o)=>reify(o).mod(e)),pow=curry((e,o)=>reify(o).pow(e)),band=curry((e,o)=>reify(o).band(e)),bor=curry((e,o)=>reify(o).bor(e)),bxor=curry((e,o)=>reify(o).bxor(e)),blshift=curry((e,o)=>reify(o).blshift(e)),brshift=curry((e,o)=>reify(o).brshift(e)),lt=curry((e,o)=>reify(o).lt(e)),gt=curry((e,o)=>reify(o).gt(e)),lte=curry((e,o)=>reify(o).lte(e)),gte=curry((e,o)=>reify(o).gte(e)),eq=curry((e,o)=>reify(o).eq(e)),eqt=curry((e,o)=>reify(o).eqt(e)),ne=curry((e,o)=>reify(o).ne(e)),net=curry((e,o)=>reify(o).net(e)),and=curry((e,o)=>reify(o).and(e)),or=curry((e,o)=>reify(o).or(e)),func=curry((e,o)=>reify(o).func(e));function register(e,o,l=!0,d=!1,b=S=>S.innerJoin()){if(Array.isArray(e)){const E={};for(const L of e)E[L]=register(L,o,l,d,b);return E}const S=o.length;var M;return l?M=function(...E){E=E.map(reify);const L=E[E.length-1];let R;if(S===1)R=o(L);else{const Z=E.slice(0,-1);if(Z.every(q=>q.__pure!=null)){const q=Z.map(U=>U.__pure),K=Z.filter(U=>U.__pure_loc).map(U=>U.__pure_loc);R=o(...q,L),R=R.withContext(U=>{const se=(U.locations||[]).concat(K);return{...U,locations:se}})}else{const[q,...K]=Z;let U=(...se)=>o(...se,L);U=curry(U,null,S-1),R=b(K.reduce((se,re)=>se.appLeft(re),q.fmap(U)))}}return d&&(R._steps=L._steps),R}:M=function(...E){E=E.map(reify);const L=o(...E);return d&&(L._steps=E[E.length-1]._steps),L},Pattern$1.prototype[e]=function(...E){if(S===2&&E.length!==1)E=[sequence(...E)];else if(S!==E.length+1)throw new Error(`.${e}() expects ${S-1} inputs but got ${E.length}.`);return E=E.map(reify),M(...E,this)},S>1&&(Pattern$1.prototype["_"+e]=function(...E){const L=o(...E,this);return d&&L.setSteps(this._steps),L}),curry(M,null,S)}function stepRegister(e,o,l=!0,d=!1,b=S=>S.stepJoin()){return register(e,o,l,d,b)}const round=register("round",function(e){return e.asNumber().fmap(o=>Math.round(o))}),floor=register("floor",function(e){return e.asNumber().fmap(o=>Math.floor(o))}),ceil=register("ceil",function(e){return e.asNumber().fmap(o=>Math.ceil(o))}),toBipolar=register("toBipolar",function(e){return e.fmap(o=>o*2-1)}),fromBipolar=register("fromBipolar",function(e){return e.fmap(o=>(o+1)/2)}),range$2=register("range",function(e,o,l){return l.mul(o-e).add(e)}),rangex=register("rangex",function(e,o,l){return l._range(Math.log(e),Math.log(o)).fmap(Math.exp)}),range2=register("range2",function(e,o,l){return l.fromBipolar()._range(e,o)}),ratio=register("ratio",e=>e.fmap(o=>Array.isArray(o)?o.slice(1).reduce((l,d)=>l/d,o[0]):o)),compress=register("compress",function(e,o,l){return e=fraction$1(e),o=fraction$1(o),e.gt(o)||e.gt(1)||o.gt(1)||e.lt(0)||o.lt(0)?silence:l._fastGap(fraction$1(1).div(o.sub(e)))._late(e)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(e,o){return o._compress(e.begin,e.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(e,o){const l=function(b){const S=b.begin.sam(),M=b.begin.sub(S).mul(e).min(1),E=b.end.sub(S).mul(e).min(1);if(!(M>=1))return new TimeSpan(S.add(M),S.add(E))},d=function(b){const S=b.part.begin,M=b.part.end,E=S.sam(),L=S.sub(E).div(e).min(1),R=M.sub(E).div(e).min(1),Z=new TimeSpan(E.add(L),E.add(R)),q=b.whole?new TimeSpan(Z.begin.sub(S.sub(b.whole.begin).div(e)),Z.end.add(b.whole.end.sub(M).div(e))):void 0;return new Hap(q,Z,b.value,b.context)};return o.withQuerySpanMaybe(l).withHap(d).splitQueries()}),focus=register("focus",function(e,o,l){return e=fraction$1(e),o=fraction$1(o),l._early(e.sam())._fast(fraction$1(1).div(o.sub(e)))._late(e)}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(e,o){return o._focus(e.begin,e.end)}),ply=register("ply",function(e,o){const l=o.fmap(d=>pure(d)._fast(e)).squeezeJoin();return __steps&&(l._steps=fraction$1(e).mulmaybe(o._steps)),l}),{fast,density:density$1}=register(["fast","density"],function(e,o){return e===0?silence:(e=fraction$1(e),o.withQueryTime(d=>d.mul(e)).withHapTime(d=>d.div(e)).setSteps(o._steps))},!0,!0),hurry=register("hurry",function(e,o){return o._fast(e).mul(pure({speed:e}))}),{slow,sparsity}=register(["slow","sparsity"],function(e,o){return e===0?silence:o._fast(fraction$1(1).div(e))}),inside=register("inside",function(e,o,l){return o(l._slow(e))._fast(e)}),outside=register("outside",function(e,o,l){return o(l._fast(e))._slow(e)}),lastOf=register("lastOf",function(e,o,l){const d=Array(e-1).fill(l);return d.push(o(l)),slowcatPrime(...d)}),{firstOf,every}=register(["firstOf","every"],function(e,o,l){const d=Array(e-1).fill(l);return d.unshift(o(l)),slowcatPrime(...d)}),apply=register("apply",function(e,o){return e(o)}),cpm=register("cpm",function(e,o){return o._fast(e/60/1)}),early=register("early",function(e,o){return e=fraction$1(e),o.withQueryTime(l=>l.add(e)).withHapTime(l=>l.sub(e))},!0,!0),late=register("late",function(e,o){return e=fraction$1(e),o._early(fraction$1(0).sub(e))},!0,!0),zoom=register("zoom",function(e,o,l){if(o=fraction$1(o),e=fraction$1(e),e.gte(o))return nothing;const d=o.sub(e),b=__steps?l._steps?.mulmaybe(d):void 0;return l.withQuerySpan(S=>S.withCycle(M=>M.mul(d).add(e))).withHapSpan(S=>S.withCycle(M=>M.sub(e).div(d))).splitQueries().setSteps(b)}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(e,o){return o.zoom(e.begin,e.end)}),bite=register("bite",(e,o,l)=>o.fmap(d=>b=>{const S=fraction$1(d).div(b).mod(1),M=S.add(fraction$1(1).div(b));return l.zoom(S,M)}).appLeft(e).squeezeJoin(),!1),linger=register("linger",function(e,o){return e==0?silence:e<0?o._zoom(e.add(1),1)._slow(e):o._zoom(0,e)._slow(e)},!0,!0),{segment,seg}=register(["segment","seg"],function(e,o){return o.struct(pure(!0)._fast(e)).setSteps(e)}),swingBy=register("swingBy",(e,o,l)=>l.inside(o,late(seq(0,e/2)))),swing=register("swing",(e,o)=>o.swingBy(1/3,e)),{invert:invert$1,inv}=register(["invert","inv"],function(e){return e.fmap(o=>!o)},!0,!0),when=register("when",function(e,o,l){return e?o(l):l}),off=register("off",function(e,o,l){return stack(l,o(l.late(e)))}),brak=register("brak",function(e){return e.when(slowcat(!1,!0),o=>fastcat(o,silence)._late(.25))}),rev=register("rev",function(e){const o=function(l){const d=l.span,b=d.begin.sam(),S=d.begin.nextSam(),M=function(L){const R=L.withTime(q=>b.add(S.sub(q))),Z=R.begin;return R.begin=R.end,R.end=Z,R};return e.query(l.setSpan(M(d))).map(L=>L.withSpan(M))};return new Pattern$1(o).splitQueries()},!1,!0),revv=register("revv",function(e){const o=l=>new TimeSpan(fraction$1(0).sub(l.end),fraction$1(0).sub(l.begin));return e.withQuerySpan(o).withHapSpan(o)}),pressBy=register("pressBy",function(e,o){return o.fmap(l=>pure(l).compress(e,1)).squeezeJoin()}),press=register("press",function(e){return e._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(e){return e.lastOf(2,rev)},!0,!0),{juxBy,juxby}=register(["juxBy","juxby"],function(e,o,l){e/=2;const d=function(M,E,L){return E in M?M[E]:L},b=l.withValue(M=>Object.assign({},M,{pan:d(M,"pan",.5)-e})),S=o(l.withValue(M=>Object.assign({},M,{pan:d(M,"pan",.5)+e})));return stack(b,S).setSteps(__steps?lcm(b._steps,S._steps):void 0)}),jux=register("jux",function(e,o){return o._juxBy(1,e,o)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(e,o,l,d){return stack(...listRange(0,e-1).map(b=>l(d.late(fraction$1(o).mul(b)),b)))}),echo=register("echo",function(e,o,l,d){return d._echoWith(e,o,(b,S)=>b.gain(Math.pow(l,S)))}),stut=register("stut",function(e,o,l,d){return d._echoWith(e,l,(b,S)=>b.gain(Math.pow(o,S)))}),applyN=register("applyN",function(e,o,l){let d=l;for(let b=0;b<e;b++)d=o(d);return d}),plyWith=register(["plyWith","plywith"],function(e,o,l){const d=l.fmap(b=>cat(...listRange(0,e-1).map(S=>applyN(S,o,b)))._fast(e)).squeezeJoin();return __steps&&(d._steps=fraction$1(e).mulmaybe(l._steps)),d}),plyForEach=register(["plyForEach","plyforeach"],function(e,o,l){const d=l.fmap(b=>cat(cat(pure(b),...listRange(1,e-1).map(S=>o(pure(b),S))))._fast(e)).squeezeJoin();return __steps&&(d._steps=fraction$1(e).mulmaybe(l._steps)),d}),_iter=function(e,o,l=!1){return e=fraction$1(e),slowcat(...listRange(0,e.sub(1)).map(d=>l?o.late(fraction$1(d).div(e)):o.early(fraction$1(d).div(e))))},iter=register("iter",function(e,o){return _iter(e,o,!1)},!0,!0),{iterBack,iterback}=register(["iterBack","iterback"],function(e,o){return _iter(e,o,!0)},!0,!0),{repeatCycles}=register("repeatCycles",function(e,o){return new Pattern$1(function(l){const d=l.span.begin.sam(),b=d.div(e).sam(),S=d.sub(b);return l=l.withSpan(M=>M.withTime(E=>E.sub(S))),o.query(l).map(M=>M.withSpan(E=>E.withTime(L=>L.add(S))))}).splitQueries()},!0,!0),_chunk=function(e,o,l,d=!1,b=!1){const S=Array(e-1).fill(!1);S.unshift(!0);const M=_iter(e,sequence(...S),!d);return b||(l=l.repeatCycles(e)),l.when(M,o)},{chunk,slowchunk,slowChunk}=register(["chunk","slowchunk","slowChunk"],function(e,o,l){return _chunk(e,o,l,!1,!1)},!0,!0),{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(e,o,l){return _chunk(e,o,l,!0)},!0,!0),{fastchunk,fastChunk}=register(["fastchunk","fastChunk"],function(e,o,l){return _chunk(e,o,l,!1,!0)},!0,!0),{chunkinto,chunkInto}=register(["chunkinto","chunkInto"],function(e,o,l){return l.into(fastcat(!0,...Array(e-1).fill(!1))._iterback(e),o)}),{chunkbackinto,chunkBackInto}=register(["chunkbackinto","chunkBackInto"],function(e,o,l){return l.into(fastcat(!0,...Array(e-1).fill(!1))._iter(e)._early(1),o)}),bypass=register("bypass",function(e,o){return e=!!parseInt(e),e?silence:o},!0,!0),{ribbon,rib}=register(["ribbon","rib"],(e,o,l)=>l.early(e).restart(pure(1).slow(o))),hsla=register("hsla",(e,o,l,d,b)=>b.color(`hsla(${e}turn,${o*100}%,${l*100}%,${d})`)),hsl=register("hsl",(e,o,l,d)=>d.color(`hsl(${e}turn,${o*100}%,${l*100}%)`));Pattern$1.prototype.tag=function(e){return this.withContext(o=>({...o,tags:(o.tags||[]).concat([e])}))};const filter$1=register("filter",(e,o)=>o.withHaps(l=>l.filter(e))),filterWhen=register("filterWhen",(e,o)=>o.filter(l=>e(l.whole.begin))),within=register("within",(e,o,l,d)=>stack(l(d.filterWhen(b=>b.cyclePos()>=e&&b.cyclePos()<=o)),d.filterWhen(b=>b.cyclePos()<e||b.cyclePos()>o)));Pattern$1.prototype.stepJoin=function(){const e=this,o=stepcat(..._retime(_slices(e.queryArc(0,1))))._steps,l=function(d){const S=e.early(d.span.begin.sam()).query(d.setSpan(new TimeSpan(fraction$1(0),fraction$1(1))));return stepcat(..._retime(_slices(S))).query(d)};return new Pattern$1(l,o)},Pattern$1.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function _retime(e){const o=e.filter((S,M)=>M.hasSteps).reduce((S,M)=>S.add(M),fraction$1(0)),l=removeUndefineds(e.map((S,M)=>M._steps)).reduce((S,M)=>S.add(M),fraction$1(0)),d=o.eq(0)?void 0:l.div(o);function b(S,M){return M._steps===void 0?[S.mulmaybe(d),M]:[M._steps,M]}return e.map(S=>b(...S))}function _slices(e){const o=flatten(e.map(b=>[b.part.begin,b.part.end])),l=uniqsortr([fraction$1(0),fraction$1(1),...o]);return pairs(l).map(b=>[b[1].sub(b[0]),stack(..._fitslice(new TimeSpan(...b),e).map(S=>S.value.withHap(M=>M.setContext(M.combineContext(S)))))])}function _fitslice(e,o){return removeUndefineds(o.map(l=>_match(e,l)))}function _match(e,o){const l=e.intersection(o.part);if(l!=null)return new Hap(o.whole,l,o.value,o.context)}const pace=register("pace",function(e,o){return o._steps===void 0?o:o._steps.eq(fraction$1(0))?nothing:o._fast(fraction$1(e).div(o._steps)).setSteps(e)});function _polymeterListSteps(e,...o){const l=o.map(b=>_sequenceCount(b));if(l.length==0)return silence;e==0&&(e=l[0][1]);const d=[];for(const b of l)b[1]!=0&&(e==b[1]?d.push(b[0]):d.push(b[0]._fast(fraction$1(e).div(fraction$1(b[1])))));return stack(...d)}function polymeter(...e){if(Array.isArray(e[0]))return _polymeterListSteps(0,...e);if(e=e.filter(d=>d.hasSteps),e.length==0)return silence;const o=lcm(...e.map(d=>d._steps));if(o.eq(fraction$1(0)))return nothing;const l=stack(...e.map(d=>d.pace(o)));return l._steps=o,l}function stepcat(...e){if(e.length===0)return nothing;const o=M=>Array.isArray(M)?M:[M._steps??1,M];if(e=e.map(o),e.find(M=>M[0]===void 0)){const M=e.map(L=>L[0]).filter(L=>L!==void 0);if(M.length===0)return fastcat(...e.map(L=>L[1]));if(M.length===e.length)return nothing;const E=M.reduce((L,R)=>L.add(R),fraction$1(0)).div(M.length);for(let L of e)L[0]===void 0&&(L[0]=E)}if(e.length==1)return reify(e[0][1]).withSteps(E=>e[0][0]);const l=e.map(M=>M[0]).reduce((M,E)=>M.add(E),fraction$1(0));let d=fraction$1(0);const b=[];for(const[M,E]of e){if(fraction$1(M).eq(0))continue;const L=d.add(M);b.push(reify(E)._compress(d.div(l),L.div(l))),d=L}const S=stack(...b);return S._steps=l,S}function stepalt(...e){e=e.map(b=>Array.isArray(b)?b.map(reify):[reify(b)]);const o=lcm(...e.map(b=>fraction$1(b.length)));let l=[];for(let b=0;b<o;++b)l.push(...e.map(S=>S.length==0?silence:S[b%S.length]));l=l.filter(b=>b.hasSteps&&b._steps>0);const d=l.reduce((b,S)=>b.add(S._steps),fraction$1(0));return l=stepcat(...l),l._steps=d,l}const take=stepRegister("take",function(e,o){if(!o.hasSteps||o._steps.lte(0)||(e=fraction$1(e),e.eq(0)))return nothing;const l=e<0;l&&(e=e.abs());const d=e.div(o._steps);return d.lte(0)?nothing:d.gte(1)?o:l?o.zoom(fraction$1(1).sub(d),1):o.zoom(0,d)}),drop=stepRegister("drop",function(e,o){return o.hasSteps?(e=fraction$1(e),e.lt(0)?o.take(o._steps.add(e)):o.take(fraction$1(0).sub(o._steps.sub(e)))):nothing}),extend=stepRegister("extend",function(e,o){return o.fast(e).expand(e)}),replicate=stepRegister("replicate",function(e,o){return o.repeatCycles(e).fast(e).expand(e)}),expand=stepRegister("expand",function(e,o){return o.withSteps(l=>l.mul(fraction$1(e)))}),contract=stepRegister("contract",function(e,o){return o.withSteps(l=>l.div(fraction$1(e)))});Pattern$1.prototype.shrinklist=function(e){const o=this;if(!o.hasSteps)return[o];let[l,d]=Array.isArray(e)?e:[e,o._steps];if(l=fraction$1(l),d===0||l===0)return[o];const b=l>0,S=[];if(b){const M=fraction$1(1).div(o._steps).mul(l);for(let E=0;E<d;++E){const L=M.mul(E);if(L.gt(1))break;S.push([L,1])}}else{l=fraction$1(0).sub(l);const M=fraction$1(1).div(o._steps).mul(l);for(let E=0;E<d;++E){const L=fraction$1(1).sub(M.mul(E));if(L.lt(0))break;S.push([fraction$1(0),L])}}return S.map(M=>o.zoom(...M))};const shrinklist=(e,o)=>o.shrinklist(e),shrink=register("shrink",function(e,o){if(!o.hasSteps)return nothing;const l=o.shrinklist(e),d=stepcat(...l);return d._steps=l.reduce((b,S)=>b.add(S._steps),fraction$1(0)),d},!0,!1,e=>e.stepJoin()),grow=register("grow",function(e,o){if(!o.hasSteps)return nothing;const l=o.shrinklist(fraction$1(0).sub(e));l.reverse();const d=stepcat(...l);return d._steps=l.reduce((b,S)=>b.add(S._steps),fraction$1(0)),d},!0,!1,e=>e.stepJoin()),tour=function(e,...o){return e.tour(...o)};Pattern$1.prototype.tour=function(...e){return stepcat(...[].concat(...e.map((o,l)=>[...e.slice(0,e.length-l),this,...e.slice(e.length-l)]),this,...e))};const zip=function(...e){e=e.filter(d=>d.hasSteps);const o=slowcat(...e.map(d=>d._slow(d._steps))),l=lcm(...e.map(d=>d._steps));return o._fast(l).setSteps(l)},timecat=stepcat,timeCat=stepcat,s_cat=stepcat,s_alt=stepalt,s_polymeter=polymeter;Pattern$1.prototype.s_polymeter=Pattern$1.prototype.polymeter;const s_taper=shrink;Pattern$1.prototype.s_taper=Pattern$1.prototype.shrink;const s_taperlist=shrinklist;Pattern$1.prototype.s_taperlist=Pattern$1.prototype.shrinklist;const s_add=take;Pattern$1.prototype.s_add=Pattern$1.prototype.take;const s_sub=drop;Pattern$1.prototype.s_sub=Pattern$1.prototype.drop;const s_expand=expand;Pattern$1.prototype.s_expand=Pattern$1.prototype.expand;const s_extend=extend;Pattern$1.prototype.s_extend=Pattern$1.prototype.extend;const s_contract=contract;Pattern$1.prototype.s_contract=Pattern$1.prototype.contract;const s_tour=tour;Pattern$1.prototype.s_tour=Pattern$1.prototype.tour;const s_zip=zip;Pattern$1.prototype.s_zip=Pattern$1.prototype.zip;const steps$2=pace;Pattern$1.prototype.steps=Pattern$1.prototype.pace;const chop=register("chop",function(e,o){const d=Array.from({length:e},(M,E)=>E).map(M=>({begin:M/e,end:(M+1)/e})),b=function(M,E){if("begin"in M&&"end"in M&&M.begin!==void 0&&M.end!==void 0){const L=M.end-M.begin;E={begin:M.begin+E.begin*L,end:M.begin+E.end*L}}return Object.assign({},M,E)},S=function(M){return sequence(d.map(E=>b(M,E)))};return o.squeezeBind(S).setSteps(__steps?fraction$1(e).mulmaybe(o._steps):void 0)}),striate=register("striate",function(e,o){const d=Array.from({length:e},(S,M)=>M).map(S=>({begin:S/e,end:(S+1)/e})),b=slowcat(...d);return o.set(b)._fast(e).setSteps(__steps?fraction$1(e).mulmaybe(o._steps):void 0)}),_loopAt=function(e,o,l=.5){return o.speed(1/e*l).unit("c").slow(e)},slice=register("slice",function(e,o,l){return e.innerBind(d=>o.outerBind(b=>l.outerBind(S=>{S=S instanceof Object?S:{s:S};const M=Array.isArray(d)?d[b]:b/d,E=Array.isArray(d)?d[b+1]:(b+1)/d;return pure({begin:M,end:E,_slices:d,...S})}))).setSteps(o._steps)},!1);Pattern$1.prototype.onTriggerTime=function(e){return this.onTrigger((o,l,d,b)=>{const S=b-l;window.setTimeout(()=>{e(o)},S*1e3)},!1)};const splice=register("splice",function(e,o,l){const d=slice(e,o,l);return new Pattern$1(b=>{const S=b.controls._cps||1;return d.query(b).map(E=>E.withValue(L=>({speed:S/L._slices/E.whole.duration*(L.speed||1),unit:"c",...L})))}).setSteps(o._steps)},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(e,o){const l=o._steps?o._steps.div(e):void 0;return new Pattern$1(d=>_loopAt(e,o,d.controls._cps).query(d),l)}),fit=register("fit",e=>e.withHaps((o,l)=>o.map(d=>d.withValue(b=>{const S=("end"in b?b.end:1)-("begin"in b?b.begin:0);return{...b,speed:(l.controls._cps||1)/d.whole.duration*S,unit:"c"}})))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(e,o,l){return _loopAt(e,l,o)}),ref$1=e=>pure(1).withValue(()=>reify(e())).innerJoin();let fadeGain=e=>e<.5?1:1-(e-.5)/.5,xfade=(e,o,l)=>{o=reify(o),e=reify(e),l=reify(l);let d=o.fmap(S=>({gain:fadeGain(S)})),b=o.fmap(S=>({gain:fadeGain(1-S)}));return stack(e.mul(d),l.mul(b))};Pattern$1.prototype.xfade=function(e,o){return xfade(this,e,o)};const __beat=e=>(o,l,d)=>{o=fraction$1(o).mod(l),l=fraction$1(l);const b=o.div(l),S=o.add(1).div(l);return e(d.fmap(M=>pure(M)._compress(b,S)))},{beat}=register(["beat"],__beat(e=>e.innerJoin())),_morph=(e,o,l)=>{l=fraction$1(l);const d=fraction$1(1).div(e.length),b=E=>{const L=[];for(const[R,Z]of E.entries())Z&&L.push([fraction$1(R).div(E.length),Z]);return L},S=zipWith(([E,L],[R,Z])=>{const q=l.mul(R-E).add(E),K=q.add(d);return new TimeSpan(q,K)},b(e),b(o));function M(E){const L=E.span.begin.sam(),R=E.span.cycleArc(),Z=[];for(const q of S){const K=q.intersection(R);K!==void 0&&Z.push(new Hap(q.withTime(U=>U.add(L)),K.withTime(U=>U.add(L)),!0))}return Z}return new Pattern$1(M).splitQueries()},morph=(e,o,l)=>(e=reify(e),o=reify(o),l=reify(l),e.innerBind(d=>o.innerBind(b=>l.innerBind(S=>_morph(d,b,S))))),distAlgoNames=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const e of distAlgoNames)Pattern$1.prototype[e]=function(o){const l=reify(o).fmap(d=>Array.isArray(d)?[...d,e]:[d,1,e]);return this.distort(l)};const parray=e=>{let l=pure(curry((...d)=>d,null,e.length));for(const d of e)l=l.appBoth(reify(d));return l},_ensureListPattern=e=>Array.isArray(e)?parray(e):reify(e);Pattern$1.prototype.partials=function(e){return this.withValue(o=>l=>({...o,partials:l})).appLeft(_ensureListPattern(e))};const partials=e=>_ensureListPattern(e).as("partials");Pattern$1.prototype.phases=function(e){return this.withValue(o=>l=>({...o,phases:l})).appLeft(_ensureListPattern(e))};const phases=e=>_ensureListPattern(e).as("phases");function createParam(e){let o=Array.isArray(e);e=o?e:[e];const l=e[0],d=S=>{let M;if(typeof S=="object"&&S.value!==void 0&&(M={...S},S=S.value,delete M.value),o&&Array.isArray(S)){const E=M||{};return S.forEach((L,R)=>{R<e.length&&(E[e[R]]=L)}),E}else return M?(M[l]=S,M):{[l]:S}},b=function(S,M){return M?typeof S>"u"?M.fmap(d):M.set(reify(S).withValue(d)):reify(S).withValue(d)};return Pattern$1.prototype[l]=function(S){return b(S,this)},b}const controlAlias=new Map;function isControlName(e){return controlAlias.has(e)}function registerControl(e,...o){const l=Array.isArray(e)?e[0]:e;let d={};return d[l]=createParam(e),controlAlias.set(l,l),o.forEach(b=>{d[b]=d[l],controlAlias.set(b,l),Pattern$1.prototype[b]=Pattern$1.prototype[l]}),d}const{s,sound}=registerControl(["s","n","gain"],"sound"),{wt,wavetablePosition}=registerControl("wt","wavetablePosition"),{wtenv}=registerControl("wtenv"),{wtattack,wtatt}=registerControl("wtattack","wtatt"),{wtdecay,wtdec}=registerControl("wtdecay","wtdec"),{wtsustain,wtsus}=registerControl("wtsustain","wtsus"),{wtrelease,wtrel}=registerControl("wtrelease","wtrel"),{wtrate}=registerControl("wtrate"),{wtsync}=registerControl("wtsync"),{wtdepth}=registerControl("wtdepth"),{wtshape}=registerControl("wtshape"),{wtdc}=registerControl("wtdc"),{wtskew}=registerControl("wtskew"),{warp,wavetableWarp}=registerControl("warp","wavetableWarp"),{warpattack,warpatt}=registerControl("warpattack","warpatt"),{warpdecay,warpdec}=registerControl("warpdecay","warpdec"),{warpsustain,warpsus}=registerControl("warpsustain","warpsus"),{warprelease,warprel}=registerControl("warprelease","warprel"),{warprate}=registerControl("warprate"),{warpdepth}=registerControl("warpdepth"),{warpshape}=registerControl("warpshape"),{warpdc}=registerControl("warpdc"),{warpskew}=registerControl("warpskew"),{warpmode,wavetableWarpMode}=registerControl("warpmode","wavetableWarpMode"),{wtphaserand,wavetablePhaseRand}=registerControl("wtphaserand","wavetablePhaseRand"),{warpenv}=registerControl("warpenv"),{warpsync}=registerControl("warpsync"),{source,src}=registerControl("source","src"),{n}=registerControl("n"),{note:note$2}=registerControl(["note","n"]),{accelerate}=registerControl("accelerate"),{velocity}=registerControl("velocity"),{gain}=registerControl("gain"),{postgain}=registerControl("postgain"),{amp}=registerControl("amp"),{attack,att}=registerControl("attack","att"),{fmh}=registerControl(["fmh","fmi"],"fmh"),{fmi,fm:fm$1}=registerControl(["fmi","fmh"],"fm"),{fmenv}=registerControl("fmenv"),{fmattack}=registerControl("fmattack"),{fmwave}=registerControl("fmwave"),{fmdecay}=registerControl("fmdecay"),{fmsustain}=registerControl("fmsustain"),{fmrelease}=registerControl("fmrelease"),{fmvelocity}=registerControl("fmvelocity"),{bank}=registerControl("bank"),{chorus}=registerControl("chorus"),{analyze}=registerControl("analyze"),{fft}=registerControl("fft"),{decay,dec}=registerControl("decay","dec"),{sustain,sus}=registerControl("sustain","sus"),{release,rel}=registerControl("release","rel"),{hold}=registerControl("hold"),{bandf,bpf,bp}=registerControl(["bandf","bandq","bpenv"],"bpf","bp"),{bandq,bpq}=registerControl("bandq","bpq"),{begin}=registerControl("begin"),{end}=registerControl("end"),{loop}=registerControl("loop"),{loopBegin,loopb}=registerControl("loopBegin","loopb"),{loopEnd,loope}=registerControl("loopEnd","loope"),{crush}=registerControl("crush"),{coarse}=registerControl("coarse"),{tremolo}=registerControl(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync}=registerControl(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth}=registerControl("tremolodepth","tremdepth"),{tremoloskew}=registerControl("tremoloskew","tremskew"),{tremolophase}=registerControl("tremolophase","tremphase"),{tremoloshape}=registerControl("tremoloshape","tremshape"),{drive}=registerControl("drive"),{duck}=registerControl("duckorbit","duck"),{duckdepth}=registerControl("duckdepth"),{duckonset}=registerControl("duckonset","duckons"),{duckattack}=registerControl("duckattack","duckatt"),{byteBeatExpression,bbexpr}=registerControl("byteBeatExpression","bbexpr"),{byteBeatStartTime,bbst}=registerControl("byteBeatStartTime","bbst"),{channels,ch}=registerControl("channels","ch"),{pw}=registerControl(["pw","pwrate","pwsweep"]),{pwrate}=registerControl("pwrate"),{pwsweep}=registerControl("pwsweep"),{phaserrate,ph,phaser}=registerControl(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep,phs}=registerControl("phasersweep","phs"),{phasercenter,phc}=registerControl("phasercenter","phc"),{phaserdepth,phd,phasdp}=registerControl("phaserdepth","phd","phasdp"),{channel}=registerControl("channel"),{cut}=registerControl("cut"),{cutoff,ctf,lpf,lp}=registerControl(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv,lpe}=registerControl("lpenv","lpe"),{hpenv,hpe}=registerControl("hpenv","hpe"),{bpenv,bpe}=registerControl("bpenv","bpe"),{lpattack,lpa}=registerControl("lpattack","lpa"),{hpattack,hpa}=registerControl("hpattack","hpa"),{bpattack,bpa}=registerControl("bpattack","bpa"),{lpdecay,lpd}=registerControl("lpdecay","lpd"),{hpdecay,hpd}=registerControl("hpdecay","hpd"),{bpdecay,bpd}=registerControl("bpdecay","bpd"),{lpsustain,lps}=registerControl("lpsustain","lps"),{hpsustain,hps}=registerControl("hpsustain","hps"),{bpsustain,bps}=registerControl("bpsustain","bps"),{lprelease,lpr}=registerControl("lprelease","lpr"),{hprelease,hpr}=registerControl("hprelease","hpr"),{bprelease,bpr}=registerControl("bprelease","bpr"),{ftype}=registerControl("ftype"),{fanchor}=registerControl("fanchor"),{lprate}=registerControl("lprate"),{lpsync}=registerControl("lpsync"),{lpdepth}=registerControl("lpdepth"),{lpdepthfrequency}=registerControl("lpdepthfrequency","lpdepthfreq"),{lpshape}=registerControl("lpshape"),{lpdc}=registerControl("lpdc"),{lpskew}=registerControl("lpskew"),{bprate}=registerControl("bprate"),{bpsync}=registerControl("bpsync"),{bpdepth}=registerControl("bpdepth"),{bpdepthfrequency}=registerControl("bpdepthfrequency","bpdepthfreq"),{bpshape}=registerControl("bpshape"),{bpdc}=registerControl("bpdc"),{bpskew}=registerControl("bpskew"),{hprate}=registerControl("hprate"),{hpsync}=registerControl("hpsync"),{hpdepth,hpdepthfreq}=registerControl("hpdepth"),{hpdepthfrequency}=registerControl("hpdepthfrequency","hpdepthfreq"),{hpshape}=registerControl("hpshape"),{hpdc}=registerControl("hpdc"),{hpskew}=registerControl("hpskew"),{vib,vibrato,v}=registerControl(["vib","vibmod"],"vibrato","v"),{noise}=registerControl("noise"),{vibmod,vmod}=registerControl(["vibmod","vib"],"vmod"),{hcutoff,hpf,hp}=registerControl(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance,hpq}=registerControl("hresonance","hpq"),{resonance,lpq}=registerControl("resonance","lpq"),{djf}=registerControl("djf"),{delay}=registerControl(["delay","delaytime","delayfeedback"]),{delayfeedback,delayfb,dfb}=registerControl("delayfeedback","delayfb","dfb"),{delayspeed}=registerControl("delayspeed"),{delaytime,delayt,dt}=registerControl("delaytime","delayt","dt"),{delaysync}=registerControl("delaysync"),{lock}=registerControl("lock"),{detune,det}=registerControl("detune","det"),{unison}=registerControl("unison"),{spread}=registerControl("spread"),{dry}=registerControl("dry"),{fadeTime,fadeOutTime}=registerControl("fadeTime","fadeOutTime"),{fadeInTime}=registerControl("fadeInTime"),{freq:freq$1}=registerControl("freq"),{pattack,patt}=registerControl("pattack","patt"),{pdecay,pdec}=registerControl("pdecay","pdec"),{psustain,psus}=registerControl("psustain","psus"),{prelease,prel}=registerControl("prelease","prel"),{penv}=registerControl("penv"),{pcurve}=registerControl("pcurve"),{panchor}=registerControl("panchor"),{gate,gat}=registerControl("gate","gat"),{leslie}=registerControl("leslie"),{lrate}=registerControl("lrate"),{lsize}=registerControl("lsize"),{activeLabel}=registerControl("activeLabel"),{label}=registerControl(["label","activeLabel"]),{degree}=registerControl("degree"),{mtranspose}=registerControl("mtranspose"),{ctranspose}=registerControl("ctranspose"),{harmonic}=registerControl("harmonic"),{stepsPerOctave}=registerControl("stepsPerOctave"),{octaveR}=registerControl("octaveR"),{nudge}=registerControl("nudge"),{octave:octave$1,oct}=registerControl("octave","oct"),{orbit}=registerControl("orbit","o"),{overgain}=registerControl("overgain"),{overshape}=registerControl("overshape"),{pan}=registerControl("pan"),{panspan}=registerControl("panspan"),{pansplay}=registerControl("pansplay"),{panwidth}=registerControl("panwidth"),{panorient}=registerControl("panorient"),{rate}=registerControl("rate"),{slide}=registerControl("slide"),{semitone}=registerControl("semitone"),{voice}=registerControl("voice"),{chord:chord$1}=registerControl("chord"),{dictionary:dictionary$3,dict}=registerControl("dictionary","dict"),{anchor}=registerControl("anchor"),{offset}=registerControl("offset"),{octaves}=registerControl("octaves"),{mode:mode$1}=registerControl(["mode","anchor"]),{room}=registerControl(["room","size"]),{roomlp,rlp}=registerControl("roomlp","rlp"),{roomdim,rdim}=registerControl("roomdim","rdim"),{roomfade,rfade}=registerControl("roomfade","rfade"),{ir,iresponse}=registerControl(["ir","i"],"iresponse"),{irspeed}=registerControl("irspeed"),{irbegin}=registerControl("irbegin"),{roomsize,size,sz,rsize}=registerControl("roomsize","size","sz","rsize"),{shape}=registerControl(["shape","shapevol"]),{distort,dist:dist$2}=registerControl(["distort","distortvol","distorttype"],"dist"),{distortvol}=registerControl("distortvol","distvol"),{distorttype}=registerControl("distorttype","disttype"),{compressor}=registerControl(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee}=registerControl("compressorKnee"),{compressorRatio}=registerControl("compressorRatio"),{compressorAttack}=registerControl("compressorAttack"),{compressorRelease}=registerControl("compressorRelease"),{speed}=registerControl("speed"),{stretch}=registerControl("stretch"),{unit}=registerControl("unit"),{squiz}=registerControl("squiz"),{vowel}=registerControl("vowel"),{waveloss}=registerControl("waveloss"),{density}=registerControl("density"),{expression}=registerControl("expression"),{sustainpedal}=registerControl("sustainpedal"),{fshift}=registerControl("fshift"),{fshiftnote}=registerControl("fshiftnote"),{fshiftphase}=registerControl("fshiftphase"),{triode}=registerControl("triode"),{krush}=registerControl("krush"),{kcutoff}=registerControl("kcutoff"),{octer}=registerControl("octer"),{octersub}=registerControl("octersub"),{octersubsub}=registerControl("octersubsub"),{ring}=registerControl("ring"),{ringf}=registerControl("ringf"),{ringdf}=registerControl("ringdf"),{freeze}=registerControl("freeze"),{xsdelay}=registerControl("xsdelay"),{tsdelay}=registerControl("tsdelay"),{real}=registerControl("real"),{imag}=registerControl("imag"),{enhance}=registerControl("enhance"),{comb}=registerControl("comb"),{smear:smear$1}=registerControl("smear"),{scram}=registerControl("scram"),{binshift}=registerControl("binshift"),{hbrick}=registerControl("hbrick"),{lbrick}=registerControl("lbrick"),{frameRate}=registerControl("frameRate"),{frames}=registerControl("frames"),{hours}=registerControl("hours"),{minutes}=registerControl("minutes"),{seconds}=registerControl("seconds"),{songPtr}=registerControl("songPtr"),{uid}=registerControl("uid"),{val}=registerControl("val"),{cps}=registerControl("cps"),{clip,legato}=registerControl("clip","legato"),{duration,dur}=registerControl("duration","dur"),{zrand}=registerControl("zrand"),{curve}=registerControl("curve"),{deltaSlide}=registerControl("deltaSlide"),{pitchJump}=registerControl("pitchJump"),{pitchJumpTime}=registerControl("pitchJumpTime"),{lfo,repeatTime}=registerControl("lfo","repeatTime"),{znoise}=registerControl("znoise"),{zmod}=registerControl("zmod"),{zcrush}=registerControl("zcrush"),{zdelay}=registerControl("zdelay"),{zzfx}=registerControl("zzfx"),{color,colour}=registerControl(["color","colour"]);let createParams=(...e)=>e.reduce((o,l)=>Object.assign(o,{[l]:createParam(l)}),{});const adsr=register("adsr",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d,b,S]=e;return o.set({attack:l,decay:d,sustain:b,release:S})}),ad=register("ad",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=l]=e;return o.attack(l).decay(d)}),ds=register("ds",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=0]=e;return o.set({decay:l,sustain:d})}),ar=register("ar",(e,o)=>{e=Array.isArray(e)?e:[e];const[l,d=l]=e;return o.set({attack:l,release:d})}),{midichan}=registerControl("midichan"),{midimap}=registerControl("midimap"),{midiport}=registerControl("midiport"),{midicmd}=registerControl("midicmd"),control=register("control",(e,o)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[l,d]=e;return o.ccn(l).ccv(d)}),{ccn}=registerControl("ccn"),{ccv}=registerControl("ccv"),{ctlNum}=registerControl("ctlNum"),{nrpnn}=registerControl("nrpnn"),{nrpv}=registerControl("nrpv"),{progNum}=registerControl("progNum"),sysex=register("sysex",(e,o)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[l,d]=e;return o.sysexid(l).sysexdata(d)}),{sysexid}=registerControl("sysexid"),{sysexdata}=registerControl("sysexdata"),{midibend}=registerControl("midibend"),{miditouch}=registerControl("miditouch"),{polyTouch}=registerControl("polyTouch"),{oschost}=registerControl("oschost"),{oscport}=registerControl("oscport"),getControlName=e=>controlAlias.has(e)?controlAlias.get(e):e,as=register("as",(e,o)=>(e=Array.isArray(e)?e:[e],o.fmap(l=>(l=Array.isArray(l)?l:[l],l=Object.fromEntries(e.map((d,b)=>[getControlName(d),l[b]])),l)))),scrub=register("scrub",(e,o)=>e.outerBind(l=>{Array.isArray(l)||(l=[l]);const[d,b=1]=l;return o.begin(d).mul(speed(b)).clip(1)}),!1),controls=Object.freeze(Object.defineProperty({__proto__:null,accelerate,activeLabel,ad,adsr,amp,analyze,anchor,ar,as,att,attack,bandf,bandq,bank,bbexpr,bbst,begin,binshift,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,byteBeatExpression,byteBeatStartTime,ccn,ccv,ch,channel,channels,chord:chord$1,chorus,clip,coarse,color,colour,comb,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,control,cps,createParam,createParams,crush,ctf,ctlNum,ctranspose,curve,cut,cutoff,dec,decay,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,density,det,detune,dfb,dict,dictionary:dictionary$3,dist:dist$2,distort,distorttype,distortvol,djf,drive,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,end,enhance,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fft,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,frameRate,frames,freeze,freq:freq$1,fshift,fshiftnote,fshiftphase,ftype,gain,gat,gate,getControlName,harmonic,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,imag,ir,irbegin,iresponse,irspeed,isControlName,kcutoff,krush,label,lbrick,legato,leslie,lfo,lock,loop,loopBegin,loopEnd,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mode:mode$1,mtranspose,n,noise,note:note$2,nrpnn,nrpv,nudge,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,offset,orbit,oschost,oscport,overgain,overshape,pan,panchor,panorient,panspan,pansplay,panwidth,patt,pattack,pcurve,pdec,pdecay,penv,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phc,phd,phs,pitchJump,pitchJumpTime,polyTouch,postgain,prel,prelease,progNum,psus,psustain,pw,pwrate,pwsweep,rate,rdim,real,registerControl,rel,release,repeatTime,resonance,rfade,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rsize,s,scram,scrub,seconds,semitone,shape,size,slide,smear:smear$1,songPtr,sound,source,speed,spread,squiz,src,stepsPerOctave,stretch,sus,sustain,sustainpedal,sysex,sysexdata,sysexid,sz,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,triode,tsdelay,uid,unison,unit,v,val,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xsdelay,zcrush,zdelay,zmod,znoise,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),left=function(e,o){const[l,d]=e,[b,S]=o,[M,E]=splitAt(d,b);return[[d,l-d],[zipWith((L,R)=>L.concat(R),M,S),E]]},right=function(e,o){const[l,d]=e,[b,S]=o,[M,E]=splitAt(l,S);return[[l,d-l],[zipWith((R,Z)=>R.concat(Z),b,M),E]]},_bjorklund=function(e,o){const[l,d]=e;return Math.min(l,d)<=1?[e,o]:_bjorklund(...l>d?left(e,o):right(e,o))},bjorklund=function(e,o){const l=e<0,d=Math.abs(e),b=o-d,S=Array(d).fill([1]),M=Array(b).fill([0]),E=_bjorklund([d,b],[S,M]),L=flatten(E[1][0]).concat(flatten(E[1][1]));return l?L.map(R=>1-R):L},_euclidRot=function(e,o,l){const d=bjorklund(e,o);return l?rotate$2(d,-l):d},euclid=register("euclid",function(e,o,l){return l.struct(_euclidRot(e,o,0))}),bjork=register("bjork",function(e,o){Array.isArray(e)||(e=[e]);const[l,d=l,b=0]=e;return o.struct(_euclidRot(l,d,b))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(e,o,l,d){return d.struct(_euclidRot(e,o,l))}),_euclidLegato=function(e,o,l,d){if(e<1)return silence;const S=_euclidRot(e,o,0).join("").split("1").slice(1).map(M=>[M.length+1,!0]);return d.struct(timeCat(...S)).late(fraction$1(l).div(o))},euclidLegato=register(["euclidLegato"],function(e,o,l){return _euclidLegato(e,o,0,l)}),euclidLegatoRot=register(["euclidLegatoRot"],function(e,o,l,d){return _euclidLegato(e,o,l,d)}),{euclidish,eish}=register(["euclidish","eish"],function(e,o,l,d){const b=_morph(bjorklund(e,o),new Array(e).fill(1),l);return d.struct(b).setSteps(o)});function createClock(e,o,l=.05,d=.1,b=.1,S=globalThis.setInterval,M=globalThis.clearInterval,E=!0){let L=0,R=0,Z=10**4,q=.01;const K=le=>l=le(l);b=b||d/2;const U=()=>{const le=e(),_e=le+d+b;for(R===0&&(R=le+q);R<_e;)R=E?Math.round(R*Z)/Z:R,o(R,l,L,le),R+=l,L++};let se;const re=()=>{ae(),U(),se=S(U,d*1e3)},ae=()=>{se!==void 0&&M(se),se=void 0};return{setDuration:K,start:re,stop:()=>{L=0,R=0,ae()},pause:()=>ae(),duration:l,interval:d,getPhase:()=>R,minLatency:q}}function steady(e){return new Pattern$1(o=>[new Hap(void 0,o.span,e)])}const signal=e=>{const o=l=>[new Hap(void 0,l.span,e(l.span.begin))];return new Pattern$1(o)},saw=signal(e=>e%1),saw2=saw.toBipolar(),isaw=signal(e=>1-e%1),isaw2=isaw.toBipolar(),sine2=signal(e=>Math.sin(Math.PI*2*e)),sine=sine2.fromBipolar(),cosine=sine._early(fraction$1(1).div(4)),cosine2=sine2._early(fraction$1(1).div(4)),square=signal(e=>Math.floor(e*2%2)),square2=square.toBipolar(),tri=fastcat(saw,isaw),tri2=fastcat(saw2,isaw2),itri=fastcat(isaw,saw),itri2=fastcat(isaw2,saw2),time$1=signal(id);let _mouseY=0,_mouseX=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{_mouseY=e.clientY/document.body.clientHeight,_mouseX=e.clientX/document.body.clientWidth});const mousey=signal(()=>_mouseY),mouseY=signal(()=>_mouseY),mousex=signal(()=>_mouseX),mouseX=signal(()=>_mouseX),xorwise=e=>{const o=e<<13^e,l=o>>17^o;return l<<5^l},_frac=e=>e-Math.trunc(e),timeToIntSeed=e=>xorwise(Math.trunc(_frac(e/300)*536870912)),intSeedToRand=e=>e%536870912/536870912,timeToRand=e=>Math.abs(intSeedToRand(timeToIntSeed(e))),timeToRandsPrime=(e,o)=>{const l=[];for(let d=0;d<o;++d)l.push(intSeedToRand(e)),e=xorwise(e);return l},timeToRands=(e,o)=>timeToRandsPrime(timeToIntSeed(e),o),run=e=>saw.range(0,e).round().segment(e),binary=e=>{const o=reify(e).log2(0).floor().add(1);return binaryN(e,o)},binaryN=(e,o=16)=>{o=reify(o);const l=run(o).mul(-1).add(o.sub(1));return reify(e).segment(o).brshift(l).band(pure(1))},binaryL=e=>{const o=reify(e).log2(0).floor().add(1);return binaryNL(e,o)},binaryNL=(e,o=16)=>reify(e).withValue(l=>d=>{const b=[];for(let S=d-1;S>=0;S--)b.push(l>>S&1);return b}).appLeft(reify(o)),randL=e=>signal(o=>l=>timeToRands(o,l).map(Math.abs)).appLeft(reify(e)),randrun=e=>signal(o=>{const d=timeToRands(o.floor().add(.5),e).map((S,M)=>[S,M]).sort((S,M)=>(S[0]>M[0])-(S[0]<M[0])).map(S=>S[1]),b=o.cyclePos().mul(e).floor()%e;return d[b]})._segment(e),_rearrangeWith=(e,o,l)=>{const d=[...Array(o).keys()].map(b=>l.zoom(fraction$1(b).div(o),fraction$1(b+1).div(o)));return e.fmap(b=>d[b].repeatCycles(o)._fast(o)).innerJoin()},shuffle$2=register("shuffle",(e,o)=>_rearrangeWith(randrun(e),e,o)),scramble=register("scramble",(e,o)=>_rearrangeWith(_irand(e)._segment(e),e,o)),rand=signal(timeToRand),rand2=rand.toBipolar(),_brandBy=e=>rand.fmap(o=>o<e),brandBy=e=>reify(e).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=e=>rand.fmap(o=>Math.trunc(o*e)),irand=e=>reify(e).fmap(_irand).innerJoin(),__chooseWith=(e,o)=>(o=o.map(reify),o.length==0?silence:e.range(0,o.length).fmap(l=>{const d=Math.min(Math.max(Math.floor(l),0),o.length-1);return o[d]})),chooseWith=(e,o)=>__chooseWith(e,o).outerJoin(),chooseInWith=(e,o)=>__chooseWith(e,o).innerJoin(),choose=(...e)=>chooseWith(rand,e),chooseIn=(...e)=>chooseInWith(rand,e),chooseOut=choose;Pattern$1.prototype.choose=function(...e){return chooseWith(this,e)},Pattern$1.prototype.choose2=function(...e){return chooseWith(this.fromBipolar(),e)};const chooseCycles=(...e)=>chooseInWith(rand.segment(1),e),randcat=chooseCycles,_wchooseWith=function(e,...o){const l=o.map(E=>reify(E[0])),d=[];let b=pure(0);for(const E of o)b=b.add(E[1]),d.push(b);const S=sequenceP(d),M=function(E){const L=b.mul(E);return S.fmap(R=>Z=>l[R.findIndex(q=>q>Z,R)]).appLeft(L)};return e.bind(M)},wchooseWith=(...e)=>_wchooseWith(...e).outerJoin(),wchoose=(...e)=>wchooseWith(rand,...e),wchooseCycles=(...e)=>_wchooseWith(rand.segment(1),...e).innerJoin(),wrandcat=wchooseCycles;function _perlin(e){let o=Math.floor(e),l=o+1;const d=M=>6*M**5-15*M**4+10*M**3;return(M=>E=>L=>E+d(M)*(L-E))(e-o)(timeToRand(o))(timeToRand(l))}const perlinWith=e=>e.fmap(_perlin);function _berlin(e){const o=Math.floor(e),l=o+1,d=timeToRand(o),b=timeToRand(l)+d,S=(e-o)/(l-o);return((E,L,R)=>E+(L-E)*R)(d,b,S)/2}const berlinWith=e=>e.fmap(_berlin),perlin=perlinWith(time$1.fmap(e=>Number(e))),berlin=berlinWith(time$1.fmap(e=>Number(e))),degradeByWith=register("degradeByWith",(e,o,l)=>l.fmap(d=>b=>d).appLeft(e.filterValues(d=>d>o)),!0,!0),degradeBy=register("degradeBy",function(e,o){return o._degradeByWith(rand,e)},!0,!0),degrade=register("degrade",e=>e._degradeBy(.5),!0,!0),undegradeBy=register("undegradeBy",function(e,o){return o._degradeByWith(rand.fmap(l=>1-l),e)},!0,!0),undegrade=register("undegrade",e=>e._undegradeBy(.5),!0,!0),sometimesBy=register("sometimesBy",function(e,o,l){return reify(e).fmap(d=>stack(l._degradeBy(d),o(l._undegradeBy(1-d)))).innerJoin()}),sometimes=register("sometimes",function(e,o){return o._sometimesBy(.5,e)}),someCyclesBy=register("someCyclesBy",function(e,o,l){return reify(e).fmap(d=>stack(l._degradeByWith(rand._segment(1),d),o(l._degradeByWith(rand.fmap(b=>1-b)._segment(1),1-d)))).innerJoin()}),someCycles=register("someCycles",function(e,o){return o._someCyclesBy(.5,e)}),often=register("often",function(e,o){return o.sometimesBy(.75,e)}),rarely=register("rarely",function(e,o){return o.sometimesBy(.25,e)}),almostNever=register("almostNever",function(e,o){return o.sometimesBy(.1,e)}),almostAlways=register("almostAlways",function(e,o){return o.sometimesBy(.9,e)}),never=register("never",function(e,o){return o}),always=register("always",function(e,o){return e(o)});function _keyDown(e){Array.isArray(e)===!1&&(e=[e]);const o=getCurrentKeyboardState();return e.every(l=>{const d=keyAlias.get(l)??l;return o[d]})}const whenKey=register("whenKey",function(e,o,l){return l.when(_keyDown(e),o)}),keyDown=register("keyDown",function(e){return e.fmap(_keyDown)}),_pick=function(e,o,l=!0){const d=Array.isArray(e),b=Object.keys(e).length;return e=objectMap(e,reify),b===0?silence:o.fmap(S=>{let M=S;return d&&(M=l?Math.round(M)%b:clamp$1(Math.round(M),0,e.length-1)),e[M]})},pick=function(e,o){return Array.isArray(o)&&([o,e]=[e,o]),__pick(e,o)},__pick=register("pick",function(e,o){return _pick(e,o,!1).innerJoin()}),pickmod=register("pickmod",function(e,o){return _pick(e,o,!0).innerJoin()}),pickF=register("pickF",function(e,o,l){return l.apply(pick(e,o))}),pickmodF=register("pickmodF",function(e,o,l){return l.apply(pickmod(e,o))}),pickOut=register("pickOut",function(e,o){return _pick(e,o,!1).outerJoin()}),pickmodOut=register("pickmodOut",function(e,o){return _pick(e,o,!0).outerJoin()}),pickRestart=register("pickRestart",function(e,o){return _pick(e,o,!1).restartJoin()}),pickmodRestart=register("pickmodRestart",function(e,o){return _pick(e,o,!0).restartJoin()}),pickReset=register("pickReset",function(e,o){return _pick(e,o,!1).resetJoin()}),pickmodReset=register("pickmodReset",function(e,o){return _pick(e,o,!0).resetJoin()}),{inhabit,pickSqueeze}=register(["inhabit","pickSqueeze"],function(e,o){return _pick(e,o,!1).squeezeJoin()}),{inhabitmod,pickmodSqueeze}=register(["inhabitmod","pickmodSqueeze"],function(e,o){return _pick(e,o,!0).squeezeJoin()}),squeeze=(e,o)=>(o=o.map(reify),o.length==0?silence:e.fmap(l=>{const d=_mod$2(Math.round(l),o.length);return o[d]}).squeezeJoin());let synth;try{synth=window?.speechSynthesis}catch(e){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(e,o,l){synth.cancel();const d=new SpeechSynthesisUtterance(e);d.lang=o,allVoices=synth.getVoices();const b=allVoices.filter(S=>S.lang.includes(o));typeof l=="number"?d.voice=b[l%b.length]:typeof l=="string"&&(d.voice=b.find(S=>S.name===S)),speechSynthesis.speak(d)}const speak=register("speak",function(e,o,l){return l.onTrigger(d=>{triggerSpeech(d.value,e,o)})}),strudelScope={},evalScope=async(...e)=>{const o=await Promise.allSettled(e),l=o.filter(d=>d.status==="fulfilled").map(d=>d.value);return o.forEach((d,b)=>{d.status==="rejected"&&console.warn(`evalScope: module with index ${b} could not be loaded:`,d.reason)}),l.forEach(d=>{Object.entries(d).forEach(([b,S])=>{globalThis[b]=S,strudelScope[b]=S})}),l};function safeEval(e,o={}){const{wrapExpression:l=!0,wrapAsync:d=!0}=o;l&&(e=`{${e}}`),d&&(e=`(async ()=>${e})()`);const b=`"use strict";return (${e})`;return Function(b)()}const evaluate$1=async(e,o,l)=>{let d={};if(o){const M=o(e,l);e=M.output,d=M}return{mode:"javascript",pattern:await safeEval(e,{wrapExpression:!!o}),meta:d}};class NeoCyclist{constructor({onTrigger:o,onToggle:l,getTime:d}){this.started=!1,this.cps=.5,this.getTime=d,this.time_at_last_tick_message=0,this.collator=new ClockCollator({getTargetClockTime:d}),this.onToggle=l,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL("/clockworker-ZDiUtESR.js",_documentCurrentScript&&_documentCurrentScript.tagName.toUpperCase()==="SCRIPT"&&_documentCurrentScript.src||new URL("strudel.bundle.js",document.baseURI).href)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const b=M=>{const{cps:E,begin:L,end:R,cycle:Z,time:q}=M;this.cps=E,this.cycle=Z;const K=this.collator.calculateOffset(q)+q;S(L,R,K),this.time_at_last_tick_message=K},S=(M,E,L)=>{if(this.started===!1)return;this.pattern.queryArc(M,E,{_cps:this.cps,cyclist:"neocyclist"}).forEach(Z=>{if(Z.hasOnset()){const K=cycleToSeconds$1(Z.whole.begin-this.cycle,this.cps)+L+this.latency,U=cycleToSeconds$1(Z.duration,this.cps);o?.(Z,0,U,this.cps,K)}})};this.channel.onmessage=M=>{if(!this.started)return;const{payload:E,type:L}=M.data;switch(L){case"tick":b(E)}}}sendMessage(o,l){this.worker.port.postMessage({type:o,payload:l,id:this.id})}now(){const o=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+o}setCps(o=1){this.sendMessage("cpschange",{cps:o})}setCycle(o){this.sendMessage("setcycle",{cycle:o})}setStarted(o){this.sendMessage("toggle",{started:o}),this.started=o,this.onToggle?.(o)}start(){logger$2("[cyclist] start"),this.setStarted(!0)}stop(){logger$2("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(o,l=!1){this.pattern=o,l&&!this.started&&this.start()}log(o,l,d){const b=d.filter(S=>S.hasOnset());console.log(`${o.toFixed(4)} - ${l.toFixed(4)} ${Array(b.length).fill("I").join("")}`)}}class Cyclist{constructor({interval:o,onTrigger:l,onToggle:d,onError:b,getTime:S,latency:M=.1,setInterval:E,clearInterval:L,beforeStart:R}){this.started=!1,this.beforeStart=R,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=S,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=d,this.latency=M,this.clock=createClock(S,(Z,q,K,U)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=Z),this.num_ticks_since_cps_change++;const re=this.num_ticks_since_cps_change*q*this.cps;try{const ae=this.lastEnd;this.lastBegin=ae;const de=this.num_cycles_at_cps_change+re;if(this.lastEnd=de,this.lastTick=Z,Z<U){console.log("skip query: too late");return}this.pattern.queryArc(ae,de,{_cps:this.cps,cyclist:"cyclist"}).forEach(Ee=>{if(Ee.hasOnset()){const le=(Ee.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+M,_e=Ee.duration/this.cps,Ce=le-Z;l?.(Ee,Ce,_e,this.cps,le),Ee.value.cps!==void 0&&this.cps!=Ee.value.cps&&(this.cps=Ee.value.cps,this.num_ticks_since_cps_change=0)}})}catch(ae){errorLogger$1(ae),b?.(ae)}},o,.1,.1,E,L)}now(){if(!this.started)return 0;const o=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+o*this.cps}setStarted(o){this.started=o,this.onToggle?.(o)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(o,l=!1){this.pattern=o,l&&!this.started&&await this.start()}setCps(o=.5){this.cps!==o&&(this.cps=o,this.num_ticks_since_cps_change=0)}log(o,l,d){const b=d.filter(S=>S.hasOnset());console.log(`${o.toFixed(4)} - ${l.toFixed(4)} ${Array(b.length).fill("I").join("")}`)}}let time;function getTime(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(e){time=e}function repl$1({defaultOutput:e,onEvalError:o,beforeEval:l,beforeStart:d,afterEval:b,getTime:S,transpiler:M,onToggle:E,editPattern:L,onUpdateState:R,sync:Z=!1,setInterval:q,clearInterval:K,id:U,mondo:se=!1}){const re={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},ae={id:U},de=At=>{Object.assign(re,At),re.isDirty=re.code!==re.activeCode,re.error=re.evalError||re.schedulerError,R?.(re)},ve={onTrigger:getTrigger({defaultOutput:e,getTime:S}),getTime:S,onToggle:At=>{de({started:At}),E?.(At)},setInterval:q,clearInterval:K,beforeStart:d},Ee=Z&&typeof SharedWorker<"u"?new NeoCyclist(ve):new Cyclist(ve);let le={},_e=0,Ce;const We=function(){return le={},_e=0,Ce=void 0,silence};function He(At){return At._Pattern?At.__pure:At}const Mt=async(At,hn=!0)=>(At=L?.(At)||At,await Ee.setPattern(At,hn),At);setTime(()=>Ee.now());const ut=()=>Ee.stop(),Nt=()=>Ee.start(),St=()=>Ee.pause(),xt=()=>Ee.toggle(),$t=At=>(Ee.setCps(He(At)),silence),qt=At=>(Ee.setCps(He(At)/60),silence);let Vt=[];const Ut=function(At){return Vt.push(At),silence},Yt=function(At){return Ce=At,silence},ai=()=>{Pattern$1.prototype.p=function(hn){return typeof hn=="string"&&(hn.startsWith("_")||hn.endsWith("_"))?silence:(hn.includes("$")&&(hn=`${hn}${_e}`,_e++),le[hn]=this,this)},Pattern$1.prototype.q=function(hn){return silence};try{for(let hn=1;hn<10;++hn)Object.defineProperty(Pattern$1.prototype,`d${hn}`,{get(){return this.p(hn)},configurable:!0}),Object.defineProperty(Pattern$1.prototype,`p${hn}`,{get(){return this.p(hn)},configurable:!0}),Pattern$1.prototype[`q${hn}`]=silence}catch(hn){console.warn("injectPatternMethods: error:",hn)}const At=register("cpm",function(hn,ft){return ft._fast(hn/60/Ee.cps)});return evalScope({all:Ut,each:Yt,hush:We,cpm:At,setCps:$t,setcps:$t,setCpm:qt,setcpm:qt})};return{scheduler:Ee,evaluate:async(At,hn=!0,ft=!0)=>{if(!At)throw new Error("no code to evaluate");try{de({code:At,pending:!0}),await ai(),setTime(()=>Ee.now()),await l?.({code:At}),Vt=[],ft&&We(),se&&(At=`mondolang\`${At}\``);let{pattern:Xn,meta:zn}=await evaluate$1(At,M,ae);if(Object.keys(le).length){let Dt=[],ei=!1;for(const[fi,Qi]of Object.entries(le)){const Ei=fi.length>1&&fi.startsWith("S");if(Ei&&ei===!1&&(Dt=[],ei=!0),!ei||ei&&Ei){const gi=Qi.withState(Ti=>Ti.setControls({id:fi}));Dt.push(gi)}}Ce&&(Dt=Dt.map(fi=>Ce(fi))),Xn=stack(...Dt)}else Ce&&(Xn=Ce(Xn));if(Vt.length)for(const Dt of Vt)Xn=Dt(Xn);return isPattern(Xn)||(Xn=silence),logger$2("[eval] code updated"),Xn=await Mt(Xn,hn),de({miniLocations:zn?.miniLocations||[],widgets:zn?.widgets||[],activeCode:At,pattern:Xn,evalError:void 0,schedulerError:void 0,pending:!1}),b?.({code:At,pattern:Xn,meta:zn}),Xn}catch(Xn){logger$2(`[eval] error: ${Xn.message}`,"error"),console.error(Xn),de({evalError:Xn,pending:!1}),o?.(Xn)}},start:Nt,stop:ut,pause:St,setCps:$t,setPattern:Mt,setCode:At=>de({code:At}),toggle:xt,state:re}}const getTrigger=({getTime:e,defaultOutput:o})=>async(l,d,b,S,M)=>{try{(!l.context.onTrigger||!l.context.dominantTrigger)&&await o(l,d,b,S,M),l.context.onTrigger&&await l.context.onTrigger(l,e(),S,M)}catch(E){errorLogger$1(E,"getTrigger")}},backgroundImage=function(e,o={}){const l=document.getElementById("code"),d="background-image:url("+e+");background-size:contain;";l.style=d;const{className:b}=l,S=(L,R)=>{({style:()=>l.style=d+";"+R,className:()=>l.className=R+" "+b})[L]()},M=Object.entries(o).filter(([L,R])=>typeof R=="function");Object.entries(o).filter(([L,R])=>typeof R=="string").forEach(([L,R])=>S(L,R)),M.length},cleanupUi=()=>{const e=document.getElementById("code");e&&(e.style="")};logger$2("🌀 @strudel/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`),globalThis._strudelLoaded=!0;const strudelCore=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator,Cyclist,Fraction:fraction$1,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_fitslice,_irand,_keyDown,_match,_mod:_mod$2,_morph,_polymeterListSteps,_retime,_slices,accelerate,activeLabel,ad,add:add$5,adsr,almostAlways,almostNever,always,amp,analyze,anchor,and,apply,applyN,ar,arp,arpWith,arrange,as,att,attack,averageArray,backgroundImage,band,bandf,bandq,bank,base64ToUnicode,bbexpr,bbst,beat,begin,berlin,berlinWith,binary,binaryL,binaryN,binaryNL,bind,binshift,bite,bjork,bjorklund,blshift,bor,bp,bpa,bpattack,bpd,bpdc,bpdecay,bpdepth,bpdepthfrequency,bpe,bpenv,bpf,bpq,bpr,bprate,bprelease,bps,bpshape,bpskew,bpsustain,bpsync,brak,brand,brandBy,brshift,bxor,bypass,byteBeatExpression,byteBeatStartTime,calculateSteps,cat,ccn,ccv,ceil,ch,channel,channels,choose,chooseCycles,chooseIn,chooseInWith,chooseOut,chooseWith,chop,chord:chord$1,chorus,chunk,chunkBack,chunkBackInto,chunkInto,chunkback,chunkbackinto,chunkinto,clamp:clamp$1,cleanupUi,clip,coarse,code2hash,color,colour,comb,compose,compress,compressSpan,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,compressspan,constant,contract,control,controls,cosine,cosine2,cpm,cps,createClock,createParam,createParams,crush,ctf,ctlNum,ctranspose,curry,curve,cut,cutoff,cycleToSeconds:cycleToSeconds$1,dec,decay,degrade,degradeBy,degradeByWith,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,det,detune,dfb,dict,dictionary:dictionary$3,dist:dist$2,distort,distorttype,distortvol,div,djf,drawLine,drive,drop,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,early,echo,echoWith,echowith,eish,end,enhance,eq,eqt,errorLogger:errorLogger$1,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidish,euclidrot,evalScope,evaluate:evaluate$1,every,expand,expression,extend,fadeInTime,fadeOutTime,fadeTime,fanchor,fast,fastChunk,fastGap,fastcat,fastchunk,fastgap,fft,filter:filter$1,filterWhen,firstOf,fit,flatten,floor,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,focus,focusSpan,focusspan,fractionalArgs,frameRate,frames,freeze,freq:freq$1,freqToMidi:freqToMidi$2,fromBipolar,fshift,fshiftnote,fshiftphase,ftype,func,gain,gap,gat,gate,getAccidentalsOffset:getAccidentalsOffset$1,getControlName,getCurrentKeyboardState,getEventOffsetMs,getFreq,getFrequency,getPerformanceTimeSeconds,getPlayableNoteValue,getSoundIndex:getSoundIndex$1,getTime,getTrigger,grow,gt,gte,harmonic,hash2code,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdc,hpdecay,hpdepth,hpdepthfreq,hpdepthfrequency,hpe,hpenv,hpf,hpq,hpr,hprate,hprelease,hps,hpshape,hpskew,hpsustain,hpsync,hresonance,hsl,hsla,hurry,id,imag,inhabit,inhabitmod,innerBind,inside,inv,invert:invert$1,ir,irand,irbegin,iresponse,irspeed,isControlName,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,itri,itri2,jux,juxBy,juxby,kcutoff,keep,keepif,keyAlias,keyDown,krush,label,lastOf,late,lbrick,legato,leslie,lfo,linger,listRange,lock,logKey,logger:logger$2,loop,loopAt,loopAtCps,loopBegin,loopEnd,loopat,loopatcps,loopb,loope,lp,lpa,lpattack,lpd,lpdc,lpdecay,lpdepth,lpdepthfrequency,lpe,lpenv,lpf,lpq,lpr,lprate,lprelease,lps,lpshape,lpskew,lpsustain,lpsync,lrate,lsize,lt,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mod:mod$3,mode:mode$1,morph,mouseX,mouseY,mousex,mousey,mtranspose,mul,n,nanFallback:nanFallback$1,ne,net,never,noise,note:note$2,noteToMidi:noteToMidi$1,nothing,nrpnn,nrpv,nudge,numeralArgs,objectMap,oct,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,off,offset,often,or,orbit,oschost,oscport,outerBind,outside,overgain,overshape,pace,pairs,palindrome,pan,panchor,panorient,panspan,pansplay,panwidth,parray,parseFractional,parseNumeral,partials,patt,pattack,pcurve,pdec,pdecay,penv,perlin,perlinWith,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phases,phc,phd,phs,pick,pickF,pickOut,pickReset,pickRestart,pickSqueeze,pickmod,pickmodF,pickmodOut,pickmodReset,pickmodRestart,pickmodSqueeze,pipe,pitchJump,pitchJumpTime,ply,plyForEach,plyWith,pm,polyBind,polyTouch,polymeter,polyrhythm,postgain,pow,pr,prel,prelease,press,pressBy,progNum,psus,psustain,pure,pw,pwrate,pwsweep,rand,rand2,randL,randcat,randrun,range:range$2,range2,rangex,rarely,rate,ratio,rdim,real,ref:ref$1,register,registerControl,reify,rel,release,removeUndefineds,repeatCycles,repeatTime,repl:repl$1,replicate,resonance,rev,revv,rfade,rib,ribbon,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rotate:rotate$2,round,rsize,run,s,s_add,s_alt,s_cat,s_contract,s_expand,s_extend,s_polymeter,s_sub,s_taper,s_taperlist,s_tour,s_zip,saw,saw2,scram,scramble,scrub,seconds,seg,segment,semitone,seq,seqPLoop,sequence,sequenceP,set,setStringParser,setTime,shape,shrink,shrinklist,shuffle:shuffle$2,signal,silence,sine,sine2,size,slice,slide,slow,slowChunk,slowcat,slowcatPrime,slowchunk,smear:smear$1,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,songPtr,sound,source,sparsity,speak,speed,splice,splitAt,spread,square,square2,squeeze,squeezeBind,squiz,src,stack,stackBy,stackCentre,stackLeft,stackRight,steady,stepBind,stepalt,stepcat,steps:steps$2,stepsPerOctave,stretch,striate,stringifyValues,struct,strudelScope,stut,stutWith,stutwith,sub,superimpose,sus,sustain,sustainpedal,swing,swingBy,sysex,sysexdata,sysexid,sz,take,time:time$1,timeCat,timecat,toBipolar,tokenizeNote:tokenizeNote$3,tour,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,tri,tri2,triode,tsdelay,uid,undegrade,undegradeBy,unicodeToBase64,uniq,uniqsort,uniqsortr,unison,unit,v,val,valueToMidi:valueToMidi$1,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wchoose,wchooseCycles,when,whenKey,withValue,within,wrandcat,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xfade,xsdelay,zcrush,zdelay,zip,zipWith,zmod,znoise,zoom,zoomArc,zoomarc,zrand,zzfx},Symbol.toStringTag,{value:"Module"}));function peg$subclass(e,o){function l(){this.constructor=e}l.prototype=o.prototype,e.prototype=new l}function peg$SyntaxError(e,o,l,d){var b=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(b,peg$SyntaxError.prototype),b.expected=o,b.found=l,b.location=d,b.name="SyntaxError",b}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(e,o,l){return l=l||" ",e.length>o?e:(o-=e.length,l+=l.repeat(o),e+l.slice(0,o))}peg$SyntaxError.prototype.format=function(e){var o="Error: "+this.message;if(this.location){var l=null,d;for(d=0;d<e.length;d++)if(e[d].source===this.location.source){l=e[d].text.split(/\r\n|\n|\r/g);break}var b=this.location.start,S=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(b):b,M=this.location.source+":"+S.line+":"+S.column;if(l){var E=this.location.end,L=peg$padEnd("",S.line.toString().length," "),R=l[b.line-1],Z=b.line===E.line?E.column:R.length+1,q=Z-b.column||1;o+=`
 --> `+M+`
`+L+` |
`+S.line+" | "+R+`
`+L+" | "+peg$padEnd("",b.column-1," ")+peg$padEnd("",q,"^")}else o+=`
 at `+M}return o},peg$SyntaxError.buildMessage=function(e,o){var l={literal:function(R){return'"'+b(R.text)+'"'},class:function(R){var Z=R.parts.map(function(q){return Array.isArray(q)?S(q[0])+"-"+S(q[1]):S(q)});return"["+(R.inverted?"^":"")+Z.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function d(R){return R.charCodeAt(0).toString(16).toUpperCase()}function b(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Z){return"\\x0"+d(Z)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Z){return"\\x"+d(Z)})}function S(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Z){return"\\x0"+d(Z)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Z){return"\\x"+d(Z)})}function M(R){return l[R.type](R)}function E(R){var Z=R.map(M),q,K;if(Z.sort(),Z.length>0){for(q=1,K=1;q<Z.length;q++)Z[q-1]!==Z[q]&&(Z[K]=Z[q],K++);Z.length=K}switch(Z.length){case 1:return Z[0];case 2:return Z[0]+" or "+Z[1];default:return Z.slice(0,-1).join(", ")+", or "+Z[Z.length-1]}}function L(R){return R?'"'+b(R)+'"':"end of input"}return"Expected "+E(e)+" but "+L(o)+" found."};function peg$parse(e,o){o=o!==void 0?o:{};var l={},d=o.grammarSource,b={start:Ns},S=Ns,M=".",E="-",L="0",R=",",Z="|",q="[",K="]",U="{",se="}",re="%",ae="<",de=">",ve="!",Ee="(",le=")",_e="/",Ce="*",We="?",He=":",Mt="..",ut="^",Nt="struct",St="target",xt="euclid",$t="slow",qt="rotL",Vt="rotR",Ut="fast",Yt="scale",ai="//",si="cat",di="$",At="setcps",hn="setbpm",ft="hush",Xn=/^[1-9]/,zn=/^[eE]/,Dt=/^[+\-]/,ei=/^[0-9]/,fi=/^[ \n\r\t\xA0]/,Qi=/^["']/,Ei=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,gi=/^[@_]/,Ti=/^[^\n]/,wn=Yr("number"),Bi=ri(".",!1),vi=Mr([["1","9"]],!1,!1),Di=Mr(["e","E"],!1,!1),sr=Mr(["+","-"],!1,!1),Je=ri("-",!1),tt=ri("0",!1),qe=Mr([["0","9"]],!1,!1),_t=Yr("whitespace"),Ft=Mr([" ",`
`,"\r","	"," "],!1,!1),Wt=ri(",",!1),Rt=ri("|",!1),un=Mr(['"',"'"],!1,!1),Bt=Yr('a letter, a number, "-", "#", ".", "^", "_"'),ln=Mr(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),pn=ri("[",!1),Oi=ri("]",!1),yi=ri("{",!1),ti=ri("}",!1),ii=ri("%",!1),Fi=ri("<",!1),Et=ri(">",!1),ui=Mr(["@","_"],!1,!1),Li=ri("!",!1),cn=ri("(",!1),Bn=ri(")",!1),pi=ri("/",!1),bi=ri("*",!1),Ni=ri("?",!1),Hi=ri(":",!1),Zi=ri("..",!1),ee=ri("^",!1),Oe=ri("struct",!1),ue=ri("target",!1),ye=ri("euclid",!1),ke=ri("slow",!1),at=ri("rotL",!1),Ot=ri("rotR",!1),kt=ri("fast",!1),rn=ri("scale",!1),oi=ri("//",!1),Mi=Mr([`
`],!0,!1),Zn=ri("cat",!1),qr=ri("$",!1),br=ri("setcps",!1),Es=ri("setbpm",!1),lr=ri("hush",!1),Ts=function(){return parseFloat(Ls())},jo=function(te){const Pe=te.join("");return Pe==="."||Pe==="_"},Fs=function(te){return new Cl(te.join(""))},Ya=function(te){return te},Uo=function(te,Pe){return te.arguments_.stepsPerCycle=Pe,te},Ks=function(te){return te},Js=function(te){return te.arguments_.alignment="polymeter_slowcat",te},Ha=function(te){return Pe=>Pe.options_.weight=(Pe.options_.weight??1)+(te??2)-1},Rs=function(te){return Pe=>{const Ie=(Pe.options_.reps??1)+(te??2)-1;Pe.options_.reps=Ie,Pe.options_.ops=Pe.options_.ops.filter(yt=>yt.type_!=="replicate"),Pe.options_.ops.push({type_:"replicate",arguments_:{amount:Ie}}),Pe.options_.weight=Ie}},Yo=function(te,Pe,Ie){return yt=>yt.options_.ops.push({type_:"bjorklund",arguments_:{pulse:te,step:Pe,rotation:Ie}})},Ho=function(te){return Pe=>Pe.options_.ops.push({type_:"stretch",arguments_:{amount:te,type:"slow"}})},Ka=function(te){return Pe=>Pe.options_.ops.push({type_:"stretch",arguments_:{amount:te,type:"fast"}})},Ko=function(te){return Pe=>Pe.options_.ops.push({type_:"degradeBy",arguments_:{amount:te,seed:Ri++}})},Ja=function(te){return Pe=>Pe.options_.ops.push({type_:"tail",arguments_:{element:te}})},jr=function(te){return Pe=>Pe.options_.ops.push({type_:"range",arguments_:{element:te}})},el=function(te,Pe){const Ie=new dc(te,{ops:[],weight:1,reps:1});for(const yt of Pe)yt(Ie);return Ie},Ju=function(te,Pe){return new Vi(Pe,"fastcat",void 0,!!te)},Ur=function(te){return{alignment:"stack",list:te}},Bs=function(te){return{alignment:"rand",list:te,seed:Ri++}},tc=function(te){return{alignment:"feet",list:te,seed:Ri++}},nc=function(te,Pe){return Pe&&Pe.list.length>0?new Vi([te,...Pe.list],Pe.alignment,Pe.seed):te},Ii=function(te,Pe){return new Vi(Pe?[te,...Pe.list]:[te],"polymeter")},Jo=function(te){return te},ic=function(te){return{name:"struct",args:{mini:te}}},xi=function(te){return{name:"target",args:{name:te}}},tl=function(te,Pe,Ie){return{name:"bjorklund",args:{pulse:te,step:parseInt(Pe)}}},Ki=function(te){return{name:"stretch",args:{amount:te}}},ea=function(te){return{name:"shift",args:{amount:"-"+te}}},ta=function(te){return{name:"shift",args:{amount:te}}},nl=function(te){return{name:"stretch",args:{amount:"1/"+te}}},na=function(te){return{name:"scale",args:{scale:te.join("")}}},Qs=function(te,Pe){return Pe},il=function(te,Pe){return Pe.unshift(te),new Vi(Pe,"slowcat")},ia=function(te){return te},rc=function(te,Pe){return new Zr(te.name,te.args,Pe)},ra=function(te){return te},rl=function(te){return te},sn=function(te){return new Kr("setcps",{value:te})},sa=function(te){return new Kr("setcps",{value:te/120/2})},io=function(){return new Kr("hush")},De=o.peg$currPos|0,ni=De,cs=[{line:1,column:1}],Ar=De,vr=o.peg$maxFailExpected||[],tn=o.peg$silentFails|0,mn;if(o.startRule){if(!(o.startRule in b))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');S=b[o.startRule]}function Ls(){return e.substring(ni,De)}function ys(){return fs(ni,De)}function ri(te,Pe){return{type:"literal",text:te,ignoreCase:Pe}}function Mr(te,Pe,Ie){return{type:"class",parts:te,inverted:Pe,ignoreCase:Ie}}function sc(){return{type:"end"}}function Yr(te){return{type:"other",description:te}}function bs(te){var Pe=cs[te],Ie;if(Pe)return Pe;if(te>=cs.length)Ie=cs.length-1;else for(Ie=te;!cs[--Ie];);for(Pe=cs[Ie],Pe={line:Pe.line,column:Pe.column};Ie<te;)e.charCodeAt(Ie)===10?(Pe.line++,Pe.column=1):Pe.column++,Ie++;return cs[te]=Pe,Pe}function fs(te,Pe,Ie){var yt=bs(te),fn=bs(Pe),wi={source:d,start:{offset:te,line:yt.line,column:yt.column},end:{offset:Pe,line:fn.line,column:fn.column}};return wi}function dn(te){De<Ar||(De>Ar&&(Ar=De,vr=[]),vr.push(te))}function ro(te,Pe,Ie){return new peg$SyntaxError(peg$SyntaxError.buildMessage(te,Pe),te,Pe,Ie)}function Ns(){var te;return te=ho(),te}function ur(){var te,Pe;return tn++,te=De,ol(),Pe=lo(),Pe!==l?(ao(),Nr(),ni=te,te=Ts()):(De=te,te=l),tn--,te===l&&tn===0&&dn(wn),te}function Hr(){var te;return e.charCodeAt(De)===46?(te=M,De++):(te=l,tn===0&&dn(Bi)),te}function so(){var te;return te=e.charAt(De),Xn.test(te)?De++:(te=l,tn===0&&dn(vi)),te}function sl(){var te;return te=e.charAt(De),zn.test(te)?De++:(te=l,tn===0&&dn(Di)),te}function Nr(){var te,Pe,Ie,yt,fn;if(te=De,Pe=sl(),Pe!==l){if(Ie=e.charAt(De),Dt.test(Ie)?De++:(Ie=l,tn===0&&dn(sr)),Ie===l&&(Ie=null),yt=[],fn=As(),fn!==l)for(;fn!==l;)yt.push(fn),fn=As();else yt=l;yt!==l?(Pe=[Pe,Ie,yt],te=Pe):(De=te,te=l)}else De=te,te=l;return te}function ao(){var te,Pe,Ie,yt;if(te=De,Pe=Hr(),Pe!==l){if(Ie=[],yt=As(),yt!==l)for(;yt!==l;)Ie.push(yt),yt=As();else Ie=l;Ie!==l?(Pe=[Pe,Ie],te=Pe):(De=te,te=l)}else De=te,te=l;return te}function lo(){var te,Pe,Ie,yt;if(te=oc(),te===l)if(te=De,Pe=so(),Pe!==l){for(Ie=[],yt=As();yt!==l;)Ie.push(yt),yt=As();Pe=[Pe,Ie],te=Pe}else De=te,te=l;return te}function ol(){var te;return e.charCodeAt(De)===45?(te=E,De++):(te=l,tn===0&&dn(Je)),te}function oc(){var te;return e.charCodeAt(De)===48?(te=L,De++):(te=l,tn===0&&dn(tt)),te}function As(){var te;return te=e.charAt(De),ei.test(te)?De++:(te=l,tn===0&&dn(qe)),te}function yn(){var te,Pe;for(tn++,te=[],Pe=e.charAt(De),fi.test(Pe)?De++:(Pe=l,tn===0&&dn(Ft));Pe!==l;)te.push(Pe),Pe=e.charAt(De),fi.test(Pe)?De++:(Pe=l,tn===0&&dn(Ft));return tn--,Pe=l,tn===0&&dn(_t),te}function hr(){var te,Pe,Ie,yt;return te=De,Pe=yn(),e.charCodeAt(De)===44?(Ie=R,De++):(Ie=l,tn===0&&dn(Wt)),Ie!==l?(yt=yn(),Pe=[Pe,Ie,yt],te=Pe):(De=te,te=l),te}function oa(){var te,Pe,Ie,yt;return te=De,Pe=yn(),e.charCodeAt(De)===124?(Ie=Z,De++):(Ie=l,tn===0&&dn(Rt)),Ie!==l?(yt=yn(),Pe=[Pe,Ie,yt],te=Pe):(De=te,te=l),te}function aa(){var te,Pe,Ie,yt;return te=De,Pe=yn(),e.charCodeAt(De)===46?(Ie=M,De++):(Ie=l,tn===0&&dn(Bi)),Ie!==l?(yt=yn(),Pe=[Pe,Ie,yt],te=Pe):(De=te,te=l),te}function kr(){var te;return te=e.charAt(De),Qi.test(te)?De++:(te=l,tn===0&&dn(un)),te}function Gr(){var te;return tn++,te=e.charAt(De),Ei.test(te)?De++:(te=l,tn===0&&dn(ln)),tn--,te===l&&tn===0&&dn(Bt),te}function al(){var te,Pe,Ie,yt;if(te=De,yn(),Pe=[],Ie=Gr(),Ie!==l)for(;Ie!==l;)Pe.push(Ie),Ie=Gr();else Pe=l;return Pe!==l?(Ie=yn(),ni=De,yt=jo(Pe),yt?yt=l:yt=void 0,yt!==l?(ni=te,te=Fs(Pe)):(De=te,te=l)):(De=te,te=l),te}function ac(){var te,Pe,Ie,yt;return te=De,yn(),e.charCodeAt(De)===91?(Pe=q,De++):(Pe=l,tn===0&&dn(pn)),Pe!==l?(yn(),Ie=pl(),Ie!==l?(yn(),e.charCodeAt(De)===93?(yt=K,De++):(yt=l,tn===0&&dn(Oi)),yt!==l?(yn(),ni=te,te=Ya(Ie)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function ll(){var te,Pe,Ie,yt,fn;return te=De,yn(),e.charCodeAt(De)===123?(Pe=U,De++):(Pe=l,tn===0&&dn(yi)),Pe!==l?(yn(),Ie=dl(),Ie!==l?(yn(),e.charCodeAt(De)===125?(yt=se,De++):(yt=l,tn===0&&dn(ti)),yt!==l?(fn=ul(),fn===l&&(fn=null),yn(),ni=te,te=Uo(Ie,fn)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function ul(){var te,Pe,Ie;return te=De,e.charCodeAt(De)===37?(Pe=re,De++):(Pe=l,tn===0&&dn(ii)),Pe!==l?(Ie=qi(),Ie!==l?(ni=te,te=Ks(Ie)):(De=te,te=l)):(De=te,te=l),te}function cl(){var te,Pe,Ie,yt;return te=De,yn(),e.charCodeAt(De)===60?(Pe=ae,De++):(Pe=l,tn===0&&dn(Fi)),Pe!==l?(yn(),Ie=dl(),Ie!==l?(yn(),e.charCodeAt(De)===62?(yt=de,De++):(yt=l,tn===0&&dn(Et)),yt!==l?(yn(),ni=te,te=Js(Ie)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function qi(){var te;return te=al(),te===l&&(te=ac(),te===l&&(te=ll(),te===l&&(te=cl()))),te}function Ai(){var te;return te=hs(),te===l&&(te=fl(),te===l&&(te=lc(),te===l&&(te=uc(),te===l&&(te=la(),te===l&&(te=ua(),te===l&&(te=$r(),te===l&&(te=hl()))))))),te}function hs(){var te,Pe,Ie;return te=De,yn(),Pe=e.charAt(De),gi.test(Pe)?De++:(Pe=l,tn===0&&dn(ui)),Pe!==l?(Ie=ur(),Ie===l&&(Ie=null),ni=te,te=Ha(Ie)):(De=te,te=l),te}function la(){var te,Pe,Ie;return te=De,yn(),e.charCodeAt(De)===33?(Pe=ve,De++):(Pe=l,tn===0&&dn(Li)),Pe!==l?(Ie=ur(),Ie===l&&(Ie=null),ni=te,te=Rs(Ie)):(De=te,te=l),te}function fl(){var te,Pe,Ie,yt,fn,wi,Ji;return te=De,e.charCodeAt(De)===40?(Pe=Ee,De++):(Pe=l,tn===0&&dn(cn)),Pe!==l?(yn(),Ie=Gs(),Ie!==l?(yn(),yt=hr(),yt!==l?(yn(),fn=Gs(),fn!==l?(yn(),hr(),yn(),wi=Gs(),wi===l&&(wi=null),yn(),e.charCodeAt(De)===41?(Ji=le,De++):(Ji=l,tn===0&&dn(Bn)),Ji!==l?(ni=te,te=Yo(Ie,fn,wi)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function lc(){var te,Pe,Ie;return te=De,e.charCodeAt(De)===47?(Pe=_e,De++):(Pe=l,tn===0&&dn(pi)),Pe!==l?(Ie=qi(),Ie!==l?(ni=te,te=Ho(Ie)):(De=te,te=l)):(De=te,te=l),te}function uc(){var te,Pe,Ie;return te=De,e.charCodeAt(De)===42?(Pe=Ce,De++):(Pe=l,tn===0&&dn(bi)),Pe!==l?(Ie=qi(),Ie!==l?(ni=te,te=Ka(Ie)):(De=te,te=l)):(De=te,te=l),te}function ua(){var te,Pe,Ie;return te=De,e.charCodeAt(De)===63?(Pe=We,De++):(Pe=l,tn===0&&dn(Ni)),Pe!==l?(Ie=ur(),Ie===l&&(Ie=null),ni=te,te=Ko(Ie)):(De=te,te=l),te}function $r(){var te,Pe,Ie;return te=De,e.charCodeAt(De)===58?(Pe=He,De++):(Pe=l,tn===0&&dn(Hi)),Pe!==l?(Ie=qi(),Ie!==l?(ni=te,te=Ja(Ie)):(De=te,te=l)):(De=te,te=l),te}function hl(){var te,Pe,Ie;return te=De,e.substr(De,2)===Mt?(Pe=Mt,De+=2):(Pe=l,tn===0&&dn(Zi)),Pe!==l?(Ie=qi(),Ie!==l?(ni=te,te=jr(Ie)):(De=te,te=l)):(De=te,te=l),te}function Gs(){var te,Pe,Ie,yt;if(te=De,Pe=qi(),Pe!==l){for(Ie=[],yt=Ai();yt!==l;)Ie.push(yt),yt=Ai();ni=te,te=el(Pe,Ie)}else De=te,te=l;return te}function ji(){var te,Pe,Ie,yt;if(te=De,e.charCodeAt(De)===94?(Pe=ut,De++):(Pe=l,tn===0&&dn(ee)),Pe===l&&(Pe=null),Ie=[],yt=Gs(),yt!==l)for(;yt!==l;)Ie.push(yt),yt=Gs();else Ie=l;return Ie!==l?(ni=te,te=Ju(Pe,Ie)):(De=te,te=l),te}function ca(){var te,Pe,Ie,yt,fn;if(te=De,Pe=[],Ie=De,yt=hr(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l),Ie!==l)for(;Ie!==l;)Pe.push(Ie),Ie=De,yt=hr(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l);else Pe=l;return Pe!==l&&(ni=te,Pe=Ur(Pe)),te=Pe,te}function Ci(){var te,Pe,Ie,yt,fn;if(te=De,Pe=[],Ie=De,yt=oa(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l),Ie!==l)for(;Ie!==l;)Pe.push(Ie),Ie=De,yt=oa(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l);else Pe=l;return Pe!==l&&(ni=te,Pe=Bs(Pe)),te=Pe,te}function cc(){var te,Pe,Ie,yt,fn;if(te=De,Pe=[],Ie=De,yt=aa(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l),Ie!==l)for(;Ie!==l;)Pe.push(Ie),Ie=De,yt=aa(),yt!==l?(fn=ji(),fn!==l?Ie=fn:(De=Ie,Ie=l)):(De=Ie,Ie=l);else Pe=l;return Pe!==l&&(ni=te,Pe=tc(Pe)),te=Pe,te}function pl(){var te,Pe,Ie;return te=De,Pe=ji(),Pe!==l?(Ie=ca(),Ie===l&&(Ie=Ci(),Ie===l&&(Ie=cc())),Ie===l&&(Ie=null),ni=te,te=nc(Pe,Ie)):(De=te,te=l),te}function dl(){var te,Pe,Ie;return te=De,Pe=ji(),Pe!==l?(Ie=ca(),Ie===l&&(Ie=null),ni=te,te=Ii(Pe,Ie)):(De=te,te=l),te}function fa(){var te,Pe,Ie,yt;return te=De,yn(),Pe=kr(),Pe!==l?(yn(),Ie=pl(),Ie!==l?(yn(),yt=kr(),yt!==l?(ni=te,te=Jo(Ie)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function ha(){var te;return te=yl(),te===l&&(te=hc(),te===l&&(te=Ol(),te===l&&(te=ml(),te===l&&(te=gl(),te===l&&(te=fc(),te===l&&(te=_l(),te===l&&(te=pc()))))))),te}function fc(){var te,Pe,Ie;return te=De,e.substr(De,6)===Nt?(Pe=Nt,De+=6):(Pe=l,tn===0&&dn(Oe)),Pe!==l?(yn(),Ie=ps(),Ie!==l?(ni=te,te=ic(Ie)):(De=te,te=l)):(De=te,te=l),te}function ml(){var te,Pe,Ie,yt,fn;return te=De,e.substr(De,6)===St?(Pe=St,De+=6):(Pe=l,tn===0&&dn(ue)),Pe!==l?(yn(),Ie=kr(),Ie!==l?(yt=al(),yt!==l?(fn=kr(),fn!==l?(ni=te,te=xi(yt)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function gl(){var te,Pe,Ie,yt;return te=De,e.substr(De,6)===xt?(Pe=xt,De+=6):(Pe=l,tn===0&&dn(ye)),Pe!==l?(yn(),Ie=lo(),Ie!==l?(yn(),yt=lo(),yt!==l?(yn(),lo(),ni=te,te=tl(Ie,yt)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l),te}function hc(){var te,Pe,Ie;return te=De,e.substr(De,4)===$t?(Pe=$t,De+=4):(Pe=l,tn===0&&dn(ke)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=Ki(Ie)):(De=te,te=l)):(De=te,te=l),te}function pc(){var te,Pe,Ie;return te=De,e.substr(De,4)===qt?(Pe=qt,De+=4):(Pe=l,tn===0&&dn(at)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=ea(Ie)):(De=te,te=l)):(De=te,te=l),te}function _l(){var te,Pe,Ie;return te=De,e.substr(De,4)===Vt?(Pe=Vt,De+=4):(Pe=l,tn===0&&dn(Ot)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=ta(Ie)):(De=te,te=l)):(De=te,te=l),te}function Ol(){var te,Pe,Ie;return te=De,e.substr(De,4)===Ut?(Pe=Ut,De+=4):(Pe=l,tn===0&&dn(kt)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=nl(Ie)):(De=te,te=l)):(De=te,te=l),te}function yl(){var te,Pe,Ie,yt,fn;if(te=De,e.substr(De,5)===Yt?(Pe=Yt,De+=5):(Pe=l,tn===0&&dn(rn)),Pe!==l)if(yn(),Ie=kr(),Ie!==l){if(yt=[],fn=Gr(),fn!==l)for(;fn!==l;)yt.push(fn),fn=Gr();else yt=l;yt!==l?(fn=kr(),fn!==l?(ni=te,te=na(yt)):(De=te,te=l)):(De=te,te=l)}else De=te,te=l;else De=te,te=l;return te}function co(){var te,Pe,Ie,yt;if(te=De,e.substr(De,2)===ai?(Pe=ai,De+=2):(Pe=l,tn===0&&dn(oi)),Pe!==l){for(Ie=[],yt=e.charAt(De),Ti.test(yt)?De++:(yt=l,tn===0&&dn(Mi));yt!==l;)Ie.push(yt),yt=e.charAt(De),Ti.test(yt)?De++:(yt=l,tn===0&&dn(Mi));Pe=[Pe,Ie],te=Pe}else De=te,te=l;return te}function pa(){var te,Pe,Ie,yt,fn,wi,Ji,ms;if(te=De,e.substr(De,3)===si?(Pe=si,De+=3):(Pe=l,tn===0&&dn(Zn)),Pe!==l)if(yn(),e.charCodeAt(De)===91?(Ie=q,De++):(Ie=l,tn===0&&dn(pn)),Ie!==l)if(yn(),yt=ps(),yt!==l){for(fn=[],wi=De,Ji=hr(),Ji!==l?(ms=ps(),ms!==l?(ni=wi,wi=Qs(yt,ms)):(De=wi,wi=l)):(De=wi,wi=l);wi!==l;)fn.push(wi),wi=De,Ji=hr(),Ji!==l?(ms=ps(),ms!==l?(ni=wi,wi=Qs(yt,ms)):(De=wi,wi=l)):(De=wi,wi=l);wi=yn(),e.charCodeAt(De)===93?(Ji=K,De++):(Ji=l,tn===0&&dn(Oi)),Ji!==l?(ni=te,te=il(yt,fn)):(De=te,te=l)}else De=te,te=l;else De=te,te=l;else De=te,te=l;return te}function bl(){var te;return te=pa(),te===l&&(te=fa()),te}function ps(){var te,Pe,Ie,yt,fn;if(te=De,Pe=bl(),Pe!==l){for(yn(),Ie=[],yt=co();yt!==l;)Ie.push(yt),yt=co();ni=te,te=ia(Pe)}else De=te,te=l;return te===l&&(te=De,Pe=ha(),Pe!==l?(yn(),e.charCodeAt(De)===36?(Ie=di,De++):(Ie=l,tn===0&&dn(qr)),Ie!==l?(yt=yn(),fn=ps(),fn!==l?(ni=te,te=rc(Pe,fn)):(De=te,te=l)):(De=te,te=l)):(De=te,te=l)),te}function da(){var te,Pe;return te=De,Pe=ps(),Pe!==l&&(ni=te,Pe=ra(Pe)),te=Pe,te===l&&(te=co()),te}function ma(){var te;return te=da(),te}function Al(){var te,Pe;return te=De,yn(),Pe=vl(),Pe===l&&(Pe=xl(),Pe===l&&(Pe=vs())),Pe!==l?(yn(),ni=te,te=rl(Pe)):(De=te,te=l),te}function vl(){var te,Pe,Ie;return te=De,e.substr(De,6)===At?(Pe=At,De+=6):(Pe=l,tn===0&&dn(br)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=sn(Ie)):(De=te,te=l)):(De=te,te=l),te}function xl(){var te,Pe,Ie;return te=De,e.substr(De,6)===hn?(Pe=hn,De+=6):(Pe=l,tn===0&&dn(Es)),Pe!==l?(yn(),Ie=ur(),Ie!==l?(ni=te,te=sa(Ie)):(De=te,te=l)):(De=te,te=l),te}function vs(){var te,Pe;return te=De,e.substr(De,4)===ft?(Pe=ft,De+=4):(Pe=l,tn===0&&dn(lr)),Pe!==l&&(ni=te,Pe=io()),te=Pe,te}function ho(){var te;return te=ma(),te===l&&(te=Al()),te}var Cl=function(te){this.type_="atom",this.source_=te,this.location_=ys()},Vi=function(te,Pe,Ie,yt){this.type_="pattern",this.arguments_={alignment:Pe,_steps:yt},Ie!==void 0&&(this.arguments_.seed=Ie),this.source_=te},Zr=function(te,Pe,Ie){this.type_=te,this.arguments_=Pe,this.source_=Ie},dc=function(te,Pe){this.type_="element",this.source_=te,this.options_=Pe,this.location_=ys()},Kr=function(te,Pe){this.type_="command",this.name_=te,this.options_=Pe},Ri=0;if(mn=S(),o.peg$library)return{peg$result:mn,peg$currPos:De,peg$FAILED:l,peg$maxFailExpected:vr,peg$maxFailPos:Ar};if(mn!==l&&De===e.length)return mn;throw mn!==l&&De<e.length&&dn(sc()),ro(vr,Ar<e.length?e.charAt(Ar):null,Ar<e.length?fs(Ar,Ar+1):fs(Ar,Ar))}const peg$allowedStartRules=["start"],randOffset=3e-4,applyOptions=(e,o)=>(l,d)=>{const M=e.source_[d].options_?.ops,E=l.__steps_source;if(M)for(const L of M)switch(L.type_){case"stretch":{const R=["fast","slow"],{type:Z,amount:q}=L.arguments_;if(!R.includes(Z))throw new Error(`mini: stretch: type must be one of ${R.join("|")} but got ${Z}`);l=reify(l)[Z](o(q));break}case"replicate":{const{amount:R}=L.arguments_;l=reify(l),l=l._repeatCycles(R)._fast(R);break}case"bjorklund":{L.arguments_.rotation?l=l.euclidRot(o(L.arguments_.pulse),o(L.arguments_.step),o(L.arguments_.rotation)):l=l.euclid(o(L.arguments_.pulse),o(L.arguments_.step));break}case"degradeBy":{l=reify(l)._degradeByWith(rand.early(randOffset*L.arguments_.seed),L.arguments_.amount??.5);break}case"tail":{const R=o(L.arguments_.element);l=l.fmap(Z=>q=>Array.isArray(Z)?[...Z,q]:[Z,q]).appLeft(R);break}case"range":{const R=o(L.arguments_.element);l=reify(l);const Z=(K,U,se=1)=>Array.from({length:Math.abs(U-K)/se+1},(re,ae)=>K<U?K+ae*se:K-ae*se);l=((K,U)=>K.squeezeBind(se=>U.bind(re=>fastcat(...Z(se,re)))))(l,R);break}default:console.warn(`operator "${L.type_}" not implemented`)}return l.__steps_source=l.__steps_source||E,l};function patternifyAST(e,o,l,d=0){l?.(e);const b=S=>patternifyAST(S,o,l,d);switch(e.type_){case"pattern":{const S=e.source_.map(R=>b(R)).map(applyOptions(e,b)),M=e.arguments_.alignment,E=S.filter(R=>R.__steps_source);let L;switch(M){case"stack":{L=stack(...S),E.length&&(L._steps=lcm(...E.map(R=>fraction$1(R._steps))));break}case"polymeter_slowcat":{L=stack(...S.map(R=>R._slow(R.__weight))),E.length&&(L._steps=lcm(...E.map(R=>fraction$1(R._steps))));break}case"polymeter":{const R=e.arguments_.stepsPerCycle?b(e.arguments_.stepsPerCycle).fmap(q=>fraction$1(q)):pure(fraction$1(S.length>0?S[0].__weight:1)),Z=S.map(q=>q.fast(R.fmap(K=>K.div(q.__weight))));L=stack(...Z);break}case"rand":{L=chooseInWith(rand.early(randOffset*e.arguments_.seed).segment(1),S),E.length&&(L._steps=lcm(...E.map(R=>fraction$1(R._steps))));break}case"feet":{L=fastcat(...S);break}default:{if(e.source_.some(Z=>!!Z.options_?.weight)){const Z=e.source_.reduce((q,K)=>q.add(K.options_?.weight||fraction$1(1)),fraction$1(0));L=timeCat(...e.source_.map((q,K)=>[q.options_?.weight||fraction$1(1),S[K]])),L.__weight=Z,L._steps=Z,E.length&&(L._steps=L._steps.mul(lcm(...E.map(q=>fraction$1(q._steps)))))}else L=sequence(...S),L._steps=S.length;e.arguments_._steps&&(L.__steps_source=!0)}}return E.length&&(L.__steps_source=!0),L}case"element":return b(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return silence;if(!e.location_)return console.warn("no location for",e),e.source_;const S=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(d===-1)return pure(S);const[M,E]=getLeafLocation(o,e,d);return pure(S).withLoc(M,E)}case"stretch":return b(e.source_).slow(b(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(e,o,l=0)=>{const{start:d,end:b}=o.location_,S=e?.split("").slice(d.offset,b.offset).join(""),[M=0,E=0]=S?S.split(o.source_).map(L=>L.split("").filter(R=>R===" ").length):[];return[d.offset+M+l,b.offset-E+l]},mini2ast=(e,o=0,l=e)=>{try{return peg$parse(e)}catch(d){const b=[d.location.start.offset+o,d.location.end.offset+o],S=l.slice(0,b[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${S}: ${d.message}`)}},getLeaves=(e,o,l)=>{const d=mini2ast(e,o,l);let b=[];return patternifyAST(d,e,S=>{S.type_==="atom"&&b.push(S)},-1),b},getLeafLocations=(e,o=0,l)=>getLeaves(e,o,l).map(d=>getLeafLocation(e,d,o)),mini=(...e)=>{const o=e.map(l=>{const d=`"${l}"`,b=mini2ast(d);return patternifyAST(b,d)});return sequence(...o)},m$1=(e,o)=>{const l=`"${e}"`,d=mini2ast(l);return patternifyAST(d,l,null,o)},h$1=e=>{const o=mini2ast(e);return patternifyAST(o,e)};function minify(e){return typeof e=="string"?mini(e):reify(e)}function miniAllStrings(){setStringParser(mini)}const strudelMini=Object.freeze(Object.defineProperty({__proto__:null,StartRules:peg$allowedStartRules,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h:h$1,m:m$1,mini,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(l,d,b,S){super(l),d=Math.abs(d),this.delayTime.value=b;const M=l.createGain();M.gain.value=Math.min(Math.abs(S),.995),this.feedback=M.gain;const E=l.createGain();return E.gain.value=d,this.delayGain=E,this.connect(M),this.connect(E),M.connect(this),this.connect=L=>E.connect(L),this}start(l){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,l+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(o,l,d){return new e(this,o,l,d)}}var reverbGen={};reverbGen.generateReverb=function(e,o){for(var l=e.audioContext||new AudioContext,d=l.sampleRate,b=e.numChannels||2,S=e.decayTime*1.5,M=Math.round(e.decayTime*d),E=Math.round(S*d),L=Math.round((e.fadeInTime||0)*d),R=Math.pow(1/1e3,1/M),Z=l.createBuffer(b,E,d),q=0;q<b;q++){for(var K=Z.getChannelData(q),U=0;U<E;U++)K[U]=randomSample()*Math.pow(R,U);for(var U=0;U<L;U++)K[U]*=U/L}applyGradualLowpass(Z,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,o)},reverbGen.generateGraph=function(e,o,l,d,b){var S=document.createElement("canvas");S.width=o,S.height=l;var M=S.getContext("2d");M.fillStyle="#000",M.fillRect(0,0,S.width,S.height),M.fillStyle="#fff";for(var E=o/e.length,L=l/(b-d),R=0;R<e.length;R++)M.fillRect(R*E,l-(e[R]-d)*L,1,1);return S};var applyGradualLowpass=function(e,o,l,d,b){if(o==0){b(e);return}var S=getAllChannelData(e),M=new OfflineAudioContext(e.numberOfChannels,S[0].length,e.sampleRate),E=M.createBufferSource();E.buffer=e;var L=M.createBiquadFilter();o=Math.min(o,e.sampleRate/2),l=Math.min(l,e.sampleRate/2),L.type="lowpass",L.Q.value=1e-4,L.frequency.setValueAtTime(o,0),L.frequency.linearRampToValueAtTime(l,d),E.connect(L),L.connect(M.destination),E.start(),M.oncomplete=function(R){b(R.renderedBuffer),L.disconnect(),E.disconnect()},M.startRendering(),window.filterNode=L},getAllChannelData=function(e){for(var o=[],l=0;l<e.numberOfChannels;l++)o[l]=e.getChannelData(l);return o},randomSample=function(){return Math.random()*2-1};let log=e=>console.log(e);function errorLogger(e,o="superdough"){process.env.NODE_ENV==="development"&&console.error(e),logger$1(`[${o}] error: ${e.message}`)}const logger$1=(...e)=>log(...e),setLogger=e=>{log=e},tokenizeNote$2=e=>{if(typeof e!="string")return[];const[o,l="",d]=e.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return o?[o,l,d?Number(d):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},getAccidentalsOffset=e=>e?.split("").reduce((o,l)=>o+accs$1[l],0)||0,noteToMidi=(e,o=3)=>{const[l,d,b=o]=tokenizeNote$2(e);if(!l)throw new Error('not a note: "'+e+'"');const S=chromas$1[l.toLowerCase()],M=getAccidentalsOffset(d);return(Number(b)+1)*12+S+M},midiToFreq$1=e=>Math.pow(2,(e-69)/12)*440,clamp=(e,o,l)=>Math.min(Math.max(e,o),l),freqToMidi$1=e=>12*Math.log(e/440)/Math.LN2+69,valueToMidi=(e,o)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:l,note:d}=e;return typeof l=="number"?freqToMidi$1(l):typeof d=="string"?noteToMidi(d):typeof d=="number"?d:o};function nanFallback(e,o=0,l){return isNaN(Number(e))?(!l&&logger$1(`"${e}" is not a number, falling back to ${o}`,"warning"),o):e}const _mod$1=(e,o)=>(e%o+o)%o,getSoundIndex=(e,o)=>_mod$1(Math.round(nanFallback(e,0)),o);function cycleToSeconds(e,o){return e/o}function getCommonSampleInfo(e,o){const{s:l,n:d=0}=e;let b=valueToMidi(e,36),S=b-36,M,E=0;if(Array.isArray(o))E=getSoundIndex(d,o.length),M=o[E];else{const R=q=>noteToMidi(q)-b,Z=Object.keys(o).filter(q=>!q.startsWith("_")).reduce((q,K,U)=>!q||Math.abs(R(K))<Math.abs(R(q))?K:q,null);S=-R(Z),E=getSoundIndex(d,o[Z].length),M=o[Z][E]}const L=`${l}:${E}`;return{transpose:S,url:M,index:E,midi:b,label:L}}const pickAndRename=(e,o)=>Object.fromEntries(Object.entries(o).map(([l,d])=>[l,e[d]])),getBaseURL=e=>{try{return new URL(".",new URL(e)).href.replace(/\/$/,"")}catch{return e.split("/").slice(0,-1).join("/")}};typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,o,l=1,d=0){const b=Math.floor(clamp(d,0,1)*o.length),S=o.sampleRate*e,M=this.createBuffer(o.numberOfChannels,o.length,o.sampleRate);for(let E=0;E<o.numberOfChannels;E++){let L=o.getChannelData(E),R=M.getChannelData(E);for(let Z=0;Z<S;Z++){let q=(b+Z*Math.abs(l))%L.length;l<1&&(q=q*-1),R[Z]=L.at(q)||0}}return M},AudioContext.prototype.createReverb=function(e,o,l,d,b,S,M){const E=this.createConvolver();return E.generate=(L=2,R=.1,Z=15e3,q=1e3,K,U,se)=>{E.duration=L,E.fade=R,E.lp=Z,E.dim=q,E.ir=K,E.irspeed=U,E.irbegin=se,K?E.buffer=this.adjustLength(L,K,U,se):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:L,fadeInTime:R,lpFreqStart:Z,lpFreqEnd:q},re=>{E.buffer=re})},E.generate(e,o,l,d,b,S,M),E});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(l,d){if(super(l),!vowelFormant[d])throw new Error("vowel: unknown vowel "+d);const{gains:b,qs:S,freqs:M}=vowelFormant[d];this.makeupGain=l.createGain(),this.audioNodes=[];for(let E=0;E<5;E++){const L=l.createGain();L.gain.value=b[E];const R=l.createBiquadFilter();R.type="bandpass",R.Q.value=S[E],R.frequency.value=M[E],super.connect(R),R.connect(L),this.audioNodes.push(R),L.connect(this.makeupGain),this.audioNodes.push(L)}return this.makeupGain.gain.value=8,this}connect(l){this.makeupGain.connect(l)}disconnect(){this.makeupGain.disconnect(),this.audioNodes.forEach(l=>l.disconnect()),super.disconnect(),this.makeupGain=null,this.audioNodes=null}}AudioContext.prototype.createVowelFilter=function(o){return new e(this,o)}}const workletsUrl="/worklets-CQe0NKfe.js";let audioContext;const setDefaultAudioContext=()=>(audioContext=new AudioContext,audioContext),getAudioContext=()=>audioContext||setDefaultAudioContext();function getAudioContextCurrentTime(){return getAudioContext().currentTime}let noiseCache={};function getNoiseBuffer(e,o){const l=getAudioContext();if(noiseCache[e])return noiseCache[e];const d=2*l.sampleRate,b=l.createBuffer(1,d,l.sampleRate),S=b.getChannelData(0);let M=0,E,L,R,Z,q,K,U;E=L=R=Z=q=K=U=0;for(let se=0;se<d;se++)if(e==="white")S[se]=Math.random()*2-1;else if(e==="brown"){let re=Math.random()*2-1;S[se]=(M+.02*re)/1.02,M=S[se]}else if(e==="pink"){let re=Math.random()*2-1;E=.99886*E+re*.0555179,L=.99332*L+re*.0750759,R=.969*R+re*.153852,Z=.8665*Z+re*.3104856,q=.55*q+re*.5329522,K=-.7616*K-re*.016898,S[se]=E+L+R+Z+q+K+U+re*.5362,S[se]*=.11,U=re*.115926}else if(e==="crackle"){const re=o*.01;Math.random()<re?S[se]=Math.random()*2-1:S[se]=0}return e!=="crackle"&&(noiseCache[e]=b),b}function getNoiseOscillator(e="white",o,l=.02){const b=getAudioContext().createBufferSource();return b.buffer=getNoiseBuffer(e,l),b.loop=!0,b.start(o),{node:b,stop:S=>b.stop(S)}}function getNoiseMix(e,o,l){const d=getNoiseOscillator("pink",l),b=drywet(e,d.node,o);return d.node.onended=()=>b.onended(),{node:b.node,stop:S=>d?.stop(S)}}const noises=["pink","white","brown","crackle"];function gainNode(e){const o=getAudioContext().createGain();return o.gain.value=e,o}function effectSend(e,o,l){const d=gainNode(l);return e.connect(d),d.connect(o),d}const getSlope=(e,o,l,d)=>d-l===0?0:(o-e)/(d-l);function getWorklet(e,o,l,d){const b=new AudioWorkletNode(e,o,d);return Object.entries(l).forEach(([S,M])=>{M!==void 0&&(b.parameters.get(S).value=M)}),b}const getParamADSR=(e,o,l,d,b,S,M,E,L,R="exponential")=>{o=nanFallback(o),l=nanFallback(l),d=nanFallback(d),b=nanFallback(b);const Z=R==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";R==="exponential"&&(S=S===0?.001:S,M=M===0?.001:M);const q=M-S,K=M,U=S+d*q,se=L-E,re=ae=>{let de;if(o>ae){let ve=getSlope(S,K,0,o);de=ae*ve+(S>K?S:0)}else de=(ae-o)*getSlope(K,U,0,l)+K;return R==="exponential"&&(de=de||.001),de};e.setValueAtTime(S,E),o>se?e[Z](re(se),L):o+l>se?(e[Z](re(o),E+o),e[Z](re(se),L)):(e[Z](re(o),E+o),e[Z](re(o+l),E+o+l),e.setValueAtTime(U,L)),e[Z](S,L+b)};function getModulationShapeInput(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}function getLfo(e,o,l,d={}){const{shape:b=0,...S}=d,{dcoffset:M=-.5,depth:E=1}=d,L={frequency:1,depth:E,skew:.5,phaseoffset:0,time:o,begin:o,end:l,shape:getModulationShapeInput(b),dcoffset:M,min:M*E,max:M*E+E,curve:1,...S};return getWorklet(e,"lfo-processor",L)}function getCompressor(e,o,l,d,b,S){const M={threshold:o??-3,ratio:l??10,knee:d??10,attack:b??.005,release:S??.05};return new DynamicsCompressorNode(e,M)}const getADSRValues=(e,o="linear",l)=>{const[M,E,L,R]=e;if(M==null&&E==null&&L==null&&R==null)return l??[.001,.001,1,.01];const Z=L??(M!=null&&E==null||M==null&&E==null?1:.001);return[Math.max(M??0,.001),Math.max(E??0,.001),Math.min(Z,1),Math.max(R??0,.01)]};function getParamLfo(e,o,l,d,b){let{defaultDepth:S=1,depth:M,dcoffset:E,...L}=b;M==null&&(M=Object.values(L).some(q=>q!=null)?S:0);let R;return M&&(R=getLfo(e,l,d,{depth:M,dcoffset:E,...L}),R.connect(o)),R}function applyParameterModulators(e,o,l,d,b,S){let{amount:M,offset:E,defaultAmount:L=1,curve:R="linear",values:Z,holdEnd:q,defaultValues:K}=b;M==null&&(M=Z.some(ve=>ve!=null)?L:0);const U=E??0,se=M+U;if(Math.abs(se-U)){const[de,ve,Ee,le]=getADSRValues(Z,R,K);getParamADSR(o,de,ve,Ee,le,U,se,l,q,R)}const ae=getParamLfo(e,o,l,d,S);return{lfo:ae,disconnect:()=>ae?.disconnect()}}function createFilter(e,o,l,d,b,S){let{frequency:M,anchor:E,env:L,type:R,model:Z,q=1,drive:K=.69,depth:U,depthfrequency:se,dcoffset:re=-.5,skew:ae,shape:de,rate:ve,sync:Ee}=d,le,_e;Z==="ladder"?(_e=getWorklet(e,"ladder-processor",{frequency:M,q,drive:K}),le=_e.parameters.get("frequency")):(_e=e.createBiquadFilter(),_e.type=R,_e.Q.value=q,_e.frequency.value=M,le=_e.frequency);const Ce=[d.attack,d.decay,d.sustain,d.release],[We,He,Mt,ut]=getADSRValues(Ce,"exponential",[.005,.14,0,.1]);if([...Ce,L].some($t=>$t!==void 0)){L=nanFallback(L,1,!0),E=nanFallback(E,0,!0);const $t=Math.abs(L),qt=$t*E;let Vt=clamp(2**-qt*M,0,2e4),Ut=clamp(2**($t-qt)*M,0,2e4);L<0&&([Vt,Ut]=[Ut,Vt]),getParamADSR(le,We,He,Mt,ut,Vt,Ut,o,l,"exponential")}Ee!=null&&(ve=b*Ee);const St=[U,se,ae,de,ve].some($t=>$t!==void 0);let xt;if(St){U=U??1;const $t=S/b,Vt={depth:se??(U??1)*M,dcoffset:re,skew:ae,shape:de,frequency:ve??b,min:-M+30,max:2e4-M,time:$t,curve:1};xt=getParamLfo(e,le,o,l,Vt)}return{filter:_e,lfo:xt}}let wetfade=e=>e<.5?1:1-(e-.5)/.5;function drywet(e,o,l=0){const d=getAudioContext();if(!l)return e;let b=d.createGain(),S=d.createGain();e.connect(b),o.connect(S),b.gain.value=wetfade(l),S.gain.value=wetfade(1-l);let M=d.createGain();return b.connect(M),S.connect(M),{node:M,onended:()=>{b.disconnect(M),S.disconnect(M),e.disconnect(b),o.disconnect(S)}}}let curves=["linear","exponential"];function getPitchEnvelope(e,o,l,d){if((o.pattack??o.pdecay??o.psustain??o.prelease??o.penv)===void 0)return;const S=nanFallback(o.penv,1,!0),M=curves[o.pcurve??0];let[E,L,R,Z]=getADSRValues([o.pattack,o.pdecay,o.psustain,o.prelease],M,[.2,.001,1,.001]),q=o.panchor??R;const K=S*100,U=0-K*q,se=K-K*q;getParamADSR(e,E,L,R,Z,U,se,l,d,M)}function getVibratoOscillator(e,o,l){const{vibmod:d=.5,vib:b}=o;let S;if(b>0){S=getAudioContext().createOscillator(),S.frequency.value=b;const M=getAudioContext().createGain();return M.gain.value=d*100,S.connect(M),M.connect(e),S.onended=()=>{M.disconnect(e),S.disconnect(M)},S.start(l),S}}function scheduleAtTime(e,o,l=getAudioContext()){const d=l.currentTime;webAudioTimeout(l,e,d,o)}function webAudioTimeout(e,o,l,d){const b=new ConstantSourceNode(e),S=gainNode(0);return S.connect(e.destination),b.connect(S),b.onended=()=>{try{S.disconnect()}catch{}try{b.disconnect()}catch{}o()},b.start(l),b.stop(d),b}const mod$2=(e,o=1,l="sine")=>{const d=getAudioContext();let b;noises.includes(l)?(b=d.createBufferSource(),b.buffer=getNoiseBuffer(l,2),b.loop=!0):(b=d.createOscillator(),b.type=l,b.frequency.value=e),b.start();const S=gainNode(o);return b.connect(S),{node:S,stop:M=>b.stop(M),osc:b}},fm=(e,o,l,d="sine")=>{const S=e.value*o,M=S*l;return mod$2(S,M,d)};function applyFM(e,o,l){const{fmh:d=1,fmi:b,fmenv:S="exp",fmattack:M,fmdecay:E,fmsustain:L,fmrelease:R,fmvelocity:Z,fmwave:q="sine",duration:K}=o;let U,se=()=>{};if(b){const ae=getAudioContext().createGain(),de=fm(e,d,b,q);if(U=de.node,se=de.stop,![M,E,L,R,Z].some(ve=>ve!==void 0))U.connect(e);else{const[ve,Ee,le,_e]=getADSRValues([M,E,L,R]),Ce=l+K;getParamADSR(ae.gain,ve,Ee,le,_e,0,1,l,Ce,S==="exp"?"exponential":"linear"),U.connect(ae),ae.connect(e)}de.osc.onended=()=>{ae.disconnect(),U.disconnect(),de.osc.disconnect()}}return{stop:se}}const __squash=e=>e/(1+e),_mod=(e,o)=>(e%o+o)%o,_scurve=(e,o)=>(1+o)*e/(1+o*Math.abs(e)),_soft=(e,o)=>Math.tanh(e*(1+o)),_hard=(e,o)=>clamp((1+o)*e,-1,1),_fold=(e,o)=>{let l=(1+.5*o)*e;const d=_mod(l+1,4);return 1-Math.abs(d-2)},_sineFold=(e,o)=>Math.sin(Math.PI/2*_fold(e,o)),_cubic=(e,o)=>{const l=__squash(Math.log1p(o)),d=(e-l/3*e*e*e)/(1-l/3);return _soft(d,o)},_diode=(e,o,l=!1)=>{const d=1+2*o,S=.07*__squash(Math.log1p(o)),M=_soft(e+S,2*o),E=_soft(l?S:-e+S,2*o),L=M-E,R=1/Math.cosh(d*S),Z=R*R,q=Math.max(1e-8,(l?1:2)*d*Z);return _soft(L/q,o)},_asym=(e,o)=>_diode(e,o,!0),_chebyshev=(e,o)=>{const l=10*Math.log1p(o);let d=1,b=e,S,M=0;for(let E=1;E<64;E++){if(E<2){M+=E==0?d:b;continue}S=2*e*d-b,b=d,d=S,E%2===0&&(M+=Math.min(1.3*l/E,2)*S)}return _soft(M,l/20)},distortionAlgorithms={scurve:_scurve,soft:_soft,hard:_hard,cubic:_cubic,diode:_diode,asym:_asym,fold:_fold,sinefold:_sineFold,chebyshev:_chebyshev},_algoNames=Object.freeze(Object.keys(distortionAlgorithms)),getDistortionAlgorithm=e=>{let o=e;typeof e=="string"&&(o=_algoNames.indexOf(e),o===-1&&(logger$1(`[superdough] Could not find waveshaping algorithm ${e}.
        Available options are ${_algoNames.join(", ")}.
        Defaulting to ${_algoNames[0]}.`),o=0));const l=_algoNames[o%_algoNames.length];return distortionAlgorithms[l]},getDistortion=(e,o,l)=>getWorklet(getAudioContext(),"distort-processor",{distort:e,postgain:o},{processorOptions:{algorithm:l}}),getFrequencyFromValue=(e,o=36)=>{let{note:l,freq:d,octave:b=0}=e;return l=l||o,typeof l=="string"&&(l=noteToMidi(l)),!d&&typeof l=="number"&&(d=midiToFreq$1(l)),d*=Math.pow(2,b),Number(d)},destroyAudioWorkletNode=e=>{e!=null&&(e.disconnect(),e.parameters.get("end")?.setValueAtTime(0,0))},bufferCache$1={},loadCache$2={},getCachedBuffer=e=>bufferCache$1[e];function humanFileSize$1(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],b=-1;do e/=l,++b;while(e>=l);return e.toFixed(1)+" "+d[b]}function getSampleInfo(e,o){const{speed:l=1}=e,{transpose:d,url:b,index:S,midi:M,label:E}=getCommonSampleInfo(e,o);let L=Math.abs(l)*Math.pow(2,d/12);return{transpose:d,url:b,index:S,midi:M,label:E,playbackRate:L}}const getSampleBuffer=async(e,o,l)=>{let{url:d,label:b,playbackRate:S}=getSampleInfo(e,o);l&&(d=await l(d));const M=getAudioContext(),E=await loadBuffer$1(d,M,b);return e.unit==="c"&&(S=S*E.duration),{buffer:E,playbackRate:S}},getSampleBufferSource=async(e,o,l)=>{let{buffer:d,playbackRate:b}=await getSampleBuffer(e,o,l);e.speed<0&&(d=reverseBuffer(d));const M=getAudioContext().createBufferSource();M.buffer=d,M.playbackRate.value=b;const{loopBegin:E=0,loopEnd:L=1,begin:R=0,end:Z=1}=e,q=R*M.buffer.duration;e.loop&&(M.loop=!0,M.loopStart=E*M.buffer.duration-q,M.loopEnd=L*M.buffer.duration-q);const U=M.buffer.duration/M.playbackRate.value,se=(Z-R)*U;return{bufferSource:M,offset:q,bufferDuration:U,sliceDuration:se}},loadBuffer$1=(e,o,l,d=0)=>{const b=l?`sound "${l}:${d}"`:"sample";if(e=e.replace("#","%23"),!loadCache$2[e]){logger$1(`[sampler] load ${b}..`,"load-sample",{url:e});const S=Date.now();loadCache$2[e]=fetch(e).then(M=>M.arrayBuffer()).then(async M=>{const E=Date.now()-S,L=humanFileSize$1(M.byteLength);logger$1(`[sampler] load ${b}... done! loaded ${L} in ${E}ms`,"loaded-sample",{url:e});const R=await o.decodeAudioData(M);return bufferCache$1[e]=R,R})}return loadCache$2[e]};function reverseBuffer(e){const o=getAudioContext(),l=o.createBuffer(e.numberOfChannels,e.length,o.sampleRate);for(let d=0;d<e.numberOfChannels;d++)l.copyToChannel(e.getChannelData(d).slice().reverse(),d,d);return l}const getLoadedBuffer=e=>bufferCache$1[e];function resolveSpecialPaths(e){if(e.startsWith("bubo:")){const[o,l]=e.split(":");e=`github:Bubobubobubobubo/dough-${l}`}return e}function githubPath$2(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let l=e.slice(7);l=l.endsWith("/")?l.slice(0,-1):l;let d=l.split("/"),b=d[0],S=d.length>=2?d[1]:"samples",M=d.length>=3?d[2]:"main",E=d.slice(3);return E.push(o||""),E=E.join("/"),`https://raw.githubusercontent.com/${b}/${S}/${M}/${E}`}const processSampleMap=(e,o,l=e._base||"")=>Object.entries(e).forEach(([d,b])=>{if(typeof b=="string"&&(b=[b]),typeof b!="object")throw new Error("wrong sample map format for "+d);l=b._base||l,l=resolveSpecialPaths(l),l.startsWith("github:")&&(l=githubPath$2(l,""));const S=M=>l+M;Array.isArray(b)?b=b.map(S):b=Object.fromEntries(Object.entries(b).map(([M,E])=>[M,(typeof E=="string"?[E]:E).map(S)])),o(d,b)});let resourcePrefixHandlers={};function registerSamplesPrefix(e,o){resourcePrefixHandlers[e]=o}function getSamplesPrefixHandler(e){const o=Object.entries(resourcePrefixHandlers).find(([l])=>e.startsWith(l));if(o)return o[1]}async function fetchSampleMap$1(e){const o=getSamplesPrefixHandler(e);if(o)return o(e);if(e=resolveSpecialPaths(e),e.startsWith("github:")&&(e=githubPath$2(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[b,S]=e.split("shabda:");e=`https://shabda.ndre.gr/${S}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[b,S]=e.split("shabda/speech");S=S.startsWith("/")?S.substring(1):S;let[M,E]=S.split(":"),L="f",R="en-GB";M&&([R,L]=M.split("/")),e=`https://shabda.ndre.gr/speech/${E}.json?gender=${L}&language=${R}&strudel=1'`}if(typeof fetch!="function")return;const l=getBaseURL(e);if(typeof fetch>"u")return;const d=await fetch(e).then(b=>b.json()).catch(b=>{throw console.error(b),new Error(`error loading "${e}"`)});return[d,d._base||l]}const samples$1=async(e,o=e._base||"",l={})=>{if(typeof e=="string"){const[S,M]=await fetchSampleMap$1(e);return samples$1(S,o||M,l)}const{prebake:d,tag:b}=l;processSampleMap(e,(S,M)=>{registerSampleSource(S,M,{baseUrl:o,prebake:d,tag:b})},o)},cutGroups=[];async function onTriggerSample(e,o,l,d,b){let{s:S,nudge:M=0,cut:E,loop:L,clip:R=void 0,n:Z=0,speed:q=1,duration:K}=o;if(q===0)return;const U=getAudioContext();let[se,re,ae,de]=getADSRValues([o.attack,o.decay,o.sustain,o.release]);const{bufferSource:ve,sliceDuration:Ee,offset:le}=await getSampleBufferSource(o,d,b);if(U.currentTime>e){logger$1(`[sampler] still loading sound "${S}:${Z}"`,"highlight");return}if(!ve){logger$1(`[sampler] could not load "${S}:${Z}"`,"error");return}let _e=getVibratoOscillator(ve.detune,o,e);const Ce=e+M;ve.start(Ce,le);const We=U.createGain(),He=ve.connect(We);R==null&&L==null&&o.release==null&&(K=Ee);let Mt=e+K;getParamADSR(He.gain,se,re,ae,de,0,1,e,Mt,"linear"),getPitchEnvelope(ve.detune,o,e,Mt);const ut=U.createGain();He.connect(ut),ve.onended=function(){ve.disconnect(),_e?.stop(),He.disconnect(),ut.disconnect(),l()};let Nt=Mt+de+.01;ve.stop(Nt);const xt={node:ut,bufferSource:ve,stop:$t=>{ve.stop($t)}};if(E!==void 0){const $t=cutGroups[E];$t&&($t.node.gain.setValueAtTime(1,Ce),$t.node.gain.linearRampToValueAtTime(0,Ce+.01)),cutGroups[E]=xt}return xt}function registerSample(e,o,l){registerSound(e,(d,b,S)=>onTriggerSample(d,b,S,o),{type:"sample",samples:o,...l})}function registerSampleSource(e,o,l){e.startsWith("wt_")?registerWaveTable(e,o,l):registerSample(e,o,l)}let hasChanged=(e,o)=>e!==void 0&&e!==o;class Orbit{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(o){this.audioContext=o,this.output=new GainNode(o,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(o,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(o,l=0){this.djfNode==null&&(this.djfNode=getWorklet(this.audioContext,"djf-processor",{value:o}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(o,l)}getDelay(o=0,l=.5,d){return l=clamp(l,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,o,l),this.delayNode.connect(this.summingNode),this.delayNode.start?.(d)),this.delayNode.delayTime.value!==o&&this.delayNode.delayTime.setValueAtTime(o,d),this.delayNode.feedback.value!==l&&this.delayNode.feedback.setValueAtTime(l,d),this.delayNode}getReverb(o,l,d,b,S,M,E){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(o,l,d,b,S,M,E),this.reverbNode.connect(this.summingNode)),(hasChanged(o,this.reverbNode.duration)||hasChanged(l,this.reverbNode.fade)||hasChanged(d,this.reverbNode.lp)||hasChanged(b,this.reverbNode.dim)||hasChanged(M,this.reverbNode.irspeed)||hasChanged(E,this.reverbNode.irbegin)||this.reverbNode.ir!==S)&&this.reverbNode.generate(o,l,d,b,S,M,E),this.reverbNode}sendReverb(o,l){return effectSend(o,this.reverbNode,l)}sendDelay(o,l){return effectSend(o,this.delayNode,l)}duck(o,l=0,d=.1,b=1){const S=l,M=Math.max(d,.002),E=this.output.gain;webAudioTimeout(this.audioContext,()=>{const L=this.audioContext.currentTime,R=E.value;E.cancelScheduledValues(L),E.setValueAtTime(R,L);const Z=Math.max(o,L),q=clamp(1-Math.sqrt(b),.01,R);E.exponentialRampToValueAtTime(q,Z+S),E.exponentialRampToValueAtTime(1,Z+S+M)},0,o-.01)}connectToOutput(o){o.connect(this.summingNode)}}class SuperdoughOutput{channelMerger;destinationGain;constructor(o){this.audioContext=o,this.initializeAudio()}initializeAudio(){const o=this.audioContext,l=o.destination.maxChannelCount;this.audioContext.destination.channelCount=l,this.channelMerger=new ChannelMergerNode(o,{numberOfInputs:o.destination.channelCount}),this.destinationGain=new GainNode(o),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(o.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(o,l=[0,1])=>{const d=new StereoPannerNode(this.audioContext);o.connect(d);const b=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:d.channelCount});d.connect(b),l.forEach((S,M)=>{b.connect(this.channelMerger,M%d.channelCount,S%this.audioContext.destination.channelCount)})}}class SuperdoughAudioController{audioContext;output;nodes={};constructor(o){this.audioContext=o,this.output=new SuperdoughOutput(o)}reset(){Array.from(this.nodes).forEach(o=>{o.disconnect()}),this.nodes={},this.output.reset()}duck(o,l,d=0,b=.1,S=1){const M=[o].flat(),E=[d].flat(),L=[b].flat(),R=[S].flat();M.forEach((Z,q)=>{const K=this.nodes[Z];if(K==null){errorLogger(new Error(`duck target orbit ${Z} does not exist`),"superdough");return}const U=E[q]??E[0],se=Math.max(L[q]??L[0],.002),re=R[q]??R[0];K.duck(l,U,se,re)})}getOrbit(o,l){return this.nodes[o]==null&&(this.nodes[o]=new Orbit(this.audioContext),this.output.connectToDestination(this.nodes[o].output,l)),this.nodes[o]}}const DEFAULT_MAX_POLYPHONY=128,DEFAULT_AUDIO_DEVICE_NAME="System Standard";let maxPolyphony=DEFAULT_MAX_POLYPHONY;function setMaxPolyphony(e){maxPolyphony=parseInt(e)??DEFAULT_MAX_POLYPHONY}let multiChannelOrbits=!1;function setMultiChannelOrbits(e){multiChannelOrbits=e==!0}const soundMap$1=map();function registerSound(e,o,l={}){e=e.toLowerCase().replace(/\s+/g,"_"),soundMap$1.setKey(e,{onTrigger:o,data:l})}let gainCurveFunc=e=>e;function applyGainCurve(e){return gainCurveFunc(e)}function setGainCurve(e){gainCurveFunc=e}function aliasBankMap(e){for(const l in e)e[l.toLowerCase()]=e[l];const o=soundMap$1.get();for(const l in o){const[d,b]=l.split("_");if(!b)continue;const S=e[d];if(S){if(typeof S=="string")o[`${S}_${b}`.toLowerCase()]=o[l];else if(Array.isArray(S))for(const M of S)o[`${M}_${b}`.toLowerCase()]=o[l]}}soundMap$1.set({...o})}async function aliasBankPath(e){const l=await(await fetch(e)).json();aliasBankMap(l)}async function aliasBank(...e){switch(e.length){case 1:return typeof e[0]=="string"?aliasBankPath(e[0]):aliasBankMap(e[0]);case 2:return aliasBankMap({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function soundAlias(e,o){if(getSound(e)==null){logger$1("soundAlias: original sound not found");return}soundMap$1.setKey(o,getSound(e))}function getSound(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),soundMap$1.get().triangle):soundMap$1.get()[e.toLowerCase()]}const getAudioDevices=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(l=>l.kind==="audiooutput"&&l.deviceId!=="default");const o=new Map;return o.set(DEFAULT_AUDIO_DEVICE_NAME,""),e.forEach(l=>{o.set(l.label,l.deviceId)}),o};let defaultDefaultValues={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const defaultDefaultDefaultValues=Object.freeze({...defaultDefaultValues});function setDefault(e,o){defaultDefaultValues[e]=o}function resetDefaults(){defaultDefaultValues={...defaultDefaultDefaultValues}}let defaultControls=new Map(Object.entries(defaultDefaultValues));function setDefaultValue(e,o){defaultControls.set(e,o)}function getDefaultValue(e){return defaultControls.get(e)}function setDefaultValues(e){Object.keys(e).forEach(o=>{setDefaultValue(o,e[o])})}function resetDefaultValues(){defaultControls=new Map(Object.entries(defaultDefaultValues))}function setVersionDefaults(e){resetDefaultValues(),e==="1.0"&&setDefaultValue("fanchor",.5)}const resetLoadedSounds=()=>soundMap$1.set({});let externalWorklets=[];function registerWorklet(e){externalWorklets.push(e)}let workletsLoading;function loadWorklets(){if(!workletsLoading){const e=getAudioContext(),o=externalWorklets.concat([workletsUrl]);workletsLoading=Promise.all(o.map(l=>e.audioWorklet.addModule(l)))}return workletsLoading}async function initAudio$1(e={}){const{disableWorklets:o=!1,maxPolyphony:l,audioDeviceName:d=DEFAULT_AUDIO_DEVICE_NAME,multiChannelOrbits:b=!1}=e;if(setMaxPolyphony(l),setMultiChannelOrbits(b),typeof window>"u")return;const S=getAudioContext();if(d!=null&&d!=DEFAULT_AUDIO_DEVICE_NAME)try{const E=(await getAudioDevices()).get(d),L=(E??"").length>0;S.sinkId!==E&&L&&await S.setSinkId(E),logger$1(`[superdough] Audio Device set to ${d}, it might take a few seconds before audio plays on all output channels`)}catch{logger$1("[superdough] failed to set audio interface","warning")}if(await S.resume(),o){logger$1("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await loadWorklets(),logger$1("[superdough] AudioWorklets loaded")}catch(M){console.warn("could not load AudioWorklet effects",M)}logger$1("[superdough] ready")}let audioReady;async function initAudioOnFirstClick(e){return audioReady||(audioReady=new Promise(o=>{document.addEventListener("mousedown",async function l(){document.removeEventListener("mousedown",l),await initAudio$1(e),o()})})),audioReady}let controller;function getSuperdoughAudioController(){return controller==null&&(controller=new SuperdoughAudioController(getAudioContext())),controller}function connectToDestination(e,o){getSuperdoughAudioController().output.connectToDestination(e,o)}function getPhaser(e,o,l=1,d=.5,b=1e3,S=2e3){const M=getAudioContext(),E=getLfo(M,e,o,{frequency:l,depth:S*2}),L=2;let R=0;const Z=[];for(let q=0;q<L;q++){const K=M.createBiquadFilter();K.type="notch",K.gain.value=1,K.frequency.value=b+R,K.Q.value=2-Math.min(Math.max(d*2,0),1.9),E.connect(K.detune),R+=282,q>0&&Z[q-1].connect(K),Z.push(K)}return{phaser:Z[Z.length-1],lfo:E}}function getFilterType(e){e=e??0;const o=["12db","ladder","24db"];return typeof e=="number"?o[Math.floor(_mod$1(e,o.length))]:e}let analysers={},analysersData={};function getAnalyserById(e,o=1024,l=.5){if(!analysers[e]){const d=getAudioContext().createAnalyser();d.fftSize=o,d.smoothingTimeConstant=l,analysers[e]=d,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)}return analysers[e].fftSize!==o&&(analysers[e].fftSize=o,analysersData[e]=new Float32Array(analysers[e].frequencyBinCount)),analysers[e]}function getAnalyzerData(e="time",o=1){const l={time:()=>analysers[o]?.getFloatTimeDomainData(analysersData[o]),frequency:()=>analysers[o]?.getFloatFrequencyData(analysersData[o])}[e];if(!l)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(l).join(", ")}`);return l(),analysersData[o]}function resetGlobalEffects(){controller?.reset(),analysers={},analysersData={}}let activeSoundSources=new Map;function mapChannelNumbers(e){return(Array.isArray(e)?e:[e]).map(o=>o-1)}const superdough=async(e,o,l,d=.5,b=.5)=>{const S=getAudioContext(),M=getSuperdoughAudioController();let{stretch:E}=e;if(E!=null&&(o=o-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=l,o<S.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${o.toFixed(2)}, now: ${S.currentTime.toFixed(2)})`);return}let{tremolo:L,tremolosync:R,tremolodepth:Z=1,tremoloskew:q,tremolophase:K=0,tremoloshape:U,s:se=getDefaultValue("s"),bank:re,source:ae,gain:de=getDefaultValue("gain"),postgain:ve=getDefaultValue("postgain"),density:Ee=getDefaultValue("density"),duckorbit:le,duckonset:_e,duckattack:Ce,duckdepth:We,djf:He,fanchor:Mt=getDefaultValue("fanchor"),release:ut=0,phaserrate:Nt,phaserdepth:St=getDefaultValue("phaserdepth"),phasersweep:xt,phasercenter:$t,coarse:qt,crush:Vt,dry:Ut,shape:Yt,shapevol:ai=getDefaultValue("shapevol"),distort:si,distortvol:di=getDefaultValue("distortvol"),distorttype:At=getDefaultValue("distorttype"),pan:hn,vowel:ft,delay:Xn=getDefaultValue("delay"),delayfeedback:zn=getDefaultValue("delayfeedback"),delaysync:Dt=getDefaultValue("delaysync"),delaytime:ei,orbit:fi=getDefaultValue("orbit"),room:Qi,roomfade:Ei,roomlp:gi,roomdim:Ti,roomsize:wn,ir:Bi,irspeed:vi,irbegin:Di,i:sr=getDefaultValue("i"),velocity:Je=getDefaultValue("velocity"),analyze:tt,fft:qe=getDefaultValue("fft"),compressor:_t,compressorRatio:Ft,compressorKnee:Wt,compressorAttack:Rt,compressorRelease:un}=e;ei=ei??cycleToSeconds(Dt,d);const Bt=mapChannelNumbers(multiChannelOrbits&&fi>0?[fi*2-1,fi*2]:getDefaultValue("channels")),ln=e.channels!=null?mapChannelNumbers(e.channels):Bt,pn=M.getOrbit(fi,ln);le!=null&&M.duck(le,o,_e,Ce,We),de=applyGainCurve(nanFallback(de,1)),ve=applyGainCurve(ve),ai=applyGainCurve(ai),di=applyGainCurve(di),Xn=applyGainCurve(Xn),Je=applyGainCurve(Je),Z=applyGainCurve(Z),de*=Je;const Oi=o+l,yi=Oi+ut,ti=Math.round(Math.random()*1e6);for(let cn=0;cn<=activeSoundSources.size-maxPolyphony;cn++){const Bn=activeSoundSources.entries().next(),pi=Bn.value[1].deref(),bi=Bn.value[0],Ni=o+.25;pi?.node?.gain?.linearRampToValueAtTime(0,Ni),pi?.stop?.(Ni),activeSoundSources.delete(bi)}let ii=[];if(["-","~","_"].includes(se))return;re&&se&&(se=`${re}_${se}`,e.s=se);let Fi;if(ae)Fi=ae(o,e,l,d);else if(getSound(se)){const{onTrigger:cn}=getSound(se),pi=await cn(o,e,()=>{ii.forEach(bi=>bi?.disconnect()),activeSoundSources.delete(ti)},d);pi&&(Fi=pi.node,activeSoundSources.set(ti,new WeakRef(pi)))}else throw new Error(`sound ${se} not found! Is it loaded?`);if(!Fi)return;if(S.currentTime>o){logger$1("[webaudio] skip hap: still loading",S.currentTime-o);return}const Et=[];Et.push(Fi),E!==void 0&&Et.push(getWorklet(S,"phase-vocoder-processor",{pitchFactor:E})),Et.push(gainNode(de));const ui=getFilterType(e.ftype);if(e.cutoff!==void 0){const Bn=pickAndRename(e,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});Bn.type="lowpass";const pi=()=>createFilter(S,o,Oi,Bn,d,b),{filter:bi,lfo:Ni}=pi();if(Et.push(bi),Ni&&ii.push(Ni),ui==="24db"){const{filter:Hi,lfo:Zi}=pi();Et.push(Hi),Zi&&ii.push(Zi)}}if(e.hcutoff!==void 0){const Bn=pickAndRename(e,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});Bn.type="highpass";const pi=()=>createFilter(S,o,Oi,Bn,d,b),{filter:bi,lfo:Ni}=pi();if(Et.push(bi),Ni&&ii.push(Ni),ui==="24db"){const{filter:Hi,lfo:Zi}=pi();Et.push(Hi),Zi&&ii.push(Zi)}}if(e.bandf!==void 0){const Bn=pickAndRename(e,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});Bn.type="bandpass";const pi=()=>createFilter(S,o,Oi,Bn,d,b),{filter:bi,lfo:Ni}=pi();if(Et.push(bi),Ni&&ii.push(Ni),ui==="24db"){const{filter:Hi,lfo:Zi}=pi();Et.push(Hi),Zi&&ii.push(Zi)}}if(ft!==void 0){const cn=S.createVowelFilter(ft);Et.push(cn)}if(qt!==void 0&&Et.push(getWorklet(S,"coarse-processor",{coarse:qt})),Vt!==void 0&&Et.push(getWorklet(S,"crush-processor",{crush:Vt})),Yt!==void 0&&Et.push(getWorklet(S,"shape-processor",{shape:Yt,postgain:ai})),si!==void 0&&Et.push(getDistortion(si,di,At)),R!=null&&(L=d*R),e.wtPosSynced!=null&&(e.wtPosRate/=d),e.wtWarpSynced!=null&&(e.wtWarpRate/=d),L!==void 0){const cn=Math.max(1-Z,0),Bn=new GainNode(S,{gain:cn}),pi=b/d,bi=getLfo(S,o,yi,{skew:q??(U!=null?.5:1),frequency:L,depth:Z,time:pi,dcoffset:0,shape:U,phaseoffset:K,min:0,max:1,curve:1.5});bi.connect(Bn.gain),ii.push(bi),Et.push(Bn)}if(_t!==void 0&&Et.push(getCompressor(S,_t,Ft,Wt,Rt,un)),hn!==void 0){const cn=S.createStereoPanner();cn.pan.value=2*hn-1,Et.push(cn)}if(Nt!==void 0&&St>0){const{phaser:cn,lfo:Bn}=getPhaser(o,yi,Nt,St,$t,xt);ii.push(Bn),Et.push(cn)}const Li=new GainNode(S,{gain:ve});if(Et.push(Li),Xn>0&&ei>0&&zn>0){pn.getDelay(ei,zn,o);const cn=pn.sendDelay(Li,Xn);ii.push(cn)}if(Qi>0){let cn;if(Bi!==void 0){let pi,bi=getSound(Bi);Array.isArray(bi)?pi=bi.data.samples[sr%bi.data.samples.length]:typeof bi=="object"&&(pi=Object.values(bi.data.samples).flat()[sr%Object.values(bi.data.samples).length]),cn=await loadBuffer$1(pi,S,Bi,0)}pn.getReverb(wn,Ei,gi,Ti,cn,vi,Di);const Bn=pn.sendReverb(Li,Qi);ii.push(Bn)}if(He!=null&&pn.getDjf(He,o),tt){const cn=getAnalyserById(tt,2**(qe+5)),Bn=effectSend(Li,cn,1);ii.push(Bn)}if(Ut!=null){Ut=applyGainCurve(Ut);const cn=new GainNode(S,{gain:Ut});Et.push(cn),pn.connectToOutput(cn)}else pn.connectToOutput(Li);Et.slice(1).reduce((cn,Bn)=>cn.connect(Bn),Et[0]),ii=ii.concat(Et)},superdoughTrigger=(e,o,l,d)=>{superdough(o,e-l,o.duration/d,d)},waveforms=["triangle","square","sawtooth","sine","user"],waveformAliases=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function makeSaturationCurve(e,o){const l=e,d=new Float32Array(o);for(let b=0;b<o;b++){const S=b*2/o-1;d[b]=Math.tanh(S*l)}return d}function registerSynthSounds$1(){[...waveforms].forEach(e=>{registerSound(e,(o,l,d)=>{const[b,S,M,E]=getADSRValues([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]),L=gainNode(.3);let R=getOscillator(e,o,l,()=>{L.disconnect(),d()}),{node:Z,stop:q,triggerRelease:K}=R;const{duration:U}=l,se=gainNode(1);let re=Z.connect(L).connect(se);const ae=o+U;getParamADSR(re.gain,b,S,M,E,0,1,o,ae,"linear");const de=ae+E+.01;return K?.(de),q(de),{node:re,stop:ve=>{q(ve)}}},{type:"synth",prebake:!0})}),registerSound("sbd",(e,o,l)=>{const{duration:d,decay:b=.5,pdecay:S=.5,penv:M=36,clip:E}=o,L=getAudioContext(),R=.02,Z=1.2,q=.025,K=1,U=L.createOscillator();U.type="triangle",U.frequency.value=getFrequencyFromValue(o,29),U.detune.setValueAtTime(M*100,0),U.detune.setValueAtTime(M*100,e),U.detune.exponentialRampToValueAtTime(.001,e+S);const se=gainNode(1);se.gain.setValueAtTime(1,e+R),se.gain.exponentialRampToValueAtTime(.001,e+R+b),U.start(e);const re=getNoiseOscillator("brown",e,2),ae=gainNode(1);ae.gain.setValueAtTime(Z,e),ae.gain.exponentialRampToValueAtTime(.001,e+q);const de=new WaveShaperNode(L);de.curve=makeSaturationCurve(2,L.sampleRate);const ve=gainNode(K);U.onended=()=>{U.disconnect(),se.disconnect(),de.disconnect(),re.node.disconnect(),ae.disconnect(),ve.disconnect(),l()};const Ee=U.connect(de).connect(se).connect(ve);re.node.connect(ae).connect(ve);let _e=e+b+.01;return E!=null&&(_e=Math.min(e+E*d,_e)),ve.gain.setValueAtTime(K,_e-.01),ve.gain.linearRampToValueAtTime(0,_e),U.stop(_e),re.stop(_e),{node:Ee,stop:Ce=>{U.stop(Ce)}}},{type:"synth",prebake:!0}),registerSound("supersaw",(e,o,l)=>{const d=getAudioContext();let{duration:b,n:S,unison:M=5,spread:E=.6,detune:L}=o;L=L??S??.18;const R=getFrequencyFromValue(o),[Z,q,K,U]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),se=e+b,re=se+U+.01,ae=clamp(M,1,100);let de=ae>1?clamp(E,0,1):0,ve=getWorklet(d,"supersaw-oscillator",{frequency:R,begin:e,end:re,freqspread:L,voices:ae,panspread:de},{outputChannelCount:[2]});const Ee=1/Math.sqrt(ae);getPitchEnvelope(ve.parameters.get("detune"),o,e,se);const le=getVibratoOscillator(ve.parameters.get("detune"),o,e),_e=applyFM(ve.parameters.get("frequency"),o,e);let Ce=gainNode(1);Ce=ve.connect(Ce),getParamADSR(Ce.gain,Z,q,K,U,0,.3*Ee,e,se,"linear");let We=webAudioTimeout(d,()=>{destroyAudioWorkletNode(ve),Ce.disconnect(),l(),_e?.stop(),le?.stop()},e,re);return{node:Ce,stop:He=>{We.stop(He)}}},{prebake:!0,type:"synth"}),registerSound("bytebeat",(e,o,l)=>{const d=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:b=0}=o,S=getFrequencyFromValue(o),{byteBeatExpression:M=d[b%d.length],byteBeatStartTime:E}=o,L=getAudioContext();let{duration:R}=o;const[Z,q,K,U]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),se=e+R,re=se+U+.01;let ae=getWorklet(L,"byte-beat-processor",{frequency:S,begin:e,end:re},{outputChannelCount:[2]});ae.port.postMessage({codeText:M,byteBeatStartTime:E,frequency:S});let de=gainNode(1);de=ae.connect(de),getParamADSR(de.gain,Z,q,K,U,0,1,e,se,"linear");let ve=webAudioTimeout(L,()=>{destroyAudioWorkletNode(ae),de.disconnect(),l()},e,re);return{node:de,stop:Ee=>{ve.stop(Ee)}}},{prebake:!0,type:"synth"}),registerSound("pulse",(e,o,l)=>{const d=getAudioContext();let{pwrate:b,pwsweep:S}=o;S==null&&(b!=null?S=.3:S=0),b==null&&S!=null&&(b=1);let{duration:M,pw:E=.5}=o;const L=getFrequencyFromValue(o),[R,Z,q,K]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]),U=e+M,se=U+K+.01;let re=getWorklet(d,"pulse-oscillator",{frequency:L,begin:e,end:se,pulsewidth:E},{outputChannelCount:[2]});getPitchEnvelope(re.parameters.get("detune"),o,e,U);const ae=getVibratoOscillator(re.parameters.get("detune"),o,e),de=applyFM(re.parameters.get("frequency"),o,e);let ve=gainNode(1);ve=re.connect(ve),getParamADSR(ve.gain,R,Z,q,K,0,1,e,U,"linear");let Ee;S!=0&&(Ee=getLfo(d,e,se,{frequency:b,depth:S}),Ee.connect(re.parameters.get("pulsewidth")));let le=webAudioTimeout(d,()=>{destroyAudioWorkletNode(re),destroyAudioWorkletNode(Ee),ve.disconnect(),l(),de?.stop(),ae?.stop()},e,se);return{node:ve,stop:_e=>{le.stop(_e)}}},{prebake:!0,type:"synth"}),[...noises].forEach(e=>{registerSound(e,(o,l,d)=>{const[b,S,M,E]=getADSRValues([l.attack,l.decay,l.sustain,l.release],"linear",[.001,.05,.6,.01]);let L,{density:R}=l;L=getNoiseOscillator(e,o,R);let{node:Z,stop:q,triggerRelease:K}=L;const U=gainNode(.3),{duration:se}=l;Z.onended=()=>{Z.disconnect(),U.disconnect(),d()};const re=gainNode(1);let ae=Z.connect(U).connect(re);const de=o+se;getParamADSR(ae.gain,b,S,M,E,0,1,o,de,"linear");const ve=de+E+.01;return K?.(ve),q(ve),{node:ae,stop:Ee=>{q(Ee)}}},{type:"synth",prebake:!0})}),waveformAliases.forEach(([e,o])=>soundMap$1.set({...soundMap$1.get(),[e]:soundMap$1.get()[o]}))}const PI2=2*Math.PI;function waveformN(e,o,l){e=typeof e=="object"?e:new Float32Array(e).fill(1);const b=e.length,S=new Float32Array(b+1),M=new Float32Array(b+1),E=getAudioContext(),L=E.createOscillator(),R={sawtooth:q=>[0,-1/q],square:q=>[0,q%2===0?0:1/q],triangle:q=>[q%2===0?0:1/(q*q),0],user:q=>[0,1]};if(!R[l])throw new Error(`unknown wave type ${l}`);for(let q=0;q<b;q++){const K=e[q],[U,se]=R[l](q+1),re=o?.[q]??0;let ae=U*K,de=se*K;if(re!==0){const ve=Math.cos(PI2*re),Ee=Math.sin(PI2*re);ae=ve*ae-Ee*de,de=Ee*ae+ve*de}S[q+1]=ae,M[q+1]=de}const Z=E.createPeriodicWave(S,M);return L.setPeriodicWave(Z),L}function getOscillator(e,o,l,d){const{duration:b,noise:S=0}=l,M=l.partials??l.n;let E;e==="user"&&!M&&(logger$1("[superdough] Synth 'user' was selected, but partials not specified. Defaulting to triangle. Use pat.partials to setup custom waveform"),e="triangle"),e=e==="user"&&!M?"triangle":e,!M||M?.length===0||e==="sine"?(E=getAudioContext().createOscillator(),E.type=e||"triangle"):E=waveformN(M,l.phases,e),E.frequency.value=getFrequencyFromValue(l);let L=getVibratoOscillator(E.detune,l,o);getPitchEnvelope(E.detune,l,o,o+b);const R=applyFM(E.frequency,l,o);let Z;return S&&(Z=getNoiseMix(E,S,o)),E.onended=()=>{Z||E.disconnect(),Z?.node.disconnect(),d()},E.start(o),{node:Z?.node||E,stop:q=>{R.stop(q),L?.stop(q),Z?.stop(q),E.stop(q)},triggerRelease:q=>{}}}function buildSamples(e=1,o=.05,l=220,d=0,b=0,S=.1,M=0,E=1,L=0,R=0,Z=0,q=0,K=0,U=0,se=0,re=0,ae=0,de=1,ve=0,Ee=0){let le=Math.PI*2,_e=getAudioContext().sampleRate,Ce=ai=>ai>0?1:-1,We=L*=500*le/_e/_e,He=l*=(1+o*2*Math.random()-o)*le/_e,Mt=[],ut=0,Nt=0,St=0,xt=1,$t=0,qt=0,Vt=0,Ut,Yt;for(d=d*_e+9,ve*=_e,b*=_e,S*=_e,ae*=_e,R*=500*le/_e**3,se*=le/_e,Z*=le/_e,q*=_e,K=K*_e|0,Yt=d+ve+b+S+ae|0;St<Yt;Mt[St++]=Vt)++qt%(re*100|0)||(Vt=M?M>1?M>2?M>3?Math.sin((ut%le)**3):Math.max(Math.min(Math.tan(ut),1),-1):1-(2*ut/le%2+2)%2:1-4*Math.abs(Math.round(ut/le)-ut/le):Math.sin(ut),Vt=(K?1-Ee+Ee*Math.sin(le*St/K):1)*Ce(Vt)*Math.abs(Vt)**E*e*1*(St<d?St/d:St<d+ve?1-(St-d)/ve*(1-de):St<d+ve+b?de:St<Yt-ae?(Yt-St-ae)/S*de:0),Vt=ae?Vt/2+(ae>St?0:(St<Yt-ae?1:(Yt-St)/ae)*Mt[St-ae|0]/2):Vt),Ut=(l+=L+=R)*Math.cos(se*Nt++),ut+=Ut-Ut*U*(1-(Math.sin(St)+1)*1e9%2),xt&&++xt>q&&(l+=Z,He+=Z,xt=0),K&&!(++$t%K)&&(l=He,L=We,xt||=1);return Mt}const getZZFX=(e,o)=>{let{s:l,note:d=36,freq:b,zrand:S=0,attack:M=0,decay:E=0,sustain:L=.8,release:R=.1,curve:Z=1,slide:q=0,deltaSlide:K=0,pitchJump:U=0,pitchJumpTime:se=0,lfo:re=0,znoise:ae=0,zmod:de=0,zcrush:ve=0,zdelay:Ee=0,tremolo:le=0,duration:_e=.2,zzfx:Ce}=e;const We=Math.max(_e-M-E,0);typeof d=="string"&&(d=noteToMidi(d)),!b&&typeof d=="number"&&(b=midiToFreq$1(d)),l=l.replace("z_","");const He=["sine","triangle","sawtooth","tan","noise"].indexOf(l)||0;Z=l==="square"?0:Z;const ut=buildSamples(...Ce||[.25,S,b,M,We,R,He,Z,q,K,U,se,re,ae,de,ve,Ee,L,E,le]),Nt=getAudioContext(),St=Nt.createBuffer(1,ut.length,Nt.sampleRate);St.getChannelData(0).set(ut);const xt=getAudioContext().createBufferSource();return xt.buffer=St,xt.start(o),{node:xt}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{registerSound(e,(o,l,d)=>{const{node:b}=getZZFX({s:e,...l},o);return b.onended=()=>{b.disconnect(),d()},{node:b,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(e,o){const l=`dsp-worklet-${Date.now()}`,d=`${o}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${l}', MyProcessor);
`,S=`data:text/javascript;base64,${btoa(d)}`;await e.audioWorklet.addModule(S);const M=new AudioWorkletNode(e,l);return{node:M,stop:()=>M.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{e.data==="strudel-stop"?stop():e.data?.dough&&worklet?.node.port.postMessage(e.data)});const dough=async e=>{const o=getAudioContext();stop(),worklet=await dspWorklet(o,e),worklet.node.connect(o.destination)};function doughTrigger(e,o,l,d){window.postMessage({time:d,dough:e.value,currentTime:o,duration:e.duration,cps:l})}const Warpmode=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),seenKeys=new Set;async function getPayload(e,o,l=2048){const d=`${e},${l}`;if(!seenKeys.has(d)){const S=(await loadBuffer(e,o)).getChannelData(0),M=S.length,E=Math.max(1,Math.floor(M/l)),L=new Array(E);for(let R=0;R<E;R++){const Z=R*l;L[R]=S.subarray(Z,Z+l)}return seenKeys.add(d),{frames:L,frameLen:l,numFrames:E,key:d}}return{frameLen:l,key:d}}function humanFileSize(e,o){var l=1024;if(e<l)return e+" B";var d=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],b=-1;do e/=l,++b;while(e>=l);return e.toFixed(1)+" "+d[b]}function parseWavSampleRate(e){const o=new DataView(e);let l=12;for(;l+8<=o.byteLength;){const d=String.fromCharCode(o.getUint8(l),o.getUint8(l+1),o.getUint8(l+2),o.getUint8(l+3)),b=o.getUint32(l+4,!0);if(d==="fmt ")return o.getUint32(l+12,!0);l+=8+b+(b&1)}return null}async function decodeAtNativeRate(e){const o=parseWavSampleRate(e)||44100;return await new OfflineAudioContext(1,1,o).decodeAudioData(e)}const loadCache$1={},loadBuffer=(e,o)=>{if(e=e.replace("#","%23"),!loadCache$1[e]){logger$1(`[wavetable] load table ${o}..`,"load-table",{url:e});const l=Date.now();loadCache$1[e]=fetch(e).then(d=>d.arrayBuffer()).then(async d=>{const b=Date.now()-l,S=humanFileSize(d.byteLength);return logger$1(`[wavetable] load table ${o}... done! loaded ${S} in ${b}ms`,"loaded-table",{url:e}),await decodeAtNativeRate(d)})}return loadCache$1[e]};function githubPath$1(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[l,d]=e.split("github:");return d=d.endsWith("/")?d.slice(0,-1):d,d.split("/").length===2&&(d+="/main"),`https://raw.githubusercontent.com/${d}/${o}`}const _processTables=(e,o,l,d={})=>(o=e._base||o,Object.entries(e).forEach(([b,S])=>{if(b==="_base")return!1;if(typeof S=="string"&&(S=[S]),typeof S!="object")throw new Error("wrong json format for "+b);let M=o;M.startsWith("github:")&&(M=githubPath$1(M,"")),S=S.map(E=>M+E).filter(E=>E.toLowerCase().endsWith(".wav")?!0:(logger$1(`[wavetable] skipping ${E} -- wavetables must be ".wav" format`),!1)),S.length&&registerWaveTable(b,S,{baseUrl:o,frameLen:l})}));function registerWaveTable(e,o,l){registerSound(e,(d,b,S,M)=>onTriggerSynth(d,b,S,o,M,l?.frameLen??2048),{type:"wavetable",tables:o,...l})}const tables=async(e,o,l,d={})=>{if(l!==void 0)return _processTables(l,e,o);e.startsWith("github:")&&(e=githubPath$1(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432");const b=getBaseURL(e);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(e).then(S=>S.json()).then(S=>_processTables(S,b,o,d)).catch(S=>{throw console.error(S),new Error(`error loading "${e}"`)})};async function onTriggerSynth(e,o,l,d,b,S){const{s:M,n:E=0,duration:L,clip:R}=o,Z=getAudioContext(),[q,K,U,se]=getADSRValues([o.attack,o.decay,o.sustain,o.release]);let{warpmode:re}=o;typeof re=="string"&&(re=Warpmode[re.toUpperCase()]??Warpmode.NONE);const ae=getFrequencyFromValue(o),{url:de,label:ve}=getCommonSampleInfo(o,d),Ee=await getPayload(de,ve,S);let le=e+L;R!==void 0&&(le=Math.min(e+R*L,le));const _e=le+se,Ce=_e+.01,We=getWorklet(Z,"wavetable-oscillator-processor",{begin:e,end:Ce,frequency:ae,freqspread:o.detune,position:o.wt,warp:o.warp,warpMode:re,voices:Math.max(o.unison??1,1),panspread:o.spread,phaserand:o.wtphaserand??o.unison>1?1:0},{outputChannelCount:[2]});if(We.port.postMessage({type:"table",payload:Ee}),Z.currentTime>e){logger$1(`[wavetable] still loading sound "${M}:${E}"`,"highlight");return}const He=[o.wtattack,o.wtdecay,o.wtsustain,o.wtrelease],Mt=[o.warpattack,o.warpdecay,o.warpsustain,o.warprelease],ut=We.parameters,Nt=ut.get("position"),St=ut.get("warp");let xt=o.wtrate;o.wtsync!=null&&(xt=b*o.wtsync);const $t=applyParameterModulators(Z,Nt,e,_e,{offset:o.wt,amount:o.wtenv,defaultAmount:.5,values:He,holdEnd:le,defaultValues:[0,.5,0,.1]},{frequency:xt,depth:o.wtdepth,defaultDepth:.5,shape:o.wtshape,skew:o.wtskew,dcoffset:o.wtdc??0});let qt=o.warprate;o.warpsync!=null&&(qt=qt=b*o.warpsync);const Vt=applyParameterModulators(Z,St,e,_e,{offset:o.warp,amount:o.warpenv,defaultAmount:.5,values:Mt,holdEnd:le,defaultValues:[0,.5,0,.1]},{frequency:qt,depth:o.warpdepth,defaultDepth:.5,shape:o.warpshape,skew:o.warpskew,dcoffset:o.warpdc??0}),Ut=getVibratoOscillator(We.parameters.get("detune"),o,e),Yt=applyFM(We.parameters.get("frequency"),o,e),ai=Z.createGain(),si=We.connect(ai);getParamADSR(si.gain,q,K,U,se,0,.3,e,le,"linear"),getPitchEnvelope(We.parameters.get("detune"),o,e,le);const di={node:si,source:We},At=webAudioTimeout(Z,()=>{destroyAudioWorkletNode(We),Ut?.stop(),Yt?.stop(),si.disconnect(),$t?.disconnect(),Vt?.disconnect(),l()},e,Ce);return di.stop=hn=>{At.stop(hn)},di}let doughWorklet;function initDoughWorklet(){const e=getAudioContext();doughWorklet=getWorklet(e,"dough-processor",{},{outputChannelCount:[2]}),connectToDestination(doughWorklet)}const soundMap=new Map,loadedSounds=new Map;Pattern$1.prototype.supradough=function(){return this.onTrigger((e,o,l,d)=>{e.value._begin=d,e.value._duration=e.duration/l,!doughWorklet&&initDoughWorklet();const b=(e.value.bank?e.value.bank+"_":"")+e.value.s,S=e.value.n??0,M=`${b}:${S}`;if(soundMap.has(b)&&(e.value.s=M),soundMap.has(b)&&!loadedSounds.has(M)){const E=soundMap.get(b),L=E[S%E.length];console.log(`load ${M} from ${L}`);const R=fetchSample(L);loadedSounds.set(M,R),R.then(({channels:Z,sampleRate:q})=>doughWorklet.port.postMessage({sample:M,channels:Z,sampleRate:q}))}doughWorklet.port.postMessage({spawn:e.value})},1)};function githubPath(e,o=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[l,d]=e.split("github:");return d=d.endsWith("/")?d.slice(0,-1):d,d.split("/").length===2&&(d+="/main"),`https://raw.githubusercontent.com/${d}/${o}`}async function fetchSampleMap(e){if(e.startsWith("github:")&&(e=githubPath(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[d,b]=e.split("shabda:");e=`https://shabda.ndre.gr/${b}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[d,b]=e.split("shabda/speech");b=b.startsWith("/")?b.substring(1):b;let[S,M]=b.split(":"),E="f",L="en-GB";S&&([L,E]=S.split("/")),e=`https://shabda.ndre.gr/speech/${M}.json?gender=${E}&language=${L}&strudel=1'`}if(typeof fetch!="function")return;const o=e.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const l=await fetch(e).then(d=>d.json()).catch(d=>{throw console.error(d),new Error(`error loading "${e}"`)});return[l,l._base||o]}async function fetchSample(e){const o=await fetch(e).then(d=>d.arrayBuffer()).then(d=>getAudioContext().decodeAudioData(d));let l=[];for(let d=0;d<o.numberOfChannels;d++)l.push(o.getChannelData(d));return{channels:l,sampleRate:o.sampleRate}}async function doughsamples(e,o){if(typeof e=="string"){const[l,d]=await fetchSampleMap(e);return doughsamples(l,d)}Object.entries(e).map(async([l,d])=>{l!=="_base"&&(d=d.map(b=>o+b),soundMap.set(l,d))})}const _workletUrl="/dough-worklet-BXhkTGjL.js";typeof sampleRate<"u"&&sampleRate;const workletUrl=_workletUrl;registerWorklet(workletUrl);const{Pattern,logger,repl}=strudelCore;setLogger(logger);const hap2value=e=>(e.ensureObjectValue(),e.value),webaudioOutput=(e,o,l,d,b)=>superdough(hap2value(e),b,l,d,e.whole?.begin.valueOf());function webaudioRepl(e={}){return e={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...e},repl(e)}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};const getDrawContext=(e="test-canvas",o)=>{let{contextType:l="2d",pixelated:d=!1,pixelRatio:b=window.devicePixelRatio}=o||{},S=document.querySelector("#"+e);if(!S){S=document.createElement("canvas"),S.id=e,S.width=window.innerWidth*b,S.height=window.innerHeight*b,S.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",d&&(S.style.imageRendering="pixelated"),document.body.prepend(S);let M;window.addEventListener("resize",()=>{M&&clearTimeout(M),M=setTimeout(()=>{S.width=window.innerWidth*b,S.height=window.innerHeight*b},200)})}return S.getContext(l,{willReadFrequently:!0})};let animationFrames={};function stopAnimationFrame(e){animationFrames[e]!==void 0&&(cancelAnimationFrame(animationFrames[e]),delete animationFrames[e])}function stopAllAnimations(e){Object.keys(animationFrames).forEach(o=>(!e||o.startsWith(e))&&stopAnimationFrame(o))}let memory={};Pattern$1.prototype.draw=function(e,o){if(typeof window>"u")return this;let{id:l=1,lookbehind:d=0,lookahead:b=0}=o,S=Math.max(getTime(),0);stopAnimationFrame(l),d=Math.abs(d),memory[l]=(memory[l]||[]).filter(R=>!R.isInFuture(S));let M=this.queryArc(S,S+b).filter(R=>R.hasOnset());memory[l]=memory[l].concat(M);let E;const L=()=>{const R=getTime(),Z=R+b;memory[l]=memory[l].filter(U=>U.isInNearPast(d,R));let q=Math.max(E||Z,Z-1/10);const K=this.queryArc(q,Z).filter(U=>U.hasOnset());memory[l]=memory[l].concat(K),E=Z,e(memory[l],R,Z,this),animationFrames[l]=requestAnimationFrame(L)};return animationFrames[l]=requestAnimationFrame(L),this};const cleanupDraw=(e=!0,o)=>{const l=getDrawContext();e&&l.clearRect(0,0,l.canvas.width,l.canvas.height),stopAllAnimations(o)};Pattern$1.prototype.onPaint=function(e){return this.withState(o=>(o.controls.painters||(o.controls.painters=[]),o.controls.painters.push(e),o))},Pattern$1.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};class Framer{constructor(o,l){this.onFrame=o,this.onError=l}start(){const o=this;let l=requestAnimationFrame(function d(b){try{o.onFrame(b)}catch(S){o.onError(S)}l=requestAnimationFrame(d)});o.cancel=()=>{cancelAnimationFrame(l)}}stop(){this.cancel&&this.cancel()}}let Drawer$1=class{constructor(o,l){this.visibleHaps=[],this.lastFrame=null,this.drawTime=l,this.painters=[],this.framer=new Framer(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const d=Math.abs(this.drawTime[0]),b=this.drawTime[1],S=this.scheduler.now()+b;if(this.lastFrame===null){this.lastFrame=S;return}const M=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,S-1/10),S);this.lastFrame=S,this.visibleHaps=(this.visibleHaps||[]).filter(L=>L.whole&&L.endClipped>=S-d-b).concat(M.filter(L=>L.hasOnset()));const E=S-b;o(this.visibleHaps,E,this,this.painters)},d=>{console.warn("draw error",d)})}setDrawTime(o){this.drawTime=o}invalidate(o=this.scheduler,l){if(!o)return;l=l??o.now(),this.scheduler=o;let[d,b]=this.drawTime;const[S,M]=[Math.max(l,0),l+b+.1];this.visibleHaps=this.visibleHaps.filter(L=>L.whole?.begin<l),this.painters=[];const E=o.pattern.queryArc(S,M,{painters:this.painters});this.visibleHaps=this.visibleHaps.concat(E)}start(o){this.scheduler=o,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}};function getComputedPropertyValue(e){return typeof window>"u"?"#fff":getComputedStyle(document.documentElement).getPropertyValue(e)}let theme={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function getTheme(){return theme}function setTheme(e){theme=e}let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:e,sync:o=!1,smear:l=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const d=getDrawContext();let{clientWidth:b,clientHeight:S}=d.canvas;b*=window.devicePixelRatio,S*=window.devicePixelRatio;let M=l===0?"99":Number((1-l)*100).toFixed(0);M=M.length===1?`0${M}`:M,clearColor=`#200010${M}`;const E=L=>{let R;L=Math.round(L),R=this.slow(1e3).queryArc(L,L),d.fillStyle=clearColor,d.fillRect(0,0,b,S),R.forEach(Z=>{let{x:q,y:K,w:U,h:se,s:re,r:ae,angle:de=0,fill:ve="darkseagreen"}=Z.value;if(U*=b,se*=S,ae!==void 0&&de!==void 0){const le=de*2*Math.PI,[_e,Ce]=[(b-U)/2,(S-se)/2];q=_e+Math.cos(le)*ae*_e,K=Ce+Math.sin(le)*ae*Ce}else q*=b-U,K*=S-se;const Ee={...Z.value,x:q,y:K,w:U,h:se};d.fillStyle=ve,re==="rect"?d.fillRect(q,K,U,se):re==="ellipse"&&(d.beginPath(),d.ellipse(q+U/2,K+se/2,U/2,se/2,0,0,2*Math.PI),d.fill()),e&&e(d,Ee,Z)}),window.frame=requestAnimationFrame(E)};return window.frame=requestAnimationFrame(E),silence};const{x:x$1,y,w,h,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear"),rescale=register("rescale",function(e,o){return o.mul(x$1(e).w(e).y(e).h(e))}),moveXY=register("moveXY",function(e,o,l){return l.add(x$1(e).y(o))}),zoomIn=register("zoomIn",function(e,o){const l=pure(1).sub(e).div(2);return o.rescale(e).move(l,l)}),colorMap={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function convertColorToNumber(e){return e=e.toLowerCase(),e[0]==="#"?convertHexToNumber(e):colorMap[e]!==void 0?convertHexToNumber(colorMap[e]):-1}function convertHexToNumber(e){return e=e.slice(1),parseInt(e,16)}const scale$2=(e,o,l)=>e*(l-o)+o,getValue=e=>{let{value:o}=e;typeof e.value!="object"&&(o={value:o});let{note:l,n:d,freq:b,s:S}=o;if(b)return freqToMidi$2(b);if(l=l??d,typeof l=="string")try{return noteToMidi$1(l)}catch{return 0}return typeof l=="number"?l:S?"_"+S:o};Pattern$1.prototype.pianoroll=function(e={}){let{cycles:o=4,playhead:l=.5,overscan:d=0,hideNegative:b=!1,ctx:S=getDrawContext(),id:M=1}=e,E=-o*l,L=o*(1-l);const R=(Z,q)=>(!b||Z.whole.begin>=0)&&Z.isWithinTime(q+E,q+L);return this.draw((Z,q)=>{__pianoroll({...e,time:q,ctx:S,haps:Z.filter(K=>R(K,q))})},{lookbehind:E-d,lookahead:L+d,id:M}),this};function pianoroll(e){return isPattern(e)?e.pianoroll():o=>o.pianoroll(e)}function __pianoroll({time:e,haps:o,cycles:l=4,playhead:d=.5,flipTime:b=0,flipValues:S=0,hideNegative:M=!1,inactive:E=getTheme().foreground,active:L=getTheme().foreground,background:R="transparent",smear:Z=0,playheadColor:q=getTheme().foreground,minMidi:K=10,maxMidi:U=90,autorange:se=0,timeframe:re,fold:ae=1,vertical:de=0,labels:ve=!1,fill:Ee=1,fillActive:le=!1,strokeActive:_e=!0,stroke:Ce,hideInactive:We=0,colorizeInactive:He=1,fontFamily:Mt,ctx:ut,id:Nt}={}){const St=ut.canvas.width,xt=ut.canvas.height;let $t=-l*d,qt=l*(1-d);Nt&&(o=o.filter(ei=>ei.hasTag(Nt))),re&&(console.warn("timeframe is deprecated! use from/to instead"),$t=0,qt=re);const Vt=de?xt:St,Ut=de?St:xt;let Yt=de?[Vt,0]:[0,Vt];const ai=qt-$t,si=de?[0,Ut]:[Ut,0];let di=U-K+1,At=Ut/di,hn=[];b&&Yt.reverse(),S&&si.reverse();const{min:ft,max:Xn,values:zn}=o.reduce(({min:ei,max:fi,values:Qi},Ei)=>{const gi=getValue(Ei);return{min:gi<ei?gi:ei,max:gi>fi?gi:fi,values:Qi.includes(gi)?Qi:[...Qi,gi]}},{min:1/0,max:-1/0,values:[]});se&&(K=ft,U=Xn,di=U-K+1),hn=zn.sort((ei,fi)=>typeof ei=="number"&&typeof fi=="number"?ei-fi:typeof ei=="number"?1:String(ei).localeCompare(String(fi))),At=ae?Ut/hn.length:Ut/di,ut.fillStyle=R,ut.globalAlpha=1,Z||(ut.clearRect(0,0,St,xt),ut.fillRect(0,0,St,xt)),o.forEach(ei=>{const fi=ei.whole.begin<=e&&ei.endClipped>e;let Qi=Ce??(_e&&fi),Ei=!fi&&Ee||fi&&le;if(We&&!fi)return;let gi=ei.value?.color;L=gi||L,E=He&&gi||E,gi=fi?L:E,ut.fillStyle=Ei?gi:"transparent",ut.strokeStyle=gi;const{velocity:Ti=1,gain:wn=1}=ei.value||{};ut.globalAlpha=Ti*wn;const Bi=(ei.whole.begin-(b?qt:$t))/ai,vi=scale$2(Bi,...Yt);let Di=scale$2(ei.duration/ai,0,Vt);const sr=getValue(ei),Je=ae?hn.indexOf(sr)/hn.length:(Number(sr)-K)/di,tt=scale$2(Je,...si);let qe=0;const _t=scale$2(e/ai,...Yt);let Ft;if(de?Ft=[tt+1-(S?At:0),Vt-_t+vi+qe+1-(b?0:Di),At-2,Di-2]:Ft=[vi-_t+qe+1-(b?Di:0),tt+1-(S?0:At),Di-2,At-2],Qi&&ut.strokeRect(...Ft),Ei&&ut.fillRect(...Ft),ve){const Wt=ei.value.note??ei.value.s+(ei.value.n?`:${ei.value.n}`:""),{label:Rt,activeLabel:un}=ei.value,ln=(fi&&un||Rt)??Wt;let pn=de?Di:At*.75;ut.font=`${pn}px ${Mt||"monospace"}`,ut.fillStyle=Ei?"black":gi,ut.textBaseline="top",ut.fillText(ln,...Ft)}}),ut.globalAlpha=1;const Dt=scale$2(-$t/ai,...Yt);return ut.strokeStyle=q,ut.beginPath(),de?(ut.moveTo(0,Dt),ut.lineTo(Ut,Dt)):(ut.moveTo(Dt,0),ut.lineTo(Dt,Ut)),ut.stroke(),this}function getDrawOptions(e,o={}){let[l,d]=e;l=Math.abs(l);const b=d+l,S=b!==0?l/b:0;return{fold:1,...o,cycles:b,playhead:S}}const getPunchcardPainter=(e={})=>(o,l,d,b)=>__pianoroll({ctx:o,time:l,haps:d,...getDrawOptions(b,e)});Pattern$1.prototype.punchcard=function(e){return this.onPaint(getPunchcardPainter(e))},Pattern$1.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function drawPianoroll(e){const{drawTime:o,...l}=e;__pianoroll({...getDrawOptions(o),...l})}function fromPolar(e,o,l,d){const b=(e-90)*Math.PI/180;return[l+Math.cos(b)*o,d+Math.sin(b)*o]}const xyOnSpiral=(e,o,l,d,b=0)=>fromPolar((e+b)*360,o*e,l,d);function spiralSegment(e){let{ctx:o,from:l=0,to:d=3,margin:b=50,cx:S=100,cy:M=100,rotate:E=0,thickness:L=b/2,color:R=getTheme().foreground,cap:Z="round",stretch:q=1,fromOpacity:K=1,toOpacity:U=1}=e;l*=q,d*=q,E*=q,o.lineWidth=L,o.lineCap=Z,o.strokeStyle=R,o.globalAlpha=K,o.beginPath();let[se,re]=xyOnSpiral(l,b,S,M,E);o.moveTo(se,re);const ae=1/60;let de=l;for(;de<=d;){const[ve,Ee]=xyOnSpiral(de,b,S,M,E);o.globalAlpha=(de-l)/(d-l)*U,o.lineTo(ve,Ee),de+=ae}o.stroke()}function drawSpiral(e){let{stretch:o=1,size:l=80,thickness:d=l/2,cap:b="butt",inset:S=3,playheadColor:M="#ffffff",playheadLength:E=.02,playheadThickness:L=d,padding:R=0,steady:Z=1,activeColor:q=getTheme().foreground,inactiveColor:K=getTheme().gutterForeground,colorizeInactive:U=0,fade:se=!0,ctx:re,time:ae,haps:de,drawTime:ve,id:Ee}=e;Ee&&(de=de.filter(St=>St.hasTag(Ee)));const[le,_e]=[re.canvas.width,re.canvas.height];re.clearRect(0,0,le*2,_e*2);const[Ce,We]=[le/2,_e/2],He={margin:l/o,cx:Ce,cy:We,stretch:o,cap:b,thickness:d},Mt={...He,thickness:L,from:S-E,to:S,color:M},[ut]=ve,Nt=Z*ae;de.forEach(St=>{const xt=St.whole.begin<=ae&&St.endClipped>ae,$t=St.whole.begin-ae+S,qt=St.endClipped-ae+S-R,Vt=St.value?.color||q,Ut=U||xt?Vt:K,Yt=se?1-Math.abs((St.whole.begin-ae)/ut):1;spiralSegment({ctx:re,...He,from:$t,to:qt,rotate:Nt,color:Ut,fromOpacity:Yt,toOpacity:Yt})}),spiralSegment({ctx:re,...Mt,rotate:Nt})}Pattern$1.prototype.spiral=function(e={}){return this.onPaint((o,l,d,b)=>drawSpiral({ctx:o,time:l,haps:d,drawTime:b,...e}))};const c=midiToFreq$2(36),circlePos=(e,o,l,d)=>{d=d*Math.PI*2;const b=Math.sin(d)*l+e,S=Math.cos(d)*l+o;return[b,S]},freq2angle=(e,o)=>.5-Math.log2(e/o)%1;function pitchwheel({haps:e,ctx:o,id:l,hapcircles:d=1,circle:b=0,edo:S=12,root:M=c,thickness:E=3,hapRadius:L=6,mode:R="flake",margin:Z=10}={}){const q=R==="polygon",K=R==="flake",U=o.canvas.width,se=o.canvas.height;o.clearRect(0,0,U,se);const re=getTheme().foreground,de=Math.min(U,se)/2-E/2-L-Z,ve=U/2,Ee=se/2;l&&(e=e.filter(_e=>_e.hasTag(l))),o.strokeStyle=re,o.fillStyle=re,o.globalAlpha=1,o.lineWidth=E,b&&(o.beginPath(),o.arc(ve,Ee,de,0,2*Math.PI),o.stroke()),S&&(Array.from({length:S},(_e,Ce)=>{const We=freq2angle(M*Math.pow(2,Ce/S),M),[He,Mt]=circlePos(ve,Ee,de,We);o.beginPath(),o.arc(He,Mt,L,0,2*Math.PI),o.fill()}),o.stroke());let le=[];o.lineWidth=L,e.forEach(_e=>{let Ce;try{Ce=getFrequency(_e)}catch{return}const We=freq2angle(Ce,M),[He,Mt]=circlePos(ve,Ee,de,We),ut=_e.value.color||re;o.strokeStyle=ut,o.fillStyle=ut;const{velocity:Nt=1,gain:St=1}=_e.value||{},xt=Nt*St;o.globalAlpha=xt,le.push([He,Mt,We,ut,xt]),o.beginPath(),d&&(o.moveTo(He+L,Mt),o.arc(He,Mt,L,0,2*Math.PI),o.fill()),K&&(o.moveTo(ve,Ee),o.lineTo(He,Mt)),o.stroke()}),o.strokeStyle=re,o.globalAlpha=1,q&&le.length&&(le=le.sort((_e,Ce)=>_e[2]-Ce[2]),o.beginPath(),o.moveTo(le[0][0],le[0][1]),le.forEach(([_e,Ce,We,He,Mt])=>{o.strokeStyle=He,o.globalAlpha=Mt,o.lineTo(_e,Ce)}),o.lineTo(le[0][0],le[0][1]),o.stroke())}Pattern$1.prototype.pitchwheel=function(e={}){let{ctx:o=getDrawContext(),id:l=1}=e;return this.tag(l).onPaint((d,b,S)=>pitchwheel({...e,ctx:o,haps:S.filter(M=>M.isActive(b)),id:l}))};const strudelDraw=Object.freeze(Object.defineProperty({__proto__:null,Drawer:Drawer$1,Framer,__pianoroll,angle,cleanupDraw,colorMap,convertColorToNumber,convertHexToNumber,drawPianoroll,fill,getComputedPropertyValue,getDrawContext,getDrawOptions,getPunchcardPainter,getTheme,h,moveXY,pianoroll,pitchwheel,r,rescale,setTheme,smear,w,x:x$1,y,zoomIn},Symbol.toStringTag,{value:"Module"}));function drawTimeScope(e,{align:o=!0,color:l="white",thickness:d=3,scale:b=.25,pos:S=.75,trigger:M=0,ctx:E=getDrawContext(),id:L=1}={}){E.lineWidth=d,E.strokeStyle=l;let R=E.canvas;if(!e){E.beginPath();let re=S*R.height;E.moveTo(0,re),E.lineTo(R.width,re),E.stroke();return}const Z=getAnalyzerData("time",L);E.beginPath();const q=e.frequencyBinCount;let K=o?Array.from(Z).findIndex((re,ae,de)=>ae&&de[ae-1]>-M&&re<=-M):0;K=Math.max(K,0);const U=R.width*1/q;let se=0;for(let re=K;re<q;re++){const ae=Z[re]+1,de=(S-b*(ae-1))*R.height;re===0?E.moveTo(se,de):E.lineTo(se,de),se+=U}E.stroke()}function drawFrequencyScope(e,{color:o="white",scale:l=.25,pos:d=.75,lean:b=.5,min:S=-150,max:M=0,ctx:E=getDrawContext(),id:L=1}={}){if(!e){E.beginPath();let se=d*Z.height;E.moveTo(0,se),E.lineTo(Z.width,se),E.stroke();return}const R=getAnalyzerData("frequency",L),Z=E.canvas;E.fillStyle=o;const q=e.frequencyBinCount,K=Z.width*1/q;let U=0;for(let se=0;se<q;se++){const ae=clamp$1((R[se]-S)/(M-S),0,1)*l,de=ae*Z.height,ve=(d-ae*b)*Z.height;E.fillRect(U,ve,Math.max(K,1),de),U+=K}}function clearScreen(e=0,o="0,0,0",l=getDrawContext()){e?(l.fillStyle=`rgba(${o},${1-e})`,l.fillRect(0,0,l.canvas.width,l.canvas.height)):l.clearRect(0,0,l.canvas.width,l.canvas.height)}Pattern$1.prototype.fscope=function(e={}){let o=e.id??1;return this.analyze(o).draw(()=>{clearScreen(e.smear,"0,0,0",e.ctx),analysers[o]&&drawFrequencyScope(analysers[o],e)},{id:o})},Pattern$1.prototype.tscope=function(e={}){let o=e.id??1;return this.analyze(o).draw(l=>{e.color=l[0]?.value?.color||getTheme().foreground,e.color,clearScreen(e.smear,"0,0,0",e.ctx),drawTimeScope(analysers[o],e)},{id:o})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;let latestColor={};Pattern$1.prototype.spectrum=function(e={}){let o=e.id??1;return this.analyze(o).draw(l=>{e.color=l[0]?.value?.color||latestColor[o]||getTheme().foreground,latestColor[o]=e.color,drawSpectrum(analysers[o],e)},{id:o})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const lastFrames=new Map;function drawSpectrum(e,{thickness:o=3,speed:l=1,min:d=-80,max:b=0,ctx:S=getDrawContext(),id:M=1,color:E}={}){if(S.lineWidth=o,S.strokeStyle=E,!e)return;const L=l,R=getAnalyzerData("frequency",M),Z=S.canvas;S.fillStyle=E;const q=e.frequencyBinCount;let K=lastFrames.get(M)||S.getImageData(0,0,Z.width,Z.height);lastFrames.set(M,K),S.clearRect(0,0,S.canvas.width,S.canvas.height),S.putImageData(K,-L,0);let U=Z.width-l;for(let se=0;se<q;se++){const re=clamp$1((R[se]-d)/(b-d),0,1);S.globalAlpha=re;const ae=Math.log(se+1)/Math.log(q)*Z.height;S.fillRect(U,Z.height-ae,L,2)}lastFrames.set(M,S.getImageData(0,0,Z.width,Z.height))}const strudelWebAudio=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY,Warpmode,aliasBank,get analysers(){return analysers},get analysersData(){return analysersData},applyFM,applyGainCurve,applyParameterModulators,connectToDestination,createFilter,destroyAudioWorkletNode,distortionAlgorithms,dough,doughTrigger,doughsamples,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,effectSend,errorLogger,gainNode,getADSRValues,getAnalyserById,getAnalyzerData,getAudioContext,getAudioContextCurrentTime,getAudioDevices,getCachedBuffer,getCompressor,getDefaultValue,getDistortion,getDistortionAlgorithm,getFrequencyFromValue,getLfo,getLoadedBuffer,getOscillator,getParamADSR,getParamLfo,getPitchEnvelope,getSampleBuffer,getSampleBufferSource,getSampleInfo,getSound,getSuperdoughAudioController,getVibratoOscillator,getWorklet,getZZFX,initAudio:initAudio$1,initAudioOnFirstClick,loadBuffer:loadBuffer$1,logger:logger$1,noises,onTriggerSample,onTriggerSynth,processSampleMap,registerSampleSource,registerSamplesPrefix,registerSound,registerSynthSounds:registerSynthSounds$1,registerWaveTable,registerWorklet,registerZZFXSounds,resetDefaultValues,resetDefaults,resetGlobalEffects,resetLoadedSounds,reverseBuffer,samples:samples$1,scheduleAtTime,setDefault,setDefaultAudioContext,setDefaultValue,setDefaultValues,setGainCurve,setLogger,setMaxPolyphony,setMultiChannelOrbits,setVersionDefaults,soundAlias,soundMap:soundMap$1,superdough,superdoughTrigger,tables,waveformN,webAudioTimeout,webaudioOutput,webaudioRepl},Symbol.toStringTag,{value:"Module"}));function isNamedPitch$1(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function isPitch$1(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var FIFTHS$1=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$1=FIFTHS$1.map(e=>Math.floor(e*7/12));function coordinates$1(e){const{step:o,alt:l,oct:d,dir:b=1}=e,S=FIFTHS$1[o]+7*l;if(d===void 0)return[b*S];const M=d-STEPS_TO_OCTS$1[o]-4*l;return[b*S,b*M]}var FIFTHS_TO_STEPS$1=[3,0,4,1,5,2,6];function pitch$1(e){const[o,l,d]=e,b=FIFTHS_TO_STEPS$1[unaltered$1(o)],S=Math.floor((o+1)/7);if(l===void 0)return{step:b,alt:S,dir:d};const M=l+4*S+STEPS_TO_OCTS$1[b];return{step:b,alt:S,oct:M,dir:d}}function unaltered$1(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$5=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval$1=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$1="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$1="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$8=new RegExp("^"+INTERVAL_TONAL_REGEX$1+"|"+INTERVAL_SHORTHAND_REGEX$1+"$");function tokenizeInterval$1(e){const o=REGEX$8.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$5={};function interval$1(e){return typeof e=="string"?cache$5[e]||(cache$5[e]=parse$6(e)):isPitch$1(e)?interval$1(pitchName$3(e)):isNamedPitch$1(e)?interval$1(e.name):NoInterval$1}var SIZES$2=[0,2,4,5,7,9,11],TYPES$1="PMMPPMM";function parse$6(e){const o=tokenizeInterval$1(e);if(o[0]==="")return NoInterval$1;const l=+o[0],d=o[1],b=(Math.abs(l)-1)%7,S=TYPES$1[b];if(S==="M"&&d==="P")return NoInterval$1;const M=S==="M"?"majorable":"perfectable",E=""+l+d,L=l<0?-1:1,R=l===8||l===-8?l:L*(b+1),Z=qToAlt$1(M,d),q=Math.floor((Math.abs(l)-1)/7),K=L*(SIZES$2[b]+Z+12*q),U=(L*(SIZES$2[b]+Z)%12+12)%12,se=coordinates$1({step:b,alt:Z,oct:q,dir:L});return{empty:!1,name:E,num:l,q:d,step:b,alt:Z,dir:L,type:M,simple:R,semitones:K,chroma:U,coord:se,oct:q}}function coordToInterval$1(e,o){const[l,d=0]=e,b=l*7+d*12<0,S=o||b?[-l,-d,-1]:[l,d,1];return interval$1(pitch$1(S))}function qToAlt$1(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$3(e){const{step:o,alt:l,oct:d=0,dir:b}=e;if(!b)return"";const S=o+1+7*d,M=S===0?o+1:S,E=b<0?"-":"",L=TYPES$1[o]==="M"?"majorable":"perfectable";return E+M+altToQ$1(L,l)}function altToQ$1(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$5("A",o):fillStr$5("d",e==="perfectable"?o:o+1)}var fillStr$4=(e,o)=>Array(Math.abs(o)+1).join(e),NoNote$1=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),cache$4=new Map,stepToLetter$1=e=>"CDEFGAB".charAt(e),altToAcc$1=e=>e<0?fillStr$4("b",-e):fillStr$4("#",e),accToAlt$1=e=>e[0]==="b"?-e.length:e.length;function note$1(e){const o=JSON.stringify(e),l=cache$4.get(o);if(l)return l;const d=typeof e=="string"?parse$5(e):isPitch$1(e)?note$1(pitchName$2(e)):isNamedPitch$1(e)?note$1(e.name):NoNote$1;return cache$4.set(o,d),d}var REGEX$7=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote$1(e){const o=REGEX$7.exec(e);return o?[o[1].toUpperCase(),o[2].replace(/x/g,"##"),o[3],o[4]]:["","","",""]}function coordToNote$1(e){return note$1(pitch$1(e))}var mod$1=(e,o)=>(e%o+o)%o,SEMI$1=[0,2,4,5,7,9,11];function parse$5(e){const o=tokenizeNote$1(e);if(o[0]===""||o[3]!=="")return NoNote$1;const l=o[0],d=o[1],b=o[2],S=(l.charCodeAt(0)+3)%7,M=accToAlt$1(d),E=b.length?+b:void 0,L=coordinates$1({step:S,alt:M,oct:E}),R=l+d+b,Z=l+d,q=(SEMI$1[S]+M+120)%12,K=E===void 0?mod$1(SEMI$1[S]+M,12)-1188:SEMI$1[S]+M+12*(E+1),U=K>=0&&K<=127?K:null,se=E===void 0?null:Math.pow(2,(K-69)/12)*440;return{empty:!1,acc:d,alt:M,chroma:q,coord:L,freq:se,height:K,letter:l,midi:U,name:R,oct:E,pc:Z,step:S}}function pitchName$2(e){const{step:o,alt:l,oct:d}=e,b=stepToLetter$1(o);if(!b)return"";const S=b+altToAcc$1(l);return d||d===0?S+d:S}function transpose$5(e,o){const l=note$1(e),d=Array.isArray(o)?o:interval$1(o).coord;if(l.empty||!d||d.length<2)return"";const b=l.coord,S=b.length===1?[b[0]+d[0]]:[b[0]+d[0],b[1]+d[1]];return coordToNote$1(S).name}function tonicIntervalsTransposer$1(e,o){const l=e.length;return d=>{if(!o)return"";const b=d<0?(l- -d%l)%l:d%l,S=Math.floor(d/l),M=transpose$5(o,[0,S]);return transpose$5(M,e[b])}}function distance$5(e,o){const l=note$1(e),d=note$1(o);if(l.empty||d.empty)return"";const b=l.coord,S=d.coord,M=S[0]-b[0],E=b.length===2&&S.length===2?S[1]-b[1]:-Math.floor(M*7/12),L=d.height===l.height&&d.midi!==null&&l.oct===d.oct&&l.step>d.step;return coordToInterval$1([M,E],L).name}var fillStr$3=(e,o)=>Array(o+1).join(e),REGEX$6=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$4(e){const o=REGEX$6.exec(e);return o?[o[1],o[2],o[3]]:["","",""]}function abcToScientificNotation(e){const[o,l,d]=tokenize$4(e);if(l==="")return"";let b=4;for(let M=0;M<d.length;M++)b+=d.charAt(M)===","?-1:1;const S=o[0]==="_"?o.replace(/_/g,"b"):o[0]==="^"?o.replace(/\^/g,"#"):"";return l.charCodeAt(0)>96?l.toUpperCase()+S+(b+1):l+S+b}function scientificToAbcNotation(e){const o=note$1(e);if(o.empty||!o.oct&&o.oct!==0)return"";const{letter:l,acc:d,oct:b}=o,S=d[0]==="b"?d.replace(/b/g,"_"):d.replace(/#/g,"^"),M=b>4?l.toLowerCase():l,E=b===5?"":b>4?fillStr$3("'",b-5):fillStr$3(",",4-b);return S+M+E}function transpose$4(e,o){return scientificToAbcNotation(transpose$5(abcToScientificNotation(e),o))}function distance$4(e,o){return distance$5(abcToScientificNotation(e),abcToScientificNotation(o))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$4,transpose:transpose$4,distance:distance$4};function ascR$1(e,o){const l=[];for(;o--;l[o]=o+e);return l}function descR$1(e,o){const l=[];for(;o--;l[o]=e-o);return l}function range$1(e,o){return e<o?ascR$1(e,o-e+1):descR$1(e,e-o+1)}function rotate$1(e,o){const l=o.length,d=(e%l+l)%l;return o.slice(d,l).concat(o.slice(0,d))}function compact$1(e){return e.filter(o=>o===0||o)}function sortedNoteNames(e){return e.map(l=>note$1(l)).filter(l=>!l.empty).sort((l,d)=>l.height-d.height).map(l=>l.name)}function sortedUniqNoteNames(e){return sortedNoteNames(e).filter((o,l,d)=>l===0||o!==d[l-1])}function shuffle$1(e,o=Math.random){let l,d,b=e.length;for(;b;)l=Math.floor(o()*b--),d=e[b],e[b]=e[l],e[l]=d;return e}function permutations$1(e){return e.length===0?[[]]:permutations$1(e.slice(1)).reduce((o,l)=>o.concat(e.map((d,b)=>{const S=l.slice();return S.splice(b,0,e[0]),S})),[])}const index$4=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(e,o){const l=[];for(;o--;l[o]=o+e);return l}function descR(e,o){const l=[];for(;o--;l[o]=e-o);return l}function range(e,o){return e<o?ascR(e,o-e+1):descR(e,e-o+1)}function rotate(e,o){const l=o.length,d=(e%l+l)%l;return o.slice(d,l).concat(o.slice(0,d))}function compact(e){return e.filter(o=>o===0||o)}function shuffle(e,o=Math.random){let l,d,b=e.length;for(;b;)l=Math.floor(o()*b--),d=e[b],e[b]=e[l],e[l]=d;return e}function permutations(e){return e.length===0?[[]]:permutations(e.slice(1)).reduce((o,l)=>o.concat(e.map((d,b)=>{const S=l.slice();return S.splice(b,0,e[0]),S})),[])}var collection_default={compact,permutations,range,rotate,shuffle},EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=e=>Number(e).toString(2).padStart(12,"0"),chromaToNumber=e=>parseInt(e,2),REGEX$5=/^[01]{12}$/;function isChroma(e){return REGEX$5.test(e)}var isPcsetNum=e=>typeof e=="number"&&e>=0&&e<=4095,isPcset=e=>e&&isChroma(e.chroma),cache$3={[EmptyPcset.chroma]:EmptyPcset};function get$b(e){const o=isChroma(e)?e:isPcsetNum(e)?setNumToChroma(e):Array.isArray(e)?listToChroma(e):isPcset(e)?e.chroma:EmptyPcset.chroma;return cache$3[o]=cache$3[o]||chromaToPcset(o)}var pcset$1=get$b,chroma$3=e=>get$b(e).chroma,intervals=e=>get$b(e).intervals,num$1=e=>get$b(e).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(e){const o=[];for(let l=0;l<12;l++)e.charAt(l)==="1"&&o.push(IVLS[l]);return o}function notes$1(e){return get$b(e).intervals.map(o=>transpose$5("C",o))}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(e,o=!0){const d=get$b(e).chroma.split("");return compact(d.map((b,S)=>{const M=rotate(S,d);return o&&M[0]==="0"?null:M.join("")}))}function isEqual(e,o){return get$b(e).setNum===get$b(o).setNum}function isSubsetOf(e){const o=get$b(e).setNum;return l=>{const d=get$b(l).setNum;return o&&o!==d&&(d&o)===d}}function isSupersetOf(e){const o=get$b(e).setNum;return l=>{const d=get$b(l).setNum;return o&&o!==d&&(d|o)===d}}function isNoteIncludedIn(e){const o=get$b(e);return l=>{const d=note$1(l);return o&&!d.empty&&o.chroma.charAt(d.chroma)==="1"}}function filter(e){const o=isNoteIncludedIn(e);return l=>l.filter(o)}var pcset_default={get:get$b,chroma:chroma$3,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,notes:notes$1,pcset:pcset$1};function chromaRotations(e){const o=e.split("");return o.map((l,d)=>rotate(d,o).join(""))}function chromaToPcset(e){const o=chromaToNumber(e),l=chromaRotations(e).map(chromaToNumber).filter(S=>S>=2048).sort()[0],d=setNumToChroma(l),b=chromaToIntervals(e);return{empty:!1,name:"",setNum:o,chroma:e,normalized:d,intervals:b}}function listToChroma(e){if(e.length===0)return EmptyPcset.chroma;let o;const l=[0,0,0,0,0,0,0,0,0,0,0,0];for(let d=0;d<e.length;d++)o=note$1(e[d]),o.empty&&(o=interval$1(e[d])),o.empty||(l[o.chroma]=1);return l.join("")}var CHORDS$1=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$3=CHORDS$1;({...EmptyPcset});var dictionary$2=[],index$3={};function all$3(){return dictionary$2.slice()}function add$4(e,o,l){const d=getQuality$1(e),b={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary$2.push(b),b.name&&(index$3[b.name]=b),index$3[b.setNum]=b,index$3[b.chroma]=b,b.aliases.forEach(S=>addAlias$2(b,S))}function addAlias$2(e,o){index$3[o]=e}function getQuality$1(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default$3.forEach(([e,o,l])=>add$4(e.split(" "),l.split(" "),o)),dictionary$2.sort((e,o)=>e.setNum-o.setNum);var namedSet=e=>{const o=e.reduce((l,d)=>{const b=note$1(d).chroma;return b!==void 0&&(l[b]=l[b]||note$1(d).name),l},{});return l=>o[l]};function detect$1(e,o={}){const l=e.map(b=>note$1(b).pc).filter(b=>b);return note$1.length===0?[]:findMatches(l,1,o).filter(b=>b.weight).sort((b,S)=>S.weight-b.weight).map(b=>b.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=e=>o=>!!(o&e),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(e){const o=parseInt(e.chroma,2);return hasAnyThird(o)&&hasPerfectFifth(o)&&hasAnySeventh(o)}function withPerfectFifth(e){const o=parseInt(e,2);return hasNonPerfectFifth(o)?e:(o|16).toString(2)}function findMatches(e,o,l){const d=e[0],b=note$1(d).chroma,S=namedSet(e),M=modes$1(e,!1),E=[];return M.forEach((L,R)=>{const Z=l.assumePerfectFifth&&withPerfectFifth(L);all$3().filter(K=>l.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(K)?K.chroma===Z:K.chroma===L).forEach(K=>{const U=K.aliases[0],se=S(R);R!==b?E.push({weight:.5*o,name:`${se}${U}/${d}`}):E.push({weight:1*o,name:`${se}${U}`})})}),E}function isNamedPitch(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var SIZES$1=[0,2,4,5,7,9,11],chroma$2=({step:e,alt:o})=>(SIZES$1[e]+o+120)%12,height=({step:e,alt:o,oct:l,dir:d=1})=>d*(SIZES$1[e]+o+12*(l===void 0?-100:l)),midi$1=e=>{const o=height(e);return e.oct!==void 0&&o>=-12&&o<=115?o+12:null};function isPitch(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(e=>Math.floor(e*7/12));function coordinates(e){const{step:o,alt:l,oct:d,dir:b=1}=e,S=FIFTHS[o]+7*l;if(d===void 0)return[b*S];const M=d-STEPS_TO_OCTS[o]-4*l;return[b*S,b*M]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function pitch(e){const[o,l,d]=e,b=FIFTHS_TO_STEPS[unaltered(o)],S=Math.floor((o+1)/7);if(l===void 0)return{step:b,alt:S,dir:d};const M=l+4*S+STEPS_TO_OCTS[b];return{step:b,alt:S,oct:M,dir:d}}function unaltered(e){const o=(e+1)%7;return o<0?7+o:o}var fillStr$2=(e,o)=>Array(Math.abs(o)+1).join(e),NoInterval={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$4=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(e){const o=REGEX$4.exec(`${e}`);return o===null?["",""]:o[1]?[o[1],o[2]]:[o[4],o[3]]}var cache$2={};function interval(e){return typeof e=="string"?cache$2[e]||(cache$2[e]=parse$4(e)):isPitch(e)?interval(pitchName$1(e)):isNamedPitch(e)?interval(e.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse$4(e){const o=tokenizeInterval(e);if(o[0]==="")return NoInterval;const l=+o[0],d=o[1],b=(Math.abs(l)-1)%7,S=TYPES[b];if(S==="M"&&d==="P")return NoInterval;const M=S==="M"?"majorable":"perfectable",E=""+l+d,L=l<0?-1:1,R=l===8||l===-8?l:L*(b+1),Z=qToAlt(M,d),q=Math.floor((Math.abs(l)-1)/7),K=L*(SIZES[b]+Z+12*q),U=(L*(SIZES[b]+Z)%12+12)%12,se=coordinates({step:b,alt:Z,oct:q,dir:L});return{empty:!1,name:E,num:l,q:d,step:b,alt:Z,dir:L,type:M,simple:R,semitones:K,chroma:U,coord:se,oct:q}}function coordToInterval(e,o){const[l,d=0]=e,b=l*7+d*12<0,S=o||b?[-l,-d,-1]:[l,d,1];return interval(pitch(S))}function qToAlt(e,o){return o==="M"&&e==="majorable"||o==="P"&&e==="perfectable"?0:o==="m"&&e==="majorable"?-1:/^A+$/.test(o)?o.length:/^d+$/.test(o)?-1*(e==="perfectable"?o.length:o.length+1):0}function pitchName$1(e){const{step:o,alt:l,oct:d=0,dir:b}=e;if(!b)return"";const S=o+1+7*d,M=S===0?o+1:S,E=b<0?"-":"",L=TYPES[o]==="M"?"majorable":"perfectable";return E+M+altToQ(L,l)}function altToQ(e,o){return o===0?e==="majorable"?"M":"P":o===-1&&e==="majorable"?"m":o>0?fillStr$2("A",o):fillStr$2("d",e==="perfectable"?o:o+1)}var fillStr$1=(e,o)=>Array(Math.abs(o)+1).join(e),NoNote={empty:!0,name:"",pc:"",acc:""},cache$1=new Map,stepToLetter=e=>"CDEFGAB".charAt(e),altToAcc=e=>e<0?fillStr$1("b",-e):fillStr$1("#",e),accToAlt=e=>e[0]==="b"?-e.length:e.length;function note(e){const o=JSON.stringify(e),l=cache$1.get(o);if(l)return l;const d=typeof e=="string"?parse$3(e):isPitch(e)?note(pitchName(e)):isNamedPitch(e)?note(e.name):NoNote;return cache$1.set(o,d),d}var REGEX$3=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(e){const o=REGEX$3.exec(e);return o?[o[1].toUpperCase(),o[2].replace(/x/g,"##"),o[3],o[4]]:["","","",""]}function coordToNote(e){return note(pitch(e))}var mod=(e,o)=>(e%o+o)%o,SEMI=[0,2,4,5,7,9,11];function parse$3(e){const o=tokenizeNote(e);if(o[0]===""||o[3]!=="")return NoNote;const l=o[0],d=o[1],b=o[2],S=(l.charCodeAt(0)+3)%7,M=accToAlt(d),E=b.length?+b:void 0,L=coordinates({step:S,alt:M,oct:E}),R=l+d+b,Z=l+d,q=(SEMI[S]+M+120)%12,K=E===void 0?mod(SEMI[S]+M,12)-1188:SEMI[S]+M+12*(E+1),U=K>=0&&K<=127?K:null,se=E===void 0?null:Math.pow(2,(K-69)/12)*440;return{empty:!1,acc:d,alt:M,chroma:q,coord:L,freq:se,height:K,letter:l,midi:U,name:R,oct:E,pc:Z,step:S}}function pitchName(e){const{step:o,alt:l,oct:d}=e,b=stepToLetter(o);if(!b)return"";const S=b+altToAcc(l);return d||d===0?S+d:S}function transpose$3(e,o){const l=note(e),d=Array.isArray(o)?o:interval(o).coord;if(l.empty||!d||d.length<2)return"";const b=l.coord,S=b.length===1?[b[0]+d[0]]:[b[0]+d[0],b[1]+d[1]];return coordToNote(S).name}function tonicIntervalsTransposer(e,o){const l=e.length;return d=>{if(!o)return"";const b=d<0?(l- -d%l)%l:d%l,S=Math.floor(d/l),M=transpose$3(o,[0,S]);return transpose$3(M,e[b])}}function distance$3(e,o){const l=note(e),d=note(o);if(l.empty||d.empty)return"";const b=l.coord,S=d.coord,M=S[0]-b[0],E=b.length===2&&S.length===2?S[1]-b[1]:-Math.floor(M*7/12),L=d.height===l.height&&d.midi!==null&&l.midi!==null&&l.step>d.step;return coordToInterval([M,E],L).name}var fillStr=(e,o)=>Array(Math.abs(o)+1).join(e);function deprecate(e,o,l){return function(...d){return console.warn(`${e} is deprecated. Use ${o}.`),l.apply(this,d)}}var isNamed=deprecate("isNamed","isNamedPitch",isNamedPitch);const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,chroma:chroma$2,coordToInterval,coordToNote,coordinates,deprecate,distance:distance$3,fillStr,height,interval,isNamed,isNamedPitch,isPitch,midi:midi$1,note,pitch,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"}));var CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$2=CHORDS,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$1=[],index$2={};function get$a(e){return index$2[e]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$a);function names$8(){return dictionary$1.map(e=>e.name).filter(e=>e)}function symbols(){return dictionary$1.map(e=>e.aliases[0]).filter(e=>e)}function keys$1(){return Object.keys(index$2)}function all$2(){return dictionary$1.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$2);function removeAll$1(){dictionary$1=[],index$2={}}function add$3(e,o,l){const d=getQuality(e),b={...get$b(e),name:l||"",quality:d,intervals:e,aliases:o};dictionary$1.push(b),b.name&&(index$2[b.name]=b),index$2[b.setNum]=b,index$2[b.chroma]=b,b.aliases.forEach(S=>addAlias$1(b,S))}function addAlias$1(e,o){index$2[o]=e}function getQuality(e){const o=l=>e.indexOf(l)!==-1;return o("5A")?"Augmented":o("3M")?"Major":o("5d")?"Diminished":o("3m")?"Minor":"Unknown"}data_default$2.forEach(([e,o,l])=>add$3(e.split(" "),l.split(" "),o)),dictionary$1.sort((e,o)=>e.setNum-o.setNum);var chord_type_default={names:names$8,symbols,get:get$a,all:all$2,add:add$3,removeAll:removeAll$1,keys:keys$1,entries:entries$2,chordType},SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$1=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary=[],index$1={};function names$7(){return dictionary.map(e=>e.name)}function get$9(e){return index$1[e]||NoScaleType}var scaleType=get$9;function all$1(){return dictionary.slice()}var entries$1=all$1;function keys(){return Object.keys(index$1)}function removeAll(){dictionary=[],index$1={}}function add$2(e,o,l=[]){const d={...get$b(e),name:o,intervals:e,aliases:l};return dictionary.push(d),index$1[d.name]=d,index$1[d.setNum]=d,index$1[d.chroma]=d,d.aliases.forEach(b=>addAlias(d,b)),d}function addAlias(e,o){index$1[o]=e}data_default$1.forEach(([e,o,...l])=>add$2(e.split(" "),o,l));var scale_type_default={names:names$7,get:get$9,all:all$1,add:add$2,removeAll,keys,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize$3(e){const[o,l,d,b]=tokenizeNote(e);return o===""?["",e]:o==="A"&&b==="ug"?["","aug"]:[o+l,d+b]}function get$8(e){if(e==="")return NoChord;if(Array.isArray(e)&&e.length===2)return getChord(e[1],e[0]);{const[o,l]=tokenize$3(e),d=getChord(l,o);return d.empty?getChord(e):d}}function getChord(e,o,l){const d=get$a(e),b=note(o||""),S=note(l||"");if(d.empty||o&&b.empty||l&&S.empty)return NoChord;const M=distance$3(b.pc,S.pc),E=d.intervals.indexOf(M)+1;if(!S.empty&&!E)return NoChord;const L=Array.from(d.intervals);for(let K=1;K<E;K++){const U=L[0][0],se=L[0][1],re=parseInt(U,10)+7;L.push(`${re}${se}`),L.shift()}const R=b.empty?[]:L.map(K=>transpose$3(b,K));e=d.aliases.indexOf(e)!==-1?e:d.aliases[0];const Z=`${b.empty?"":b.pc}${e}${S.empty||E<=1?"":"/"+S.pc}`,q=`${o?b.pc+" ":""}${d.name}${E>1&&l?" over "+S.pc:""}`;return{...d,name:q,symbol:Z,type:d.name,root:S.name,intervals:L,rootDegree:E,tonic:b.name,notes:R}}var chord=deprecate("Chord.chord","Chord.get",get$8);function transpose$2(e,o){const[l,d]=tokenize$3(e);return l?transpose$3(l,o)+d:e}function chordScales(e){const o=get$8(e),l=isSupersetOf(o.chroma);return all$1().filter(d=>l(d.chroma)).map(d=>d.name)}function extended$1(e){const o=get$8(e),l=isSupersetOf(o.chroma);return all$2().filter(d=>l(d.chroma)).map(d=>o.tonic+d.aliases[0])}function reduced$1(e){const o=get$8(e),l=isSubsetOf(o.chroma);return all$2().filter(d=>l(d.chroma)).map(d=>o.tonic+d.aliases[0])}function degrees$1(e){const{intervals:o,tonic:l}=get$8(e),d=tonicIntervalsTransposer(o,l);return b=>b?d(b>0?b-1:b):""}function steps$1(e){const{intervals:o,tonic:l}=get$8(e);return tonicIntervalsTransposer(o,l)}var chord_default={getChord,get:get$8,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$3,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default=DATA,VALUES=[];data_default.forEach(([e,o,l])=>add$1(e,o,l));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((e,o)=>(o.names.forEach(l=>e.push(l)),e),[])}function shorthands(){return VALUES.map(e=>e.shorthand)}var REGEX$2=/^([^.]+)(\.*)$/;function get$7(e){const[o,l,d]=REGEX$2.exec(e)||[],b=VALUES.find(E=>E.shorthand===l||E.names.includes(l));if(!b)return NoDuration;const S=calcDots(b.fraction,d.length),M=S[0]/S[1];return{...b,name:e,dots:d,value:M,fraction:S}}var value=e=>get$7(e).value,fraction=e=>get$7(e).fraction,duration_value_default={names:names$6,shorthands,get:get$7,value,fraction};function add$1(e,o,l){VALUES.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:o,names:l})}function calcDots(e,o){const l=Math.pow(2,o);let d=e[0]*l,b=e[1]*l;const S=d;for(let M=0;M<o;M++)d+=S/Math.pow(2,M+1);for(;d%2===0&&b%2===0;)d/=2,b/=2;return[d,b]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$6=interval,name$1=e=>interval(e).name,semitones=e=>interval(e).semitones,quality=e=>interval(e).q,num=e=>interval(e).num;function simplify$2(e){const o=interval(e);return o.empty?"":o.simple+o.q}function invert(e){const o=interval(e);if(o.empty)return"";const l=(7-o.step)%7,d=o.type==="perfectable"?-o.alt:-(o.alt+1);return interval({step:l,alt:d,oct:o.oct,dir:o.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(e){const o=e<0?-1:1,l=Math.abs(e),d=l%12,b=Math.floor(l/12);return o*(IN[d]+7*b)+IQ[d]}var distance$2=distance$5,add=combinator((e,o)=>[e[0]+o[0],e[1]+o[1]]),addTo=e=>o=>add(e,o),substract=combinator((e,o)=>[e[0]-o[0],e[1]-o[1]]);function transposeFifths$2(e,o){const l=get$6(e);if(l.empty)return"";const[d,b,S]=l.coord;return coordToInterval([d+o,b,S]).name}var interval_default={names:names$5,get:get$6,name:name$1,num,semitones,quality,fromSemitones,distance:distance$2,invert,simplify:simplify$2,add,addTo,substract,transposeFifths:transposeFifths$2};function combinator(e){return(o,l)=>{const d=interval(o).coord,b=interval(l).coord;if(d&&b){const S=e(d,b);return coordToInterval(S).name}}}function isMidi(e){return+e>=0&&+e<=127}function toMidi(e){if(isMidi(e))return+e;const o=note$1(e);return o.empty?null:o.midi}function midiToFreq(e,o=440){return Math.pow(2,(e-69)/12)*o}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(e){const o=12*(Math.log(e)-L440)/L2+69;return Math.round(o*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(e,o={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const d=(o.sharps===!0?SHARPS:FLATS)[e%12];if(o.pitchClass)return d;const b=Math.floor(e/12)-1;return d+b}function chroma$1(e){return e%12}function pcsetFromChroma(e){return e.split("").reduce((o,l,d)=>(d<12&&l==="1"&&o.push(d),o),[])}function pcsetFromMidi(e){return e.map(chroma$1).sort((o,l)=>o-l).filter((o,l,d)=>l===0||o!==d[l-1])}function pcset(e){return Array.isArray(e)?pcsetFromMidi(e):pcsetFromChroma(e)}function pcsetNearest(e){const o=pcset(e);return l=>{const d=chroma$1(l);for(let b=0;b<12;b++){if(o.includes(d+b))return l+b;if(o.includes(d-b))return l-b}}}function pcsetSteps(e,o){const l=pcset(e),d=l.length;return b=>{const S=b<0?(d- -b%d)%d:b%d,M=Math.floor(b/d);return l[S]+M*12+o}}function pcsetDegrees(e,o){const l=pcsetSteps(e,o);return d=>{if(d!==0)return l(d>0?d-1:d)}}var index_default$4={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=e=>e.name,onlyNotes=e=>e.map(note$1).filter(o=>!o.empty);function names$4(e){return e===void 0?NAMES$2.slice():Array.isArray(e)?onlyNotes(e).map(toName):[]}var get$5=note$1,name=e=>get$5(e).name,pitchClass=e=>get$5(e).pc,accidentals=e=>get$5(e).acc,octave=e=>get$5(e).oct,midi=e=>get$5(e).midi,freq=e=>get$5(e).freq,chroma=e=>get$5(e).chroma;function fromMidi(e){return midiToNoteName(e)}function fromFreq(e){return midiToNoteName(freqToMidi(e))}function fromFreqSharps(e){return midiToNoteName(freqToMidi(e),{sharps:!0})}function fromMidiSharps(e){return midiToNoteName(e,{sharps:!0})}var distance$1=distance$5,transpose$1=transpose$5,tr=transpose$5,transposeBy=e=>o=>transpose$1(o,e),trBy=transposeBy,transposeFrom=e=>o=>transpose$1(e,o),trFrom=transposeFrom;function transposeFifths$1(e,o){return transpose$1(e,[o,0])}var trFifths=transposeFifths$1;function transposeOctaves(e,o){return transpose$1(e,[0,o])}var ascending=(e,o)=>e.height-o.height,descending=(e,o)=>o.height-e.height;function sortedNames(e,o){return o=o||ascending,onlyNotes(e).sort(o).map(toName)}function sortedUniqNames(e){return sortedNames(e,ascending).filter((o,l,d)=>l===0||o!==d[l-1])}var simplify$1=e=>{const o=get$5(e);return o.empty?"":midiToNoteName(o.midi||o.chroma,{sharps:o.alt>0,pitchClass:o.midi===null})};function enharmonic(e,o){const l=get$5(e);if(l.empty)return"";const d=get$5(o||midiToNoteName(l.midi||l.chroma,{sharps:l.alt<0,pitchClass:!0}));if(d.empty||d.chroma!==l.chroma)return"";if(l.oct===void 0)return d.pc;const b=l.chroma-l.alt,S=d.chroma-d.alt,M=b>11||S<0?-1:b<0||S>11?1:0,E=l.oct+M;return d.pc+E}var index_default$3={names:names$4,get:get$5,name,pitchClass,accidentals,octave,midi,ascending,descending,distance:distance$1,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths:transposeFifths$1,transposeOctaves,trFifths,simplify:simplify$1,enharmonic},NoRomanNumeral={empty:!0,name:"",chordType:""},cache={};function get$4(e){return typeof e=="string"?cache[e]||(cache[e]=parse$2(e)):typeof e=="number"?get$4(NAMES$1[e]||""):isPitch$1(e)?fromPitch(e):isNamedPitch$1(e)?get$4(e.name):NoRomanNumeral}var romanNumeral=get$4;function names$3(e=!0){return(e?NAMES$1:NAMES_MINOR).slice()}function fromPitch(e){return get$4(altToAcc$1(e.alt)+NAMES$1[e.step])}var REGEX$1=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$2(e){return REGEX$1.exec(e)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$2(e){const[o,l,d,b]=tokenize$2(e);if(!d)return NoRomanNumeral;const S=d.toUpperCase(),M=NAMES$1.indexOf(S),E=accToAlt$1(l),L=1;return{empty:!1,name:o,roman:d,interval:interval$1({step:M,alt:E,dir:L}).name,acc:l,chordType:b,alt:E,step:M,major:d===S,oct:0,dir:L}}var roman_numeral_default={names:names$3,get:get$4,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty,secondaryDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantSupertonics:Empty,secondaryDominantsMinorRelative:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,substituteDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(e,o,l="")=>o.map((d,b)=>`${e[b]}${l}${d}`);function keyScale(e,o,l,d,b){return S=>{const M=e.map(U=>get$4(U).interval||""),E=M.map(U=>transpose$1(S,U)),L=mapScaleToType(E,l),R=E.map(U=>transpose$1(U,"5P")).map(U=>E.includes(U)&&!L.includes(U+"7")?U+"7":""),Z=supertonics(R,o),q=R.map(U=>{if(!U)return"";const se=U.slice(0,-1);return transpose$1(se,"5d")+"7"}),K=supertonics(q,o);return{tonic:S,grades:e,intervals:M,scale:E,triads:mapScaleToType(E,o),chords:L,chordsHarmonicFunction:d.slice(),chordScales:mapScaleToType(E,b," "),secondaryDominants:R,secondaryDominantSupertonics:Z,substituteDominants:q,substituteDominantSupertonics:K,secondaryDominantsMinorRelative:Z,substituteDominantsMinorRelative:K}}}var supertonics=(e,o)=>e.map((l,d)=>{if(!l)return"";const b=l.slice(0,-1),S=transpose$1(b,"5P");return o[d].endsWith("m")?S+"m7":S+"m7b5"}),distInFifths=(e,o)=>{const l=note$1(e),d=note$1(o);return l.empty||d.empty?0:d.coord[0]-l.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(e){const o=note$1(e).pc;if(!o)return NoMajorKey;const l=MajorScale(o),d=distInFifths("C",o);return{...l,type:"major",minorRelative:transpose$1(o,"-3m"),alteration:d,keySignature:altToAcc$1(d)}}function minorKey(e){const o=note$1(e).pc;if(!o)return NoMinorKey;const l=distInFifths("C",o)-3;return{type:"minor",tonic:o,relativeMajor:transpose$1(o,"3m"),alteration:l,keySignature:altToAcc$1(l),natural:NaturalScale(o),harmonic:HarmonicScale(o),melodic:MelodicScale(o)}}function majorTonicFromKeySignature(e){return typeof e=="number"?transposeFifths$1("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?transposeFifths$1("C",accToAlt$1(e)):null}var index_default$2={majorKey,majorTonicFromKeySignature,minorKey},get$3=interval$1;function simplify(e){const o=interval$1(e);return o.empty?"":o.simple+o.q}function transposeFifths(e,o){const l=get$3(e);if(l.empty)return"";const[d,b,S]=l.coord;return coordToInterval$1([d+o,b,S]).name}var MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index={};modes.forEach(e=>{index[e.name]=e,e.aliases.forEach(o=>{index[o]=e})});function get$2(e){return typeof e=="string"?index[e.toLowerCase()]||NoMode:e&&e.name?get$2(e.name):NoMode}var mode=get$2;function all(){return modes.slice()}var entries=all;function names$2(){return modes.map(e=>e.name)}function toMode(e){const[o,l,d,b,S,M,E]=e,L=E?[E]:[],R=Number(l).toString(2);return{empty:!1,intervals:get$9(b).intervals,modeNum:o,chroma:R,normalized:R,name:b,setNum:l,alt:d,triad:S,seventh:M,aliases:L}}function notes(e,o){return get$2(e).intervals.map(l=>transpose$5(o,l))}function chords(e){return(o,l)=>{const d=get$2(o);if(d.empty)return[];const b=rotate(d.modeNum,e),S=d.intervals.map(M=>transpose$5(l,M));return b.map((M,E)=>S[E]+M)}}var triads$1=chords(MODES.map(e=>e[4])),seventhChords=chords(MODES.map(e=>e[5]));function distance(e,o){const l=get$2(o),d=get$2(e);return l.empty||d.empty?"":simplify(transposeFifths("1P",d.alt-l.alt))}function relativeTonic(e,o,l){return transpose$5(l,distance(e,o))}var mode_default={get:get$2,names:names$2,all,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode};function tokenize$1(e){const[o,l,d,b]=tokenizeNote$1(e);return o===""?tokenizeBass("",e):o==="A"&&b==="ug"?tokenizeBass("","aug"):tokenizeBass(o+l,d+b)}function tokenizeBass(e,o){const l=o.split("/");if(l.length===1)return[e,l[0],""];const[d,b,S,M]=tokenizeNote$1(l[1]);return d!==""&&S===""&&M===""?[e,l[0],d+b]:[e,o,""]}function fromRomanNumerals(e,o){return o.map(get$4).map(d=>transpose$5(e,interval$1(d))+d.chordType)}function toRomanNumerals(e,o){return o.map(l=>{const[d,b]=tokenize$1(l),S=distance$5(e,d);return get$4(interval$1(S)).name+b})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(e){const o=compact(e.map(l=>typeof l=="number"?l:toMidi(l)));return!e.length||o.length!==e.length?[]:o.reduce((l,d)=>{const b=l[l.length-1];return l.concat(range(b,d).slice(1))},[o[0]])}function chromatic(e,o){return numeric(e).map(l=>midiToNoteName(l,o))}var index_default$1={numeric,chromatic},NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(e){if(typeof e!="string")return["",""];const o=e.indexOf(" "),l=note$1(e.substring(0,o));if(l.empty){const b=note$1(e);return b.empty?["",e.toLowerCase()]:[b.name,""]}const d=e.substring(l.name.length+1).toLowerCase();return[l.name,d.length?d:""]}var names$1=names$7;function get$1(e){const o=Array.isArray(e)?e:tokenize(e),l=note$1(o[0]).name,d=get$9(o[1]);if(d.empty)return NoScale;const b=d.name,S=l?d.intervals.map(E=>transpose$5(l,E)):[],M=l?l+" "+b:b;return{...d,name:M,type:b,tonic:l,notes:S}}var scale$1=get$1;function detect(e,o={}){const l=chroma$3(e),d=note$1(o.tonic??e[0]??""),b=d.chroma;if(b===void 0)return[];const S=l.split("");S[b]="1";const M=rotate(b,S).join(""),E=all$1().find(R=>R.chroma===M),L=[];return E&&L.push(d.name+" "+E.name),o.match==="exact"||extended(M).forEach(R=>{L.push(d.name+" "+R)}),L}function scaleChords(e){const o=get$1(e),l=isSubsetOf(o.chroma);return all$3().filter(d=>l(d.chroma)).map(d=>d.aliases[0])}function extended(e){const o=isChroma(e)?e:get$1(e).chroma,l=isSupersetOf(o);return all$1().filter(d=>l(d.chroma)).map(d=>d.name)}function reduced(e){const o=isSubsetOf(get$1(e).chroma);return all$1().filter(l=>o(l.chroma)).map(l=>l.name)}function scaleNotes(e){const o=e.map(b=>note$1(b).pc).filter(b=>b),l=o[0],d=sortedUniqNames(o);return rotate(d.indexOf(l),d)}function modeNames(e){const o=get$1(e);if(o.empty)return[];const l=o.tonic?o.notes:o.intervals;return modes$1(o.chroma).map((d,b)=>{const S=get$1(d).name;return S?[l[b],S]:["",""]}).filter(d=>d[0])}function getNoteNameOf(e){const o=Array.isArray(e)?scaleNotes(e):get$1(e).notes,l=o.map(d=>note$1(d).chroma);return d=>{const b=note$1(typeof d=="number"?fromMidi(d):d),S=b.height;if(S===void 0)return;const M=S%12,E=l.indexOf(M);if(E!==-1)return enharmonic(b.name,o[E])}}function rangeOf(e){const o=getNoteNameOf(e);return(l,d)=>{const b=note$1(l).height,S=note$1(d).height;return b===void 0||S===void 0?[]:range(b,S).map(o).filter(M=>M)}}function degrees(e){const{intervals:o,tonic:l}=get$1(e),d=tonicIntervalsTransposer$1(o,l);return b=>b?d(b>0?b-1:b):""}function steps(e){const{intervals:o,tonic:l}=get$1(e);return tonicIntervalsTransposer$1(o,l)}var index_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(e){const o=JSON.stringify(e),l=CACHE.get(o);if(l)return l;const d=build(parse$1(e));return CACHE.set(o,d),d}function parse$1(e){if(typeof e=="string"){const[S,M,E]=REGEX.exec(e)||[];return parse$1([M,E])}const[o,l]=e,d=+l;if(typeof o=="number")return[o,d];const b=o.split("+").map(S=>+S);return b.length===1?[b[0],d]:[b,d]}var time_signature_default={names,parse:parse$1,get},isPowerOfTwo=e=>Math.log(e)/Math.log(2)%1===0;function build([e,o]){const l=Array.isArray(e)?e.reduce((E,L)=>E+L,0):e,d=o;if(l===0||d===0)return NONE;const b=Array.isArray(e)?`${e.join("+")}/${o}`:`${e}/${o}`,S=Array.isArray(e)?e:[],M=d===4||d===2?"simple":d===8&&l%3===0?"compound":isPowerOfTwo(d)?"irregular":"irrational";return{empty:!1,name:b,type:M,upper:l,lower:d,additive:S}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$4,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:index_default$2,Midi:index_default$4,Mode:mode_default,Note:index_default$3,PcSet,Pcset:pcset_default,Progression:progression_default,Range:index_default$1,RomanNumeral:roman_numeral_default,Scale:index_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,chroma:chroma$2,coordToInterval,coordToNote,coordinates,deprecate,distance:distance$3,fillStr,height,interval,isNamed,isNamedPitch,isPitch,midi:midi$1,note,pitch,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"})),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=e=>{const[o,...l]=e.split("");return pcs.indexOf(o.toLowerCase())+l.reduce((d,b)=>d+accs[b],0)};function tokenizeChord$1(e){const o=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return o?o.slice(1):[]}const midi2chroma=e=>e%12,step2semitones=e=>{let o=Number(e);return isNaN(o)?interval_default.semitones(e):o},x2midi=(e,o)=>{if(typeof e=="number")return e;if(typeof e=="string")return noteToMidi$1(e,o)},midi2note=(e,o=!1)=>{const l=Math.floor(e/12)-1;return(o?sharps:flats)[e%12]+l};function scaleStep$1(e,o,l=1){e=e.map(b=>typeof b=="string"?noteToMidi$1(b):b);const d=Math.floor(o/e.length)*l*12;return o=_mod$2(o,e.length),e[o]+d}function nearestNumberIndex(e,o,l){let d=0,b=1/0;return o.forEach((S,M)=>{const E=Math.abs(S-e);(!l&&E<b||l&&E<=b)&&(d=M,b=E)}),d}let scaleSteps={};function stepInNamedScale(e,o,l,d){const[b,S]=index_default.tokenize(o),M=x2midi(b),E=midi2chroma(M);if(!scaleSteps[S]){const{intervals:K}=index_default.get(`C ${S}`);scaleSteps[S]=K.map(step2semitones)}const L=scaleSteps[S];if(!L)return null;let R=M;if(l){l=x2midi(l,3);const K=midi2chroma(l),U=_mod$2(K-E,12),se=nearestNumberIndex(U,L,d);e=e+se,R=l-U}const Z=Math.floor(e/L.length)*12;return e=_mod$2(e,L.length),L[e]+R+Z}let modeTarget={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function renderVoicing({chord:e,dictionary:o,offset:l=0,n:d,mode:b="below",anchor:S="c5",octaves:M=1}){const[E,L]=tokenizeChord$1(e),R=pc2chroma(E);S=x2midi(S?.note||S,4);const Z=midi2chroma(S),q=o[L].map(Ce=>(typeof Ce=="string"?Ce.split(" "):Ce).map(step2semitones));let K,U,se=q.map((Ce,We)=>{const He=modeTarget[b](Ce),Mt=_mod$2(Z-He-R,12);return(K===void 0||Mt<K)&&(K=Mt,U=We),Mt});b==="root"&&(U=0);const re=Math.ceil(l/q.length)*12,ae=_mod$2(U+l,q.length),de=q[ae],ve=modeTarget[b](de),Ee=S-se[ae]+re,le=de.map(Ce=>Ee-ve+Ce);let _e=le.map(Ce=>midi2note(Ce));return b==="duck"&&(_e=_e.filter((Ce,We)=>le[We]!==S)),d!==void 0?[scaleStep$1(_e,d,M)]:_e}const octavesInterval=e=>(e<=0?-1:1)+e*7+"P";function getScale(e){e=e.replaceAll(":"," ");const o=index_default.get(e),{tonic:l,empty:d}=o;if(d&&isNote(e)||d&&!l)throw new Error(`Scale name ${e} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(d)throw new Error(`Invalid scale name "${e}"`);return o}function scaleStep(e,o){e=Math.ceil(e);let{intervals:l,tonic:d}=getScale(o);d=d||"C";const{pc:b,oct:S=3}=index_default$3.get(d),M=Math.floor(e/l.length),E=_mod$2(e,l.length),L=interval_default.add(l[E],octavesInterval(M));return index_default$3.transpose(b+S,L)}function scaleOffset(e,o,l){let{notes:d}=getScale(e);if(d=d.map(q=>index_default$3.get(q).pc),o=Number(o),isNaN(o))throw new Error(`scale offset "${o}" not a number`);const{pc:b,oct:S=3}=index_default$3.get(l),M=d.indexOf(b);if(M===-1)throw new Error(`note "${l}" is not in scale "${e}"`);let E=M,L=S,R=b;const Z=Math.sign(o);for(;Math.abs(E-M)<Math.abs(o);){E+=Z;const q=_mod$2(E,d.length);Z<0&&R[0]==="C"&&(L+=Z),R=d[q],Z>0&&R[0]==="C"&&(L+=Z)}return R+L}const{transpose,trans}=register(["transpose","trans"],function(o,l){return l.withHap(d=>{const b=d.value.note??d.value;if(typeof b=="number"){let E;typeof o=="number"?E=o:typeof o=="string"&&(E=interval_default.semitones(o)||0);const L=b+E;return typeof d.value=="object"?d.withValue(()=>({...d.value,note:L})):d.withValue(()=>L)}if(typeof b!="string"||!isNote(b))return logger$2(`[tonal] transpose: not a note "${b}"`,"warning"),d;const S=isNaN(Number(o))?String(o):interval_default.fromSemitones(o),M=index_default$3.transpose(b,S);return typeof d.value=="object"?d.withValue(()=>({...d.value,note:M})):d.withValue(()=>M)})}),{scaleTranspose,scaleTrans,strans}=register(["scaleTranspose","scaleTrans","strans"],function(e,o){return o.withHap(l=>{if(!l.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof l.value=="object")return l.withValue(()=>({...l.value,note:scaleOffset(l.context.scale,Number(e),l.value.note)}));if(typeof l.value!="string")throw new Error("can only use scaleTranspose with notes");return l.withValue(()=>scaleOffset(l.context.scale,Number(e),l.value))})});function _convertStepToNumberAndOffset(e){let o=Number(e),l=0;if(isNaN(o)){e=String(e);const d=/^(-?\d+)([#bsf]*)$/.exec(e);if(!d)throw new Error(`invalid scale step "${e}", expected number or integer with optional # b suffixes`);o=Number(d[1]);const b=d[2]||"";l=getAccidentalsOffset$1(b)}return[o,l]}let scaleToMidisAndNotes={};function _getNearestScaleNote(e,o,l=!0){let d=typeof o=="string"?noteToMidi$1(o):o;if(scaleToMidisAndNotes[e]===void 0){const{intervals:q,tonic:K}=getScale(e),{pc:U}=index_default$3.get(K),re=q.concat("8P").map(de=>index_default$3.transpose(U+"0",de)),ae=re.map(noteToMidi$1);scaleToMidisAndNotes[e]=[ae,re]}const[b,S]=scaleToMidisAndNotes[e],M=b[0],E=Math.floor((d-M)/12),L=b.map(q=>q+12*E),R=nearestNumberIndex(d,L,l),Z=S[R];return index_default$3.transpose(Z,interval_default.fromSemitones(12*E))}const scale=register("scale",function(e,o){return Array.isArray(e)&&(e=e.flat().join(" ")),o.withHaps(l=>(l=l.map(d=>{let b=d.value;const S=typeof b=="object";b=S?b:{n:b};const{note:M,n:E,value:L,...R}=b,Z=M??E??L;if(Z===void 0)return logger$2(`[tonal] Invalid value format for 'scale'. Value must contain n, note, or value but received keys [${Object.keys(b).join(", ")}]`,"error"),d;let q;if(isNote(Z))q=_getNearestScaleNote(e,Z),d.value={...R,note:q};else try{const[K,U]=_convertStepToNumberAndOffset(Z);R.anchor?q=stepInNamedScale(K,e,R.anchor):q=scaleStep(K,e),U!=0&&(q=index_default$3.transpose(q,interval_default.fromSemitones(U)))}catch(K){errorLogger$1(K,"tonal");return}return d.value=S?{...R,note:q}:q,d.setContext({...d.context,scale:e})}),removeUndefineds(l)))},!0,!0);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var o=e.default;if(typeof o=="function"){var l=function d(){var b=!1;try{b=this instanceof d}catch{}return b?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};l.prototype=o.prototype}else l={};return Object.defineProperty(l,"__esModule",{value:!0}),Object.keys(e).forEach(function(d){var b=Object.getOwnPropertyDescriptor(e,d);Object.defineProperty(l,d,b.get?b:{enumerable:!0,get:function(){return e[d]}})}),l}var dist={},dictionaryVoicing$1={},getBestVoicing={},hasRequiredGetBestVoicing;function requireGetBestVoicing(){if(hasRequiredGetBestVoicing)return getBestVoicing;hasRequiredGetBestVoicing=1,getBestVoicing.__esModule=!0,getBestVoicing.getBestVoicing=void 0;function e(o){var l=o.chord,d=o.range,b=o.finder,S=o.picker,M=o.lastVoicing,E=b(l,d);return E.length?S(E,M):[]}return getBestVoicing.getBestVoicing=e,getBestVoicing}var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord={},hasRequiredTokenizeChord;function requireTokenizeChord(){if(hasRequiredTokenizeChord)return tokenizeChord;hasRequiredTokenizeChord=1,tokenizeChord.__esModule=!0,tokenizeChord.tokenizeChord=void 0;function e(o){var l=(o||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return l?l.slice(1):[]}return tokenizeChord.tokenizeChord=e,tokenizeChord}var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var e=require$$0,o=requireDictionaryVoicing(),l=requireTokenizeChord();function d(b,S,M){S===void 0&&(S=o.lefthand),M===void 0&&(M=["D3","A4"]);var E=(0,l.tokenizeChord)(b),L=E[0],R=E[1];if(!S[R])return[];var Z=S[R].map(function(K){return K.split(" ")}),q=e.Range.chromatic(M);return Z.reduce(function(K,U){var se=U.map(function(ve){return e.Interval.substract(ve,U[0])}),re=e.Note.transpose(L,U[0]),ae=q.filter(function(ve){return e.Note.chroma(ve)===e.Note.chroma(re)}).filter(function(ve){return e.Note.midi(e.Note.transpose(ve,se[se.length-1]))<=e.Note.midi(M[1])}).map(function(ve){return e.Note.enharmonic(ve,re)}),de=ae.map(function(ve){return se.map(function(Ee){return e.Note.transpose(ve,Ee)})});return K.concat(de)},[])}return voicingsInRange.voicingsInRange=d,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,(function(e){var o=dictionaryVoicing$1&&dictionaryVoicing$1.__assign||function(){return o=Object.assign||function(E){for(var L,R=1,Z=arguments.length;R<Z;R++){L=arguments[R];for(var q in L)Object.prototype.hasOwnProperty.call(L,q)&&(E[q]=L[q])}return E},o.apply(this,arguments)},l=dictionaryVoicing$1&&dictionaryVoicing$1.__rest||function(E,L){var R={};for(var Z in E)Object.prototype.hasOwnProperty.call(E,Z)&&L.indexOf(Z)<0&&(R[Z]=E[Z]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,Z=Object.getOwnPropertySymbols(E);q<Z.length;q++)L.indexOf(Z[q])<0&&Object.prototype.propertyIsEnumerable.call(E,Z[q])&&(R[Z[q]]=E[Z[q]]);return R};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var d=requireGetBestVoicing(),b=requireVoicingsInRange();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var S=function(E){return function(L,R){return(0,b.voicingsInRange)(L,E,R)}};e.dictionaryVoicingFinder=S;var M=function(E){var L=E.dictionary,R=E.range,Z=l(E,["dictionary","range"]);return(0,d.getBestVoicing)(o(o({},Z),{range:R,finder:(0,e.dictionaryVoicingFinder)(L)}))};e.dictionaryVoicing=M})(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$1={},hasRequiredMinTopNoteDiff;function requireMinTopNoteDiff(){if(hasRequiredMinTopNoteDiff)return minTopNoteDiff$1;hasRequiredMinTopNoteDiff=1,minTopNoteDiff$1.__esModule=!0,minTopNoteDiff$1.minTopNoteDiff=void 0;var e=require$$0;function o(l,d){if(!d)return l[0];var b=function(S){return Math.abs(e.Note.midi(d[d.length-1])-e.Note.midi(S[S.length-1]))};return l.reduce(function(S,M){return b(M)<b(S)?M:S},l[0])}return minTopNoteDiff$1.minTopNoteDiff=o,minTopNoteDiff$1}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(e){e.__esModule=!0;var o=requireDictionaryVoicing(),l=requireMinTopNoteDiff(),d=requireGetBestVoicing(),b=requireTokenizeChord();e.default={tokenizeChord:b.tokenizeChord,getBestVoicing:d.getBestVoicing,dictionaryVoicing:o.dictionaryVoicing,dictionaryVoicingFinder:o.dictionaryVoicingFinder,lefthand:o.lefthand,guidetones:o.guidetones,triads:o.triads,minTopNoteDiff:l.minTopNoteDiff}})(dist)),dist}var distExports=requireDist();const _voicings=getDefaultExportFromCjs(distExports),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},legacy:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}};let defaultDict="ireal";const setDefaultVoicings=e=>defaultDict=e,setVoicingRange=(e,o)=>addVoicings(e,voicingRegistry[e].dictionary,o),addVoicings=(e,o,l=["F3","A4"])=>{Object.assign(voicingRegistry,{[e]:{dictionary:o,range:l}})},registerVoicings=(e,o,l={})=>{Object.assign(voicingRegistry,{[e]:{dictionary:o,...l}})},getVoicing=(e,o,l)=>{const{dictionary:d,range:b}=voicingRegistry[o];return dictionaryVoicing({chord:e,dictionary:d,range:b,picker:minTopNoteDiff,lastVoicing:l})};let lastVoicing;const voicings=register("voicings",function(e,o){return o.fmap(l=>(lastVoicing=getVoicing(l,e,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(e,o){return o.fmap(l=>{const S=(l.chord||l).match(/^([a-gA-G][b#]?).*$/)[1]+e;return l.chord?{note:S}:S})}),voicing=register("voicing",function(e){return e.fmap(o=>{o=typeof o=="string"?{chord:o}:o;let{dictionary:l=defaultDict,chord:d,anchor:b,offset:S,mode:M,n:E,octaves:L,...R}=o;l=typeof l=="string"?voicingRegistry[l]:{dictionary:l,mode:"below",anchor:"c5"};try{let Z=renderVoicing({...l,chord:d,anchor:b,offset:S,mode:M,n:E,octaves:L});return stack(...Z).note().set(R)}catch{return logger$2(`[voicing]: unknown chord "${d}"`),silence}}).outerJoin()});function voicingAlias(e,o,l){l=Array.isArray(l)?l:[l],l.forEach(d=>{d[o]=d[e]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(e=>{if(e.includes("-")){let o=e.replace("-","m");voicingAlias(e,o,[complex,simple])}if(e.includes("^")){let o=e.replace("^","M");voicingAlias(e,o,[complex,simple])}if(e.includes("+")){let o=e.replace("+","aug");voicingAlias(e,o,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);function resetVoicings(){lastVoicing=void 0,setDefaultVoicings("ireal")}const packageName="@strudel/tonal",strudelTonal=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,complex,packageName,registerVoicings,resetVoicings,rootNotes,scale,scaleTrans,scaleTranspose,setDefaultVoicings,setVoicingRange,simple,strans,trans,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"}));let latestOptions,hydra;async function initHydra(e={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(e)&&document.getElementById("hydra-canvas")?.remove(),latestOptions=e,!document.getElementById("hydra-canvas")){const{src:o="https://unpkg.com/hydra-synth",feedStrudel:l=!1,contextType:d="webgl",pixelRatio:b=1,pixelated:S=!0,...M}={detectAudio:!1,...e},{canvas:E}=getDrawContext("hydra-canvas",{contextType:d,pixelRatio:b,pixelated:S});if(M.canvas=E,await import(o),hydra=new Hydra(M),l){const{canvas:L}=getDrawContext();L.style.display="none",hydra.synth.s0.init({src:L})}}return hydra}function clearHydra(){hydra&&hydra.hush(),globalThis.s0?.clear(),document.getElementById("hydra-canvas")?.remove(),globalThis.speed=speed,globalThis.shape=shape}const H=e=>()=>reify(e).queryArc(getTime(),getTime())[0].value,strudelHydra=Object.freeze(Object.defineProperty({__proto__:null,H,clearHydra,initHydra},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(e,o){for(var l=65536,d=0;d<o.length;d+=2){if(l+=o[d],l>e)return!1;if(l+=o[d+1],l>=e)return!0}return!1}function isIdentifierStart(e,o){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifierStart.test(String.fromCharCode(e)):o===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)}function isIdentifierChar(e,o){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nonASCIIidentifier.test(String.fromCharCode(e)):o===!1?!1:isInAstralSet(e,astralIdentifierStartCodes)||isInAstralSet(e,astralIdentifierCodes)}var TokenType=function(o,l){l===void 0&&(l={}),this.label=o,this.keyword=l.keyword,this.beforeExpr=!!l.beforeExpr,this.startsExpr=!!l.startsExpr,this.isLoop=!!l.isLoop,this.isAssign=!!l.isAssign,this.prefix=!!l.prefix,this.postfix=!!l.postfix,this.binop=l.binop||null,this.updateContext=null};function binop(e,o){return new TokenType(e,{beforeExpr:!0,binop:o})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords={};function kw(e,o){return o===void 0&&(o={}),o.keyword=e,keywords[e]=new TokenType(e,o)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(e){return e===10||e===13||e===8232||e===8233}function nextLineBreak(e,o,l){l===void 0&&(l=e.length);for(var d=o;d<l;d++){var b=e.charCodeAt(d);if(isNewLine(b))return d<l-1&&b===13&&e.charCodeAt(d+1)===10?d+2:d+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||(function(e,o){return hasOwnProperty.call(e,o)}),isArray=Array.isArray||(function(e){return toString.call(e)==="[object Array]"}),regexpCache=Object.create(null);function wordsRegexp(e){return regexpCache[e]||(regexpCache[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function(o,l){this.line=o,this.column=l};Position.prototype.offset=function(o){return new Position(this.line,this.column+o)};var SourceLocation=function(o,l,d){this.start=l,this.end=d,o.sourceFile!==null&&(this.source=o.sourceFile)};function getLineInfo(e,o){for(var l=1,d=0;;){var b=nextLineBreak(e,d,o);if(b<0)return new Position(l,o-d);++l,d=b}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(e){var o={};for(var l in defaultOptions)o[l]=e&&hasOwn(e,l)?e[l]:defaultOptions[l];if(o.ecmaVersion==="latest"?o.ecmaVersion=1e8:o.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),o.ecmaVersion=11):o.ecmaVersion>=2015&&(o.ecmaVersion-=2009),o.allowReserved==null&&(o.allowReserved=o.ecmaVersion<5),(!e||e.allowHashBang==null)&&(o.allowHashBang=o.ecmaVersion>=14),isArray(o.onToken)){var d=o.onToken;o.onToken=function(b){return d.push(b)}}return isArray(o.onComment)&&(o.onComment=pushComment(o,o.onComment)),o}function pushComment(e,o){return function(l,d,b,S,M,E){var L={type:l?"Block":"Line",value:d,start:b,end:S};e.locations&&(L.loc=new SourceLocation(this,M,E)),e.ranges&&(L.range=[b,S]),o.push(L)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_CLASS_FIELD_INIT=512,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(e,o){return SCOPE_FUNCTION|(e?SCOPE_ASYNC:0)|(o?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser=function(o,l,d){this.options=o=getOptions(o),this.sourceFile=o.sourceFile,this.keywords=wordsRegexp(keywords$1[o.ecmaVersion>=6?6:o.sourceType==="module"?"5module":5]);var b="";o.allowReserved!==!0&&(b=reservedWords[o.ecmaVersion>=6?6:o.ecmaVersion===5?5:3],o.sourceType==="module"&&(b+=" await")),this.reservedWords=wordsRegexp(b);var S=(b?b+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(S),this.reservedWordsStrictBind=wordsRegexp(S+" "+reservedWords.strictBind),this.input=String(l),this.containsEsc=!1,d?(this.pos=d,this.lineStart=this.input.lastIndexOf(`
`,d-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=o.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&o.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser.prototype.parse=function(){var o=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(o)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0},prototypeAccessors.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var o=this.scopeStack[e],l=o.flags;if(l&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT))return!1;if(l&SCOPE_FUNCTION)return(l&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var e=this.currentThisScope(),o=e.flags;return(o&SCOPE_SUPER)>0||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var o=this.scopeStack[e],l=o.flags;if(l&(SCOPE_CLASS_STATIC_BLOCK|SCOPE_CLASS_FIELD_INIT)||l&SCOPE_FUNCTION&&!(l&SCOPE_ARROW))return!0}return!1},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser.extend=function(){for(var o=[],l=arguments.length;l--;)o[l]=arguments[l];for(var d=this,b=0;b<o.length;b++)d=o[b](d);return d},Parser.parse=function(o,l){return new this(l,o).parse()},Parser.parseExpressionAt=function(o,l,d){var b=new this(d,o,l);return b.nextToken(),b.parseExpression()},Parser.tokenizer=function(o,l){return new this(l,o)},Object.defineProperties(Parser.prototype,prototypeAccessors);var pp$9=Parser.prototype,literal=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;pp$9.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length;var o=literal.exec(this.input.slice(e));if(!o)return!1;if((o[1]||o[2])==="use strict"){skipWhiteSpace.lastIndex=e+o[0].length;var l=skipWhiteSpace.exec(this.input),d=l.index+l[0].length,b=this.input.charAt(d);return b===";"||b==="}"||lineBreak.test(l[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(b)||b==="!"&&this.input.charAt(d+1)==="=")}e+=o[0].length,skipWhiteSpace.lastIndex=e,e+=skipWhiteSpace.exec(this.input)[0].length,this.input[e]===";"&&e++}},pp$9.eat=function(e){return this.type===e?(this.next(),!0):!1},pp$9.isContextual=function(e){return this.type===types$1.name&&this.value===e&&!this.containsEsc},pp$9.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1},pp$9.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(e,o){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),o||this.next(),!0},pp$9.expect=function(e){this.eat(e)||this.unexpected()},pp$9.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var DestructuringErrors=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(e,o){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var l=o?e.parenthesizedAssign:e.parenthesizedBind;l>-1&&this.raiseRecoverable(l,o?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(e,o){if(!e)return!1;var l=e.shorthandAssign,d=e.doubleProto;if(!o)return l>=0||d>=0;l>=0&&this.raise(l,"Shorthand property assignments are valid only in destructuring patterns"),d>=0&&this.raiseRecoverable(d,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var pp$8=Parser.prototype;pp$8.parseTopLevel=function(e){var o=Object.create(null);for(e.body||(e.body=[]);this.type!==types$1.eof;){var l=this.parseStatement(null,!0,o);e.body.push(l)}if(this.inModule)for(var d=0,b=Object.keys(this.undefinedExports);d<b.length;d+=1){var S=b[d];this.raiseRecoverable(this.undefinedExports[S].start,"Export '"+S+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var o=skipWhiteSpace.exec(this.input),l=this.pos+o[0].length,d=this.input.charCodeAt(l);if(d===91||d===92)return!0;if(e)return!1;if(d===123||d>55295&&d<56320)return!0;if(isIdentifierStart(d,!0)){for(var b=l+1;isIdentifierChar(d=this.input.charCodeAt(b),!0);)++b;if(d===92||d>55295&&d<56320)return!0;var S=this.input.slice(l,b);if(!keywordRelationalOperator.test(S))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var e=skipWhiteSpace.exec(this.input),o=this.pos+e[0].length,l;return!lineBreak.test(this.input.slice(this.pos,o))&&this.input.slice(o,o+8)==="function"&&(o+8===this.input.length||!(isIdentifierChar(l=this.input.charCodeAt(o+8))||l>55295&&l<56320))},pp$8.isUsingKeyword=function(e,o){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;skipWhiteSpace.lastIndex=this.pos;var l=skipWhiteSpace.exec(this.input),d=this.pos+l[0].length;if(lineBreak.test(this.input.slice(this.pos,d)))return!1;if(e){var b=d+5,S;if(this.input.slice(d,b)!=="using"||b===this.input.length||isIdentifierChar(S=this.input.charCodeAt(b))||S>55295&&S<56320)return!1;skipWhiteSpace.lastIndex=b;var M=skipWhiteSpace.exec(this.input);if(M&&lineBreak.test(this.input.slice(b,b+M[0].length)))return!1}if(o){var E=d+2,L;if(this.input.slice(d,E)==="of"&&(E===this.input.length||!isIdentifierChar(L=this.input.charCodeAt(E))&&!(L>55295&&L<56320)))return!1}var R=this.input.charCodeAt(d);return isIdentifierStart(R,!0)||R===92},pp$8.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)},pp$8.isUsing=function(e){return this.isUsingKeyword(!1,e)},pp$8.parseStatement=function(e,o,l){var d=this.type,b=this.startNode(),S;switch(this.isLet(e)&&(d=types$1._var,S="let"),d){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(b,d.keyword);case types$1._debugger:return this.parseDebuggerStatement(b);case types$1._do:return this.parseDoStatement(b);case types$1._for:return this.parseForStatement(b);case types$1._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(b,!1,!e);case types$1._class:return e&&this.unexpected(),this.parseClass(b,!0);case types$1._if:return this.parseIfStatement(b);case types$1._return:return this.parseReturnStatement(b);case types$1._switch:return this.parseSwitchStatement(b);case types$1._throw:return this.parseThrowStatement(b);case types$1._try:return this.parseTryStatement(b);case types$1._const:case types$1._var:return S=S||this.value,e&&S!=="var"&&this.unexpected(),this.parseVarStatement(b,S);case types$1._while:return this.parseWhileStatement(b);case types$1._with:return this.parseWithStatement(b);case types$1.braceL:return this.parseBlock(!0,b);case types$1.semi:return this.parseEmptyStatement(b);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&d===types$1._import){skipWhiteSpace.lastIndex=this.pos;var M=skipWhiteSpace.exec(this.input),E=this.pos+M[0].length,L=this.input.charCodeAt(E);if(L===40||L===46)return this.parseExpressionStatement(b,this.parseExpression())}return this.options.allowImportExportEverywhere||(o||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),d===types$1._import?this.parseImport(b):this.parseExport(b,l);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(b,!0,!e);var R=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(R)return o&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),R==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(b,!1,R),this.semicolon(),this.finishNode(b,"VariableDeclaration");var Z=this.value,q=this.parseExpression();return d===types$1.name&&q.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(b,Z,q,e):this.parseExpressionStatement(b,q)}},pp$8.parseBreakContinueStatement=function(e,o){var l=o==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.label=null:this.type!==types$1.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var d=0;d<this.labels.length;++d){var b=this.labels[d];if((e.label==null||b.name===e.label.name)&&(b.kind!=null&&(l||b.kind==="loop")||e.label&&l))break}return d===this.labels.length&&this.raise(e.start,"Unsyntactic "+o),this.finishNode(e,l?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},pp$8.parseDoStatement=function(e){return this.next(),this.labels.push(loopLabel),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},pp$8.parseForStatement=function(e){this.next();var o=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return o>-1&&this.unexpected(o),this.parseFor(e,null);var l=this.isLet();if(this.type===types$1._var||this.type===types$1._const||l){var d=this.startNode(),b=l?"let":this.value;return this.next(),this.parseVar(d,!0,b),this.finishNode(d,"VariableDeclaration"),this.parseForAfterInit(e,d,o)}var S=this.isContextual("let"),M=!1,E=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(E){var L=this.startNode();return this.next(),E==="await using"&&this.next(),this.parseVar(L,!0,E),this.finishNode(L,"VariableDeclaration"),this.parseForAfterInit(e,L,o)}var R=this.containsEsc,Z=new DestructuringErrors,q=this.start,K=o>-1?this.parseExprSubscripts(Z,"await"):this.parseExpression(!0,Z);return this.type===types$1._in||(M=this.options.ecmaVersion>=6&&this.isContextual("of"))?(o>-1?(this.type===types$1._in&&this.unexpected(o),e.await=!0):M&&this.options.ecmaVersion>=8&&(K.start===q&&!R&&K.type==="Identifier"&&K.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),S&&M&&this.raise(K.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(K,!1,Z),this.checkLValPattern(K),this.parseForIn(e,K)):(this.checkExpressionErrors(Z,!0),o>-1&&this.unexpected(o),this.parseFor(e,K))},pp$8.parseForAfterInit=function(e,o,l){return(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&o.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?l>-1&&this.unexpected(l):e.await=l>-1),this.parseForIn(e,o)):(l>-1&&this.unexpected(l),this.parseFor(e,o))},pp$8.parseFunctionStatement=function(e,o,l){return this.next(),this.parseFunction(e,FUNC_STATEMENT|(l?0:FUNC_HANGING_STATEMENT),!1,o)},pp$8.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},pp$8.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},pp$8.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var o,l=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var d=this.type===types$1._case;o&&this.finishNode(o,"SwitchCase"),e.cases.push(o=this.startNode()),o.consequent=[],this.next(),d?o.test=this.parseExpression():(l&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),l=!0,o.test=null),this.expect(types$1.colon)}else o||this.unexpected(),o.consequent.push(this.parseStatement(null));return this.exitScope(),o&&this.finishNode(o,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},pp$8.parseThrowStatement=function(e){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),o=e.type==="Identifier";return this.enterScope(o?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(e,o?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR),e},pp$8.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===types$1._catch){var o=this.startNode();this.next(),this.eat(types$1.parenL)?o.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),o.param=null,this.enterScope(0)),o.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(o,"CatchClause")}return e.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},pp$8.parseVarStatement=function(e,o,l){return this.next(),this.parseVar(e,!1,o,l),this.semicolon(),this.finishNode(e,"VariableDeclaration")},pp$8.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(loopLabel),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},pp$8.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},pp$8.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},pp$8.parseLabeledStatement=function(e,o,l,d){for(var b=0,S=this.labels;b<S.length;b+=1){var M=S[b];M.name===o&&this.raise(l.start,"Label '"+o+"' is already declared")}for(var E=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,L=this.labels.length-1;L>=0;L--){var R=this.labels[L];if(R.statementStart===e.start)R.statementStart=this.start,R.kind=E;else break}return this.labels.push({name:o,kind:E,statementStart:this.start}),e.body=this.parseStatement(d?d.indexOf("label")===-1?d+"label":d:"label"),this.labels.pop(),e.label=l,this.finishNode(e,"LabeledStatement")},pp$8.parseExpressionStatement=function(e,o){return e.expression=o,this.semicolon(),this.finishNode(e,"ExpressionStatement")},pp$8.parseBlock=function(e,o,l){for(e===void 0&&(e=!0),o===void 0&&(o=this.startNode()),o.body=[],this.expect(types$1.braceL),e&&this.enterScope(0);this.type!==types$1.braceR;){var d=this.parseStatement(null);o.body.push(d)}return l&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(o,"BlockStatement")},pp$8.parseFor=function(e,o){return e.init=o,this.expect(types$1.semi),e.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),e.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},pp$8.parseForIn=function(e,o){var l=this.type===types$1._in;return this.next(),o.type==="VariableDeclaration"&&o.declarations[0].init!=null&&(!l||this.options.ecmaVersion<8||this.strict||o.kind!=="var"||o.declarations[0].id.type!=="Identifier")&&this.raise(o.start,(l?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=o,e.right=l?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,l?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(e,o,l,d){for(e.declarations=[],e.kind=l;;){var b=this.startNode();if(this.parseVarId(b,l),this.eat(types$1.eq)?b.init=this.parseMaybeAssign(o):!d&&l==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!d&&(l==="using"||l==="await using")&&this.options.ecmaVersion>=17&&this.type!==types$1._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+l+" declaration"):!d&&b.id.type!=="Identifier"&&!(o&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):b.init=null,e.declarations.push(this.finishNode(b,"VariableDeclarator")),!this.eat(types$1.comma))break}return e},pp$8.parseVarId=function(e,o){e.id=o==="using"||o==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,o==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(e,o,l,d,b){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!d)&&(this.type===types$1.star&&o&FUNC_HANGING_STATEMENT&&this.unexpected(),e.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(e.async=!!d),o&FUNC_STATEMENT&&(e.id=o&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),e.id&&!(o&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var S=this.yieldPos,M=this.awaitPos,E=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(e.async,e.generator)),o&FUNC_STATEMENT||(e.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,l,!1,b),this.yieldPos=S,this.awaitPos=M,this.awaitIdentPos=E,this.finishNode(e,o&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(e){this.expect(types$1.parenL),e.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(e,o){this.next();var l=this.strict;this.strict=!0,this.parseClassId(e,o),this.parseClassSuper(e);var d=this.enterClassBody(),b=this.startNode(),S=!1;for(b.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var M=this.parseClassElement(e.superClass!==null);M&&(b.body.push(M),M.type==="MethodDefinition"&&M.kind==="constructor"?(S&&this.raiseRecoverable(M.start,"Duplicate constructor in the same class"),S=!0):M.key&&M.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(d,M)&&this.raiseRecoverable(M.key.start,"Identifier '#"+M.key.name+"' has already been declared"))}return this.strict=l,this.next(),e.body=this.finishNode(b,"ClassBody"),this.exitClassBody(),this.finishNode(e,o?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(e){if(this.eat(types$1.semi))return null;var o=this.options.ecmaVersion,l=this.startNode(),d="",b=!1,S=!1,M="method",E=!1;if(this.eatContextual("static")){if(o>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(l),l;this.isClassElementNameStart()||this.type===types$1.star?E=!0:d="static"}if(l.static=E,!d&&o>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?S=!0:d="async"),!d&&(o>=9||!S)&&this.eat(types$1.star)&&(b=!0),!d&&!S&&!b){var L=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?M=L:d=L)}if(d?(l.computed=!1,l.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),l.key.name=d,this.finishNode(l.key,"Identifier")):this.parseClassElementName(l),o<13||this.type===types$1.parenL||M!=="method"||b||S){var R=!l.static&&checkKeyName(l,"constructor"),Z=R&&e;R&&M!=="method"&&this.raise(l.key.start,"Constructor can't have get/set modifier"),l.kind=R?"constructor":M,this.parseClassMethod(l,b,S,Z)}else this.parseClassField(l);return l},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(e){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)},pp$8.parseClassMethod=function(e,o,l,d){var b=e.key;e.kind==="constructor"?(o&&this.raise(b.start,"Constructor can't be a generator"),l&&this.raise(b.start,"Constructor can't be an async method")):e.static&&checkKeyName(e,"prototype")&&this.raise(b.start,"Classes may not have a static property named prototype");var S=e.value=this.parseMethod(o,l,d);return e.kind==="get"&&S.params.length!==0&&this.raiseRecoverable(S.start,"getter should have no params"),e.kind==="set"&&S.params.length!==1&&this.raiseRecoverable(S.start,"setter should have exactly one param"),e.kind==="set"&&S.params[0].type==="RestElement"&&this.raiseRecoverable(S.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")},pp$8.parseClassField=function(e){return checkKeyName(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&checkKeyName(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)?(this.enterScope(SCOPE_CLASS_FIELD_INIT|SCOPE_SUPER),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(e){e.body=[];var o=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var l=this.parseStatement(null);e.body.push(l)}return this.next(),this.exitScope(),this.labels=o,this.finishNode(e,"StaticBlock")},pp$8.parseClassId=function(e,o){this.type===types$1.name?(e.id=this.parseIdent(),o&&this.checkLValSimple(e.id,BIND_LEXICAL,!1)):(o===!0&&this.unexpected(),e.id=null)},pp$8.parseClassSuper=function(e){e.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared},pp$8.exitClassBody=function(){var e=this.privateNameStack.pop(),o=e.declared,l=e.used;if(this.options.checkPrivateFields)for(var d=this.privateNameStack.length,b=d===0?null:this.privateNameStack[d-1],S=0;S<l.length;++S){var M=l[S];hasOwn(o,M.name)||(b?b.used.push(M):this.raiseRecoverable(M.start,"Private field '#"+M.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(e,o){var l=o.key.name,d=e[l],b="true";return o.type==="MethodDefinition"&&(o.kind==="get"||o.kind==="set")&&(b=(o.static?"s":"i")+o.kind),d==="iget"&&b==="iset"||d==="iset"&&b==="iget"||d==="sget"&&b==="sset"||d==="sset"&&b==="sget"?(e[l]="true",!1):d?!0:(e[l]=b,!1)}function checkKeyName(e,o){var l=e.computed,d=e.key;return!l&&(d.type==="Identifier"&&d.name===o||d.type==="Literal"&&d.value===o)}pp$8.parseExportAllDeclaration=function(e,o){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(o,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")},pp$8.parseExport=function(e,o){if(this.next(),this.eat(types$1.star))return this.parseExportAllDeclaration(e,o);if(this.eat(types$1._default))return this.checkExport(o,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(o,e.declaration.declarations):this.checkExport(o,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(o),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var l=0,d=e.specifiers;l<d.length;l+=1){var b=d[l];this.checkUnreserved(b.local),this.checkLocalExport(b.local),b.local.type==="Literal"&&this.raise(b.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(e){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var e;if(this.type===types$1._function||(e=this.isAsyncFunction())){var o=this.startNode();return this.next(),e&&this.next(),this.parseFunction(o,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,e)}else if(this.type===types$1._class){var l=this.startNode();return this.parseClass(l,"nullableID")}else{var d=this.parseMaybeAssign();return this.semicolon(),d}},pp$8.checkExport=function(e,o,l){e&&(typeof o!="string"&&(o=o.type==="Identifier"?o.name:o.value),hasOwn(e,o)&&this.raiseRecoverable(l,"Duplicate export '"+o+"'"),e[o]=!0)},pp$8.checkPatternExport=function(e,o){var l=o.type;if(l==="Identifier")this.checkExport(e,o,o.start);else if(l==="ObjectPattern")for(var d=0,b=o.properties;d<b.length;d+=1){var S=b[d];this.checkPatternExport(e,S)}else if(l==="ArrayPattern")for(var M=0,E=o.elements;M<E.length;M+=1){var L=E[M];L&&this.checkPatternExport(e,L)}else l==="Property"?this.checkPatternExport(e,o.value):l==="AssignmentPattern"?this.checkPatternExport(e,o.left):l==="RestElement"&&this.checkPatternExport(e,o.argument)},pp$8.checkVariableExport=function(e,o){if(e)for(var l=0,d=o;l<d.length;l+=1){var b=d[l];this.checkPatternExport(e,b.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(e){var o=this.startNode();return o.local=this.parseModuleExportName(),o.exported=this.eatContextual("as")?this.parseModuleExportName():o.local,this.checkExport(e,o.exported,o.exported.start),this.finishNode(o,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(e){var o=[],l=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(l)l=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;o.push(this.parseExportSpecifier(e))}return o},pp$8.parseImport=function(e){return this.next(),this.type===types$1.string?(e.specifiers=empty$1,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,BIND_LEXICAL),this.finishNode(e,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var e=[],o=!0;if(this.type===types$1.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(types$1.comma)))return e;if(this.type===types$1.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;e.push(this.parseImportSpecifier())}return e},pp$8.parseWithClause=function(){var e=[];if(!this.eat(types$1._with))return e;this.expect(types$1.braceL);for(var o={},l=!0;!this.eat(types$1.braceR);){if(l)l=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var d=this.parseImportAttribute(),b=d.key.type==="Identifier"?d.key.name:d.key.value;hasOwn(o,b)&&this.raiseRecoverable(d.key.start,"Duplicate attribute key '"+b+"'"),o[b]=!0,e.push(d)}return e},pp$8.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(types$1.colon),this.type!==types$1.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var e=this.parseLiteral(this.value);return loneSurrogate.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(e){for(var o=0;o<e.length&&this.isDirectiveCandidate(e[o]);++o)e[o].directive=e[o].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pp$7=Parser.prototype;pp$7.toAssignable=function(e,o,l){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",l&&this.checkPatternErrors(l,!0);for(var d=0,b=e.properties;d<b.length;d+=1){var S=b[d];this.toAssignable(S,o),S.type==="RestElement"&&(S.argument.type==="ArrayPattern"||S.argument.type==="ObjectPattern")&&this.raise(S.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,o);break;case"ArrayExpression":e.type="ArrayPattern",l&&this.checkPatternErrors(l,!0),this.toAssignableList(e.elements,o);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,o),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,o);break;case"ParenthesizedExpression":this.toAssignable(e.expression,o,l);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!o)break;default:this.raise(e.start,"Assigning to rvalue")}else l&&this.checkPatternErrors(l,!0);return e},pp$7.toAssignableList=function(e,o){for(var l=e.length,d=0;d<l;d++){var b=e[d];b&&this.toAssignable(b,o)}if(l){var S=e[l-1];this.options.ecmaVersion===6&&o&&S&&S.type==="RestElement"&&S.argument.type!=="Identifier"&&this.unexpected(S.argument.start)}return e},pp$7.parseSpread=function(e){var o=this.startNode();return this.next(),o.argument=this.parseMaybeAssign(!1,e),this.finishNode(o,"SpreadElement")},pp$7.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(e,o,l,d){for(var b=[],S=!0;!this.eat(e);)if(S?S=!1:this.expect(types$1.comma),o&&this.type===types$1.comma)b.push(null);else{if(l&&this.afterTrailingComma(e))break;if(this.type===types$1.ellipsis){var M=this.parseRestBinding();this.parseBindingListItem(M),b.push(M),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else b.push(this.parseAssignableListItem(d))}return b},pp$7.parseAssignableListItem=function(e){var o=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(o),o},pp$7.parseBindingListItem=function(e){return e},pp$7.parseMaybeDefault=function(e,o,l){if(l=l||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return l;var d=this.startNodeAt(e,o);return d.left=l,d.right=this.parseMaybeAssign(),this.finishNode(d,"AssignmentPattern")},pp$7.checkLValSimple=function(e,o,l){o===void 0&&(o=BIND_NONE);var d=o!==BIND_NONE;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(d?"Binding ":"Assigning to ")+e.name+" in strict mode"),d&&(o===BIND_LEXICAL&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),l&&(hasOwn(l,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),l[e.name]=!0),o!==BIND_OUTSIDE&&this.declareName(e.name,o,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":d&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return d&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,o,l);default:this.raise(e.start,(d?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(e,o,l){switch(o===void 0&&(o=BIND_NONE),e.type){case"ObjectPattern":for(var d=0,b=e.properties;d<b.length;d+=1){var S=b[d];this.checkLValInnerPattern(S,o,l)}break;case"ArrayPattern":for(var M=0,E=e.elements;M<E.length;M+=1){var L=E[M];L&&this.checkLValInnerPattern(L,o,l)}break;default:this.checkLValSimple(e,o,l)}},pp$7.checkLValInnerPattern=function(e,o,l){switch(o===void 0&&(o=BIND_NONE),e.type){case"Property":this.checkLValInnerPattern(e.value,o,l);break;case"AssignmentPattern":this.checkLValPattern(e.left,o,l);break;case"RestElement":this.checkLValPattern(e.argument,o,l);break;default:this.checkLValPattern(e,o,l)}};var TokContext=function(o,l,d,b,S){this.token=o,this.isExpr=!!l,this.preserveSpace=!!d,this.override=b,this.generator=!!S},types={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser.prototype;pp$6.initialContext=function(){return[types.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(e){var o=this.curContext();return o===types.f_expr||o===types.f_stat?!0:e===types$1.colon&&(o===types.b_stat||o===types.b_expr)?!o.isExpr:e===types$1._return||e===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):e===types$1._else||e===types$1.semi||e===types$1.eof||e===types$1.parenR||e===types$1.arrow?!0:e===types$1.braceL?o===types.b_stat:e===types$1._var||e===types$1._const||e===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var o=this.context[e];if(o.token==="function")return o.generator}return!1},pp$6.updateContext=function(e){var o,l=this.type;l.keyword&&e===types$1.dot?this.exprAllowed=!1:(o=l.updateContext)?o.call(this,e):this.exprAllowed=l.beforeExpr},pp$6.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===types.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},types$1.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?types.b_stat:types.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(e){var o=e===types$1._if||e===types$1._for||e===types$1._with||e===types$1._while;this.context.push(o?types.p_stat:types.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(e){e.beforeExpr&&e!==types$1._else&&!(e===types$1.semi&&this.curContext()!==types.p_stat)&&!(e===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===types$1.colon||e===types$1.braceL)&&this.curContext()===types.b_stat)?this.context.push(types.f_expr):this.context.push(types.f_stat),this.exprAllowed=!1},types$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1.backQuote.updateContext=function(){this.curContext()===types.q_tmpl?this.context.pop():this.context.push(types.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(e){if(e===types$1._function){var o=this.context.length-1;this.context[o]===types.f_expr?this.context[o]=types.f_expr_gen:this.context[o]=types.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(e){var o=!1;this.options.ecmaVersion>=6&&e!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(o=!0),this.exprAllowed=o};var pp$5=Parser.prototype;pp$5.checkPropClash=function(e,o,l){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var d=e.key,b;switch(d.type){case"Identifier":b=d.name;break;case"Literal":b=String(d.value);break;default:return}var S=e.kind;if(this.options.ecmaVersion>=6){b==="__proto__"&&S==="init"&&(o.proto&&(l?l.doubleProto<0&&(l.doubleProto=d.start):this.raiseRecoverable(d.start,"Redefinition of __proto__ property")),o.proto=!0);return}b="$"+b;var M=o[b];if(M){var E;S==="init"?E=this.strict&&M.init||M.get||M.set:E=M.init||M[S],E&&this.raiseRecoverable(d.start,"Redefinition of property")}else M=o[b]={init:!1,get:!1,set:!1};M[S]=!0}},pp$5.parseExpression=function(e,o){var l=this.start,d=this.startLoc,b=this.parseMaybeAssign(e,o);if(this.type===types$1.comma){var S=this.startNodeAt(l,d);for(S.expressions=[b];this.eat(types$1.comma);)S.expressions.push(this.parseMaybeAssign(e,o));return this.finishNode(S,"SequenceExpression")}return b},pp$5.parseMaybeAssign=function(e,o,l){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var d=!1,b=-1,S=-1,M=-1;o?(b=o.parenthesizedAssign,S=o.trailingComma,M=o.doubleProto,o.parenthesizedAssign=o.trailingComma=-1):(o=new DestructuringErrors,d=!0);var E=this.start,L=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var R=this.parseMaybeConditional(e,o);if(l&&(R=l.call(this,R,E,L)),this.type.isAssign){var Z=this.startNodeAt(E,L);return Z.operator=this.value,this.type===types$1.eq&&(R=this.toAssignable(R,!1,o)),d||(o.parenthesizedAssign=o.trailingComma=o.doubleProto=-1),o.shorthandAssign>=R.start&&(o.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(R):this.checkLValSimple(R),Z.left=R,this.next(),Z.right=this.parseMaybeAssign(e),M>-1&&(o.doubleProto=M),this.finishNode(Z,"AssignmentExpression")}else d&&this.checkExpressionErrors(o,!0);return b>-1&&(o.parenthesizedAssign=b),S>-1&&(o.trailingComma=S),R},pp$5.parseMaybeConditional=function(e,o){var l=this.start,d=this.startLoc,b=this.parseExprOps(e,o);if(this.checkExpressionErrors(o))return b;if(this.eat(types$1.question)){var S=this.startNodeAt(l,d);return S.test=b,S.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),S.alternate=this.parseMaybeAssign(e),this.finishNode(S,"ConditionalExpression")}return b},pp$5.parseExprOps=function(e,o){var l=this.start,d=this.startLoc,b=this.parseMaybeUnary(o,!1,!1,e);return this.checkExpressionErrors(o)||b.start===l&&b.type==="ArrowFunctionExpression"?b:this.parseExprOp(b,l,d,-1,e)},pp$5.parseExprOp=function(e,o,l,d,b){var S=this.type.binop;if(S!=null&&(!b||this.type!==types$1._in)&&S>d){var M=this.type===types$1.logicalOR||this.type===types$1.logicalAND,E=this.type===types$1.coalesce;E&&(S=types$1.logicalAND.binop);var L=this.value;this.next();var R=this.start,Z=this.startLoc,q=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,b),R,Z,S,b),K=this.buildBinary(o,l,e,q,L,M||E);return(M&&this.type===types$1.coalesce||E&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(K,o,l,d,b)}return e},pp$5.buildBinary=function(e,o,l,d,b,S){d.type==="PrivateIdentifier"&&this.raise(d.start,"Private identifier can only be left side of binary expression");var M=this.startNodeAt(e,o);return M.left=l,M.operator=b,M.right=d,this.finishNode(M,S?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(e,o,l,d){var b=this.start,S=this.startLoc,M;if(this.isContextual("await")&&this.canAwait)M=this.parseAwait(d),o=!0;else if(this.type.prefix){var E=this.startNode(),L=this.type===types$1.incDec;E.operator=this.value,E.prefix=!0,this.next(),E.argument=this.parseMaybeUnary(null,!0,L,d),this.checkExpressionErrors(e,!0),L?this.checkLValSimple(E.argument):this.strict&&E.operator==="delete"&&isLocalVariableAccess(E.argument)?this.raiseRecoverable(E.start,"Deleting local variable in strict mode"):E.operator==="delete"&&isPrivateFieldAccess(E.argument)?this.raiseRecoverable(E.start,"Private fields can not be deleted"):o=!0,M=this.finishNode(E,L?"UpdateExpression":"UnaryExpression")}else if(!o&&this.type===types$1.privateId)(d||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),M=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(M=this.parseExprSubscripts(e,d),this.checkExpressionErrors(e))return M;for(;this.type.postfix&&!this.canInsertSemicolon();){var R=this.startNodeAt(b,S);R.operator=this.value,R.prefix=!1,R.argument=M,this.checkLValSimple(M),this.next(),M=this.finishNode(R,"UpdateExpression")}}if(!l&&this.eat(types$1.starstar))if(o)this.unexpected(this.lastTokStart);else return this.buildBinary(b,S,M,this.parseMaybeUnary(null,!1,!1,d),"**",!1);else return M};function isLocalVariableAccess(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&isLocalVariableAccess(e.expression)}function isPrivateFieldAccess(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&isPrivateFieldAccess(e.expression)||e.type==="ParenthesizedExpression"&&isPrivateFieldAccess(e.expression)}pp$5.parseExprSubscripts=function(e,o){var l=this.start,d=this.startLoc,b=this.parseExprAtom(e,o);if(b.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return b;var S=this.parseSubscripts(b,l,d,!1,o);return e&&S.type==="MemberExpression"&&(e.parenthesizedAssign>=S.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=S.start&&(e.parenthesizedBind=-1),e.trailingComma>=S.start&&(e.trailingComma=-1)),S},pp$5.parseSubscripts=function(e,o,l,d,b){for(var S=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,M=!1;;){var E=this.parseSubscript(e,o,l,d,S,M,b);if(E.optional&&(M=!0),E===e||E.type==="ArrowFunctionExpression"){if(M){var L=this.startNodeAt(o,l);L.expression=E,E=this.finishNode(L,"ChainExpression")}return E}e=E}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(e,o,l,d){return this.parseArrowExpression(this.startNodeAt(e,o),l,!0,d)},pp$5.parseSubscript=function(e,o,l,d,b,S,M){var E=this.options.ecmaVersion>=11,L=E&&this.eat(types$1.questionDot);d&&L&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var R=this.eat(types$1.bracketL);if(R||L&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var Z=this.startNodeAt(o,l);Z.object=e,R?(Z.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&e.type!=="Super"?Z.property=this.parsePrivateIdent():Z.property=this.parseIdent(this.options.allowReserved!=="never"),Z.computed=!!R,E&&(Z.optional=L),e=this.finishNode(Z,"MemberExpression")}else if(!d&&this.eat(types$1.parenL)){var q=new DestructuringErrors,K=this.yieldPos,U=this.awaitPos,se=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var re=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,q);if(b&&!L&&this.shouldParseAsyncArrow())return this.checkPatternErrors(q,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=K,this.awaitPos=U,this.awaitIdentPos=se,this.parseSubscriptAsyncArrow(o,l,re,M);this.checkExpressionErrors(q,!0),this.yieldPos=K||this.yieldPos,this.awaitPos=U||this.awaitPos,this.awaitIdentPos=se||this.awaitIdentPos;var ae=this.startNodeAt(o,l);ae.callee=e,ae.arguments=re,E&&(ae.optional=L),e=this.finishNode(ae,"CallExpression")}else if(this.type===types$1.backQuote){(L||S)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var de=this.startNodeAt(o,l);de.tag=e,de.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(de,"TaggedTemplateExpression")}return e},pp$5.parseExprAtom=function(e,o,l){this.type===types$1.slash&&this.readRegexp();var d,b=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),d=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(d.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(d,"Super");case types$1._this:return d=this.startNode(),this.next(),this.finishNode(d,"ThisExpression");case types$1.name:var S=this.start,M=this.startLoc,E=this.containsEsc,L=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!E&&L.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types.f_expr),this.parseFunction(this.startNodeAt(S,M),0,!1,!0,o);if(b&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(S,M),[L],!1,o);if(this.options.ecmaVersion>=8&&L.name==="async"&&this.type===types$1.name&&!E&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return L=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(S,M),[L],!0,o)}return L;case types$1.regexp:var R=this.value;return d=this.parseLiteral(R.value),d.regex={pattern:R.pattern,flags:R.flags},d;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return d=this.startNode(),d.value=this.type===types$1._null?null:this.type===types$1._true,d.raw=this.type.keyword,this.next(),this.finishNode(d,"Literal");case types$1.parenL:var Z=this.start,q=this.parseParenAndDistinguishExpression(b,o);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(q)&&(e.parenthesizedAssign=Z),e.parenthesizedBind<0&&(e.parenthesizedBind=Z)),q;case types$1.bracketL:return d=this.startNode(),this.next(),d.elements=this.parseExprList(types$1.bracketR,!0,!0,e),this.finishNode(d,"ArrayExpression");case types$1.braceL:return this.overrideContext(types.b_expr),this.parseObj(!1,e);case types$1._function:return d=this.startNode(),this.next(),this.parseFunction(d,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(l):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(e){var o=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1.parenL&&!e)return this.parseDynamicImport(o);if(this.type===types$1.dot){var l=this.startNodeAt(o.start,o.loc&&o.loc.start);return l.name="import",o.meta=this.finishNode(l,"Identifier"),this.parseImportMeta(o)}else this.unexpected()},pp$5.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(types$1.parenR)?e.options=null:(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(types$1.parenR)||(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)||this.unexpected())));else if(!this.eat(types$1.parenR)){var o=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(o,"Trailing comma is not allowed in import()"):this.unexpected(o)}return this.finishNode(e,"ImportExpression")},pp$5.parseImportMeta=function(e){this.next();var o=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),o&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")},pp$5.parseLiteral=function(e){var o=this.startNode();return o.value=e,o.raw=this.input.slice(this.start,this.end),o.raw.charCodeAt(o.raw.length-1)===110&&(o.bigint=o.value!=null?o.value.toString():o.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(o,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var e=this.parseExpression();return this.expect(types$1.parenR),e},pp$5.shouldParseArrow=function(e){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(e,o){var l=this.start,d=this.startLoc,b,S=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var M=this.start,E=this.startLoc,L=[],R=!0,Z=!1,q=new DestructuringErrors,K=this.yieldPos,U=this.awaitPos,se;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(R?R=!1:this.expect(types$1.comma),S&&this.afterTrailingComma(types$1.parenR,!0)){Z=!0;break}else if(this.type===types$1.ellipsis){se=this.start,L.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else L.push(this.parseMaybeAssign(!1,q,this.parseParenItem));var re=this.lastTokEnd,ae=this.lastTokEndLoc;if(this.expect(types$1.parenR),e&&this.shouldParseArrow(L)&&this.eat(types$1.arrow))return this.checkPatternErrors(q,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=K,this.awaitPos=U,this.parseParenArrowList(l,d,L,o);(!L.length||Z)&&this.unexpected(this.lastTokStart),se&&this.unexpected(se),this.checkExpressionErrors(q,!0),this.yieldPos=K||this.yieldPos,this.awaitPos=U||this.awaitPos,L.length>1?(b=this.startNodeAt(M,E),b.expressions=L,this.finishNodeAt(b,"SequenceExpression",re,ae)):b=L[0]}else b=this.parseParenExpression();if(this.options.preserveParens){var de=this.startNodeAt(l,d);return de.expression=b,this.finishNode(de,"ParenthesizedExpression")}else return b},pp$5.parseParenItem=function(e){return e},pp$5.parseParenArrowList=function(e,o,l,d){return this.parseArrowExpression(this.startNodeAt(e,o),l,!1,d)};var empty=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1.dot){var o=this.startNodeAt(e.start,e.loc&&e.loc.start);o.name="new",e.meta=this.finishNode(o,"Identifier"),this.next();var l=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),l&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var d=this.start,b=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),d,b,!0,!1),this.eat(types$1.parenL)?e.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):e.arguments=empty,this.finishNode(e,"NewExpression")},pp$5.parseTemplateElement=function(e){var o=e.isTagged,l=this.startNode();return this.type===types$1.invalidTemplate?(o||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),l.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):l.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),l.tail=this.type===types$1.backQuote,this.finishNode(l,"TemplateElement")},pp$5.parseTemplate=function(e){e===void 0&&(e={});var o=e.isTagged;o===void 0&&(o=!1);var l=this.startNode();this.next(),l.expressions=[];var d=this.parseTemplateElement({isTagged:o});for(l.quasis=[d];!d.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),l.expressions.push(this.parseExpression()),this.expect(types$1.braceR),l.quasis.push(d=this.parseTemplateElement({isTagged:o}));return this.next(),this.finishNode(l,"TemplateLiteral")},pp$5.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(e,o){var l=this.startNode(),d=!0,b={};for(l.properties=[],this.next();!this.eat(types$1.braceR);){if(d)d=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var S=this.parseProperty(e,o);e||this.checkPropClash(S,b,o),l.properties.push(S)}return this.finishNode(l,e?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(e,o){var l=this.startNode(),d,b,S,M;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return e?(l.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(l,"RestElement")):(l.argument=this.parseMaybeAssign(!1,o),this.type===types$1.comma&&o&&o.trailingComma<0&&(o.trailingComma=this.start),this.finishNode(l,"SpreadElement"));this.options.ecmaVersion>=6&&(l.method=!1,l.shorthand=!1,(e||o)&&(S=this.start,M=this.startLoc),e||(d=this.eat(types$1.star)));var E=this.containsEsc;return this.parsePropertyName(l),!e&&!E&&this.options.ecmaVersion>=8&&!d&&this.isAsyncProp(l)?(b=!0,d=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(l)):b=!1,this.parsePropertyValue(l,e,d,b,S,M,o,E),this.finishNode(l,"Property")},pp$5.parseGetterSetter=function(e){var o=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=o;var l=e.kind==="get"?0:1;if(e.value.params.length!==l){var d=e.value.start;e.kind==="get"?this.raiseRecoverable(d,"getter should have no params"):this.raiseRecoverable(d,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(e,o,l,d,b,S,M,E){(l||d)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon)?(e.value=o?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,M),e.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1.parenL?(o&&this.unexpected(),e.method=!0,e.value=this.parseMethod(l,d),e.kind="init"):!o&&!E&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq?((l||d)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((l||d)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=b),o?e.value=this.parseMaybeDefault(b,S,this.copyNode(e.key)):this.type===types$1.eq&&M?(M.shorthandAssign<0&&(M.shorthandAssign=this.start),e.value=this.parseMaybeDefault(b,S,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),e.key;e.computed=!1}return e.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},pp$5.parseMethod=function(e,o,l){var d=this.startNode(),b=this.yieldPos,S=this.awaitPos,M=this.awaitIdentPos;return this.initFunction(d),this.options.ecmaVersion>=6&&(d.generator=e),this.options.ecmaVersion>=8&&(d.async=!!o),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(o,d.generator)|SCOPE_SUPER|(l?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),d.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(d,!1,!0,!1),this.yieldPos=b,this.awaitPos=S,this.awaitIdentPos=M,this.finishNode(d,"FunctionExpression")},pp$5.parseArrowExpression=function(e,o,l,d){var b=this.yieldPos,S=this.awaitPos,M=this.awaitIdentPos;return this.enterScope(functionFlags(l,!1)|SCOPE_ARROW),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!l),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(o,!0),this.parseFunctionBody(e,!0,!1,d),this.yieldPos=b,this.awaitPos=S,this.awaitIdentPos=M,this.finishNode(e,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(e,o,l,d){var b=o&&this.type!==types$1.braceL,S=this.strict,M=!1;if(b)e.body=this.parseMaybeAssign(d),e.expression=!0,this.checkParams(e,!1);else{var E=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!S||E)&&(M=this.strictDirective(this.end),M&&E&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var L=this.labels;this.labels=[],M&&(this.strict=!0),this.checkParams(e,!S&&!M&&!o&&!l&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,BIND_OUTSIDE),e.body=this.parseBlock(!1,void 0,M&&!S),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=L}this.exitScope()},pp$5.isSimpleParamList=function(e){for(var o=0,l=e;o<l.length;o+=1){var d=l[o];if(d.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(e,o){for(var l=Object.create(null),d=0,b=e.params;d<b.length;d+=1){var S=b[d];this.checkLValInnerPattern(S,BIND_VAR,o?null:l)}},pp$5.parseExprList=function(e,o,l,d){for(var b=[],S=!0;!this.eat(e);){if(S)S=!1;else if(this.expect(types$1.comma),o&&this.afterTrailingComma(e))break;var M=void 0;l&&this.type===types$1.comma?M=null:this.type===types$1.ellipsis?(M=this.parseSpread(d),d&&this.type===types$1.comma&&d.trailingComma<0&&(d.trailingComma=this.start)):M=this.parseMaybeAssign(!1,d),b.push(M)}return b},pp$5.checkUnreserved=function(e){var o=e.start,l=e.end,d=e.name;if(this.inGenerator&&d==="yield"&&this.raiseRecoverable(o,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&d==="await"&&this.raiseRecoverable(o,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&SCOPE_VAR)&&d==="arguments"&&this.raiseRecoverable(o,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(d==="arguments"||d==="await")&&this.raise(o,"Cannot use "+d+" in class static initialization block"),this.keywords.test(d)&&this.raise(o,"Unexpected keyword '"+d+"'"),!(this.options.ecmaVersion<6&&this.input.slice(o,l).indexOf("\\")!==-1)){var b=this.strict?this.reservedWordsStrict:this.reservedWords;b.test(d)&&(!this.inAsync&&d==="await"&&this.raiseRecoverable(o,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(o,"The keyword '"+d+"' is reserved"))}},pp$5.parseIdent=function(e){var o=this.parseIdentNode();return this.next(!!e),this.finishNode(o,"Identifier"),e||(this.checkUnreserved(o),o.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=o.start)),o},pp$5.parseIdentNode=function(){var e=this.startNode();return this.type===types$1.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1.name):this.unexpected(),e},pp$5.parsePrivateIdent=function(){var e=this.startNode();return this.type===types$1.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e},pp$5.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var o=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(o.delegate=!1,o.argument=null):(o.delegate=this.eat(types$1.star),o.argument=this.parseMaybeAssign(e)),this.finishNode(o,"YieldExpression")},pp$5.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var o=this.startNode();return this.next(),o.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(o,"AwaitExpression")};var pp$4=Parser.prototype;pp$4.raise=function(e,o){var l=getLineInfo(this.input,e);o+=" ("+l.line+":"+l.column+")",this.sourceFile&&(o+=" in "+this.sourceFile);var d=new SyntaxError(o);throw d.pos=e,d.loc=l,d.raisedAt=this.pos,d},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser.prototype,Scope=function(o){this.flags=o,this.var=[],this.lexical=[],this.functions=[]};pp$3.enterScope=function(e){this.scopeStack.push(new Scope(e))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(e){return e.flags&SCOPE_FUNCTION||!this.inModule&&e.flags&SCOPE_TOP},pp$3.declareName=function(e,o,l){var d=!1;if(o===BIND_LEXICAL){var b=this.currentScope();d=b.lexical.indexOf(e)>-1||b.functions.indexOf(e)>-1||b.var.indexOf(e)>-1,b.lexical.push(e),this.inModule&&b.flags&SCOPE_TOP&&delete this.undefinedExports[e]}else if(o===BIND_SIMPLE_CATCH){var S=this.currentScope();S.lexical.push(e)}else if(o===BIND_FUNCTION){var M=this.currentScope();this.treatFunctionsAsVar?d=M.lexical.indexOf(e)>-1:d=M.lexical.indexOf(e)>-1||M.var.indexOf(e)>-1,M.functions.push(e)}else for(var E=this.scopeStack.length-1;E>=0;--E){var L=this.scopeStack[E];if(L.lexical.indexOf(e)>-1&&!(L.flags&SCOPE_SIMPLE_CATCH&&L.lexical[0]===e)||!this.treatFunctionsAsVarInScope(L)&&L.functions.indexOf(e)>-1){d=!0;break}if(L.var.push(e),this.inModule&&L.flags&SCOPE_TOP&&delete this.undefinedExports[e],L.flags&SCOPE_VAR)break}d&&this.raiseRecoverable(l,"Identifier '"+e+"' has already been declared")},pp$3.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var o=this.scopeStack[e];if(o.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK))return o}},pp$3.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var o=this.scopeStack[e];if(o.flags&(SCOPE_VAR|SCOPE_CLASS_FIELD_INIT|SCOPE_CLASS_STATIC_BLOCK)&&!(o.flags&SCOPE_ARROW))return o}};var Node=function(o,l,d){this.type="",this.start=l,this.end=0,o.options.locations&&(this.loc=new SourceLocation(o,d)),o.options.directSourceFile&&(this.sourceFile=o.options.directSourceFile),o.options.ranges&&(this.range=[l,0])},pp$2=Parser.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(e,o){return new Node(this,e,o)};function finishNodeAt(e,o,l,d){return e.type=o,e.end=l,this.options.locations&&(e.loc.end=d),this.options.ranges&&(e.range[1]=l),e}pp$2.finishNode=function(e,o){return finishNodeAt.call(this,e,o,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(e,o,l,d){return finishNodeAt.call(this,e,o,l,d)},pp$2.copyNode=function(e){var o=new Node(this,e.start,this.startLoc);for(var l in e)o[l]=e[l];return o};var scriptValuesAddedInUnicode="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" "+scriptValuesAddedInUnicode,unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(e){var o=data[e]={binary:wordsRegexp(unicodeBinaryProperties[e]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[e]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[e])}};o.nonBinary.Script_Extensions=o.nonBinary.Script,o.nonBinary.gc=o.nonBinary.General_Category,o.nonBinary.sc=o.nonBinary.Script,o.nonBinary.scx=o.nonBinary.Script_Extensions}for(var i=0,list=[9,10,11,12,13,14];i<list.length;i+=1){var ecmaVersion=list[i];buildUnicodeData(ecmaVersion)}var pp$1=Parser.prototype,BranchID=function(o,l){this.parent=o,this.base=l||this};BranchID.prototype.separatedFrom=function(o){for(var l=this;l;l=l.parent)for(var d=o;d;d=d.parent)if(l.base===d.base&&l!==d)return!0;return!1},BranchID.prototype.sibling=function(){return new BranchID(this.parent,this.base)};var RegExpValidationState=function(o){this.parser=o,this.validFlags="gim"+(o.options.ecmaVersion>=6?"uy":"")+(o.options.ecmaVersion>=9?"s":"")+(o.options.ecmaVersion>=13?"d":"")+(o.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[o.options.ecmaVersion>=14?14:o.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};RegExpValidationState.prototype.reset=function(o,l,d){var b=d.indexOf("v")!==-1,S=d.indexOf("u")!==-1;this.start=o|0,this.source=l+"",this.flags=d,b&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=S&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=S&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function(o){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+o)},RegExpValidationState.prototype.at=function(o,l){l===void 0&&(l=!1);var d=this.source,b=d.length;if(o>=b)return-1;var S=d.charCodeAt(o);if(!(l||this.switchU)||S<=55295||S>=57344||o+1>=b)return S;var M=d.charCodeAt(o+1);return M>=56320&&M<=57343?(S<<10)+M-56613888:S},RegExpValidationState.prototype.nextIndex=function(o,l){l===void 0&&(l=!1);var d=this.source,b=d.length;if(o>=b)return b;var S=d.charCodeAt(o),M;return!(l||this.switchU)||S<=55295||S>=57344||o+1>=b||(M=d.charCodeAt(o+1))<56320||M>57343?o+1:o+2},RegExpValidationState.prototype.current=function(o){return o===void 0&&(o=!1),this.at(this.pos,o)},RegExpValidationState.prototype.lookahead=function(o){return o===void 0&&(o=!1),this.at(this.nextIndex(this.pos,o),o)},RegExpValidationState.prototype.advance=function(o){o===void 0&&(o=!1),this.pos=this.nextIndex(this.pos,o)},RegExpValidationState.prototype.eat=function(o,l){return l===void 0&&(l=!1),this.current(l)===o?(this.advance(l),!0):!1},RegExpValidationState.prototype.eatChars=function(o,l){l===void 0&&(l=!1);for(var d=this.pos,b=0,S=o;b<S.length;b+=1){var M=S[b],E=this.at(d,l);if(E===-1||E!==M)return!1;d=this.nextIndex(d,l)}return this.pos=d,!0},pp$1.validateRegExpFlags=function(e){for(var o=e.validFlags,l=e.flags,d=!1,b=!1,S=0;S<l.length;S++){var M=l.charAt(S);o.indexOf(M)===-1&&this.raise(e.start,"Invalid regular expression flag"),l.indexOf(M,S+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),M==="u"&&(d=!0),M==="v"&&(b=!0)}this.options.ecmaVersion>=15&&d&&b&&this.raise(e.start,"Invalid regular expression flag")};function hasProp(e){for(var o in e)return!0;return!1}pp$1.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&hasProp(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))},pp$1.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var o=0,l=e.backReferenceNames;o<l.length;o+=1){var d=l[o];e.groupNames[d]||e.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(e){var o=this.options.ecmaVersion>=16;for(o&&(e.branchID=new BranchID(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)o&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);o&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},pp$1.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1},pp$1.regexp_eatAssertion=function(e){var o=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=o}if(e.eat(40)&&e.eat(63)){var l=!1;if(this.options.ecmaVersion>=9&&(l=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!l,!0}return e.pos=o,!1},pp$1.regexp_eatQuantifier=function(e,o){return o===void 0&&(o=!1),this.regexp_eatQuantifierPrefix(e,o)?(e.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(e,o){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,o)},pp$1.regexp_eatBracedQuantifier=function(e,o){var l=e.pos;if(e.eat(123)){var d=0,b=-1;if(this.regexp_eatDecimalDigits(e)&&(d=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(b=e.lastIntValue),e.eat(125)))return b!==-1&&b<d&&!o&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!o&&e.raise("Incomplete quantifier"),e.pos=l}return!1},pp$1.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},pp$1.regexp_eatReverseSolidusAtomEscape=function(e){var o=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=o}return!1},pp$1.regexp_eatUncapturingGroup=function(e){var o=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var l=this.regexp_eatModifiers(e),d=e.eat(45);if(l||d){for(var b=0;b<l.length;b++){var S=l.charAt(b);l.indexOf(S,b+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(d){var M=this.regexp_eatModifiers(e);!l&&!M&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var E=0;E<M.length;E++){var L=M.charAt(E);(M.indexOf(L,E+1)>-1||l.indexOf(L)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=o}return!1},pp$1.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},pp$1.regexp_eatModifiers=function(e){for(var o="",l=0;(l=e.current())!==-1&&isRegularExpressionModifier(l);)o+=codePointToString(l),e.advance();return o};function isRegularExpressionModifier(e){return e===105||e===109||e===115}pp$1.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},pp$1.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(e){var o=e.current();return isSyntaxCharacter(o)?(e.lastIntValue=o,e.advance(),!0):!1};function isSyntaxCharacter(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}pp$1.regexp_eatPatternCharacters=function(e){for(var o=e.pos,l=0;(l=e.current())!==-1&&!isSyntaxCharacter(l);)e.advance();return e.pos!==o},pp$1.regexp_eatExtendedPatternCharacter=function(e){var o=e.current();return o!==-1&&o!==36&&!(o>=40&&o<=43)&&o!==46&&o!==63&&o!==91&&o!==94&&o!==124?(e.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var o=this.options.ecmaVersion>=16,l=e.groupNames[e.lastStringValue];if(l)if(o)for(var d=0,b=l;d<b.length;d+=1){var S=b[d];S.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");o?(l||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}},pp$1.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString(e.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(e){var o=e.pos,l=this.options.ecmaVersion>=11,d=e.current(l);return e.advance(l),d===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,l)&&(d=e.lastIntValue),isRegExpIdentifierStart(d)?(e.lastIntValue=d,!0):(e.pos=o,!1)};function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||e===36||e===95}pp$1.regexp_eatRegExpIdentifierPart=function(e){var o=e.pos,l=this.options.ecmaVersion>=11,d=e.current(l);return e.advance(l),d===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,l)&&(d=e.lastIntValue),isRegExpIdentifierPart(d)?(e.lastIntValue=d,!0):(e.pos=o,!1)};function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||e===36||e===95||e===8204||e===8205}pp$1.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(e){var o=e.pos;if(this.regexp_eatDecimalEscape(e)){var l=e.lastIntValue;if(e.switchU)return l>e.maxBackReference&&(e.maxBackReference=l),!0;if(l<=e.numCapturingParens)return!0;e.pos=o}return!1},pp$1.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},pp$1.regexp_eatCControlLetter=function(e){var o=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=o}return!1},pp$1.regexp_eatZero=function(e){return e.current()===48&&!isDecimalDigit(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(e){var o=e.current();return o===116?(e.lastIntValue=9,e.advance(),!0):o===110?(e.lastIntValue=10,e.advance(),!0):o===118?(e.lastIntValue=11,e.advance(),!0):o===102?(e.lastIntValue=12,e.advance(),!0):o===114?(e.lastIntValue=13,e.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(e){var o=e.current();return isControlLetter(o)?(e.lastIntValue=o%32,e.advance(),!0):!1};function isControlLetter(e){return e>=65&&e<=90||e>=97&&e<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(e,o){o===void 0&&(o=!1);var l=e.pos,d=o||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var b=e.lastIntValue;if(d&&b>=55296&&b<=56319){var S=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var M=e.lastIntValue;if(M>=56320&&M<=57343)return e.lastIntValue=(b-55296)*1024+(M-56320)+65536,!0}e.pos=S,e.lastIntValue=b}return!0}if(d&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;d&&e.raise("Invalid unicode escape"),e.pos=l}return!1};function isValidUnicode(e){return e>=0&&e<=1114111}pp$1.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var o=e.current();return o!==99&&(!e.switchN||o!==107)?(e.lastIntValue=o,e.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var o=e.current();if(o>=49&&o<=57){do e.lastIntValue=10*e.lastIntValue+(o-48),e.advance();while((o=e.current())>=48&&o<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(e){var o=e.current();if(isCharacterClassEscape(o))return e.lastIntValue=-1,e.advance(),CharSetOk;var l=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((l=o===80)||o===112)){e.lastIntValue=-1,e.advance();var d;if(e.eat(123)&&(d=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return l&&d===CharSetString&&e.raise("Invalid property name"),d;e.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(e){return e===100||e===68||e===115||e===83||e===119||e===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(e){var o=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var l=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var d=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,l,d),CharSetOk}}if(e.pos=o,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var b=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,b)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(e,o,l){hasOwn(e.unicodeProperties.nonBinary,o)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[o].test(l)||e.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(e,o){if(e.unicodeProperties.binary.test(o))return CharSetOk;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(o))return CharSetString;e.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(e){var o=0;for(e.lastStringValue="";isUnicodePropertyNameCharacter(o=e.current());)e.lastStringValue+=codePointToString(o),e.advance();return e.lastStringValue!==""};function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||e===95}pp$1.regexp_eatUnicodePropertyValue=function(e){var o=0;for(e.lastStringValue="";isUnicodePropertyValueCharacter(o=e.current());)e.lastStringValue+=codePointToString(o),e.advance();return e.lastStringValue!==""};function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},pp$1.regexp_eatCharacterClass=function(e){if(e.eat(91)){var o=e.eat(94),l=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),o&&l===CharSetString&&e.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(e){return e.current()===93?CharSetOk:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var o=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var l=e.lastIntValue;e.switchU&&(o===-1||l===-1)&&e.raise("Invalid character class"),o!==-1&&l!==-1&&o>l&&e.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(e){var o=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var l=e.current();(l===99||isOctalDigit(l))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=o}var d=e.current();return d!==93?(e.lastIntValue=d,e.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(e){var o=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=o}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},pp$1.regexp_classSetExpression=function(e){var o=CharSetOk,l;if(!this.regexp_eatClassSetRange(e))if(l=this.regexp_eatClassSetOperand(e)){l===CharSetString&&(o=CharSetString);for(var d=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(l=this.regexp_eatClassSetOperand(e))){l!==CharSetString&&(o=CharSetOk);continue}e.raise("Invalid character in character class")}if(d!==e.pos)return o;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(d!==e.pos)return o}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(l=this.regexp_eatClassSetOperand(e),!l)return o;l===CharSetString&&(o=CharSetString)}},pp$1.regexp_eatClassSetRange=function(e){var o=e.pos;if(this.regexp_eatClassSetCharacter(e)){var l=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var d=e.lastIntValue;return l!==-1&&d!==-1&&l>d&&e.raise("Range out of order in character class"),!0}e.pos=o}return!1},pp$1.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?CharSetOk:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)},pp$1.regexp_eatNestedClass=function(e){var o=e.pos;if(e.eat(91)){var l=e.eat(94),d=this.regexp_classContents(e);if(e.eat(93))return l&&d===CharSetString&&e.raise("Negated character class may contain strings"),d;e.pos=o}if(e.eat(92)){var b=this.regexp_eatCharacterClassEscape(e);if(b)return b;e.pos=o}return null},pp$1.regexp_eatClassStringDisjunction=function(e){var o=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var l=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return l}else e.raise("Invalid escape");e.pos=o}return null},pp$1.regexp_classStringDisjunctionContents=function(e){for(var o=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===CharSetString&&(o=CharSetString);return o},pp$1.regexp_classString=function(e){for(var o=0;this.regexp_eatClassSetCharacter(e);)o++;return o===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(e){var o=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=o,!1);var l=e.current();return l<0||l===e.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(l)||isClassSetSyntaxCharacter(l)?!1:(e.advance(),e.lastIntValue=l,!0)};function isClassSetReservedDoublePunctuatorCharacter(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function isClassSetSyntaxCharacter(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(e){var o=e.current();return isClassSetReservedPunctuator(o)?(e.lastIntValue=o,e.advance(),!0):!1};function isClassSetReservedPunctuator(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}pp$1.regexp_eatClassControlLetter=function(e){var o=e.current();return isDecimalDigit(o)||o===95?(e.lastIntValue=o%32,e.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(e){var o=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=o}return!1},pp$1.regexp_eatDecimalDigits=function(e){var o=e.pos,l=0;for(e.lastIntValue=0;isDecimalDigit(l=e.current());)e.lastIntValue=10*e.lastIntValue+(l-48),e.advance();return e.pos!==o};function isDecimalDigit(e){return e>=48&&e<=57}pp$1.regexp_eatHexDigits=function(e){var o=e.pos,l=0;for(e.lastIntValue=0;isHexDigit(l=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(l),e.advance();return e.pos!==o};function isHexDigit(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hexToInt(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var o=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var l=e.lastIntValue;o<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=o*64+l*8+e.lastIntValue:e.lastIntValue=o*8+l}else e.lastIntValue=o;return!0}return!1},pp$1.regexp_eatOctalDigit=function(e){var o=e.current();return isOctalDigit(o)?(e.lastIntValue=o-48,e.advance(),!0):(e.lastIntValue=0,!1)};function isOctalDigit(e){return e>=48&&e<=55}pp$1.regexp_eatFixedHexDigits=function(e,o){var l=e.pos;e.lastIntValue=0;for(var d=0;d<o;++d){var b=e.current();if(!isHexDigit(b))return e.pos=l,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(b),e.advance()}return!0};var Token=function(o){this.type=o.type,this.value=o.value,this.start=o.start,this.end=o.end,o.options.locations&&(this.loc=new SourceLocation(o,o.startLoc,o.endLoc)),o.options.ranges&&(this.range=[o.start,o.end])},pp=Parser.prototype;pp.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var e=this;return{next:function(){var o=e.getToken();return{done:o.type===types$1.eof,value:o}}}}),pp.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(e){return isIdentifierStart(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)},pp.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var o=this.input.charCodeAt(this.pos+1);return o<=56319||o>=57344?e:(e<<10)+o-56613888},pp.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),o=this.pos,l=this.input.indexOf("*/",this.pos+=2);if(l===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=l+2,this.options.locations)for(var d=void 0,b=o;(d=nextLineBreak(this.input,b,this.pos))>-1;)++this.curLine,b=this.lineStart=d;this.options.onComment&&this.options.onComment(!0,this.input.slice(o+2,l),o,this.pos,e,this.curPosition())},pp.skipLineComment=function(e){for(var o=this.pos,l=this.options.onComment&&this.curPosition(),d=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(d);)d=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(o+e,this.pos),o,this.pos,l,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&nonASCIIwhitespace.test(String.fromCharCode(e)))++this.pos;else break e}}},pp.finishToken=function(e,o){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var l=this.type;this.type=e,this.value=o,this.updateContext(l)},pp.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var o=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&o===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(e){var o=this.input.charCodeAt(this.pos+1),l=1,d=e===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&e===42&&o===42&&(++l,d=types$1.starstar,o=this.input.charCodeAt(this.pos+2)),o===61?this.finishOp(types$1.assign,l+1):this.finishOp(d,l)},pp.readToken_pipe_amp=function(e){var o=this.input.charCodeAt(this.pos+1);if(o===e){if(this.options.ecmaVersion>=12){var l=this.input.charCodeAt(this.pos+2);if(l===61)return this.finishOp(types$1.assign,3)}return this.finishOp(e===124?types$1.logicalOR:types$1.logicalAND,2)}return o===61?this.finishOp(types$1.assign,2):this.finishOp(e===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(e){var o=this.input.charCodeAt(this.pos+1);return o===e?o===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):o===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(e){var o=this.input.charCodeAt(this.pos+1),l=1;return o===e?(l=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+l)===61?this.finishOp(types$1.assign,l+1):this.finishOp(types$1.bitShift,l)):o===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(o===61&&(l=2),this.finishOp(types$1.relational,l))},pp.readToken_eq_excl=function(e){var o=this.input.charCodeAt(this.pos+1);return o===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&o===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(e===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var o=this.input.charCodeAt(this.pos+1);if(o===46){var l=this.input.charCodeAt(this.pos+2);if(l<48||l>57)return this.finishOp(types$1.questionDot,2)}if(o===63){if(e>=12){var d=this.input.charCodeAt(this.pos+2);if(d===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var e=this.options.ecmaVersion,o=35;if(e>=13&&(++this.pos,o=this.fullCharCodeAtPos(),isIdentifierStart(o,!0)||o===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(o)+"'")},pp.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var o=this.input.charCodeAt(this.pos+1);if(o===120||o===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(o===111||o===79)return this.readRadixNumber(8);if(o===98||o===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(e)+"'")},pp.finishOp=function(e,o){var l=this.input.slice(this.pos,this.pos+o);return this.pos+=o,this.finishToken(e,l)},pp.readRegexp=function(){for(var e,o,l=this.pos;;){this.pos>=this.input.length&&this.raise(l,"Unterminated regular expression");var d=this.input.charAt(this.pos);if(lineBreak.test(d)&&this.raise(l,"Unterminated regular expression"),e)e=!1;else{if(d==="[")o=!0;else if(d==="]"&&o)o=!1;else if(d==="/"&&!o)break;e=d==="\\"}++this.pos}var b=this.input.slice(l,this.pos);++this.pos;var S=this.pos,M=this.readWord1();this.containsEsc&&this.unexpected(S);var E=this.regexpState||(this.regexpState=new RegExpValidationState(this));E.reset(l,b,M),this.validateRegExpFlags(E),this.validateRegExpPattern(E);var L=null;try{L=new RegExp(b,M)}catch{}return this.finishToken(types$1.regexp,{pattern:b,flags:M,value:L})},pp.readInt=function(e,o,l){for(var d=this.options.ecmaVersion>=12&&o===void 0,b=l&&this.input.charCodeAt(this.pos)===48,S=this.pos,M=0,E=0,L=0,R=o??1/0;L<R;++L,++this.pos){var Z=this.input.charCodeAt(this.pos),q=void 0;if(d&&Z===95){b&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),E===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),L===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),E=Z;continue}if(Z>=97?q=Z-97+10:Z>=65?q=Z-65+10:Z>=48&&Z<=57?q=Z-48:q=1/0,q>=e)break;E=Z,M=M*e+q}return d&&E===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===S||o!=null&&this.pos-S!==o?null:M};function stringToNumber(e,o){return o?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function stringToBigInt(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}pp.readRadixNumber=function(e){var o=this.pos;this.pos+=2;var l=this.readInt(e);return l==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(l=stringToBigInt(this.input.slice(o,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,l)},pp.readNumber=function(e){var o=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(o,"Invalid number");var l=this.pos-o>=2&&this.input.charCodeAt(o)===48;l&&this.strict&&this.raise(o,"Invalid number");var d=this.input.charCodeAt(this.pos);if(!l&&!e&&this.options.ecmaVersion>=11&&d===110){var b=stringToBigInt(this.input.slice(o,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,b)}l&&/[89]/.test(this.input.slice(o,this.pos))&&(l=!1),d===46&&!l&&(++this.pos,this.readInt(10),d=this.input.charCodeAt(this.pos)),(d===69||d===101)&&!l&&(d=this.input.charCodeAt(++this.pos),(d===43||d===45)&&++this.pos,this.readInt(10)===null&&this.raise(o,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var S=stringToNumber(this.input.slice(o,this.pos),l);return this.finishToken(types$1.num,S)},pp.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),o;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var l=++this.pos;o=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,o>1114111&&this.invalidStringToken(l,"Code point out of bounds")}else o=this.readHexChar(4);return o},pp.readString=function(e){for(var o="",l=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var d=this.input.charCodeAt(this.pos);if(d===e)break;d===92?(o+=this.input.slice(l,this.pos),o+=this.readEscapedChar(!1),l=this.pos):d===8232||d===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(d)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return o+=this.input.slice(l,this.pos++),this.finishToken(types$1.string,o)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},pp.invalidStringToken=function(e,o){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(e,o)},pp.readTmplToken=function(){for(var e="",o=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var l=this.input.charCodeAt(this.pos);if(l===96||l===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?l===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(e+=this.input.slice(o,this.pos),this.finishToken(types$1.template,e));if(l===92)e+=this.input.slice(o,this.pos),e+=this.readEscapedChar(!0),o=this.pos;else if(isNewLine(l)){switch(e+=this.input.slice(o,this.pos),++this.pos,l){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(l);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),o=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(e){var o=this.input.charCodeAt(++this.pos);switch(++this.pos,o){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var l=this.pos-1;this.invalidStringToken(l,"Invalid escape sequence in template string")}default:if(o>=48&&o<=55){var d=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],b=parseInt(d,8);return b>255&&(d=d.slice(0,-1),b=parseInt(d,8)),this.pos+=d.length-1,o=this.input.charCodeAt(this.pos),(d!=="0"||o===56||o===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-d.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(b)}return isNewLine(o)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(o)}},pp.readHexChar=function(e){var o=this.pos,l=this.readInt(16,e);return l===null&&this.invalidStringToken(o,"Bad character escape sequence"),l},pp.readWord1=function(){this.containsEsc=!1;for(var e="",o=!0,l=this.pos,d=this.options.ecmaVersion>=6;this.pos<this.input.length;){var b=this.fullCharCodeAtPos();if(isIdentifierChar(b,d))this.pos+=b<=65535?1:2;else if(b===92){this.containsEsc=!0,e+=this.input.slice(l,this.pos);var S=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var M=this.readCodePoint();(o?isIdentifierStart:isIdentifierChar)(M,d)||this.invalidStringToken(S,"Invalid Unicode escape"),e+=codePointToString(M),l=this.pos}else break;o=!1}return e+this.input.slice(l,this.pos)},pp.readWord=function(){var e=this.readWord1(),o=types$1.name;return this.keywords.test(e)&&(o=keywords[e]),this.finishToken(o,e)};var version$1="8.15.0";Parser.acorn={Parser,version:version$1,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords,TokContext,tokContexts:types,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse(e,o){return Parser.parse(e,o)}var escodegen$1={},estraverse={},hasRequiredEstraverse;function requireEstraverse(){return hasRequiredEstraverse||(hasRequiredEstraverse=1,(function(e){(function o(l){var d,b,S,M,E,L;function R(_e){var Ce={},We,He;for(We in _e)_e.hasOwnProperty(We)&&(He=_e[We],typeof He=="object"&&He!==null?Ce[We]=R(He):Ce[We]=He);return Ce}function Z(_e,Ce){var We,He,Mt,ut;for(He=_e.length,Mt=0;He;)We=He>>>1,ut=Mt+We,Ce(_e[ut])?He=We:(Mt=ut+1,He-=We+1);return Mt}d={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},S={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},M={},E={},L={},b={Break:M,Skip:E,Remove:L};function q(_e,Ce){this.parent=_e,this.key=Ce}q.prototype.replace=function(Ce){this.parent[this.key]=Ce},q.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function K(_e,Ce,We,He){this.node=_e,this.path=Ce,this.wrap=We,this.ref=He}function U(){}U.prototype.path=function(){var Ce,We,He,Mt,ut,Nt;function St(xt,$t){if(Array.isArray($t))for(He=0,Mt=$t.length;He<Mt;++He)xt.push($t[He]);else xt.push($t)}if(!this.__current.path)return null;for(ut=[],Ce=2,We=this.__leavelist.length;Ce<We;++Ce)Nt=this.__leavelist[Ce],St(ut,Nt.path);return St(ut,this.__current.path),ut},U.prototype.type=function(){var _e=this.current();return _e.type||this.__current.wrap},U.prototype.parents=function(){var Ce,We,He;for(He=[],Ce=1,We=this.__leavelist.length;Ce<We;++Ce)He.push(this.__leavelist[Ce].node);return He},U.prototype.current=function(){return this.__current.node},U.prototype.__execute=function(Ce,We){var He,Mt;return Mt=void 0,He=this.__current,this.__current=We,this.__state=null,Ce&&(Mt=Ce.call(this,We.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=He,Mt},U.prototype.notify=function(Ce){this.__state=Ce},U.prototype.skip=function(){this.notify(E)},U.prototype.break=function(){this.notify(M)},U.prototype.remove=function(){this.notify(L)},U.prototype.__initialize=function(_e,Ce){this.visitor=Ce,this.root=_e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,Ce.fallback==="iteration"?this.__fallback=Object.keys:typeof Ce.fallback=="function"&&(this.__fallback=Ce.fallback),this.__keys=S,Ce.keys&&(this.__keys=Object.assign(Object.create(this.__keys),Ce.keys))};function se(_e){return _e==null?!1:typeof _e=="object"&&typeof _e.type=="string"}function re(_e,Ce){return(_e===d.ObjectExpression||_e===d.ObjectPattern)&&Ce==="properties"}function ae(_e,Ce){for(var We=_e.length-1;We>=0;--We)if(_e[We].node===Ce)return!0;return!1}U.prototype.traverse=function(Ce,We){var He,Mt,ut,Nt,St,xt,$t,qt,Vt,Ut,Yt,ai;for(this.__initialize(Ce,We),ai={},He=this.__worklist,Mt=this.__leavelist,He.push(new K(Ce,null,null,null)),Mt.push(new K(null,null,null,null));He.length;){if(ut=He.pop(),ut===ai){if(ut=Mt.pop(),xt=this.__execute(We.leave,ut),this.__state===M||xt===M)return;continue}if(ut.node){if(xt=this.__execute(We.enter,ut),this.__state===M||xt===M)return;if(He.push(ai),Mt.push(ut),this.__state===E||xt===E)continue;if(Nt=ut.node,St=Nt.type||ut.wrap,Ut=this.__keys[St],!Ut)if(this.__fallback)Ut=this.__fallback(Nt);else throw new Error("Unknown node type "+St+".");for(qt=Ut.length;(qt-=1)>=0;)if($t=Ut[qt],Yt=Nt[$t],!!Yt){if(Array.isArray(Yt)){for(Vt=Yt.length;(Vt-=1)>=0;)if(Yt[Vt]&&!ae(Mt,Yt[Vt])){if(re(St,Ut[qt]))ut=new K(Yt[Vt],[$t,Vt],"Property",null);else if(se(Yt[Vt]))ut=new K(Yt[Vt],[$t,Vt],null,null);else continue;He.push(ut)}}else if(se(Yt)){if(ae(Mt,Yt))continue;He.push(new K(Yt,$t,null,null))}}}}},U.prototype.replace=function(Ce,We){var He,Mt,ut,Nt,St,xt,$t,qt,Vt,Ut,Yt,ai,si;function di(At){var hn,ft,Xn,zn;if(At.ref.remove()){for(ft=At.ref.key,zn=At.ref.parent,hn=He.length;hn--;)if(Xn=He[hn],Xn.ref&&Xn.ref.parent===zn){if(Xn.ref.key<ft)break;--Xn.ref.key}}}for(this.__initialize(Ce,We),Yt={},He=this.__worklist,Mt=this.__leavelist,ai={root:Ce},xt=new K(Ce,null,null,new q(ai,"root")),He.push(xt),Mt.push(xt);He.length;){if(xt=He.pop(),xt===Yt){if(xt=Mt.pop(),St=this.__execute(We.leave,xt),St!==void 0&&St!==M&&St!==E&&St!==L&&xt.ref.replace(St),(this.__state===L||St===L)&&di(xt),this.__state===M||St===M)return ai.root;continue}if(St=this.__execute(We.enter,xt),St!==void 0&&St!==M&&St!==E&&St!==L&&(xt.ref.replace(St),xt.node=St),(this.__state===L||St===L)&&(di(xt),xt.node=null),this.__state===M||St===M)return ai.root;if(ut=xt.node,!!ut&&(He.push(Yt),Mt.push(xt),!(this.__state===E||St===E))){if(Nt=ut.type||xt.wrap,Vt=this.__keys[Nt],!Vt)if(this.__fallback)Vt=this.__fallback(ut);else throw new Error("Unknown node type "+Nt+".");for($t=Vt.length;($t-=1)>=0;)if(si=Vt[$t],Ut=ut[si],!!Ut)if(Array.isArray(Ut)){for(qt=Ut.length;(qt-=1)>=0;)if(Ut[qt]){if(re(Nt,Vt[$t]))xt=new K(Ut[qt],[si,qt],"Property",new q(Ut,qt));else if(se(Ut[qt]))xt=new K(Ut[qt],[si,qt],null,new q(Ut,qt));else continue;He.push(xt)}}else se(Ut)&&He.push(new K(Ut,si,null,new q(ut,si)))}}return ai.root};function de(_e,Ce){var We=new U;return We.traverse(_e,Ce)}function ve(_e,Ce){var We=new U;return We.replace(_e,Ce)}function Ee(_e,Ce){var We;return We=Z(Ce,function(Mt){return Mt.range[0]>_e.range[0]}),_e.extendedRange=[_e.range[0],_e.range[1]],We!==Ce.length&&(_e.extendedRange[1]=Ce[We].range[0]),We-=1,We>=0&&(_e.extendedRange[0]=Ce[We].range[1]),_e}function le(_e,Ce,We){var He=[],Mt,ut,Nt,St;if(!_e.range)throw new Error("attachComments needs range information");if(!We.length){if(Ce.length){for(Nt=0,ut=Ce.length;Nt<ut;Nt+=1)Mt=R(Ce[Nt]),Mt.extendedRange=[0,_e.range[0]],He.push(Mt);_e.leadingComments=He}return _e}for(Nt=0,ut=Ce.length;Nt<ut;Nt+=1)He.push(Ee(R(Ce[Nt]),We));return St=0,de(_e,{enter:function(xt){for(var $t;St<He.length&&($t=He[St],!($t.extendedRange[1]>xt.range[0]));)$t.extendedRange[1]===xt.range[0]?(xt.leadingComments||(xt.leadingComments=[]),xt.leadingComments.push($t),He.splice(St,1)):St+=1;if(St===He.length)return b.Break;if(He[St].extendedRange[0]>xt.range[1])return b.Skip}}),St=0,de(_e,{leave:function(xt){for(var $t;St<He.length&&($t=He[St],!(xt.range[1]<$t.extendedRange[0]));)xt.range[1]===$t.extendedRange[0]?(xt.trailingComments||(xt.trailingComments=[]),xt.trailingComments.push($t),He.splice(St,1)):St+=1;if(St===He.length)return b.Break;if(He[St].extendedRange[0]>xt.range[1])return b.Skip}}),_e}return l.Syntax=d,l.traverse=de,l.replace=ve,l.attachComments=le,l.VisitorKeys=S,l.VisitorOption=b,l.Controller=U,l.cloneEnvironment=function(){return o({})},l})(e)})(estraverse)),estraverse}var utils={},ast={exports:{}},hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,(function(){function e(M){if(M==null)return!1;switch(M.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function o(M){if(M==null)return!1;switch(M.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function l(M){if(M==null)return!1;switch(M.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function d(M){return l(M)||M!=null&&M.type==="FunctionDeclaration"}function b(M){switch(M.type){case"IfStatement":return M.alternate!=null?M.alternate:M.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return M.body}return null}function S(M){var E;if(M.type!=="IfStatement"||M.alternate==null)return!1;E=M.consequent;do{if(E.type==="IfStatement"&&E.alternate==null)return!0;E=b(E)}while(E);return!1}ast.exports={isExpression:e,isStatement:l,isIterationStatement:o,isSourceElement:d,isProblematicIfStatement:S,trailingStatement:b}})()),ast.exports}var code={exports:{}},hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,(function(){var e,o,l,d,b,S;o={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function M(ae){return 48<=ae&&ae<=57}function E(ae){return 48<=ae&&ae<=57||97<=ae&&ae<=102||65<=ae&&ae<=70}function L(ae){return ae>=48&&ae<=55}l=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function R(ae){return ae===32||ae===9||ae===11||ae===12||ae===160||ae>=5760&&l.indexOf(ae)>=0}function Z(ae){return ae===10||ae===13||ae===8232||ae===8233}function q(ae){if(ae<=65535)return String.fromCharCode(ae);var de=String.fromCharCode(Math.floor((ae-65536)/1024)+55296),ve=String.fromCharCode((ae-65536)%1024+56320);return de+ve}for(d=new Array(128),S=0;S<128;++S)d[S]=S>=97&&S<=122||S>=65&&S<=90||S===36||S===95;for(b=new Array(128),S=0;S<128;++S)b[S]=S>=97&&S<=122||S>=65&&S<=90||S>=48&&S<=57||S===36||S===95;function K(ae){return ae<128?d[ae]:o.NonAsciiIdentifierStart.test(q(ae))}function U(ae){return ae<128?b[ae]:o.NonAsciiIdentifierPart.test(q(ae))}function se(ae){return ae<128?d[ae]:e.NonAsciiIdentifierStart.test(q(ae))}function re(ae){return ae<128?b[ae]:e.NonAsciiIdentifierPart.test(q(ae))}code.exports={isDecimalDigit:M,isHexDigit:E,isOctalDigit:L,isWhiteSpace:R,isLineTerminator:Z,isIdentifierStartES5:K,isIdentifierPartES5:U,isIdentifierStartES6:se,isIdentifierPartES6:re}})()),code.exports}var keyword={exports:{}},hasRequiredKeyword;function requireKeyword(){return hasRequiredKeyword||(hasRequiredKeyword=1,(function(){var e=requireCode();function o(K){switch(K){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function l(K,U){return!U&&K==="yield"?!1:d(K,U)}function d(K,U){if(U&&o(K))return!0;switch(K.length){case 2:return K==="if"||K==="in"||K==="do";case 3:return K==="var"||K==="for"||K==="new"||K==="try";case 4:return K==="this"||K==="else"||K==="case"||K==="void"||K==="with"||K==="enum";case 5:return K==="while"||K==="break"||K==="catch"||K==="throw"||K==="const"||K==="yield"||K==="class"||K==="super";case 6:return K==="return"||K==="typeof"||K==="delete"||K==="switch"||K==="export"||K==="import";case 7:return K==="default"||K==="finally"||K==="extends";case 8:return K==="function"||K==="continue"||K==="debugger";case 10:return K==="instanceof";default:return!1}}function b(K,U){return K==="null"||K==="true"||K==="false"||l(K,U)}function S(K,U){return K==="null"||K==="true"||K==="false"||d(K,U)}function M(K){return K==="eval"||K==="arguments"}function E(K){var U,se,re;if(K.length===0||(re=K.charCodeAt(0),!e.isIdentifierStartES5(re)))return!1;for(U=1,se=K.length;U<se;++U)if(re=K.charCodeAt(U),!e.isIdentifierPartES5(re))return!1;return!0}function L(K,U){return(K-55296)*1024+(U-56320)+65536}function R(K){var U,se,re,ae,de;if(K.length===0)return!1;for(de=e.isIdentifierStartES6,U=0,se=K.length;U<se;++U){if(re=K.charCodeAt(U),55296<=re&&re<=56319){if(++U,U>=se||(ae=K.charCodeAt(U),!(56320<=ae&&ae<=57343)))return!1;re=L(re,ae)}if(!de(re))return!1;de=e.isIdentifierPartES6}return!0}function Z(K,U){return E(K)&&!b(K,U)}function q(K,U){return R(K)&&!S(K,U)}keyword.exports={isKeywordES5:l,isKeywordES6:d,isReservedWordES5:b,isReservedWordES6:S,isRestrictedWord:M,isIdentifierNameES5:E,isIdentifierNameES6:R,isIdentifierES5:Z,isIdentifierES6:q}})()),keyword.exports}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(){utils.ast=requireAst(),utils.code=requireCode(),utils.keyword=requireKeyword()})()),utils}var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(o){if(0<=o&&o<e.length)return e[o];throw new TypeError("Must be between 0 and 63: "+o)},base64.decode=function(o){var l=65,d=90,b=97,S=122,M=48,E=57,L=43,R=47,Z=26,q=52;return l<=o&&o<=d?o-l:b<=o&&o<=S?o-b+Z:M<=o&&o<=E?o-M+q:o==L?62:o==R?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var e=requireBase64(),o=5,l=1<<o,d=l-1,b=l;function S(E){return E<0?(-E<<1)+1:(E<<1)+0}function M(E){var L=(E&1)===1,R=E>>1;return L?-R:R}return base64Vlq.encode=function(L){var R="",Z,q=S(L);do Z=q&d,q>>>=o,q>0&&(Z|=b),R+=e.encode(Z);while(q>0);return R},base64Vlq.decode=function(L,R,Z){var q=L.length,K=0,U=0,se,re;do{if(R>=q)throw new Error("Expected more digits in base 64 VLQ value.");if(re=e.decode(L.charCodeAt(R++)),re===-1)throw new Error("Invalid base64 digit: "+L.charAt(R-1));se=!!(re&b),re&=d,K=K+(re<<U),U+=o}while(se);Z.value=M(K),Z.rest=R},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){function o(le,_e,Ce){if(_e in le)return le[_e];if(arguments.length===3)return Ce;throw new Error('"'+_e+'" is a required argument.')}e.getArg=o;var l=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,d=/^data:.+\,.+$/;function b(le){var _e=le.match(l);return _e?{scheme:_e[1],auth:_e[2],host:_e[3],port:_e[4],path:_e[5]}:null}e.urlParse=b;function S(le){var _e="";return le.scheme&&(_e+=le.scheme+":"),_e+="//",le.auth&&(_e+=le.auth+"@"),le.host&&(_e+=le.host),le.port&&(_e+=":"+le.port),le.path&&(_e+=le.path),_e}e.urlGenerate=S;function M(le){var _e=le,Ce=b(le);if(Ce){if(!Ce.path)return le;_e=Ce.path}for(var We=e.isAbsolute(_e),He=_e.split(/\/+/),Mt,ut=0,Nt=He.length-1;Nt>=0;Nt--)Mt=He[Nt],Mt==="."?He.splice(Nt,1):Mt===".."?ut++:ut>0&&(Mt===""?(He.splice(Nt+1,ut),ut=0):(He.splice(Nt,2),ut--));return _e=He.join("/"),_e===""&&(_e=We?"/":"."),Ce?(Ce.path=_e,S(Ce)):_e}e.normalize=M;function E(le,_e){le===""&&(le="."),_e===""&&(_e=".");var Ce=b(_e),We=b(le);if(We&&(le=We.path||"/"),Ce&&!Ce.scheme)return We&&(Ce.scheme=We.scheme),S(Ce);if(Ce||_e.match(d))return _e;if(We&&!We.host&&!We.path)return We.host=_e,S(We);var He=_e.charAt(0)==="/"?_e:M(le.replace(/\/+$/,"")+"/"+_e);return We?(We.path=He,S(We)):He}e.join=E,e.isAbsolute=function(le){return le.charAt(0)==="/"||l.test(le)};function L(le,_e){le===""&&(le="."),le=le.replace(/\/$/,"");for(var Ce=0;_e.indexOf(le+"/")!==0;){var We=le.lastIndexOf("/");if(We<0||(le=le.slice(0,We),le.match(/^([^\/]+:\/)?\/*$/)))return _e;++Ce}return Array(Ce+1).join("../")+_e.substr(le.length+1)}e.relative=L;var R=(function(){var le=Object.create(null);return!("__proto__"in le)})();function Z(le){return le}function q(le){return U(le)?"$"+le:le}e.toSetString=R?Z:q;function K(le){return U(le)?le.slice(1):le}e.fromSetString=R?Z:K;function U(le){if(!le)return!1;var _e=le.length;if(_e<9||le.charCodeAt(_e-1)!==95||le.charCodeAt(_e-2)!==95||le.charCodeAt(_e-3)!==111||le.charCodeAt(_e-4)!==116||le.charCodeAt(_e-5)!==111||le.charCodeAt(_e-6)!==114||le.charCodeAt(_e-7)!==112||le.charCodeAt(_e-8)!==95||le.charCodeAt(_e-9)!==95)return!1;for(var Ce=_e-10;Ce>=0;Ce--)if(le.charCodeAt(Ce)!==36)return!1;return!0}function se(le,_e,Ce){var We=ae(le.source,_e.source);return We!==0||(We=le.originalLine-_e.originalLine,We!==0)||(We=le.originalColumn-_e.originalColumn,We!==0||Ce)||(We=le.generatedColumn-_e.generatedColumn,We!==0)||(We=le.generatedLine-_e.generatedLine,We!==0)?We:ae(le.name,_e.name)}e.compareByOriginalPositions=se;function re(le,_e,Ce){var We=le.generatedLine-_e.generatedLine;return We!==0||(We=le.generatedColumn-_e.generatedColumn,We!==0||Ce)||(We=ae(le.source,_e.source),We!==0)||(We=le.originalLine-_e.originalLine,We!==0)||(We=le.originalColumn-_e.originalColumn,We!==0)?We:ae(le.name,_e.name)}e.compareByGeneratedPositionsDeflated=re;function ae(le,_e){return le===_e?0:le===null?1:_e===null?-1:le>_e?1:-1}function de(le,_e){var Ce=le.generatedLine-_e.generatedLine;return Ce!==0||(Ce=le.generatedColumn-_e.generatedColumn,Ce!==0)||(Ce=ae(le.source,_e.source),Ce!==0)||(Ce=le.originalLine-_e.originalLine,Ce!==0)||(Ce=le.originalColumn-_e.originalColumn,Ce!==0)?Ce:ae(le.name,_e.name)}e.compareByGeneratedPositionsInflated=de;function ve(le){return JSON.parse(le.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=ve;function Ee(le,_e,Ce){if(_e=_e||"",le&&(le[le.length-1]!=="/"&&_e[0]!=="/"&&(le+="/"),_e=le+_e),Ce){var We=b(Ce);if(!We)throw new Error("sourceMapURL could not be parsed");if(We.path){var He=We.path.lastIndexOf("/");He>=0&&(We.path=We.path.substring(0,He+1))}_e=E(S(We),_e)}return M(_e)}e.computeSourceURL=Ee})(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var e=requireUtil(),o=Object.prototype.hasOwnProperty,l=typeof Map<"u";function d(){this._array=[],this._set=l?new Map:Object.create(null)}return d.fromArray=function(S,M){for(var E=new d,L=0,R=S.length;L<R;L++)E.add(S[L],M);return E},d.prototype.size=function(){return l?this._set.size:Object.getOwnPropertyNames(this._set).length},d.prototype.add=function(S,M){var E=l?S:e.toSetString(S),L=l?this.has(S):o.call(this._set,E),R=this._array.length;(!L||M)&&this._array.push(S),L||(l?this._set.set(S,R):this._set[E]=R)},d.prototype.has=function(S){if(l)return this._set.has(S);var M=e.toSetString(S);return o.call(this._set,M)},d.prototype.indexOf=function(S){if(l){var M=this._set.get(S);if(M>=0)return M}else{var E=e.toSetString(S);if(o.call(this._set,E))return this._set[E]}throw new Error('"'+S+'" is not in the set.')},d.prototype.at=function(S){if(S>=0&&S<this._array.length)return this._array[S];throw new Error("No element indexed by "+S)},d.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=d,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var e=requireUtil();function o(d,b){var S=d.generatedLine,M=b.generatedLine,E=d.generatedColumn,L=b.generatedColumn;return M>S||M==S&&L>=E||e.compareByGeneratedPositionsInflated(d,b)<=0}function l(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return l.prototype.unsortedForEach=function(b,S){this._array.forEach(b,S)},l.prototype.add=function(b){o(this._last,b)?(this._last=b,this._array.push(b)):(this._sorted=!1,this._array.push(b))},l.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=l,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var e=requireBase64Vlq(),o=requireUtil(),l=requireArraySet().ArraySet,d=requireMappingList().MappingList;function b(S){S||(S={}),this._file=o.getArg(S,"file",null),this._sourceRoot=o.getArg(S,"sourceRoot",null),this._skipValidation=o.getArg(S,"skipValidation",!1),this._sources=new l,this._names=new l,this._mappings=new d,this._sourcesContents=null}return b.prototype._version=3,b.fromSourceMap=function(M){var E=M.sourceRoot,L=new b({file:M.file,sourceRoot:E});return M.eachMapping(function(R){var Z={generated:{line:R.generatedLine,column:R.generatedColumn}};R.source!=null&&(Z.source=R.source,E!=null&&(Z.source=o.relative(E,Z.source)),Z.original={line:R.originalLine,column:R.originalColumn},R.name!=null&&(Z.name=R.name)),L.addMapping(Z)}),M.sources.forEach(function(R){var Z=R;E!==null&&(Z=o.relative(E,R)),L._sources.has(Z)||L._sources.add(Z);var q=M.sourceContentFor(R);q!=null&&L.setSourceContent(R,q)}),L},b.prototype.addMapping=function(M){var E=o.getArg(M,"generated"),L=o.getArg(M,"original",null),R=o.getArg(M,"source",null),Z=o.getArg(M,"name",null);this._skipValidation||this._validateMapping(E,L,R,Z),R!=null&&(R=String(R),this._sources.has(R)||this._sources.add(R)),Z!=null&&(Z=String(Z),this._names.has(Z)||this._names.add(Z)),this._mappings.add({generatedLine:E.line,generatedColumn:E.column,originalLine:L!=null&&L.line,originalColumn:L!=null&&L.column,source:R,name:Z})},b.prototype.setSourceContent=function(M,E){var L=M;this._sourceRoot!=null&&(L=o.relative(this._sourceRoot,L)),E!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[o.toSetString(L)]=E):this._sourcesContents&&(delete this._sourcesContents[o.toSetString(L)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},b.prototype.applySourceMap=function(M,E,L){var R=E;if(E==null){if(M.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);R=M.file}var Z=this._sourceRoot;Z!=null&&(R=o.relative(Z,R));var q=new l,K=new l;this._mappings.unsortedForEach(function(U){if(U.source===R&&U.originalLine!=null){var se=M.originalPositionFor({line:U.originalLine,column:U.originalColumn});se.source!=null&&(U.source=se.source,L!=null&&(U.source=o.join(L,U.source)),Z!=null&&(U.source=o.relative(Z,U.source)),U.originalLine=se.line,U.originalColumn=se.column,se.name!=null&&(U.name=se.name))}var re=U.source;re!=null&&!q.has(re)&&q.add(re);var ae=U.name;ae!=null&&!K.has(ae)&&K.add(ae)},this),this._sources=q,this._names=K,M.sources.forEach(function(U){var se=M.sourceContentFor(U);se!=null&&(L!=null&&(U=o.join(L,U)),Z!=null&&(U=o.relative(Z,U)),this.setSourceContent(U,se))},this)},b.prototype._validateMapping=function(M,E,L,R){if(E&&typeof E.line!="number"&&typeof E.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(M&&"line"in M&&"column"in M&&M.line>0&&M.column>=0&&!E&&!L&&!R)){if(M&&"line"in M&&"column"in M&&E&&"line"in E&&"column"in E&&M.line>0&&M.column>=0&&E.line>0&&E.column>=0&&L)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:M,source:L,original:E,name:R}))}},b.prototype._serializeMappings=function(){for(var M=0,E=1,L=0,R=0,Z=0,q=0,K="",U,se,re,ae,de=this._mappings.toArray(),ve=0,Ee=de.length;ve<Ee;ve++){if(se=de[ve],U="",se.generatedLine!==E)for(M=0;se.generatedLine!==E;)U+=";",E++;else if(ve>0){if(!o.compareByGeneratedPositionsInflated(se,de[ve-1]))continue;U+=","}U+=e.encode(se.generatedColumn-M),M=se.generatedColumn,se.source!=null&&(ae=this._sources.indexOf(se.source),U+=e.encode(ae-q),q=ae,U+=e.encode(se.originalLine-1-R),R=se.originalLine-1,U+=e.encode(se.originalColumn-L),L=se.originalColumn,se.name!=null&&(re=this._names.indexOf(se.name),U+=e.encode(re-Z),Z=re)),K+=U}return K},b.prototype._generateSourcesContent=function(M,E){return M.map(function(L){if(!this._sourcesContents)return null;E!=null&&(L=o.relative(E,L));var R=o.toSetString(L);return Object.prototype.hasOwnProperty.call(this._sourcesContents,R)?this._sourcesContents[R]:null},this)},b.prototype.toJSON=function(){var M={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(M.file=this._file),this._sourceRoot!=null&&(M.sourceRoot=this._sourceRoot),this._sourcesContents&&(M.sourcesContent=this._generateSourcesContent(M.sources,M.sourceRoot)),M},b.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=b,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function o(l,d,b,S,M,E){var L=Math.floor((d-l)/2)+l,R=M(b,S[L],!0);return R===0?L:R>0?d-L>1?o(L,d,b,S,M,E):E==e.LEAST_UPPER_BOUND?d<S.length?d:-1:L:L-l>1?o(l,L,b,S,M,E):E==e.LEAST_UPPER_BOUND?L:l<0?-1:l}e.search=function(d,b,S,M){if(b.length===0)return-1;var E=o(-1,b.length,d,b,S,M||e.GREATEST_LOWER_BOUND);if(E<0)return-1;for(;E-1>=0&&S(b[E],b[E-1],!0)===0;)--E;return E}})(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function e(d,b,S){var M=d[b];d[b]=d[S],d[S]=M}function o(d,b){return Math.round(d+Math.random()*(b-d))}function l(d,b,S,M){if(S<M){var E=o(S,M),L=S-1;e(d,E,M);for(var R=d[M],Z=S;Z<M;Z++)b(d[Z],R)<=0&&(L+=1,e(d,L,Z));e(d,L+1,Z);var q=L+1;l(d,b,S,q-1),l(d,b,q+1,M)}}return quickSort.quickSort=function(d,b){l(d,b,0,d.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var e=requireUtil(),o=requireBinarySearch(),l=requireArraySet().ArraySet,d=requireBase64Vlq(),b=requireQuickSort().quickSort;function S(R,Z){var q=R;return typeof R=="string"&&(q=e.parseSourceMapInput(R)),q.sections!=null?new L(q,Z):new M(q,Z)}S.fromSourceMap=function(R,Z){return M.fromSourceMap(R,Z)},S.prototype._version=3,S.prototype.__generatedMappings=null,Object.defineProperty(S.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),S.prototype.__originalMappings=null,Object.defineProperty(S.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),S.prototype._charIsMappingSeparator=function(Z,q){var K=Z.charAt(q);return K===";"||K===","},S.prototype._parseMappings=function(Z,q){throw new Error("Subclasses must implement _parseMappings")},S.GENERATED_ORDER=1,S.ORIGINAL_ORDER=2,S.GREATEST_LOWER_BOUND=1,S.LEAST_UPPER_BOUND=2,S.prototype.eachMapping=function(Z,q,K){var U=q||null,se=K||S.GENERATED_ORDER,re;switch(se){case S.GENERATED_ORDER:re=this._generatedMappings;break;case S.ORIGINAL_ORDER:re=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var ae=this.sourceRoot;re.map(function(de){var ve=de.source===null?null:this._sources.at(de.source);return ve=e.computeSourceURL(ae,ve,this._sourceMapURL),{source:ve,generatedLine:de.generatedLine,generatedColumn:de.generatedColumn,originalLine:de.originalLine,originalColumn:de.originalColumn,name:de.name===null?null:this._names.at(de.name)}},this).forEach(Z,U)},S.prototype.allGeneratedPositionsFor=function(Z){var q=e.getArg(Z,"line"),K={source:e.getArg(Z,"source"),originalLine:q,originalColumn:e.getArg(Z,"column",0)};if(K.source=this._findSourceIndex(K.source),K.source<0)return[];var U=[],se=this._findMapping(K,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,o.LEAST_UPPER_BOUND);if(se>=0){var re=this._originalMappings[se];if(Z.column===void 0)for(var ae=re.originalLine;re&&re.originalLine===ae;)U.push({line:e.getArg(re,"generatedLine",null),column:e.getArg(re,"generatedColumn",null),lastColumn:e.getArg(re,"lastGeneratedColumn",null)}),re=this._originalMappings[++se];else for(var de=re.originalColumn;re&&re.originalLine===q&&re.originalColumn==de;)U.push({line:e.getArg(re,"generatedLine",null),column:e.getArg(re,"generatedColumn",null),lastColumn:e.getArg(re,"lastGeneratedColumn",null)}),re=this._originalMappings[++se]}return U},sourceMapConsumer.SourceMapConsumer=S;function M(R,Z){var q=R;typeof R=="string"&&(q=e.parseSourceMapInput(R));var K=e.getArg(q,"version"),U=e.getArg(q,"sources"),se=e.getArg(q,"names",[]),re=e.getArg(q,"sourceRoot",null),ae=e.getArg(q,"sourcesContent",null),de=e.getArg(q,"mappings"),ve=e.getArg(q,"file",null);if(K!=this._version)throw new Error("Unsupported version: "+K);re&&(re=e.normalize(re)),U=U.map(String).map(e.normalize).map(function(Ee){return re&&e.isAbsolute(re)&&e.isAbsolute(Ee)?e.relative(re,Ee):Ee}),this._names=l.fromArray(se.map(String),!0),this._sources=l.fromArray(U,!0),this._absoluteSources=this._sources.toArray().map(function(Ee){return e.computeSourceURL(re,Ee,Z)}),this.sourceRoot=re,this.sourcesContent=ae,this._mappings=de,this._sourceMapURL=Z,this.file=ve}M.prototype=Object.create(S.prototype),M.prototype.consumer=S,M.prototype._findSourceIndex=function(R){var Z=R;if(this.sourceRoot!=null&&(Z=e.relative(this.sourceRoot,Z)),this._sources.has(Z))return this._sources.indexOf(Z);var q;for(q=0;q<this._absoluteSources.length;++q)if(this._absoluteSources[q]==R)return q;return-1},M.fromSourceMap=function(Z,q){var K=Object.create(M.prototype),U=K._names=l.fromArray(Z._names.toArray(),!0),se=K._sources=l.fromArray(Z._sources.toArray(),!0);K.sourceRoot=Z._sourceRoot,K.sourcesContent=Z._generateSourcesContent(K._sources.toArray(),K.sourceRoot),K.file=Z._file,K._sourceMapURL=q,K._absoluteSources=K._sources.toArray().map(function(Ce){return e.computeSourceURL(K.sourceRoot,Ce,q)});for(var re=Z._mappings.toArray().slice(),ae=K.__generatedMappings=[],de=K.__originalMappings=[],ve=0,Ee=re.length;ve<Ee;ve++){var le=re[ve],_e=new E;_e.generatedLine=le.generatedLine,_e.generatedColumn=le.generatedColumn,le.source&&(_e.source=se.indexOf(le.source),_e.originalLine=le.originalLine,_e.originalColumn=le.originalColumn,le.name&&(_e.name=U.indexOf(le.name)),de.push(_e)),ae.push(_e)}return b(K.__originalMappings,e.compareByOriginalPositions),K},M.prototype._version=3,Object.defineProperty(M.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function E(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}M.prototype._parseMappings=function(Z,q){for(var K=1,U=0,se=0,re=0,ae=0,de=0,ve=Z.length,Ee=0,le={},_e={},Ce=[],We=[],He,Mt,ut,Nt,St;Ee<ve;)if(Z.charAt(Ee)===";")K++,Ee++,U=0;else if(Z.charAt(Ee)===",")Ee++;else{for(He=new E,He.generatedLine=K,Nt=Ee;Nt<ve&&!this._charIsMappingSeparator(Z,Nt);Nt++);if(Mt=Z.slice(Ee,Nt),ut=le[Mt],ut)Ee+=Mt.length;else{for(ut=[];Ee<Nt;)d.decode(Z,Ee,_e),St=_e.value,Ee=_e.rest,ut.push(St);if(ut.length===2)throw new Error("Found a source, but no line and column");if(ut.length===3)throw new Error("Found a source and line, but no column");le[Mt]=ut}He.generatedColumn=U+ut[0],U=He.generatedColumn,ut.length>1&&(He.source=ae+ut[1],ae+=ut[1],He.originalLine=se+ut[2],se=He.originalLine,He.originalLine+=1,He.originalColumn=re+ut[3],re=He.originalColumn,ut.length>4&&(He.name=de+ut[4],de+=ut[4])),We.push(He),typeof He.originalLine=="number"&&Ce.push(He)}b(We,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=We,b(Ce,e.compareByOriginalPositions),this.__originalMappings=Ce},M.prototype._findMapping=function(Z,q,K,U,se,re){if(Z[K]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+Z[K]);if(Z[U]<0)throw new TypeError("Column must be greater than or equal to 0, got "+Z[U]);return o.search(Z,q,se,re)},M.prototype.computeColumnSpans=function(){for(var Z=0;Z<this._generatedMappings.length;++Z){var q=this._generatedMappings[Z];if(Z+1<this._generatedMappings.length){var K=this._generatedMappings[Z+1];if(q.generatedLine===K.generatedLine){q.lastGeneratedColumn=K.generatedColumn-1;continue}}q.lastGeneratedColumn=1/0}},M.prototype.originalPositionFor=function(Z){var q={generatedLine:e.getArg(Z,"line"),generatedColumn:e.getArg(Z,"column")},K=this._findMapping(q,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(Z,"bias",S.GREATEST_LOWER_BOUND));if(K>=0){var U=this._generatedMappings[K];if(U.generatedLine===q.generatedLine){var se=e.getArg(U,"source",null);se!==null&&(se=this._sources.at(se),se=e.computeSourceURL(this.sourceRoot,se,this._sourceMapURL));var re=e.getArg(U,"name",null);return re!==null&&(re=this._names.at(re)),{source:se,line:e.getArg(U,"originalLine",null),column:e.getArg(U,"originalColumn",null),name:re}}}return{source:null,line:null,column:null,name:null}},M.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(Z){return Z==null}):!1},M.prototype.sourceContentFor=function(Z,q){if(!this.sourcesContent)return null;var K=this._findSourceIndex(Z);if(K>=0)return this.sourcesContent[K];var U=Z;this.sourceRoot!=null&&(U=e.relative(this.sourceRoot,U));var se;if(this.sourceRoot!=null&&(se=e.urlParse(this.sourceRoot))){var re=U.replace(/^file:\/\//,"");if(se.scheme=="file"&&this._sources.has(re))return this.sourcesContent[this._sources.indexOf(re)];if((!se.path||se.path=="/")&&this._sources.has("/"+U))return this.sourcesContent[this._sources.indexOf("/"+U)]}if(q)return null;throw new Error('"'+U+'" is not in the SourceMap.')},M.prototype.generatedPositionFor=function(Z){var q=e.getArg(Z,"source");if(q=this._findSourceIndex(q),q<0)return{line:null,column:null,lastColumn:null};var K={source:q,originalLine:e.getArg(Z,"line"),originalColumn:e.getArg(Z,"column")},U=this._findMapping(K,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(Z,"bias",S.GREATEST_LOWER_BOUND));if(U>=0){var se=this._originalMappings[U];if(se.source===K.source)return{line:e.getArg(se,"generatedLine",null),column:e.getArg(se,"generatedColumn",null),lastColumn:e.getArg(se,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=M;function L(R,Z){var q=R;typeof R=="string"&&(q=e.parseSourceMapInput(R));var K=e.getArg(q,"version"),U=e.getArg(q,"sections");if(K!=this._version)throw new Error("Unsupported version: "+K);this._sources=new l,this._names=new l;var se={line:-1,column:0};this._sections=U.map(function(re){if(re.url)throw new Error("Support for url field in sections not implemented.");var ae=e.getArg(re,"offset"),de=e.getArg(ae,"line"),ve=e.getArg(ae,"column");if(de<se.line||de===se.line&&ve<se.column)throw new Error("Section offsets must be ordered and non-overlapping.");return se=ae,{generatedOffset:{generatedLine:de+1,generatedColumn:ve+1},consumer:new S(e.getArg(re,"map"),Z)}})}return L.prototype=Object.create(S.prototype),L.prototype.constructor=S,L.prototype._version=3,Object.defineProperty(L.prototype,"sources",{get:function(){for(var R=[],Z=0;Z<this._sections.length;Z++)for(var q=0;q<this._sections[Z].consumer.sources.length;q++)R.push(this._sections[Z].consumer.sources[q]);return R}}),L.prototype.originalPositionFor=function(Z){var q={generatedLine:e.getArg(Z,"line"),generatedColumn:e.getArg(Z,"column")},K=o.search(q,this._sections,function(se,re){var ae=se.generatedLine-re.generatedOffset.generatedLine;return ae||se.generatedColumn-re.generatedOffset.generatedColumn}),U=this._sections[K];return U?U.consumer.originalPositionFor({line:q.generatedLine-(U.generatedOffset.generatedLine-1),column:q.generatedColumn-(U.generatedOffset.generatedLine===q.generatedLine?U.generatedOffset.generatedColumn-1:0),bias:Z.bias}):{source:null,line:null,column:null,name:null}},L.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(Z){return Z.consumer.hasContentsOfAllSources()})},L.prototype.sourceContentFor=function(Z,q){for(var K=0;K<this._sections.length;K++){var U=this._sections[K],se=U.consumer.sourceContentFor(Z,!0);if(se)return se}if(q)return null;throw new Error('"'+Z+'" is not in the SourceMap.')},L.prototype.generatedPositionFor=function(Z){for(var q=0;q<this._sections.length;q++){var K=this._sections[q];if(K.consumer._findSourceIndex(e.getArg(Z,"source"))!==-1){var U=K.consumer.generatedPositionFor(Z);if(U){var se={line:U.line+(K.generatedOffset.generatedLine-1),column:U.column+(K.generatedOffset.generatedLine===U.line?K.generatedOffset.generatedColumn-1:0)};return se}}}return{line:null,column:null}},L.prototype._parseMappings=function(Z,q){this.__generatedMappings=[],this.__originalMappings=[];for(var K=0;K<this._sections.length;K++)for(var U=this._sections[K],se=U.consumer._generatedMappings,re=0;re<se.length;re++){var ae=se[re],de=U.consumer._sources.at(ae.source);de=e.computeSourceURL(U.consumer.sourceRoot,de,this._sourceMapURL),this._sources.add(de),de=this._sources.indexOf(de);var ve=null;ae.name&&(ve=U.consumer._names.at(ae.name),this._names.add(ve),ve=this._names.indexOf(ve));var Ee={source:de,generatedLine:ae.generatedLine+(U.generatedOffset.generatedLine-1),generatedColumn:ae.generatedColumn+(U.generatedOffset.generatedLine===ae.generatedLine?U.generatedOffset.generatedColumn-1:0),originalLine:ae.originalLine,originalColumn:ae.originalColumn,name:ve};this.__generatedMappings.push(Ee),typeof Ee.originalLine=="number"&&this.__originalMappings.push(Ee)}b(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),b(this.__originalMappings,e.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=L,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var e=requireSourceMapGenerator().SourceMapGenerator,o=requireUtil(),l=/(\r?\n)/,d=10,b="$$$isSourceNode$$$";function S(M,E,L,R,Z){this.children=[],this.sourceContents={},this.line=M??null,this.column=E??null,this.source=L??null,this.name=Z??null,this[b]=!0,R!=null&&this.add(R)}return S.fromStringWithSourceMap=function(E,L,R){var Z=new S,q=E.split(l),K=0,U=function(){var ve=le(),Ee=le()||"";return ve+Ee;function le(){return K<q.length?q[K++]:void 0}},se=1,re=0,ae=null;return L.eachMapping(function(ve){if(ae!==null)if(se<ve.generatedLine)de(ae,U()),se++,re=0;else{var Ee=q[K]||"",le=Ee.substr(0,ve.generatedColumn-re);q[K]=Ee.substr(ve.generatedColumn-re),re=ve.generatedColumn,de(ae,le),ae=ve;return}for(;se<ve.generatedLine;)Z.add(U()),se++;if(re<ve.generatedColumn){var Ee=q[K]||"";Z.add(Ee.substr(0,ve.generatedColumn)),q[K]=Ee.substr(ve.generatedColumn),re=ve.generatedColumn}ae=ve},this),K<q.length&&(ae&&de(ae,U()),Z.add(q.splice(K).join(""))),L.sources.forEach(function(ve){var Ee=L.sourceContentFor(ve);Ee!=null&&(R!=null&&(ve=o.join(R,ve)),Z.setSourceContent(ve,Ee))}),Z;function de(ve,Ee){if(ve===null||ve.source===void 0)Z.add(Ee);else{var le=R?o.join(R,ve.source):ve.source;Z.add(new S(ve.originalLine,ve.originalColumn,le,Ee,ve.name))}}},S.prototype.add=function(E){if(Array.isArray(E))E.forEach(function(L){this.add(L)},this);else if(E[b]||typeof E=="string")E&&this.children.push(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this},S.prototype.prepend=function(E){if(Array.isArray(E))for(var L=E.length-1;L>=0;L--)this.prepend(E[L]);else if(E[b]||typeof E=="string")this.children.unshift(E);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+E);return this},S.prototype.walk=function(E){for(var L,R=0,Z=this.children.length;R<Z;R++)L=this.children[R],L[b]?L.walk(E):L!==""&&E(L,{source:this.source,line:this.line,column:this.column,name:this.name})},S.prototype.join=function(E){var L,R,Z=this.children.length;if(Z>0){for(L=[],R=0;R<Z-1;R++)L.push(this.children[R]),L.push(E);L.push(this.children[R]),this.children=L}return this},S.prototype.replaceRight=function(E,L){var R=this.children[this.children.length-1];return R[b]?R.replaceRight(E,L):typeof R=="string"?this.children[this.children.length-1]=R.replace(E,L):this.children.push("".replace(E,L)),this},S.prototype.setSourceContent=function(E,L){this.sourceContents[o.toSetString(E)]=L},S.prototype.walkSourceContents=function(E){for(var L=0,R=this.children.length;L<R;L++)this.children[L][b]&&this.children[L].walkSourceContents(E);for(var Z=Object.keys(this.sourceContents),L=0,R=Z.length;L<R;L++)E(o.fromSetString(Z[L]),this.sourceContents[Z[L]])},S.prototype.toString=function(){var E="";return this.walk(function(L){E+=L}),E},S.prototype.toStringWithSourceMap=function(E){var L={code:"",line:1,column:0},R=new e(E),Z=!1,q=null,K=null,U=null,se=null;return this.walk(function(re,ae){L.code+=re,ae.source!==null&&ae.line!==null&&ae.column!==null?((q!==ae.source||K!==ae.line||U!==ae.column||se!==ae.name)&&R.addMapping({source:ae.source,original:{line:ae.line,column:ae.column},generated:{line:L.line,column:L.column},name:ae.name}),q=ae.source,K=ae.line,U=ae.column,se=ae.name,Z=!0):Z&&(R.addMapping({generated:{line:L.line,column:L.column}}),q=null,Z=!1);for(var de=0,ve=re.length;de<ve;de++)re.charCodeAt(de)===d?(L.line++,L.column=0,de+1===ve?(q=null,Z=!1):Z&&R.addMapping({source:ae.source,original:{line:ae.line,column:ae.column},generated:{line:L.line,column:L.column},name:ae.name})):L.column++}),this.walkSourceContents(function(re,ae){R.setSourceContent(re,ae)}),{code:L.code,map:R}},sourceNode.SourceNode=S,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const version="2.1.0",require$$3={version};var hasRequiredEscodegen;function requireEscodegen(){return hasRequiredEscodegen||(hasRequiredEscodegen=1,(function(e){(function(){var o,l,d,b,S,M,E,L,R,Z,q,K,U,se,re,ae,de,ve,Ee,le,_e,Ce,We,He,Mt,ut;S=requireEstraverse(),M=requireUtils(),o=S.Syntax;function Nt(ee){return cn.Expression.hasOwnProperty(ee.type)}function St(ee){return cn.Statement.hasOwnProperty(ee.type)}l={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},d={"??":l.Coalesce,"||":l.LogicalOR,"&&":l.LogicalAND,"|":l.BitwiseOR,"^":l.BitwiseXOR,"&":l.BitwiseAND,"==":l.Equality,"!=":l.Equality,"===":l.Equality,"!==":l.Equality,is:l.Equality,isnt:l.Equality,"<":l.Relational,">":l.Relational,"<=":l.Relational,">=":l.Relational,in:l.Relational,instanceof:l.Relational,"<<":l.BitwiseSHIFT,">>":l.BitwiseSHIFT,">>>":l.BitwiseSHIFT,"+":l.Additive,"-":l.Additive,"*":l.Multiplicative,"%":l.Multiplicative,"/":l.Multiplicative,"**":l.Exponentiation};var xt=1,$t=2,qt=4,Vt=8,Ut=16,Yt=32,ai=64,si=$t|qt,di=xt|$t,At=xt|$t|qt,hn=xt,ft=qt,Xn=xt|qt,zn=xt,Dt=xt|Yt,ei=0,fi=xt|Ut,Qi=xt|Vt;function Ei(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function gi(ee,Oe){var ue="";for(Oe|=0;Oe>0;Oe>>>=1,ee+=ee)Oe&1&&(ue+=ee);return ue}function Ti(ee){return/[\r\n]/g.test(ee)}function wn(ee){var Oe=ee.length;return Oe&&M.code.isLineTerminator(ee.charCodeAt(Oe-1))}function Bi(ee,Oe){var ue;for(ue in Oe)Oe.hasOwnProperty(ue)&&(ee[ue]=Oe[ue]);return ee}function vi(ee,Oe){var ue,ye;function ke(at){return typeof at=="object"&&at instanceof Object&&!(at instanceof RegExp)}for(ue in Oe)Oe.hasOwnProperty(ue)&&(ye=Oe[ue],ke(ye)?ke(ee[ue])?vi(ee[ue],ye):ee[ue]=vi({},ye):ee[ue]=ye);return ee}function Di(ee){var Oe,ue,ye,ke,at;if(ee!==ee)throw new Error("Numeric literal whose value is NaN");if(ee<0||ee===0&&1/ee<0)throw new Error("Numeric literal whose value is negative");if(ee===1/0)return R?"null":Z?"1e400":"1e+400";if(Oe=""+ee,!Z||Oe.length<3)return Oe;for(ue=Oe.indexOf("."),!R&&Oe.charCodeAt(0)===48&&ue===1&&(ue=0,Oe=Oe.slice(1)),ye=Oe,Oe=Oe.replace("e+","e"),ke=0,(at=ye.indexOf("e"))>0&&(ke=+ye.slice(at+1),ye=ye.slice(0,at)),ue>=0&&(ke-=ye.length-ue-1,ye=+(ye.slice(0,ue)+ye.slice(ue+1))+""),at=0;ye.charCodeAt(ye.length+at-1)===48;)--at;return at!==0&&(ke-=at,ye=ye.slice(0,at)),ke!==0&&(ye+="e"+ke),(ye.length<Oe.length||q&&ee>1e12&&Math.floor(ee)===ee&&(ye="0x"+ee.toString(16)).length<Oe.length)&&+ye===ee&&(Oe=ye),Oe}function sr(ee,Oe){return(ee&-2)===8232?(Oe?"u":"\\u")+(ee===8232?"2028":"2029"):ee===10||ee===13?(Oe?"":"\\")+(ee===10?"n":"r"):String.fromCharCode(ee)}function Je(ee){var Oe,ue,ye,ke,at,Ot,kt,rn;if(ue=ee.toString(),ee.source){if(Oe=ue.match(/\/([^/]*)$/),!Oe)return ue;for(ye=Oe[1],ue="",kt=!1,rn=!1,ke=0,at=ee.source.length;ke<at;++ke)Ot=ee.source.charCodeAt(ke),rn?(ue+=sr(Ot,rn),rn=!1):(kt?Ot===93&&(kt=!1):Ot===47?ue+="\\":Ot===91&&(kt=!0),ue+=sr(Ot,rn),rn=Ot===92);return"/"+ue+"/"+ye}return ue}function tt(ee,Oe){var ue;return ee===8?"\\b":ee===12?"\\f":ee===9?"\\t":(ue=ee.toString(16).toUpperCase(),R||ee>255?"\\u"+"0000".slice(ue.length)+ue:ee===0&&!M.code.isDecimalDigit(Oe)?"\\0":ee===11?"\\x0B":"\\x"+"00".slice(ue.length)+ue)}function qe(ee){if(ee===92)return"\\\\";if(ee===10)return"\\n";if(ee===13)return"\\r";if(ee===8232)return"\\u2028";if(ee===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function _t(ee){var Oe,ue,ye,ke;for(ke=K==="double"?'"':"'",Oe=0,ue=ee.length;Oe<ue;++Oe)if(ye=ee.charCodeAt(Oe),ye===39){ke='"';break}else if(ye===34){ke="'";break}else ye===92&&++Oe;return ke+ee+ke}function Ft(ee){var Oe="",ue,ye,ke,at=0,Ot=0,kt,rn;for(ue=0,ye=ee.length;ue<ye;++ue){if(ke=ee.charCodeAt(ue),ke===39)++at;else if(ke===34)++Ot;else if(ke===47&&R)Oe+="\\";else if(M.code.isLineTerminator(ke)||ke===92){Oe+=qe(ke);continue}else if(!M.code.isIdentifierPartES5(ke)&&(R&&ke<32||!R&&!U&&(ke<32||ke>126))){Oe+=tt(ke,ee.charCodeAt(ue+1));continue}Oe+=String.fromCharCode(ke)}if(kt=!(K==="double"||K==="auto"&&Ot<at),rn=kt?"'":'"',!(kt?at:Ot))return rn+Oe+rn;for(ee=Oe,Oe=rn,ue=0,ye=ee.length;ue<ye;++ue)ke=ee.charCodeAt(ue),(ke===39&&kt||ke===34&&!kt)&&(Oe+="\\"),Oe+=String.fromCharCode(ke);return Oe+rn}function Wt(ee){var Oe,ue,ye,ke="";for(Oe=0,ue=ee.length;Oe<ue;++Oe)ye=ee[Oe],ke+=Array.isArray(ye)?Wt(ye):ye;return ke}function Rt(ee,Oe){if(!Ce)return Array.isArray(ee)?Wt(ee):ee;if(Oe==null){if(ee instanceof b)return ee;Oe={}}return Oe.loc==null?new b(null,null,Ce,ee,Oe.name||null):new b(Oe.loc.start.line,Oe.loc.start.column,Ce===!0?Oe.loc.source||null:Ce,ee,Oe.name||null)}function un(){return re||" "}function Bt(ee,Oe){var ue,ye,ke,at;return ue=Rt(ee).toString(),ue.length===0?[Oe]:(ye=Rt(Oe).toString(),ye.length===0?[ee]:(ke=ue.charCodeAt(ue.length-1),at=ye.charCodeAt(0),(ke===43||ke===45)&&ke===at||M.code.isIdentifierPartES5(ke)&&M.code.isIdentifierPartES5(at)||ke===47&&at===105?[ee,un(),Oe]:M.code.isWhiteSpace(ke)||M.code.isLineTerminator(ke)||M.code.isWhiteSpace(at)||M.code.isLineTerminator(at)?[ee,Oe]:[ee,re,Oe]))}function ln(ee){return[E,ee]}function pn(ee){var Oe;Oe=E,E+=L,ee(E),E=Oe}function Oi(ee){var Oe;for(Oe=ee.length-1;Oe>=0&&!M.code.isLineTerminator(ee.charCodeAt(Oe));--Oe);return ee.length-1-Oe}function yi(ee,Oe){var ue,ye,ke,at,Ot,kt,rn,oi;for(ue=ee.split(/\r\n|[\r\n]/),kt=Number.MAX_VALUE,ye=1,ke=ue.length;ye<ke;++ye){for(at=ue[ye],Ot=0;Ot<at.length&&M.code.isWhiteSpace(at.charCodeAt(Ot));)++Ot;kt>Ot&&(kt=Ot)}for(typeof Oe<"u"?(rn=E,ue[1][kt]==="*"&&(Oe+=" "),E=Oe):(kt&1&&--kt,rn=E),ye=1,ke=ue.length;ye<ke;++ye)oi=Rt(ln(ue[ye].slice(kt))),ue[ye]=Ce?oi.join(""):oi;return E=rn,ue.join(`
`)}function ti(ee,Oe){if(ee.type==="Line"){if(wn(ee.value))return"//"+ee.value;var ue="//"+ee.value;return He||(ue+=`
`),ue}return le.format.indent.adjustMultilineComment&&/[\n\r]/.test(ee.value)?yi("/*"+ee.value+"*/",Oe):"/*"+ee.value+"*/"}function ii(ee,Oe){var ue,ye,ke,at,Ot,kt,rn,oi,Mi,Zn,qr,br,Es,lr;if(ee.leadingComments&&ee.leadingComments.length>0){if(at=Oe,He){for(ke=ee.leadingComments[0],Oe=[],oi=ke.extendedRange,Mi=ke.range,qr=We.substring(oi[0],Mi[0]),lr=(qr.match(/\n/g)||[]).length,lr>0?(Oe.push(gi(`
`,lr)),Oe.push(ln(ti(ke)))):(Oe.push(qr),Oe.push(ti(ke))),Zn=Mi,ue=1,ye=ee.leadingComments.length;ue<ye;ue++)ke=ee.leadingComments[ue],Mi=ke.range,br=We.substring(Zn[1],Mi[0]),lr=(br.match(/\n/g)||[]).length,Oe.push(gi(`
`,lr)),Oe.push(ln(ti(ke))),Zn=Mi;Es=We.substring(Mi[1],oi[1]),lr=(Es.match(/\n/g)||[]).length,Oe.push(gi(`
`,lr))}else for(ke=ee.leadingComments[0],Oe=[],ve&&ee.type===o.Program&&ee.body.length===0&&Oe.push(`
`),Oe.push(ti(ke)),wn(Rt(Oe).toString())||Oe.push(`
`),ue=1,ye=ee.leadingComments.length;ue<ye;++ue)ke=ee.leadingComments[ue],rn=[ti(ke)],wn(Rt(rn).toString())||rn.push(`
`),Oe.push(ln(rn));Oe.push(ln(at))}if(ee.trailingComments)if(He)ke=ee.trailingComments[0],oi=ke.extendedRange,Mi=ke.range,qr=We.substring(oi[0],Mi[0]),lr=(qr.match(/\n/g)||[]).length,lr>0?(Oe.push(gi(`
`,lr)),Oe.push(ln(ti(ke)))):(Oe.push(qr),Oe.push(ti(ke)));else for(Ot=!wn(Rt(Oe).toString()),kt=gi(" ",Oi(Rt([E,Oe,L]).toString())),ue=0,ye=ee.trailingComments.length;ue<ye;++ue)ke=ee.trailingComments[ue],Ot?(ue===0?Oe=[Oe,L]:Oe=[Oe,kt],Oe.push(ti(ke,kt))):Oe=[Oe,ln(ti(ke))],ue!==ye-1&&!wn(Rt(Oe).toString())&&(Oe=[Oe,`
`]);return Oe}function Fi(ee,Oe,ue){var ye,ke=0;for(ye=ee;ye<Oe;ye++)We[ye]===`
`&&ke++;for(ye=1;ye<ke;ye++)ue.push(se)}function Et(ee,Oe,ue){return Oe<ue?["(",ee,")"]:ee}function ui(ee){var Oe,ue,ye;for(ye=ee.split(/\r\n|\n/),Oe=1,ue=ye.length;Oe<ue;Oe++)ye[Oe]=se+E+ye[Oe];return ye}function Li(ee,Oe){var ue,ye,ke;return ue=ee[le.verbatim],typeof ue=="string"?ye=Et(ui(ue),l.Sequence,Oe):(ye=ui(ue.content),ke=ue.precedence!=null?ue.precedence:l.Sequence,ye=Et(ye,ke,Oe)),Rt(ye,ee)}function cn(){}cn.prototype.maybeBlock=function(ee,Oe){var ue,ye,ke=this;return ye=!le.comment||!ee.leadingComments,ee.type===o.BlockStatement&&ye?[re,this.generateStatement(ee,Oe)]:ee.type===o.EmptyStatement&&ye?";":(pn(function(){ue=[se,ln(ke.generateStatement(ee,Oe))]}),ue)},cn.prototype.maybeBlockSuffix=function(ee,Oe){var ue=wn(Rt(Oe).toString());return ee.type===o.BlockStatement&&(!le.comment||!ee.leadingComments)&&!ue?[Oe,re]:ue?[Oe,E]:[Oe,se,E]};function Bn(ee){return Rt(ee.name,ee)}function pi(ee,Oe){return ee.async?"async"+(Oe?un():re):""}function bi(ee){var Oe=ee.generator&&!le.moz.starlessGenerator;return Oe?"*"+re:""}function Ni(ee){var Oe=ee.value,ue="";return Oe.async&&(ue+=pi(Oe,!ee.computed)),Oe.generator&&(ue+=bi(Oe)?"*":""),ue}cn.prototype.generatePattern=function(ee,Oe,ue){return ee.type===o.Identifier?Bn(ee):this.generateExpression(ee,Oe,ue)},cn.prototype.generateFunctionParams=function(ee){var Oe,ue,ye,ke;if(ke=!1,ee.type===o.ArrowFunctionExpression&&!ee.rest&&(!ee.defaults||ee.defaults.length===0)&&ee.params.length===1&&ee.params[0].type===o.Identifier)ye=[pi(ee,!0),Bn(ee.params[0])];else{for(ye=ee.type===o.ArrowFunctionExpression?[pi(ee,!1)]:[],ye.push("("),ee.defaults&&(ke=!0),Oe=0,ue=ee.params.length;Oe<ue;++Oe)ke&&ee.defaults[Oe]?ye.push(this.generateAssignment(ee.params[Oe],ee.defaults[Oe],"=",l.Assignment,At)):ye.push(this.generatePattern(ee.params[Oe],l.Assignment,At)),Oe+1<ue&&ye.push(","+re);ee.rest&&(ee.params.length&&ye.push(","+re),ye.push("..."),ye.push(Bn(ee.rest))),ye.push(")")}return ye},cn.prototype.generateFunctionBody=function(ee){var Oe,ue;return Oe=this.generateFunctionParams(ee),ee.type===o.ArrowFunctionExpression&&(Oe.push(re),Oe.push("=>")),ee.expression?(Oe.push(re),ue=this.generateExpression(ee.body,l.Assignment,At),ue.toString().charAt(0)==="{"&&(ue=["(",ue,")"]),Oe.push(ue)):Oe.push(this.maybeBlock(ee.body,Qi)),Oe},cn.prototype.generateIterationForStatement=function(ee,Oe,ue){var ye=["for"+(Oe.await?un()+"await":"")+re+"("],ke=this;return pn(function(){Oe.left.type===o.VariableDeclaration?pn(function(){ye.push(Oe.left.kind+un()),ye.push(ke.generateStatement(Oe.left.declarations[0],ei))}):ye.push(ke.generateExpression(Oe.left,l.Call,At)),ye=Bt(ye,ee),ye=[Bt(ye,ke.generateExpression(Oe.right,l.Assignment,At)),")"]}),ye.push(this.maybeBlock(Oe.body,ue)),ye},cn.prototype.generatePropertyKey=function(ee,Oe){var ue=[];return Oe&&ue.push("["),ue.push(this.generateExpression(ee,l.Assignment,At)),Oe&&ue.push("]"),ue},cn.prototype.generateAssignment=function(ee,Oe,ue,ye,ke){return l.Assignment<ye&&(ke|=xt),Et([this.generateExpression(ee,l.Call,ke),re+ue+re,this.generateExpression(Oe,l.Assignment,ke)],l.Assignment,ye)},cn.prototype.semicolon=function(ee){return!de&&ee&Yt?"":";"},cn.Statement={BlockStatement:function(ee,Oe){var ue,ye,ke=["{",se],at=this;return pn(function(){ee.body.length===0&&He&&(ue=ee.range,ue[1]-ue[0]>2&&(ye=We.substring(ue[0]+1,ue[1]-1),ye[0]===`
`&&(ke=["{"]),ke.push(ye)));var Ot,kt,rn,oi;for(oi=zn,Oe&Vt&&(oi|=Ut),Ot=0,kt=ee.body.length;Ot<kt;++Ot)He&&(Ot===0&&(ee.body[0].leadingComments&&(ue=ee.body[0].leadingComments[0].extendedRange,ye=We.substring(ue[0],ue[1]),ye[0]===`
`&&(ke=["{"])),ee.body[0].leadingComments||Fi(ee.range[0],ee.body[0].range[0],ke)),Ot>0&&!ee.body[Ot-1].trailingComments&&!ee.body[Ot].leadingComments&&Fi(ee.body[Ot-1].range[1],ee.body[Ot].range[0],ke)),Ot===kt-1&&(oi|=Yt),ee.body[Ot].leadingComments&&He?rn=at.generateStatement(ee.body[Ot],oi):rn=ln(at.generateStatement(ee.body[Ot],oi)),ke.push(rn),wn(Rt(rn).toString())||He&&Ot<kt-1&&ee.body[Ot+1].leadingComments||ke.push(se),He&&Ot===kt-1&&(ee.body[Ot].trailingComments||Fi(ee.body[Ot].range[1],ee.range[1],ke))}),ke.push(ln("}")),ke},BreakStatement:function(ee,Oe){return ee.label?"break "+ee.label.name+this.semicolon(Oe):"break"+this.semicolon(Oe)},ContinueStatement:function(ee,Oe){return ee.label?"continue "+ee.label.name+this.semicolon(Oe):"continue"+this.semicolon(Oe)},ClassBody:function(ee,Oe){var ue=["{",se],ye=this;return pn(function(ke){var at,Ot;for(at=0,Ot=ee.body.length;at<Ot;++at)ue.push(ke),ue.push(ye.generateExpression(ee.body[at],l.Sequence,At)),at+1<Ot&&ue.push(se)}),wn(Rt(ue).toString())||ue.push(se),ue.push(E),ue.push("}"),ue},ClassDeclaration:function(ee,Oe){var ue,ye;return ue=["class"],ee.id&&(ue=Bt(ue,this.generateExpression(ee.id,l.Sequence,At))),ee.superClass&&(ye=Bt("extends",this.generateExpression(ee.superClass,l.Unary,At)),ue=Bt(ue,ye)),ue.push(re),ue.push(this.generateStatement(ee.body,Dt)),ue},DirectiveStatement:function(ee,Oe){return le.raw&&ee.raw?ee.raw+this.semicolon(Oe):_t(ee.directive)+this.semicolon(Oe)},DoWhileStatement:function(ee,Oe){var ue=Bt("do",this.maybeBlock(ee.body,zn));return ue=this.maybeBlockSuffix(ee.body,ue),Bt(ue,["while"+re+"(",this.generateExpression(ee.test,l.Sequence,At),")"+this.semicolon(Oe)])},CatchClause:function(ee,Oe){var ue,ye=this;return pn(function(){var ke;ee.param?(ue=["catch"+re+"(",ye.generateExpression(ee.param,l.Sequence,At),")"],ee.guard&&(ke=ye.generateExpression(ee.guard,l.Sequence,At),ue.splice(2,0," if ",ke))):ue=["catch"]}),ue.push(this.maybeBlock(ee.body,zn)),ue},DebuggerStatement:function(ee,Oe){return"debugger"+this.semicolon(Oe)},EmptyStatement:function(ee,Oe){return";"},ExportDefaultDeclaration:function(ee,Oe){var ue=["export"],ye;return ye=Oe&Yt?Dt:zn,ue=Bt(ue,"default"),St(ee.declaration)?ue=Bt(ue,this.generateStatement(ee.declaration,ye)):ue=Bt(ue,this.generateExpression(ee.declaration,l.Assignment,At)+this.semicolon(Oe)),ue},ExportNamedDeclaration:function(ee,Oe){var ue=["export"],ye,ke=this;return ye=Oe&Yt?Dt:zn,ee.declaration?Bt(ue,this.generateStatement(ee.declaration,ye)):(ee.specifiers&&(ee.specifiers.length===0?ue=Bt(ue,"{"+re+"}"):ee.specifiers[0].type===o.ExportBatchSpecifier?ue=Bt(ue,this.generateExpression(ee.specifiers[0],l.Sequence,At)):(ue=Bt(ue,"{"),pn(function(at){var Ot,kt;for(ue.push(se),Ot=0,kt=ee.specifiers.length;Ot<kt;++Ot)ue.push(at),ue.push(ke.generateExpression(ee.specifiers[Ot],l.Sequence,At)),Ot+1<kt&&ue.push(","+se)}),wn(Rt(ue).toString())||ue.push(se),ue.push(E+"}")),ee.source?ue=Bt(ue,["from"+re,this.generateExpression(ee.source,l.Sequence,At),this.semicolon(Oe)]):ue.push(this.semicolon(Oe))),ue)},ExportAllDeclaration:function(ee,Oe){return["export"+re,"*"+re,"from"+re,this.generateExpression(ee.source,l.Sequence,At),this.semicolon(Oe)]},ExpressionStatement:function(ee,Oe){var ue,ye;function ke(kt){var rn;return kt.slice(0,5)!=="class"?!1:(rn=kt.charCodeAt(5),rn===123||M.code.isWhiteSpace(rn)||M.code.isLineTerminator(rn))}function at(kt){var rn;return kt.slice(0,8)!=="function"?!1:(rn=kt.charCodeAt(8),rn===40||M.code.isWhiteSpace(rn)||rn===42||M.code.isLineTerminator(rn))}function Ot(kt){var rn,oi,Mi;if(kt.slice(0,5)!=="async"||!M.code.isWhiteSpace(kt.charCodeAt(5)))return!1;for(oi=6,Mi=kt.length;oi<Mi&&M.code.isWhiteSpace(kt.charCodeAt(oi));++oi);return oi===Mi||kt.slice(oi,oi+8)!=="function"?!1:(rn=kt.charCodeAt(oi+8),rn===40||M.code.isWhiteSpace(rn)||rn===42||M.code.isLineTerminator(rn))}return ue=[this.generateExpression(ee.expression,l.Sequence,At)],ye=Rt(ue).toString(),ye.charCodeAt(0)===123||ke(ye)||at(ye)||Ot(ye)||Ee&&Oe&Ut&&ee.expression.type===o.Literal&&typeof ee.expression.value=="string"?ue=["(",ue,")"+this.semicolon(Oe)]:ue.push(this.semicolon(Oe)),ue},ImportDeclaration:function(ee,Oe){var ue,ye,ke=this;return ee.specifiers.length===0?["import",re,this.generateExpression(ee.source,l.Sequence,At),this.semicolon(Oe)]:(ue=["import"],ye=0,ee.specifiers[ye].type===o.ImportDefaultSpecifier&&(ue=Bt(ue,[this.generateExpression(ee.specifiers[ye],l.Sequence,At)]),++ye),ee.specifiers[ye]&&(ye!==0&&ue.push(","),ee.specifiers[ye].type===o.ImportNamespaceSpecifier?ue=Bt(ue,[re,this.generateExpression(ee.specifiers[ye],l.Sequence,At)]):(ue.push(re+"{"),ee.specifiers.length-ye===1?(ue.push(re),ue.push(this.generateExpression(ee.specifiers[ye],l.Sequence,At)),ue.push(re+"}"+re)):(pn(function(at){var Ot,kt;for(ue.push(se),Ot=ye,kt=ee.specifiers.length;Ot<kt;++Ot)ue.push(at),ue.push(ke.generateExpression(ee.specifiers[Ot],l.Sequence,At)),Ot+1<kt&&ue.push(","+se)}),wn(Rt(ue).toString())||ue.push(se),ue.push(E+"}"+re)))),ue=Bt(ue,["from"+re,this.generateExpression(ee.source,l.Sequence,At),this.semicolon(Oe)]),ue)},VariableDeclarator:function(ee,Oe){var ue=Oe&xt?At:si;return ee.init?[this.generateExpression(ee.id,l.Assignment,ue),re,"=",re,this.generateExpression(ee.init,l.Assignment,ue)]:this.generatePattern(ee.id,l.Assignment,ue)},VariableDeclaration:function(ee,Oe){var ue,ye,ke,at,Ot,kt=this;ue=[ee.kind],Ot=Oe&xt?zn:ei;function rn(){for(at=ee.declarations[0],le.comment&&at.leadingComments?(ue.push(`
`),ue.push(ln(kt.generateStatement(at,Ot)))):(ue.push(un()),ue.push(kt.generateStatement(at,Ot))),ye=1,ke=ee.declarations.length;ye<ke;++ye)at=ee.declarations[ye],le.comment&&at.leadingComments?(ue.push(","+se),ue.push(ln(kt.generateStatement(at,Ot)))):(ue.push(","+re),ue.push(kt.generateStatement(at,Ot)))}return ee.declarations.length>1?pn(rn):rn(),ue.push(this.semicolon(Oe)),ue},ThrowStatement:function(ee,Oe){return[Bt("throw",this.generateExpression(ee.argument,l.Sequence,At)),this.semicolon(Oe)]},TryStatement:function(ee,Oe){var ue,ye,ke,at;if(ue=["try",this.maybeBlock(ee.block,zn)],ue=this.maybeBlockSuffix(ee.block,ue),ee.handlers)for(ye=0,ke=ee.handlers.length;ye<ke;++ye)ue=Bt(ue,this.generateStatement(ee.handlers[ye],zn)),(ee.finalizer||ye+1!==ke)&&(ue=this.maybeBlockSuffix(ee.handlers[ye].body,ue));else{for(at=ee.guardedHandlers||[],ye=0,ke=at.length;ye<ke;++ye)ue=Bt(ue,this.generateStatement(at[ye],zn)),(ee.finalizer||ye+1!==ke)&&(ue=this.maybeBlockSuffix(at[ye].body,ue));if(ee.handler)if(Array.isArray(ee.handler))for(ye=0,ke=ee.handler.length;ye<ke;++ye)ue=Bt(ue,this.generateStatement(ee.handler[ye],zn)),(ee.finalizer||ye+1!==ke)&&(ue=this.maybeBlockSuffix(ee.handler[ye].body,ue));else ue=Bt(ue,this.generateStatement(ee.handler,zn)),ee.finalizer&&(ue=this.maybeBlockSuffix(ee.handler.body,ue))}return ee.finalizer&&(ue=Bt(ue,["finally",this.maybeBlock(ee.finalizer,zn)])),ue},SwitchStatement:function(ee,Oe){var ue,ye,ke,at,Ot,kt=this;if(pn(function(){ue=["switch"+re+"(",kt.generateExpression(ee.discriminant,l.Sequence,At),")"+re+"{"+se]}),ee.cases)for(Ot=zn,ke=0,at=ee.cases.length;ke<at;++ke)ke===at-1&&(Ot|=Yt),ye=ln(this.generateStatement(ee.cases[ke],Ot)),ue.push(ye),wn(Rt(ye).toString())||ue.push(se);return ue.push(ln("}")),ue},SwitchCase:function(ee,Oe){var ue,ye,ke,at,Ot,kt=this;return pn(function(){for(ee.test?ue=[Bt("case",kt.generateExpression(ee.test,l.Sequence,At)),":"]:ue=["default:"],ke=0,at=ee.consequent.length,at&&ee.consequent[0].type===o.BlockStatement&&(ye=kt.maybeBlock(ee.consequent[0],zn),ue.push(ye),ke=1),ke!==at&&!wn(Rt(ue).toString())&&ue.push(se),Ot=zn;ke<at;++ke)ke===at-1&&Oe&Yt&&(Ot|=Yt),ye=ln(kt.generateStatement(ee.consequent[ke],Ot)),ue.push(ye),ke+1!==at&&!wn(Rt(ye).toString())&&ue.push(se)}),ue},IfStatement:function(ee,Oe){var ue,ye,ke,at=this;return pn(function(){ue=["if"+re+"(",at.generateExpression(ee.test,l.Sequence,At),")"]}),ke=Oe&Yt,ye=zn,ke&&(ye|=Yt),ee.alternate?(ue.push(this.maybeBlock(ee.consequent,zn)),ue=this.maybeBlockSuffix(ee.consequent,ue),ee.alternate.type===o.IfStatement?ue=Bt(ue,["else ",this.generateStatement(ee.alternate,ye)]):ue=Bt(ue,Bt("else",this.maybeBlock(ee.alternate,ye)))):ue.push(this.maybeBlock(ee.consequent,ye)),ue},ForStatement:function(ee,Oe){var ue,ye=this;return pn(function(){ue=["for"+re+"("],ee.init?ee.init.type===o.VariableDeclaration?ue.push(ye.generateStatement(ee.init,ei)):(ue.push(ye.generateExpression(ee.init,l.Sequence,si)),ue.push(";")):ue.push(";"),ee.test&&(ue.push(re),ue.push(ye.generateExpression(ee.test,l.Sequence,At))),ue.push(";"),ee.update&&(ue.push(re),ue.push(ye.generateExpression(ee.update,l.Sequence,At))),ue.push(")")}),ue.push(this.maybeBlock(ee.body,Oe&Yt?Dt:zn)),ue},ForInStatement:function(ee,Oe){return this.generateIterationForStatement("in",ee,Oe&Yt?Dt:zn)},ForOfStatement:function(ee,Oe){return this.generateIterationForStatement("of",ee,Oe&Yt?Dt:zn)},LabeledStatement:function(ee,Oe){return[ee.label.name+":",this.maybeBlock(ee.body,Oe&Yt?Dt:zn)]},Program:function(ee,Oe){var ue,ye,ke,at,Ot;for(at=ee.body.length,ue=[ve&&at>0?`
`:""],Ot=fi,ke=0;ke<at;++ke)!ve&&ke===at-1&&(Ot|=Yt),He&&(ke===0&&(ee.body[0].leadingComments||Fi(ee.range[0],ee.body[ke].range[0],ue)),ke>0&&!ee.body[ke-1].trailingComments&&!ee.body[ke].leadingComments&&Fi(ee.body[ke-1].range[1],ee.body[ke].range[0],ue)),ye=ln(this.generateStatement(ee.body[ke],Ot)),ue.push(ye),ke+1<at&&!wn(Rt(ye).toString())&&(He&&ee.body[ke+1].leadingComments||ue.push(se)),He&&ke===at-1&&(ee.body[ke].trailingComments||Fi(ee.body[ke].range[1],ee.range[1],ue));return ue},FunctionDeclaration:function(ee,Oe){return[pi(ee,!0),"function",bi(ee)||un(),ee.id?Bn(ee.id):"",this.generateFunctionBody(ee)]},ReturnStatement:function(ee,Oe){return ee.argument?[Bt("return",this.generateExpression(ee.argument,l.Sequence,At)),this.semicolon(Oe)]:["return"+this.semicolon(Oe)]},WhileStatement:function(ee,Oe){var ue,ye=this;return pn(function(){ue=["while"+re+"(",ye.generateExpression(ee.test,l.Sequence,At),")"]}),ue.push(this.maybeBlock(ee.body,Oe&Yt?Dt:zn)),ue},WithStatement:function(ee,Oe){var ue,ye=this;return pn(function(){ue=["with"+re+"(",ye.generateExpression(ee.object,l.Sequence,At),")"]}),ue.push(this.maybeBlock(ee.body,Oe&Yt?Dt:zn)),ue}},Bi(cn.prototype,cn.Statement),cn.Expression={SequenceExpression:function(ee,Oe,ue){var ye,ke,at;for(l.Sequence<Oe&&(ue|=xt),ye=[],ke=0,at=ee.expressions.length;ke<at;++ke)ye.push(this.generateExpression(ee.expressions[ke],l.Assignment,ue)),ke+1<at&&ye.push(","+re);return Et(ye,l.Sequence,Oe)},AssignmentExpression:function(ee,Oe,ue){return this.generateAssignment(ee.left,ee.right,ee.operator,Oe,ue)},ArrowFunctionExpression:function(ee,Oe,ue){return Et(this.generateFunctionBody(ee),l.ArrowFunction,Oe)},ConditionalExpression:function(ee,Oe,ue){return l.Conditional<Oe&&(ue|=xt),Et([this.generateExpression(ee.test,l.Coalesce,ue),re+"?"+re,this.generateExpression(ee.consequent,l.Assignment,ue),re+":"+re,this.generateExpression(ee.alternate,l.Assignment,ue)],l.Conditional,Oe)},LogicalExpression:function(ee,Oe,ue){return ee.operator==="??"&&(ue|=ai),this.BinaryExpression(ee,Oe,ue)},BinaryExpression:function(ee,Oe,ue){var ye,ke,at,Ot,kt,rn;return Ot=d[ee.operator],ke=ee.operator==="**"?l.Postfix:Ot,at=ee.operator==="**"?Ot:Ot+1,Ot<Oe&&(ue|=xt),kt=this.generateExpression(ee.left,ke,ue),rn=kt.toString(),rn.charCodeAt(rn.length-1)===47&&M.code.isIdentifierPartES5(ee.operator.charCodeAt(0))?ye=[kt,un(),ee.operator]:ye=Bt(kt,ee.operator),kt=this.generateExpression(ee.right,at,ue),ee.operator==="/"&&kt.toString().charAt(0)==="/"||ee.operator.slice(-1)==="<"&&kt.toString().slice(0,3)==="!--"?(ye.push(un()),ye.push(kt)):ye=Bt(ye,kt),ee.operator==="in"&&!(ue&xt)?["(",ye,")"]:(ee.operator==="||"||ee.operator==="&&")&&ue&ai?["(",ye,")"]:Et(ye,Ot,Oe)},CallExpression:function(ee,Oe,ue){var ye,ke,at;for(ye=[this.generateExpression(ee.callee,l.Call,di)],ee.optional&&ye.push("?."),ye.push("("),ke=0,at=ee.arguments.length;ke<at;++ke)ye.push(this.generateExpression(ee.arguments[ke],l.Assignment,At)),ke+1<at&&ye.push(","+re);return ye.push(")"),ue&$t?Et(ye,l.Call,Oe):["(",ye,")"]},ChainExpression:function(ee,Oe,ue){l.OptionalChaining<Oe&&(ue|=$t);var ye=this.generateExpression(ee.expression,l.OptionalChaining,ue);return Et(ye,l.OptionalChaining,Oe)},NewExpression:function(ee,Oe,ue){var ye,ke,at,Ot,kt;if(ke=ee.arguments.length,kt=ue&qt&&!ae&&ke===0?Xn:hn,ye=Bt("new",this.generateExpression(ee.callee,l.New,kt)),!(ue&qt)||ae||ke>0){for(ye.push("("),at=0,Ot=ke;at<Ot;++at)ye.push(this.generateExpression(ee.arguments[at],l.Assignment,At)),at+1<Ot&&ye.push(","+re);ye.push(")")}return Et(ye,l.New,Oe)},MemberExpression:function(ee,Oe,ue){var ye,ke;return ye=[this.generateExpression(ee.object,l.Call,ue&$t?di:hn)],ee.computed?(ee.optional&&ye.push("?."),ye.push("["),ye.push(this.generateExpression(ee.property,l.Sequence,ue&$t?At:Xn)),ye.push("]")):(!ee.optional&&ee.object.type===o.Literal&&typeof ee.object.value=="number"&&(ke=Rt(ye).toString(),ke.indexOf(".")<0&&!/[eExX]/.test(ke)&&M.code.isDecimalDigit(ke.charCodeAt(ke.length-1))&&!(ke.length>=2&&ke.charCodeAt(0)===48)&&ye.push(" ")),ye.push(ee.optional?"?.":"."),ye.push(Bn(ee.property))),Et(ye,l.Member,Oe)},MetaProperty:function(ee,Oe,ue){var ye;return ye=[],ye.push(typeof ee.meta=="string"?ee.meta:Bn(ee.meta)),ye.push("."),ye.push(typeof ee.property=="string"?ee.property:Bn(ee.property)),Et(ye,l.Member,Oe)},UnaryExpression:function(ee,Oe,ue){var ye,ke,at,Ot,kt;return ke=this.generateExpression(ee.argument,l.Unary,At),re===""?ye=Bt(ee.operator,ke):(ye=[ee.operator],ee.operator.length>2?ye=Bt(ye,ke):(Ot=Rt(ye).toString(),kt=Ot.charCodeAt(Ot.length-1),at=ke.toString().charCodeAt(0),((kt===43||kt===45)&&kt===at||M.code.isIdentifierPartES5(kt)&&M.code.isIdentifierPartES5(at))&&ye.push(un()),ye.push(ke))),Et(ye,l.Unary,Oe)},YieldExpression:function(ee,Oe,ue){var ye;return ee.delegate?ye="yield*":ye="yield",ee.argument&&(ye=Bt(ye,this.generateExpression(ee.argument,l.Yield,At))),Et(ye,l.Yield,Oe)},AwaitExpression:function(ee,Oe,ue){var ye=Bt(ee.all?"await*":"await",this.generateExpression(ee.argument,l.Await,At));return Et(ye,l.Await,Oe)},UpdateExpression:function(ee,Oe,ue){return ee.prefix?Et([ee.operator,this.generateExpression(ee.argument,l.Unary,At)],l.Unary,Oe):Et([this.generateExpression(ee.argument,l.Postfix,At),ee.operator],l.Postfix,Oe)},FunctionExpression:function(ee,Oe,ue){var ye=[pi(ee,!0),"function"];return ee.id?(ye.push(bi(ee)||un()),ye.push(Bn(ee.id))):ye.push(bi(ee)||re),ye.push(this.generateFunctionBody(ee)),ye},ArrayPattern:function(ee,Oe,ue){return this.ArrayExpression(ee,Oe,ue,!0)},ArrayExpression:function(ee,Oe,ue,ye){var ke,at,Ot=this;return ee.elements.length?(at=ye?!1:ee.elements.length>1,ke=["[",at?se:""],pn(function(kt){var rn,oi;for(rn=0,oi=ee.elements.length;rn<oi;++rn)ee.elements[rn]?(ke.push(at?kt:""),ke.push(Ot.generateExpression(ee.elements[rn],l.Assignment,At))):(at&&ke.push(kt),rn+1===oi&&ke.push(",")),rn+1<oi&&ke.push(","+(at?se:re))}),at&&!wn(Rt(ke).toString())&&ke.push(se),ke.push(at?E:""),ke.push("]"),ke):"[]"},RestElement:function(ee,Oe,ue){return"..."+this.generatePattern(ee.argument)},ClassExpression:function(ee,Oe,ue){var ye,ke;return ye=["class"],ee.id&&(ye=Bt(ye,this.generateExpression(ee.id,l.Sequence,At))),ee.superClass&&(ke=Bt("extends",this.generateExpression(ee.superClass,l.Unary,At)),ye=Bt(ye,ke)),ye.push(re),ye.push(this.generateStatement(ee.body,Dt)),ye},MethodDefinition:function(ee,Oe,ue){var ye,ke;return ee.static?ye=["static"+re]:ye=[],ee.kind==="get"||ee.kind==="set"?ke=[Bt(ee.kind,this.generatePropertyKey(ee.key,ee.computed)),this.generateFunctionBody(ee.value)]:ke=[Ni(ee),this.generatePropertyKey(ee.key,ee.computed),this.generateFunctionBody(ee.value)],Bt(ye,ke)},Property:function(ee,Oe,ue){return ee.kind==="get"||ee.kind==="set"?[ee.kind,un(),this.generatePropertyKey(ee.key,ee.computed),this.generateFunctionBody(ee.value)]:ee.shorthand?ee.value.type==="AssignmentPattern"?this.AssignmentPattern(ee.value,l.Sequence,At):this.generatePropertyKey(ee.key,ee.computed):ee.method?[Ni(ee),this.generatePropertyKey(ee.key,ee.computed),this.generateFunctionBody(ee.value)]:[this.generatePropertyKey(ee.key,ee.computed),":"+re,this.generateExpression(ee.value,l.Assignment,At)]},ObjectExpression:function(ee,Oe,ue){var ye,ke,at,Ot=this;return ee.properties.length?(ye=ee.properties.length>1,pn(function(){at=Ot.generateExpression(ee.properties[0],l.Sequence,At)}),!ye&&!Ti(Rt(at).toString())?["{",re,at,re,"}"]:(pn(function(kt){var rn,oi;if(ke=["{",se,kt,at],ye)for(ke.push(","+se),rn=1,oi=ee.properties.length;rn<oi;++rn)ke.push(kt),ke.push(Ot.generateExpression(ee.properties[rn],l.Sequence,At)),rn+1<oi&&ke.push(","+se)}),wn(Rt(ke).toString())||ke.push(se),ke.push(E),ke.push("}"),ke)):"{}"},AssignmentPattern:function(ee,Oe,ue){return this.generateAssignment(ee.left,ee.right,"=",Oe,ue)},ObjectPattern:function(ee,Oe,ue){var ye,ke,at,Ot,kt,rn=this;if(!ee.properties.length)return"{}";if(Ot=!1,ee.properties.length===1)kt=ee.properties[0],kt.type===o.Property&&kt.value.type!==o.Identifier&&(Ot=!0);else for(ke=0,at=ee.properties.length;ke<at;++ke)if(kt=ee.properties[ke],kt.type===o.Property&&!kt.shorthand){Ot=!0;break}return ye=["{",Ot?se:""],pn(function(oi){var Mi,Zn;for(Mi=0,Zn=ee.properties.length;Mi<Zn;++Mi)ye.push(Ot?oi:""),ye.push(rn.generateExpression(ee.properties[Mi],l.Sequence,At)),Mi+1<Zn&&ye.push(","+(Ot?se:re))}),Ot&&!wn(Rt(ye).toString())&&ye.push(se),ye.push(Ot?E:""),ye.push("}"),ye},ThisExpression:function(ee,Oe,ue){return"this"},Super:function(ee,Oe,ue){return"super"},Identifier:function(ee,Oe,ue){return Bn(ee)},ImportDefaultSpecifier:function(ee,Oe,ue){return Bn(ee.id||ee.local)},ImportNamespaceSpecifier:function(ee,Oe,ue){var ye=["*"],ke=ee.id||ee.local;return ke&&ye.push(re+"as"+un()+Bn(ke)),ye},ImportSpecifier:function(ee,Oe,ue){var ye=ee.imported,ke=[ye.name],at=ee.local;return at&&at.name!==ye.name&&ke.push(un()+"as"+un()+Bn(at)),ke},ExportSpecifier:function(ee,Oe,ue){var ye=ee.local,ke=[ye.name],at=ee.exported;return at&&at.name!==ye.name&&ke.push(un()+"as"+un()+Bn(at)),ke},Literal:function(ee,Oe,ue){var ye;if(ee.hasOwnProperty("raw")&&_e&&le.raw)try{if(ye=_e(ee.raw).body[0].expression,ye.type===o.Literal&&ye.value===ee.value)return ee.raw}catch{}return ee.regex?"/"+ee.regex.pattern+"/"+ee.regex.flags:typeof ee.value=="bigint"?ee.value.toString()+"n":ee.bigint?ee.bigint+"n":ee.value===null?"null":typeof ee.value=="string"?Ft(ee.value):typeof ee.value=="number"?Di(ee.value):typeof ee.value=="boolean"?ee.value?"true":"false":Je(ee.value)},GeneratorExpression:function(ee,Oe,ue){return this.ComprehensionExpression(ee,Oe,ue)},ComprehensionExpression:function(ee,Oe,ue){var ye,ke,at,Ot,kt=this;return ye=ee.type===o.GeneratorExpression?["("]:["["],le.moz.comprehensionExpressionStartsWithAssignment&&(Ot=this.generateExpression(ee.body,l.Assignment,At),ye.push(Ot)),ee.blocks&&pn(function(){for(ke=0,at=ee.blocks.length;ke<at;++ke)Ot=kt.generateExpression(ee.blocks[ke],l.Sequence,At),ke>0||le.moz.comprehensionExpressionStartsWithAssignment?ye=Bt(ye,Ot):ye.push(Ot)}),ee.filter&&(ye=Bt(ye,"if"+re),Ot=this.generateExpression(ee.filter,l.Sequence,At),ye=Bt(ye,["(",Ot,")"])),le.moz.comprehensionExpressionStartsWithAssignment||(Ot=this.generateExpression(ee.body,l.Assignment,At),ye=Bt(ye,Ot)),ye.push(ee.type===o.GeneratorExpression?")":"]"),ye},ComprehensionBlock:function(ee,Oe,ue){var ye;return ee.left.type===o.VariableDeclaration?ye=[ee.left.kind,un(),this.generateStatement(ee.left.declarations[0],ei)]:ye=this.generateExpression(ee.left,l.Call,At),ye=Bt(ye,ee.of?"of":"in"),ye=Bt(ye,this.generateExpression(ee.right,l.Sequence,At)),["for"+re+"(",ye,")"]},SpreadElement:function(ee,Oe,ue){return["...",this.generateExpression(ee.argument,l.Assignment,At)]},TaggedTemplateExpression:function(ee,Oe,ue){var ye=di;ue&$t||(ye=hn);var ke=[this.generateExpression(ee.tag,l.Call,ye),this.generateExpression(ee.quasi,l.Primary,ft)];return Et(ke,l.TaggedTemplate,Oe)},TemplateElement:function(ee,Oe,ue){return ee.value.raw},TemplateLiteral:function(ee,Oe,ue){var ye,ke,at;for(ye=["`"],ke=0,at=ee.quasis.length;ke<at;++ke)ye.push(this.generateExpression(ee.quasis[ke],l.Primary,At)),ke+1<at&&(ye.push("${"+re),ye.push(this.generateExpression(ee.expressions[ke],l.Sequence,At)),ye.push(re+"}"));return ye.push("`"),ye},ModuleSpecifier:function(ee,Oe,ue){return this.Literal(ee,Oe,ue)},ImportExpression:function(ee,Oe,ue){return Et(["import(",this.generateExpression(ee.source,l.Assignment,At),")"],l.Call,Oe)}},Bi(cn.prototype,cn.Expression),cn.prototype.generateExpression=function(ee,Oe,ue){var ye,ke;return ke=ee.type||o.Property,le.verbatim&&ee.hasOwnProperty(le.verbatim)?Li(ee,Oe):(ye=this[ke](ee,Oe,ue),le.comment&&(ye=ii(ee,ye)),Rt(ye,ee))},cn.prototype.generateStatement=function(ee,Oe){var ue,ye;return ue=this[ee.type](ee,Oe),le.comment&&(ue=ii(ee,ue)),ye=Rt(ue).toString(),ee.type===o.Program&&!ve&&se===""&&ye.charAt(ye.length-1)===`
`&&(ue=Ce?Rt(ue).replaceRight(/\s+$/,""):ye.replace(/\s+$/,"")),Rt(ue,ee)};function Hi(ee){var Oe;if(Oe=new cn,St(ee))return Oe.generateStatement(ee,zn);if(Nt(ee))return Oe.generateExpression(ee,l.Sequence,At);throw new Error("Unknown node type: "+ee.type)}function Zi(ee,Oe){var ue=Ei(),ye,ke;return Oe!=null?(typeof Oe.indent=="string"&&(ue.format.indent.style=Oe.indent),typeof Oe.base=="number"&&(ue.format.indent.base=Oe.base),Oe=vi(ue,Oe),L=Oe.format.indent.style,typeof Oe.base=="string"?E=Oe.base:E=gi(L,Oe.format.indent.base)):(Oe=ue,L=Oe.format.indent.style,E=gi(L,Oe.format.indent.base)),R=Oe.format.json,Z=Oe.format.renumber,q=R?!1:Oe.format.hexadecimal,K=R?"double":Oe.format.quotes,U=Oe.format.escapeless,se=Oe.format.newline,re=Oe.format.space,Oe.format.compact&&(se=re=L=E=""),ae=Oe.format.parentheses,de=Oe.format.semicolons,ve=Oe.format.safeConcatenation,Ee=Oe.directive,_e=R?null:Oe.parse,Ce=Oe.sourceMap,We=Oe.sourceCode,He=Oe.format.preserveBlankLines&&We!==null,le=Oe,Ce&&(e.browser?b=commonjsGlobal.sourceMap.SourceNode:b=requireSourceMap().SourceNode),ye=Hi(ee),Ce?(ke=ye.toStringWithSourceMap({file:Oe.file,sourceRoot:Oe.sourceMapRoot}),Oe.sourceContent&&ke.map.setSourceContent(Oe.sourceMap,Oe.sourceContent),Oe.sourceMapWithCode?ke:ke.map.toString()):(ke={code:ye.toString(),map:null},Oe.sourceMapWithCode?ke:ke.code)}Mt={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},ut=Ei().format,e.version=require$$3.version,e.generate=Zi,e.attachComments=S.attachComments,e.Precedence=vi({},l),e.browser=!1,e.FORMAT_MINIFY=Mt,e.FORMAT_DEFAULTS=ut})()})(escodegen$1)),escodegen$1}var escodegenExports=requireEscodegen();const escodegen=getDefaultExportFromCjs(escodegenExports);class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:o=>this.replacement=o}}replace(o,l,d,b){o&&l&&(d!=null?o[l][d]=b:o[l]=b)}remove(o,l,d){o&&l&&(d!=null?o[l].splice(d,1):delete o[l])}}class SyncWalker extends WalkerBase{constructor(o,l){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:d=>this.replacement=d},this.enter=o,this.leave=l}visit(o,l,d,b){if(o){if(this.enter){const M=this.should_skip,E=this.should_remove,L=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,o,l,d,b),this.replacement&&(o=this.replacement,this.replace(l,d,b,o)),this.should_remove&&this.remove(l,d,b);const R=this.should_skip,Z=this.should_remove;if(this.should_skip=M,this.should_remove=E,this.replacement=L,R)return o;if(Z)return null}let S;for(S in o){const M=o[S];if(M&&typeof M=="object")if(Array.isArray(M)){const E=M;for(let L=0;L<E.length;L+=1){const R=E[L];isNode(R)&&(this.visit(R,o,S,L)||L--)}}else isNode(M)&&this.visit(M,o,S,null)}if(this.leave){const M=this.replacement,E=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,o,l,d,b),this.replacement&&(o=this.replacement,this.replace(l,d,b,o)),this.should_remove&&this.remove(l,d,b);const L=this.should_remove;if(this.replacement=M,this.should_remove=E,L)return null}}return o}}function isNode(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function walk(e,{enter:o,leave:l}){return new SyncWalker(o,l).visit(e,null)}let widgetMethods=[],languages=new Map;function transpiler(e,o={}){const{wrapAsync:l=!1,addReturn:d=!0,emitMiniLocations:b=!0,emitWidgets:S=!0}=o;let M=parse(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),E=[];const L=(K,U)=>{const se=languages.get("minilang");if(se){const re=`[${K}]`,ae=se.getLocations(re,U.start);E=E.concat(ae)}else{const re=getLeafLocations(`"${K}"`,U.start,e);E=E.concat(re)}};let R=[];walk(M,{enter(K,U){if(isLanguageLiteral(K)){const{name:se}=K.tag,re=languages.get(se),ae=K.quasi.quasis[0].value.raw,de=K.quasi.start+1;if(b){const ve=re.getLocations(ae,de);E=E.concat(ve)}return this.skip(),this.replace(languageWithLocation(se,ae,de))}if(isTemplateLiteral(K,"tidal")){const se=K.quasi.quasis[0].value.raw,re=K.quasi.start+1;if(b){const ae=collectHaskellMiniLocations(se,re);E=E.concat(ae)}return this.skip(),this.replace(tidalWithLocation(se,re))}if(isBackTickString(K,U)){const{quasis:se}=K,{raw:re}=se[0].value;return this.skip(),b&&L(re,K),this.replace(miniWithLocation(re,K))}if(isStringWithDoubleQuotes(K)){const{value:se}=K;return this.skip(),b&&L(se,K),this.replace(miniWithLocation(se,K))}if(isSliderFunction(K))return S&&R.push({from:K.arguments[0].start,to:K.arguments[0].end,value:K.arguments[0].raw,min:K.arguments[1]?.value??0,max:K.arguments[2]?.value??1,step:K.arguments[3]?.value,type:"slider"}),this.replace(sliderWithLocation(K));if(isWidgetMethod(K)){const se=K.callee.property.name,re=R.filter(de=>de.type===se).length,ae={to:K.end,index:re,type:se,id:o.id};return S&&R.push(ae),this.replace(widgetWithLocation(K,ae))}if(isBareSamplesCall(K,U))return this.replace(withAwait(K));if(isLabelStatement(K))return this.replace(labelToP(K))},leave(K,U,se,re){}});let{body:Z}=M;if(!Z.length)console.warn("empty body -> fallback to silence"),Z.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!Z?.[Z.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(d){const{expression:K}=Z[Z.length-1];Z[Z.length-1]={type:"ReturnStatement",argument:K}}let q=escodegen.generate(M);return l&&(q=`(async ()=>{${q}})()`),b?{output:q,miniLocations:E,widgets:R}:{output:q}}function isStringWithDoubleQuotes(e,o,l){return e.type!=="Literal"?!1:e.raw[0]==='"'}function isBackTickString(e,o){return e.type==="TemplateLiteral"&&o.type!=="TaggedTemplateExpression"}function miniWithLocation(e,o){const{start:l}=o,d=languages.get("minilang");let b="m";return d&&d.name&&(b=d.name),{type:"CallExpression",callee:{type:"Identifier",name:b},arguments:[{type:"Literal",value:e},{type:"Literal",value:l}],optional:!1}}function isSliderFunction(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function isWidgetMethod(e){return e.type==="CallExpression"&&widgetMethods.includes(e.callee.property?.name)}function sliderWithLocation(e){const o="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:o,raw:o}),e.callee.name="sliderWithID",e}function getWidgetID(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function widgetWithLocation(e,o){const l=getWidgetID(o);return e.arguments.unshift({type:"Literal",value:l,raw:l}),e}function isBareSamplesCall(e,o){return e.type==="CallExpression"&&e.callee.name==="samples"&&o.type!=="AwaitExpression"}function withAwait(e){return{type:"AwaitExpression",argument:e}}function isLabelStatement(e){return e.type==="LabeledStatement"}function labelToP(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function isLanguageLiteral(e){return e.type==="TaggedTemplateExpression"&&languages.has(e.tag.name)}function isTemplateLiteral(e,o){return e.type==="TaggedTemplateExpression"&&e.tag.name===o}function collectHaskellMiniLocations(e,o){return e.split("").reduce((l,d,b)=>(d!=='"'||(!l.length||l[l.length-1].length>1?l.push([b+1]):l[l.length-1].push(b)),l),[]).map(([l,d])=>{const b=e.slice(l,d);return getLeafLocations(`"${b}"`,o+l-1)}).flat()}function tidalWithLocation(e,o){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:o}],optional:!1}}function languageWithLocation(e,o,l){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:o},{type:"Literal",value:l}],optional:!1}}const gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let defaultSoundfontUrl="https://felixroos.github.io/webaudiofontdata/sound",soundfontUrl=defaultSoundfontUrl,loadCache={};async function loadFont(name){if(loadCache[name])return loadCache[name];const load=async()=>{const url=`${soundfontUrl}/${name}.js`,preset=await fetch(url).then(e=>e.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache[name]=load(),loadCache[name]}async function getFontBufferSource(e,o,l){let{note:d="c3",freq:b}=o,S;if(b)S=freqToMidi$2(b);else if(typeof d=="string")S=noteToMidi$1(d);else if(typeof d=="number")S=d;else throw new Error(`unexpected "note" type "${typeof d}"`);const{buffer:M,zone:E}=await getFontPitch(e,S,l),L=l.createBufferSource();L.buffer=M;const R=E.originalPitch-100*E.coarseTune-E.fineTune,Z=1*Math.pow(2,(100*S-R)/1200);return L.playbackRate.value=Z,E.loopStart>1&&E.loopStart<E.loopEnd&&(L.loop=!0,L.loopStart=E.loopStart/E.sampleRate,L.loopEnd=E.loopEnd/E.sampleRate),L}let bufferCache={};async function getFontPitch(e,o,l){const d=`${e}:::${o}`;if(bufferCache[d])return bufferCache[d];const b=async()=>{const S=await loadFont(e);if(!S)throw new Error(`Could not load soundfont ${e}`);const M=findZone(S,o);if(!M)throw new Error("no soundfont zone found for preset ",e,"pitch",o);const E=await getBuffer(M,l);if(!E)throw new Error(`no soundfont buffer found for preset ${e}, pitch: ${o}`);return{buffer:E,zone:M}};return bufferCache[d]=b(),bufferCache[d]}function findZone(e,o){return e.find(l=>l.keyRangeLow<=o&&l.keyRangeHigh+1>=o)}async function getBuffer(e,o){if(e.sample){console.warn("zone.sample untested!");const d=atob(e.sample);e.buffer=o.createBuffer(1,d.length/2,e.sampleRate);const b=e.buffer.getChannelData(0);let S,M,E;for(var l=0;l<d.length/2;l++)S=d.charCodeAt(l*2),M=d.charCodeAt(l*2+1),S<0&&(S=256+S),M<0&&(M=256+M),E=M*256+S,E>=65536/2&&(E=E-65536),b[l]=E/65536}else if(e.file){const d=e.file.length,b=new ArrayBuffer(d),S=new Uint8Array(b),M=atob(e.file);let E;for(let L=0;L<M.length;L++)E=M.charCodeAt(L),S[L]=E;return new Promise(L=>o.decodeAudioData(b,L))}}function registerSoundfonts$1(){Object.entries(gm).forEach(([e,o])=>{registerSound(e,async(l,d,b)=>{const[S,M,E,L]=getADSRValues([d.attack,d.decay,d.sustain,d.release]),{duration:R}=d,Z=getSoundIndex$1(d.n,o.length),q=o[Z],K=getAudioContext(),U=await getFontBufferSource(q,d,K);U.start(l);const se=K.createGain(),re=U.connect(se),ae=l+R;getParamADSR(re.gain,S,M,E,L,0,.3,l,ae,"linear");let de=ae+L+.01,ve=getVibratoOscillator(U.detune,d,l);getPitchEnvelope(U.detune,d,l,ae),U.stop(de);const Ee=le=>{};return U.onended=()=>{U.disconnect(),ve?.stop(),re.disconnect(),b()},{node:re,stop:Ee}},{type:"soundfont",prebake:!0,fonts:o})})}var SoundFont2={exports:{}},hasRequiredSoundFont2;function requireSoundFont2(){return hasRequiredSoundFont2||(hasRequiredSoundFont2=1,(function(e,o){(function(l,d){e.exports=d()})(window,function(){return(function(l){var d={};function b(S){if(d[S])return d[S].exports;var M=d[S]={i:S,l:!1,exports:{}};return l[S].call(M.exports,M,M.exports,b),M.l=!0,M.exports}return b.m=l,b.c=d,b.d=function(S,M,E){b.o(S,M)||Object.defineProperty(S,M,{enumerable:!0,get:E})},b.r=function(S){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})},b.t=function(S,M){if(1&M&&(S=b(S)),8&M||4&M&&typeof S=="object"&&S&&S.__esModule)return S;var E=Object.create(null);if(b.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:S}),2&M&&typeof S!="string")for(var L in S)b.d(E,L,function(R){return S[R]}.bind(null,L));return E},b.n=function(S){var M=S&&S.__esModule?function(){return S.default}:function(){return S};return b.d(M,"a",M),M},b.o=function(S,M){return Object.prototype.hasOwnProperty.call(S,M)},b.p="",b(b.s="./src/index.ts")})({"./src/chunk.ts":function(l,d,b){b.r(d),b.d(d,"SF2Chunk",function(){return U});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=b("./src/chunks/index.ts");function L(se){return(L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re})(se)}function R(se,re){for(var ae=0;ae<re.length;ae++){var de=re[ae];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(se,de.key,de)}}function Z(se){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(re){return re.__proto__||Object.getPrototypeOf(re)})(se)}function q(se,re){return(q=Object.setPrototypeOf||function(ae,de){return ae.__proto__=de,ae})(se,re)}function K(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}var U=(function(se){function re(ve){var Ee,le,_e,Ce,We,He;return(function(Mt,ut){if(!(Mt instanceof ut))throw new TypeError("Cannot call a class as a function")})(this,re),le=this,Ee=!(_e=Z(re).call(this,ve.id,ve.length,ve.buffer,ve.subChunks))||L(_e)!=="object"&&typeof _e!="function"?K(le):_e,Ce=K(K(Ee)),He=void 0,(We="subChunks")in Ce?Object.defineProperty(Ce,We,{value:He,enumerable:!0,configurable:!0,writable:!0}):Ce[We]=He,Ee.subChunks=ve.subChunks.map(function(Mt){return new re(Mt)}),Ee}var ae,de;return(function(ve,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");ve.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:ve,writable:!0,configurable:!0}}),Ee&&q(ve,Ee)})(re,S.RIFFChunk),ae=re,(de=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new S.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var ve=this.subChunks.reduce(function(Ee,le){if(le.id==="ifil"||le.id==="iver"){if(le.length!==M.SF_VERSION_LENGTH)throw new S.ParseError("Invalid size for the '".concat(le.id,"' sub-chunk"));Ee[le.id]="".concat(le.getInt16(),".").concat(le.getInt16(2))}else Ee[le.id]=le.getString();return Ee},{});if(!ve.ifil)throw new S.ParseError("Missing required 'ifil' sub-chunk");if(!ve.INAM)throw new S.ParseError("Missing required 'INAM' sub-chunk");return{version:ve.ifil,soundEngine:ve.isng||"EMU8000",name:ve.INAM,rom:ve.irom,romVersion:ve.iver,creationDate:ve.ICRD,author:ve.IENG,product:ve.IPRD,copyright:ve.ICOP,comments:ve.ICMT,createdBy:ve.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new S.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var ve=this.subChunks[0];if(ve.id!=="smpl")throw new S.ParseError("Invalid chunk signature","'smpl'","'".concat(ve.id,"'"));return ve.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new S.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(E.getPresetHeaders)(this.subChunks[0]),presetZones:Object(E.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(E.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(E.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(E.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(E.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(E.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(E.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(E.getSampleHeaders)(this.subChunks[8])}}}])&&R(ae.prototype,de),re})()},"./src/chunks/generators.ts":function(l,d,b){b.r(d),b.d(d,"getGenerators",function(){return q});var S=b("./src/riff/index.ts"),M=b("./src/types/index.ts"),E=b("./src/constants.ts"),L=[M.GeneratorType.StartAddrsOffset,M.GeneratorType.EndAddrsOffset,M.GeneratorType.StartLoopAddrsOffset,M.GeneratorType.EndLoopAddrsOffset,M.GeneratorType.StartAddrsCoarseOffset,M.GeneratorType.EndAddrsCoarseOffset,M.GeneratorType.StartLoopAddrsCoarseOffset,M.GeneratorType.KeyNum,M.GeneratorType.Velocity,M.GeneratorType.EndLoopAddrsCoarseOffset,M.GeneratorType.SampleModes,M.GeneratorType.ExclusiveClass,M.GeneratorType.OverridingRootKey],R=[M.GeneratorType.Unused1,M.GeneratorType.Unused2,M.GeneratorType.Unused3,M.GeneratorType.Unused4,M.GeneratorType.Reserved1,M.GeneratorType.Reserved2,M.GeneratorType.Reserved3],Z=[M.GeneratorType.KeyRange,M.GeneratorType.VelRange],q=function(K,U){if(K.id!==U)throw new S.ParseError("Unexpected chunk ID","'".concat(U,"'"),"'".concat(K.id,"'"));if(K.length%E.SF_GENERATOR_SIZE)throw new S.ParseError("Invalid size for the '".concat(U,"' sub-chunk"));return K.iterate(function(se){var re=se.getInt16();return M.GeneratorType[re]?U==="pgen"&&L.includes(re)||U==="igen"&&R.includes(re)?null:Z.includes(re)?{id:re,range:{lo:se.getByte(),hi:se.getByte()}}:{id:re,value:se.getInt16BE()}:null})}},"./src/chunks/index.ts":function(l,d,b){b.r(d);var S=b("./src/chunks/instruments/index.ts");b.d(d,"getInstrumentHeaders",function(){return S.getInstrumentHeaders});var M=b("./src/chunks/presets/index.ts");b.d(d,"getPresetHeaders",function(){return M.getPresetHeaders});var E=b("./src/chunks/samples/index.ts");b.d(d,"getSampleHeaders",function(){return E.getSampleHeaders});var L=b("./src/chunks/generators.ts");b.d(d,"getGenerators",function(){return L.getGenerators});var R=b("./src/chunks/modulators.ts");b.d(d,"getModulators",function(){return R.getModulators});var Z=b("./src/chunks/zones.ts");b.d(d,"getZones",function(){return Z.getZones}),b.d(d,"getItemsInZone",function(){return Z.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(l,d,b){b.r(d),b.d(d,"getInstrumentHeaders",function(){return E});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=function(L){if(L.id!=="inst")throw new S.ParseError("Unexpected chunk ID","'inst'","'".concat(L.id,"'"));if(L.length%M.SF_INSTRUMENT_HEADER_SIZE)throw new S.ParseError("Invalid size for the 'inst' sub-chunk");return L.iterate(function(R){return{name:R.getString(),bagIndex:R.getInt16()}})}},"./src/chunks/instruments/index.ts":function(l,d,b){b.r(d);var S=b("./src/chunks/instruments/headers.ts");b.d(d,"getInstrumentHeaders",function(){return S.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(l,d,b){b.r(d),b.d(d,"getModulators",function(){return L});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=function(R){return{type:R>>10&63,polarity:R>>9&1,direction:R>>8&1,palette:R>>7&1,index:127&R}},L=function(R,Z){if(R.id!==Z)throw new S.ParseError("Unexpected chunk ID","'".concat(Z,"'"),"'".concat(R.id,"'"));if(R.length%M.SF_MODULATOR_SIZE)throw new S.ParseError("Invalid size for the '".concat(Z,"' sub-chunk"));return R.iterate(function(q){return{source:E(q.getInt16BE()),id:q.getInt16BE(),value:q.getInt16BE(),valueSource:E(q.getInt16BE()),transform:q.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(l,d,b){b.r(d),b.d(d,"getPresetHeaders",function(){return E});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=function(L){if(L.id!=="phdr")throw new S.ParseError("Invalid chunk ID","'phdr'","'".concat(L.id,"'"));if(L.length%M.SF_PRESET_HEADER_SIZE)throw new S.ParseError("Invalid size for the 'phdr' sub-chunk");return L.iterate(function(R){return{name:R.getString(),preset:R.getInt16(),bank:R.getInt16(),bagIndex:R.getInt16(),library:R.getUInt32(),genre:R.getUInt32(),morphology:R.getUInt32()}})}},"./src/chunks/presets/index.ts":function(l,d,b){b.r(d);var S=b("./src/chunks/presets/headers.ts");b.d(d,"getPresetHeaders",function(){return S.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(l,d,b){b.r(d),b.d(d,"getSampleHeaders",function(){return E});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=function(L){if(L.id!=="shdr")throw new S.ParseError("Unexpected chunk ID","'shdr'","'".concat(L.id,"'"));if(L.length%M.SF_SAMPLE_HEADER_SIZE)throw new S.ParseError("Invalid size for the 'shdr' sub-chunk");return L.iterate(function(R){return{name:R.getString(),start:R.getUInt32(),end:R.getUInt32(),startLoop:R.getUInt32(),endLoop:R.getUInt32(),sampleRate:R.getUInt32(),originalPitch:R.getByte(),pitchCorrection:R.getChar(),link:R.getInt16(),type:R.getInt16()}})}},"./src/chunks/samples/index.ts":function(l,d,b){b.r(d);var S=b("./src/chunks/samples/headers.ts");b.d(d,"getSampleHeaders",function(){return S.getSampleHeaders})},"./src/chunks/zones.ts":function(l,d,b){b.r(d),b.d(d,"getZones",function(){return L}),b.d(d,"getItemsInZone",function(){return R});var S=b("./src/riff/index.ts"),M=b("./src/constants.ts"),E=b("./src/types/index.ts"),L=function(U,se){if(U.id!==se)throw new S.ParseError("Unexpected chunk ID","'".concat(se,"'"),"'".concat(U.id,"'"));if(U.length%M.SF_BAG_SIZE)throw new S.ParseError("Invalid size for the '".concat(se,"' sub-chunk"));return U.iterate(function(re){return{generatorIndex:re.getInt16(),modulatorIndex:re.getInt16()}})},R=function(U,se,re,ae,de,ve){for(var Ee=[],le=0;le<U.length;le++){for(var _e=U[le],Ce=U[le+1],We=_e.bagIndex,He=Ce?Ce.bagIndex:se.length,Mt=[],ut=void 0,Nt=We;Nt<He;Nt++){var St=Z(Nt,se,re),xt=q(Nt,se,ae),$t=xt[E.GeneratorType.KeyRange]&&xt[E.GeneratorType.KeyRange].range,qt=xt[ve];if(qt){var Vt=de[qt.value];Vt&&Mt.push({keyRange:$t,modulators:St,generators:xt,reference:Vt})}else Nt-We==0&&(ut={keyRange:$t,modulators:St,generators:xt})}Ee.push({header:_e,globalZone:ut,zones:Mt})}return Ee},Z=function(U,se,re){var ae=se[U],de=se[U+1],ve=ae.modulatorIndex,Ee=de?de.modulatorIndex:se.length;return K(ve,Ee,re)},q=function(U,se,re){var ae=se[U],de=se[U+1],ve=ae.generatorIndex,Ee=de?de.generatorIndex:se.length;return K(ve,Ee,re)},K=function(U,se,re){for(var ae={},de=U;de<se;de++){var ve=re[de];ve&&(ae[ve.id]=ve)}return ae}},"./src/constants.ts":function(l,d,b){b.r(d),b.d(d,"SF_VERSION_LENGTH",function(){return S}),b.d(d,"SF_PRESET_HEADER_SIZE",function(){return M}),b.d(d,"SF_BAG_SIZE",function(){return E}),b.d(d,"SF_MODULATOR_SIZE",function(){return L}),b.d(d,"SF_GENERATOR_SIZE",function(){return R}),b.d(d,"SF_INSTRUMENT_HEADER_SIZE",function(){return Z}),b.d(d,"SF_SAMPLE_HEADER_SIZE",function(){return q}),b.d(d,"DEFAULT_SAMPLE_RATE",function(){return K});var S=4,M=38,E=4,L=10,R=4,Z=22,q=46,K=22050},"./src/index.ts":function(l,d,b){b.r(d);var S=b("./src/types/index.ts");for(var M in S)M!=="default"&&(function(Z){b.d(d,Z,function(){return S[Z]})})(M);var E=b("./src/chunk.ts");b.d(d,"SF2Chunk",function(){return E.SF2Chunk});var L=b("./src/constants.ts");b.d(d,"SF_VERSION_LENGTH",function(){return L.SF_VERSION_LENGTH}),b.d(d,"SF_PRESET_HEADER_SIZE",function(){return L.SF_PRESET_HEADER_SIZE}),b.d(d,"SF_BAG_SIZE",function(){return L.SF_BAG_SIZE}),b.d(d,"SF_MODULATOR_SIZE",function(){return L.SF_MODULATOR_SIZE}),b.d(d,"SF_GENERATOR_SIZE",function(){return L.SF_GENERATOR_SIZE}),b.d(d,"SF_INSTRUMENT_HEADER_SIZE",function(){return L.SF_INSTRUMENT_HEADER_SIZE}),b.d(d,"SF_SAMPLE_HEADER_SIZE",function(){return L.SF_SAMPLE_HEADER_SIZE}),b.d(d,"DEFAULT_SAMPLE_RATE",function(){return L.DEFAULT_SAMPLE_RATE});var R=b("./src/soundFont2.ts");b.d(d,"SoundFont2",function(){return R.SoundFont2})},"./src/riff/chunkIterator.ts":function(l,d,b){b.r(d),b.d(d,"ChunkIterator",function(){return L});var S=b("./src/utils/index.ts");function M(R,Z){for(var q=0;q<Z.length;q++){var K=Z[q];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(R,K.key,K)}}function E(R,Z,q){return Z in R?Object.defineProperty(R,Z,{value:q,enumerable:!0,configurable:!0,writable:!0}):R[Z]=q,R}var L=(function(){function R(K){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function(se,re){if(!(se instanceof re))throw new TypeError("Cannot call a class as a function")})(this,R),E(this,"target",[]),E(this,"chunk",void 0),E(this,"position",0),this.chunk=K,this.position=U}var Z,q;return Z=R,(q=[{key:"iterate",value:function(K){for(;this.position<this.chunk.length;){var U=K(this);U&&this.target.push(U)}}},{key:"getString",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,U=Object(S.getStringFromBuffer)(this.getBuffer(this.position,K));return this.position+=K,U}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(K){this.position+=K}},{key:"getBuffer",value:function(K,U){return this.chunk.buffer.subarray(K,K+U)}},{key:"currentPosition",get:function(){return this.position}}])&&M(Z.prototype,q),R})()},"./src/riff/index.ts":function(l,d,b){b.r(d);var S=b("./src/riff/chunkIterator.ts");b.d(d,"ChunkIterator",function(){return S.ChunkIterator});var M=b("./src/riff/parseError.ts");b.d(d,"ParseError",function(){return M.ParseError});var E=b("./src/riff/parser.ts");b.d(d,"parseBuffer",function(){return E.parseBuffer}),b.d(d,"getChunk",function(){return E.getChunk}),b.d(d,"getChunkLength",function(){return E.getChunkLength}),b.d(d,"getSubChunks",function(){return E.getSubChunks}),b.d(d,"getChunkId",function(){return E.getChunkId});var L=b("./src/riff/riffChunk.ts");b.d(d,"RIFFChunk",function(){return L.RIFFChunk})},"./src/riff/parseError.ts":function(l,d,b){function S(K){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(K)}function M(K,U){return!U||S(U)!=="object"&&typeof U!="function"?(function(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se})(K):U}function E(K){var U=typeof Map=="function"?new Map:void 0;return(E=function(se){if(se===null||(re=se,Function.toString.call(re).indexOf("[native code]")===-1))return se;var re;if(typeof se!="function")throw new TypeError("Super expression must either be null or a function");if(U!==void 0){if(U.has(se))return U.get(se);U.set(se,ae)}function ae(){return L(se,arguments,Z(this).constructor)}return ae.prototype=Object.create(se.prototype,{constructor:{value:ae,enumerable:!1,writable:!0,configurable:!0}}),R(ae,se)})(K)}function L(K,U,se){return(L=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}})()?Reflect.construct:function(re,ae,de){var ve=[null];ve.push.apply(ve,ae);var Ee=new(Function.bind.apply(re,ve));return de&&R(Ee,de.prototype),Ee}).apply(null,arguments)}function R(K,U){return(R=Object.setPrototypeOf||function(se,re){return se.__proto__=re,se})(K,U)}function Z(K){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)})(K)}b.r(d),b.d(d,"ParseError",function(){return q});var q=(function(K){function U(se,re,ae){return(function(de,ve){if(!(de instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,U),M(this,Z(U).call(this,"".concat(se).concat(re&&ae?", expected ".concat(re,", received ").concat(ae):"")))}return(function(se,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(re&&re.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),re&&R(se,re)})(U,E(Error)),U})()},"./src/riff/parser.ts":function(l,d,b){b.r(d),b.d(d,"parseBuffer",function(){return L}),b.d(d,"getChunk",function(){return R}),b.d(d,"getChunkLength",function(){return Z}),b.d(d,"getSubChunks",function(){return q}),b.d(d,"getChunkId",function(){return K});var S=b("./src/riff/parseError.ts"),M=b("./src/utils/buffer.ts"),E=b("./src/riff/riffChunk.ts"),L=function(U){var se=K(U);if(se!=="RIFF")throw new S.ParseError("Invalid file format","RIFF",se);var re=K(U,8);if(re!=="sfbk")throw new S.ParseError("Invalid signature","sfbk",re);var ae=U.subarray(8),de=q(ae.subarray(4));return new E.RIFFChunk(se,ae.length,ae,de)},R=function(U,se){var re=K(U,se),ae=Z(U,se+4),de=[];return re!=="RIFF"&&re!=="LIST"||(de=q(U.subarray(se+12))),new E.RIFFChunk(re,ae,U.subarray(se+8),de)},Z=function(U,se){return((U=U.subarray(se,se+4))[0]|U[1]<<8|U[2]<<16|U[3]<<24)>>>0},q=function(U){for(var se=[],re=0;re<=U.length-8;){var ae=R(U,re);se.push(ae),re=(re+=8+ae.length)%2?re+1:re}return se},K=function(U){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(M.getStringFromBuffer)(U.subarray(se,se+4))}},"./src/riff/riffChunk.ts":function(l,d,b){b.r(d),b.d(d,"RIFFChunk",function(){return R});var S=b("./src/riff/chunkIterator.ts"),M=b("./src/utils/index.ts");function E(Z,q){for(var K=0;K<q.length;K++){var U=q[K];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(Z,U.key,U)}}function L(Z,q,K){return q in Z?Object.defineProperty(Z,q,{value:K,enumerable:!0,configurable:!0,writable:!0}):Z[q]=K,Z}var R=(function(){function Z(U,se,re,ae){(function(de,ve){if(!(de instanceof ve))throw new TypeError("Cannot call a class as a function")})(this,Z),L(this,"id",void 0),L(this,"length",void 0),L(this,"buffer",void 0),L(this,"subChunks",void 0),this.id=U,this.length=se,this.buffer=re,this.subChunks=ae}var q,K;return q=Z,(K=[{key:"getString",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,se=arguments.length>1?arguments[1]:void 0;return Object(M.getStringFromBuffer)(this.getBuffer(U,se||this.length-U))}},{key:"getInt16",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[U++]|this.buffer[U]<<8}},{key:"getUInt32",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[U++]|this.buffer[U++]<<8|this.buffer[U++]<<16|this.buffer[U]<<24)>>>0}},{key:"getByte",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[U]}},{key:"getChar",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[U]<<24>>24}},{key:"iterator",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new S.ChunkIterator(this,U)}},{key:"iterate",value:function(U){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,re=new S.ChunkIterator(this,se);return re.iterate(U),re.target}},{key:"getBuffer",value:function(U,se){return this.buffer.subarray(U,U+se)}}])&&E(q.prototype,K),Z})()},"./src/soundFont2.ts":function(l,d,b){b.r(d),b.d(d,"SoundFont2",function(){return se});var S=b("./src/types/index.ts"),M=b("./src/chunk.ts"),E=b("./src/riff/index.ts"),L=b("./src/chunks/index.ts"),R=b("./src/utils/index.ts");function Z(re){for(var ae=1;ae<arguments.length;ae++){var de=arguments[ae]!=null?arguments[ae]:{},ve=Object.keys(de);typeof Object.getOwnPropertySymbols=="function"&&(ve=ve.concat(Object.getOwnPropertySymbols(de).filter(function(Ee){return Object.getOwnPropertyDescriptor(de,Ee).enumerable}))),ve.forEach(function(Ee){U(re,Ee,de[Ee])})}return re}function q(re,ae){for(var de=0;de<ae.length;de++){var ve=ae[de];ve.enumerable=ve.enumerable||!1,ve.configurable=!0,"value"in ve&&(ve.writable=!0),Object.defineProperty(re,ve.key,ve)}}function K(re,ae,de){return ae&&q(re.prototype,ae),de&&q(re,de),re}function U(re,ae,de){return ae in re?Object.defineProperty(re,ae,{value:de,enumerable:!0,configurable:!0,writable:!0}):re[ae]=de,re}var se=(function(){function re(ae){if((function(ve,Ee){if(!(ve instanceof Ee))throw new TypeError("Cannot call a class as a function")})(this,re),U(this,"chunk",void 0),U(this,"metaData",void 0),U(this,"sampleData",void 0),U(this,"samples",void 0),U(this,"presetData",void 0),U(this,"instruments",void 0),U(this,"presets",void 0),U(this,"banks",void 0),!(ae instanceof M.SF2Chunk)){var de=Object(E.parseBuffer)(ae);ae=new M.SF2Chunk(de)}if(ae.subChunks.length!==3)throw new E.ParseError("Invalid sfbk structure","3 chunks","".concat(ae.subChunks.length," chunks"));this.chunk=ae,this.metaData=ae.subChunks[0].getMetaData(),this.sampleData=ae.subChunks[1].getSampleData(),this.presetData=ae.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return K(re,null,[{key:"from",value:function(ae){return new re(ae)}}]),K(re,[{key:"getKeyData",value:function(ae){var de=this,ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(R.memoize)(function(le,_e,Ce){var We=de.banks[_e];if(We){var He=We.presets[Ce];if(He){var Mt=He.zones.find(function(qt){return de.isKeyInRange(qt,le)});if(Mt){var ut=Mt.instrument,Nt=ut.zones.find(function(qt){return de.isKeyInRange(qt,le)});if(Nt){var St=Nt.sample,xt=Z({},Mt.generators,Nt.generators),$t=Z({},Mt.modulators,Nt.modulators);return{keyNumber:le,preset:He,instrument:ut,sample:St,generators:xt,modulators:$t}}}}}return null})(ae,ve,Ee)}},{key:"isKeyInRange",value:function(ae,de){return ae.keyRange===void 0||ae.keyRange.lo<=de&&ae.keyRange.hi>=de}},{key:"getBanks",value:function(){return this.presets.reduce(function(ae,de){var ve=de.header.bank;return ae[ve]||(ae[ve]={presets:[]}),ae[ve].presets[de.header.preset]=de,ae},[])}},{key:"getPresets",value:function(){var ae=this.presetData,de=ae.presetHeaders,ve=ae.presetZones,Ee=ae.presetGenerators,le=ae.presetModulators;return Object(L.getItemsInZone)(de,ve,le,Ee,this.instruments,S.GeneratorType.Instrument).filter(function(_e){return _e.header.name!=="EOP"}).map(function(_e){return{header:_e.header,globalZone:_e.globalZone,zones:_e.zones.map(function(Ce){return{keyRange:Ce.keyRange,generators:Ce.generators,modulators:Ce.modulators,instrument:Ce.reference}})}})}},{key:"getInstruments",value:function(){var ae=this.presetData,de=ae.instrumentHeaders,ve=ae.instrumentZones,Ee=ae.instrumentModulators,le=ae.instrumentGenerators;return Object(L.getItemsInZone)(de,ve,Ee,le,this.samples,S.GeneratorType.SampleId).filter(function(_e){return _e.header.name!=="EOI"}).map(function(_e){return{header:_e.header,globalZone:_e.globalZone,zones:_e.zones.map(function(Ce){return{keyRange:Ce.keyRange,generators:Ce.generators,modulators:Ce.modulators,sample:Ce.reference}})}})}},{key:"getSamples",value:function(){var ae=this;return this.presetData.sampleHeaders.filter(function(de){return de.name!=="EOS"}).map(function(de){if(de.name!=="EOS"&&de.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(de.sampleRate," hz in sample '").concat(de.name,"'"));return de.originalPitch>=128&&de.originalPitch<=254&&(de.originalPitch=60),de.startLoop-=de.start,de.endLoop-=de.start,{header:de,data:new Int16Array(new Uint8Array(ae.sampleData.subarray(2*de.start,2*de.end)).buffer)}})}}]),re})()},"./src/types/bank.ts":function(l,d){},"./src/types/generator.ts":function(l,d,b){var S,M;function E(R,Z,q){return Z in R?Object.defineProperty(R,Z,{value:q,enumerable:!0,configurable:!0,writable:!0}):R[Z]=q,R}b.r(d),b.d(d,"GeneratorType",function(){return M}),b.d(d,"DEFAULT_GENERATOR_VALUES",function(){return L}),(function(R){R[R.StartAddrsOffset=0]="StartAddrsOffset",R[R.EndAddrsOffset=1]="EndAddrsOffset",R[R.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",R[R.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",R[R.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",R[R.ModLFOToPitch=5]="ModLFOToPitch",R[R.VibLFOToPitch=6]="VibLFOToPitch",R[R.ModEnvToPitch=7]="ModEnvToPitch",R[R.InitialFilterFc=8]="InitialFilterFc",R[R.InitialFilterQ=9]="InitialFilterQ",R[R.ModLFOToFilterFc=10]="ModLFOToFilterFc",R[R.ModEnvToFilterFc=11]="ModEnvToFilterFc",R[R.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",R[R.ModLFOToVolume=13]="ModLFOToVolume",R[R.Unused1=14]="Unused1",R[R.ChorusEffectsSend=15]="ChorusEffectsSend",R[R.ReverbEffectsSend=16]="ReverbEffectsSend",R[R.Pan=17]="Pan",R[R.Unused2=18]="Unused2",R[R.Unused3=19]="Unused3",R[R.Unused4=20]="Unused4",R[R.DelayModLFO=21]="DelayModLFO",R[R.FreqModLFO=22]="FreqModLFO",R[R.DelayVibLFO=23]="DelayVibLFO",R[R.FreqVibLFO=24]="FreqVibLFO",R[R.DelayModEnv=25]="DelayModEnv",R[R.AttackModEnv=26]="AttackModEnv",R[R.HoldModEnv=27]="HoldModEnv",R[R.DecayModEnv=28]="DecayModEnv",R[R.SustainModEnv=29]="SustainModEnv",R[R.ReleaseModEnv=30]="ReleaseModEnv",R[R.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",R[R.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",R[R.DelayVolEnv=33]="DelayVolEnv",R[R.AttackVolEnv=34]="AttackVolEnv",R[R.HoldVolEnv=35]="HoldVolEnv",R[R.DecayVolEnv=36]="DecayVolEnv",R[R.SustainVolEnv=37]="SustainVolEnv",R[R.ReleaseVolEnv=38]="ReleaseVolEnv",R[R.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",R[R.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",R[R.Instrument=41]="Instrument",R[R.Reserved1=42]="Reserved1",R[R.KeyRange=43]="KeyRange",R[R.VelRange=44]="VelRange",R[R.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",R[R.KeyNum=46]="KeyNum",R[R.Velocity=47]="Velocity",R[R.InitialAttenuation=48]="InitialAttenuation",R[R.Reserved2=49]="Reserved2",R[R.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",R[R.CoarseTune=51]="CoarseTune",R[R.FineTune=52]="FineTune",R[R.SampleId=53]="SampleId",R[R.SampleModes=54]="SampleModes",R[R.Reserved3=55]="Reserved3",R[R.ScaleTuning=56]="ScaleTuning",R[R.ExclusiveClass=57]="ExclusiveClass",R[R.OverridingRootKey=58]="OverridingRootKey",R[R.Unused5=59]="Unused5",R[R.EndOper=60]="EndOper"})(M||(M={}));var L=(E(S={},M.StartAddrsOffset,0),E(S,M.EndAddrsOffset,0),E(S,M.StartLoopAddrsOffset,0),E(S,M.EndLoopAddrsOffset,0),E(S,M.StartAddrsCoarseOffset,0),E(S,M.ModLFOToPitch,0),E(S,M.VibLFOToPitch,0),E(S,M.ModEnvToPitch,0),E(S,M.InitialFilterFc,13500),E(S,M.InitialFilterQ,0),E(S,M.ModLFOToFilterFc,0),E(S,M.ModEnvToFilterFc,0),E(S,M.EndAddrsCoarseOffset,0),E(S,M.ModLFOToVolume,0),E(S,M.ChorusEffectsSend,0),E(S,M.ReverbEffectsSend,0),E(S,M.Pan,0),E(S,M.DelayModLFO,-12e3),E(S,M.FreqModLFO,0),E(S,M.DelayVibLFO,-12e3),E(S,M.FreqVibLFO,0),E(S,M.DelayModEnv,-12e3),E(S,M.AttackModEnv,-12e3),E(S,M.HoldModEnv,-12e3),E(S,M.DecayModEnv,-12e3),E(S,M.SustainModEnv,0),E(S,M.ReleaseModEnv,-12e3),E(S,M.KeyNumToModEnvHold,0),E(S,M.KeyNumToModEnvDecay,0),E(S,M.DelayVolEnv,-12e3),E(S,M.AttackVolEnv,-12e3),E(S,M.HoldVolEnv,-12e3),E(S,M.DecayVolEnv,-12e3),E(S,M.SustainVolEnv,0),E(S,M.ReleaseVolEnv,-12e3),E(S,M.KeyNumToVolEnvHold,0),E(S,M.KeyNumToVolEnvDecay,0),E(S,M.StartLoopAddrsCoarseOffset,0),E(S,M.KeyNum,-1),E(S,M.Velocity,-1),E(S,M.InitialAttenuation,0),E(S,M.EndLoopAddrsCoarseOffset,0),E(S,M.CoarseTune,0),E(S,M.FineTune,0),E(S,M.SampleModes,0),E(S,M.ScaleTuning,100),E(S,M.ExclusiveClass,0),E(S,M.OverridingRootKey,-1),S)},"./src/types/index.ts":function(l,d,b){b.r(d);var S=b("./src/types/bank.ts");for(var M in S)M!=="default"&&(function(ae){b.d(d,ae,function(){return S[ae]})})(M);var E=b("./src/types/generator.ts");b.d(d,"GeneratorType",function(){return E.GeneratorType}),b.d(d,"DEFAULT_GENERATOR_VALUES",function(){return E.DEFAULT_GENERATOR_VALUES});var L=b("./src/types/instrument.ts");for(var M in L)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return L[de]})})(M);var R=b("./src/types/key.ts");for(var M in R)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return R[de]})})(M);var Z=b("./src/types/metaData.ts");for(var M in Z)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return Z[de]})})(M);var q=b("./src/types/modulator.ts");b.d(d,"ControllerType",function(){return q.ControllerType}),b.d(d,"ControllerPolarity",function(){return q.ControllerPolarity}),b.d(d,"ControllerDirection",function(){return q.ControllerDirection}),b.d(d,"ControllerPalette",function(){return q.ControllerPalette}),b.d(d,"Controller",function(){return q.Controller}),b.d(d,"TransformType",function(){return q.TransformType}),b.d(d,"DEFAULT_INSTRUMENT_MODULATORS",function(){return q.DEFAULT_INSTRUMENT_MODULATORS});var K=b("./src/types/preset.ts");for(var M in K)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return K[de]})})(M);var U=b("./src/types/presetData.ts");for(var M in U)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return U[de]})})(M);var se=b("./src/types/sample.ts");b.d(d,"SampleType",function(){return se.SampleType});var re=b("./src/types/zone.ts");for(var M in re)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(M)<0&&(function(de){b.d(d,de,function(){return re[de]})})(M)},"./src/types/instrument.ts":function(l,d){},"./src/types/key.ts":function(l,d){},"./src/types/metaData.ts":function(l,d){},"./src/types/modulator.ts":function(l,d,b){b.r(d),b.d(d,"ControllerType",function(){return S}),b.d(d,"ControllerPolarity",function(){return M}),b.d(d,"ControllerDirection",function(){return E}),b.d(d,"ControllerPalette",function(){return L}),b.d(d,"Controller",function(){return R}),b.d(d,"TransformType",function(){return Z}),b.d(d,"DEFAULT_INSTRUMENT_MODULATORS",function(){return K});var S,M,E,L,R,Z,q=b("./src/types/generator.ts");(function(U){U[U.Linear=0]="Linear",U[U.Concave=1]="Concave",U[U.Convex=2]="Convex",U[U.Switch=3]="Switch"})(S||(S={})),(function(U){U[U.Unipolar=0]="Unipolar",U[U.Bipolar=1]="Bipolar"})(M||(M={})),(function(U){U[U.Increasing=0]="Increasing",U[U.Decreasing=1]="Decreasing"})(E||(E={})),(function(U){U[U.GeneralController=0]="GeneralController",U[U.MidiController=1]="MidiController"})(L||(L={})),(function(U){U[U.NoController=0]="NoController",U[U.NoteOnVelocity=2]="NoteOnVelocity",U[U.NoteOnKeyNumber=3]="NoteOnKeyNumber",U[U.PolyPressure=10]="PolyPressure",U[U.ChannelPressure=13]="ChannelPressure",U[U.PitchWheel=14]="PitchWheel",U[U.PitchWheelSensitivity=16]="PitchWheelSensitivity",U[U.Link=127]="Link"})(R||(R={})),(function(U){U[U.Linear=0]="Linear",U[U.Absolute=2]="Absolute"})(Z||(Z={}));var K=[{id:q.GeneratorType.InitialAttenuation,source:{type:S.Concave,polarity:M.Unipolar,direction:E.Decreasing,palette:L.GeneralController,index:R.NoteOnVelocity},value:960,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.InitialFilterFc,source:{type:S.Linear,polarity:M.Unipolar,direction:E.Decreasing,palette:L.GeneralController,index:R.NoteOnVelocity},value:-2400,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.VibLFOToPitch,source:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.ChannelPressure},value:50,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.VibLFOToPitch,source:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.MidiController,index:1},value:50,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.InitialAttenuation,source:{type:S.Concave,polarity:M.Unipolar,direction:E.Decreasing,palette:L.MidiController,index:7},value:960,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.InitialAttenuation,source:{type:S.Linear,polarity:M.Bipolar,direction:E.Increasing,palette:L.MidiController,index:10},value:1e3,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.InitialAttenuation,source:{type:S.Concave,polarity:M.Unipolar,direction:E.Decreasing,palette:L.MidiController,index:11},value:960,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.ReverbEffectsSend,source:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.MidiController,index:91},value:200,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.ChorusEffectsSend,source:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.MidiController,index:93},value:200,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.NoController},transform:Z.Linear},{id:q.GeneratorType.CoarseTune,source:{type:S.Linear,polarity:M.Bipolar,direction:E.Increasing,palette:L.GeneralController,index:R.PitchWheel},value:12700,valueSource:{type:S.Linear,polarity:M.Unipolar,direction:E.Increasing,palette:L.GeneralController,index:R.PitchWheelSensitivity},transform:Z.Linear}]},"./src/types/preset.ts":function(l,d){},"./src/types/presetData.ts":function(l,d){},"./src/types/sample.ts":function(l,d,b){var S;b.r(d),b.d(d,"SampleType",function(){return S}),(function(M){M[M.EOS=0]="EOS",M[M.Mono=1]="Mono",M[M.Right=2]="Right",M[M.Left=4]="Left",M[M.Linked=8]="Linked",M[M.RomMono=32769]="RomMono",M[M.RomRight=32770]="RomRight",M[M.RomLeft=32772]="RomLeft",M[M.RomLinked=32776]="RomLinked"})(S||(S={}))},"./src/types/zone.ts":function(l,d){},"./src/utils/buffer.ts":function(l,d,b){b.r(d),b.d(d,"getStringFromBuffer",function(){return S});var S=function(M){return new TextDecoder("utf8").decode(M).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(l,d,b){b.r(d);var S=b("./src/utils/buffer.ts");b.d(d,"getStringFromBuffer",function(){return S.getStringFromBuffer});var M=b("./src/utils/memoize.ts");b.d(d,"memoize",function(){return M.memoize})},"./src/utils/memoize.ts":function(l,d,b){b.r(d),b.d(d,"memoize",function(){return S});var S=function(M){var E={};return function(){for(var L=arguments.length,R=new Array(L),Z=0;Z<L;Z++)R[Z]=arguments[Z];var q=JSON.stringify(R);if(q in E)return E[q];var K=M.apply(void 0,R);return E[q]=K,K}}}})})})(SoundFont2)),SoundFont2.exports}var SoundFont2Exports=requireSoundFont2();const m=e=>Math.pow(2,e/1200),Q=e=>e/1e3,G=(e,o)=>{const l=Math.pow(10,o);return Math.round(e*l)/l};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(e,o,l,d,b,S,M,E,L){b=Math.max(G(b,4),.001),M=Math.max(G(M,4),.001),L=G(L,4),o=Math.max(o,.001);let R=e;return this.setValueAtTime(o,R),this.setValueAtTime(o,R+=d),this.exponentialRampToValueAtTime(l,R+=b),this.setValueAtTime(l,R+=S),this.exponentialRampToValueAtTime(Math.max(E*l,.001),R+=M),(Z,q)=>{this.cancelAndHoldAtTime(Z);const K=Math.max(q??o,.001);this.exponentialRampToValueAtTime(K,Z+L)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([e,o])=>[T[e],o]));const D=(e,o,l,d,b)=>{var S,M,E,L,R,Z,q;const K=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e];if(typeof K!="number")throw new Error(`no default value found for generator with index ${e}`);const U=o.generators[e],se=(M=(S=l.globalZone)==null?void 0:S.generators)==null?void 0:M[e],re=(E=d?.generators)==null?void 0:E[e],ae=(R=(L=b.globalZone)==null?void 0:L.generators)==null?void 0:R[e],de=U&&"value"in U?U.value:void 0,ve=se&&"value"in se?se.value:void 0,Ee=re&&"value"in re?re.value:void 0,le=ae&&"value"in ae?ae.value:void 0,_e=(Z=de??ve)!=null?Z:K,Ce=(q=Ee??le)!=null?q:0;return _e+Ce},J=e=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[e]!==void 0,W=(e,o,l)=>{var d,b,S,M;return Object.fromEntries(Array.from(new Set([Object.keys((b=(d=l.globalZone)==null?void 0:d.generators)!=null?b:{}),Object.keys(o.generators),Object.keys((M=(S=o.instrument.globalZone)==null?void 0:S.generators)!=null?M:{}),Object.keys(e.generators)].flat())).filter(J).map(E=>[T[E],D(parseInt(E),e,o.instrument,o,l)]))};function X(e,o,l){let{time:d=e.currentTime}=l;const{midi:b,start:S,velocity:M=.3,startLoop:E,endLoop:L,sampleRate:R,originalPitch:Z,pitchCorrection:q,type:K,sampleModes:U=0,overridingRootKey:se,fineTune:re=0,startloopAddrsOffset:ae=0,startloopAddrsCoarseOffset:de=0,endloopAddrsOffset:ve=0,endloopAddrsCoarseOffset:Ee=0,delayVolEnv:le=-12e3,attackVolEnv:_e=-12e3,holdVolEnv:Ce=-12e3,decayVolEnv:We=-12e3,sustainVolEnv:He=0,releaseVolEnv:Mt=-12e3,pan:ut=0,...Nt}=l,St=100*(se!==void 0&&se!==-1?se:Z)+q-re,xt=b*100-St,$t=1*Math.pow(2,xt/1200);o.playbackRate.value=$t;const qt=E+ae+de*32768,Vt=L+ve+Ee*32768;Vt>qt&&U===1?(o.loopStart=qt/R,o.loopEnd=Vt/R,o.loop=!0):U===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(Nt).filter(di=>!["name","instrument","keyRange","sampleID","end"].includes(di)).length;const Ut=e.createGain(),Yt=[d,0,M,m(le),m(_e),m(Ce),m(We),He>=960?0:1-Q(He),m(Mt)],ai=Ut.gain.dahdsr(...Yt),si=e.createStereoPanner();return si.pan.value=ut/1e3,Ut.connect(si),o.connect(Ut),si.connect(e.destination),o.start(d),(di=e.currentTime)=>{o.stop(di+m(Mt)),ai(di)}}function Y(e,o,l={}){const{header:d,data:b}=o,S=new Float32Array(b.length);for(let L=0;L<b.length;L++)S[L]=b[L]/32768;const M=e.createBuffer(1,S.length,d.sampleRate);M.getChannelData(0).set(S);const E=e.createBufferSource();return E.buffer=M,l={...d,...l},X(e,E,l)}const C=(e,o)=>!e.keyRange||e.keyRange.lo<=o&&o<=e.keyRange.hi,x=(e,o)=>e.zones.filter(l=>C(l,o)&&l.instrument).map(l=>l.instrument.zones.filter(d=>C(d,o)).map(d=>{const b=W(d,l,e);return{...d,mergedGenerators:b}})).flat(),ce=(e,o,l,d=e.currentTime)=>{const b=x(o,l).map(S=>Y(e,S.sample,{...S.mergedGenerators,midi:l,time:d}));return(S=e.currentTime)=>{b.forEach(M=>M(S))}};Pattern$1.prototype.soundfont=function(e,o=0){return this.onTrigger((l,d,b,S)=>{const M=getAudioContext(),E=getPlayableNoteValue(l),L=e.presets[o%e.presets.length],R=S,Z=[M,L,noteToMidi$1(E),R];ce(...Z)(R+l.duration)})},App.last_eval_error="",App.handle_eval_error=e=>{App.has_error=!0,App.last_eval_error=e?.message||`${e}`,App.set_status(App.last_eval_error)};const{evaluate,scheduler}=webaudioRepl({transpiler,onEvalError:e=>{App.handle_eval_error(e)}});App.evaluate=evaluate,App.scheduler=scheduler,App.app_name="Slide",App.current_song="",App.events_started=!1,App.audio_started=!1,App.fetch_in_flight=!1,App.status_watch_cancelled=!1,App.default_cpm=60,App.tempo=App.default_cpm,App.tempo_debounce_timer=void 0,App.color_index=0,App.color_cycle_timer=void 0,App.do_partial_updates=!1,App.fetch_delay_seconds=5,App.code_url_max=1920,App.border_color="#444",App.default_cpm=30,App.cycle_colors=["#94dd94","rgb(197, 187, 106)","rgb(222, 143, 143)","rgb(127, 155, 210)"],App.on_load=()=>{App.start_events()},App.get_config=async()=>{let e=await fetch("config/config.json");try{App.config=await e.json()}catch(o){console.error("Failed to parse config.json",o),App.config={}}},App.clear_draw_context=()=>{try{cleanupDraw(!0)}catch(e){console.warn("Failed to clear draw context",e)}},App.reset_eval_state=()=>{App.has_error=!1},App.report_eval_failure=e=>{let o=e?.message||App.last_eval_error||"Failed to evaluate Strudel code";App.last_eval_error=o,App.set_status(o)},App.normalize_code=(e="")=>e.replace(/\r\n/g,`
`).trim(),App.strip_set_cpm=e=>e.split(`
`).filter(o=>!o.trim().match(/^setCpm\s*\(/)).join(`
`),App.split_by_newlines=e=>{let o="",l=null,d=0,b=0,S=0,M=[],E=()=>{let L=o.trim();L&&M.push(L),o=""};for(let L=0;L<e.length;L+=1){let R=e[L],Z=e[L-1];if(o+=R,l){R===l&&Z!=="\\"&&(l=null);continue}if(R==='"'||R==="'"||R==="`"){l=R;continue}if(R==="("?d+=1:R===")"?d=Math.max(0,d-1):R==="["?b+=1:R==="]"?b=Math.max(0,b-1):R==="{"?S+=1:R==="}"&&(S=Math.max(0,S-1)),R!==`
`)continue;let q=e[L+1];d===0&&b===0&&S===0&&!(q===" "||q==="	")&&!(q===`
`)&&E()}return E(),M},App.segment_code=e=>{let o=App.normalize_code(e);if(!o)return[];let l=o.split(/\n{2,}/g).map(b=>b.trim()).filter(Boolean),d=[];for(let b of l){if(!b.includes(`
`)){d.push(b);continue}let S=App.split_by_newlines(b);S.length?d.push(...S):d.push(b)}if(d.length<=1&&o.includes(`
`)){let b=o.split(/\n+/g).map(S=>S.trim()).filter(Boolean);if(b.length>1)return b}return d},App.apply_partial_update=async e=>{let o=App.segment_code(e);if(!o.length)return!1;let l=[],d=0;for(let S of o){let M=await App.run_eval(S);if(M.ok){l.push(S);continue}d+=1,console.warn("Skipping segment due to error",M.error)}if(!l.length)return!1;let b=l.join(`

`);return App.set_input(b),d>0?App.playing(`Skipped ${d} segment(s)`):App.playing(),!0},App.start_events=async()=>{if(App.events_started)return;App.events_started=!0,await App.get_config(),App.load_all_storage(),App.create_modals(),App.start_visual(),DOM.ev("#btn-play","click",()=>{let l=App.get_input_value();App.play_action(l,!0)}),DOM.ev("#btn-url","click",()=>{App.get_beat_url()}),DOM.ev("#btn-auto","click",()=>{App.open_auto_modal()}),DOM.ev("#btn-stop","click",()=>{App.stop_action()}),DOM.ev("#btn-new","click",()=>{App.new_beat()}),DOM.ev("#btn-songs","click",()=>{App.open_songs_modal()}),App.remove_context("#controls");let e=DOM.el("#image");e&&DOM.ev(e,"click",()=>{App.open_settings_modal()});let o=DOM.el("#title");o&&DOM.ev(o,"click",()=>{App.open_about_modal()}),App.setup_player(),App.setup_status(),App.setup_volume(),App.setup_auto(),App.setup_input(),App.setup_scope(),App.init_volume_controls(),App.init_tempo_controls(),App.init_code_input_controls(),App.start_keyboard(),App.start_resize_observer(),App.make_main_visible(),App.set_beat_title_from_query(),App.max_input(),await App.load_song_from_query()||App.load_url_from_query()||App.load_code_from_query()||App.load_last_code(),App.playing()},App.get_main=()=>DOM.el("#main"),App.make_main_visible=()=>{App.get_main().classList.remove("invisible")},App.set_title=e=>{if(e){document.title=`${App.app_name} - ${e}`;return}document.title=App.app_name},App.get_query_params=()=>new URLSearchParams(window.location.search),App.update_title=()=>{let e=App.app_name,o=App.get_song_name(!0);o?e=`${e} - ${o}`:App.beat_title&&(e=`${e} - ${App.beat_title}`),document.title=e},App.get_top_height=()=>{let e=DOM.el("#top");return App.get_el_height(e)},App.get_bottom_height=()=>{let e=DOM.el("#bottom");return App.get_el_height(e)},App.loading=()=>{App.set_status("Loading...")},App.new_beat=()=>{confirm("Start a new beat?")&&(App.last_code="",App.current_song="",App.set_input(""),App.stop_action(),App.focus_input())},App.start_resize_observer=()=>{new ResizeObserver(o=>{App.max_debouncer.call()}).observe(App.get_main()),DOM.ev(window,"resize",()=>{App.max_debouncer.call()})},App.setup_eval=async()=>{try{await evalScope(strudelCore,strudelMini,strudelWebAudio,strudelTonal,strudelDraw,strudelHydra,transpiler),console.log("Setup Eval done.")}catch(e){console.error("Strudel scope failed to load",e)}},window.H=H,window.initHydra=initHydra,window.clearHydra=clearHydra,window.lz=m$2,window.Drawer=Drawer$1,window.strudelMini=strudelMini,window.registerSoundfonts=registerSoundfonts$1,window.registerSynthSounds=ec,window.initAudio=bo,window.samples=to,window.getAudioContext=x$2,App.mirror_enabled=!0,App.setup_drawer=()=>{let e=1e3;App.drawer=new Drawer(o=>{if(!App.mirror_enabled||o.length>e)return;let l=[];for(let d of o)d.context&&d.context.locations?l.push(...d.context.locations):d.context&&d.context.location&&l.push(d.context.location);App.editor&&App.editor.dispatch({effects:App.set_highlight.of(l)})},[0,0])},App.setup_strudel_mirror=()=>{let{EditorView:e,Decoration:o,StateField:l,StateEffect:d}=window.CM;App.set_highlight=d.define(),App.highlight_extension=l.define({create(){return o.none},update(b,S){b=b.map(S.changes);for(let M of S.effects)if(M.is(App.set_highlight)){let E=M.value.map(L=>o.mark({class:"sh-executing"}).range(L.start,L.end));return o.set(E,!0)}return b},provide:b=>e.decorations.from(b)})},App.clean_mirror=()=>{App.editor.dispatch({effects:App.set_highlight.of([])})},App.toggle_mirror=()=>{App.mirror_enabled=!App.mirror_enabled,App.mirror_enabled?App.is_playing&&App.start_drawer():(App.stop_drawer(),App.clean_mirror()),App.stor_save_mirror()},App.start_drawer=()=>{App.draw_started||(App.drawer.start(App.scheduler),App.draw_started=!0)},App.stop_drawer=()=>{App.drawer.stop(),App.draw_started=!1},(function(){let e=window.AudioContext||window.webkitAudioContext;function o(d,b=3,S=2){let M=d.sampleRate,E=M*b,L=d.createBuffer(2,E,M),R=L.getChannelData(0),Z=L.getChannelData(1);for(let q=0;q<E;q++){let K=q/E,U=Math.pow(1-K,S);R[q]=(Math.random()*2-1)*U,Z[q]=(Math.random()*2-1)*U}return L}class l extends e{constructor(...b){super(...b);let S=this;const M=!window.master_fx;console.log(M?"Intercepted MAIN AudioContext (Seamless Reverb + LFO Mode + Metering)":"Intercepted SECONDARY AudioContext");let E=S.createBiquadFilter();E.type="lowshelf",E.frequency.value=320,E.gain.value=0;let L=S.createBiquadFilter();L.type="peaking",L.frequency.value=1e3,L.Q.value=1,L.gain.value=0;let R=S.createBiquadFilter();R.type="highshelf",R.frequency.value=4e3,R.gain.value=0,App.panning=S.createStereoPanner(),App.panning.pan.value=0;let Z=S.createOscillator();Z.type="sine",Z.frequency.value=0;let q=S.createGain();q.gain.value=0,Z.connect(q),q.connect(App.panning.pan),Z.start();let K=S.createConvolver();K.buffer=o(S);let U=S.createGain();U.gain.value=0;let se=S.createGain();se.gain.value=1;let re=S.createAnalyser();re.fftSize=256;let ae=re.frequencyBinCount,de=new Uint8Array(ae);if(E.connect(L),L.connect(R),R.connect(App.panning),App.panning.connect(se),se.connect(re),re.connect(super.destination),Object.defineProperty(E,"maxChannelCount",{get:()=>super.destination.maxChannelCount}),Object.defineProperty(S,"destination",{get:()=>E,configurable:!0}),M){let ve={timer:null,is_connected:!1};window.master_fx={context:S,nodes:{eq_low:E,eq_mid:L,eq_high:R,panner:App.panning,reverb_gain:U,master_gain:se,lfo:Z,lfo_gain:q,analyser:re},get_volume:()=>{re.getByteTimeDomainData(de);let Ee=0;for(let le=0;le<ae;le++){let _e=(de[le]-128)/128;Ee+=_e*_e}return Math.sqrt(Ee/ae)},set_eq:(Ee,le,_e)=>{let Ce=S.currentTime,We=.1;Ee!==void 0&&E.gain.setTargetAtTime(Ee,Ce,We),le!==void 0&&L.gain.setTargetAtTime(le,Ce,We),_e!==void 0&&R.gain.setTargetAtTime(_e,Ce,We)},set_volume:Ee=>{se.gain.setTargetAtTime(Ee,S.currentTime,.1)},set_panning:Ee=>{App.panning.pan.setTargetAtTime(Ee,S.currentTime+.02,.1)},set_auto_pan:(Ee,le)=>{let _e=S.currentTime;Z.frequency.setTargetAtTime(Ee,_e,.1),q.gain.setTargetAtTime(le,_e,.1)},splash_reverb:(Ee=3)=>{let le=S.currentTime,_e=.1,Ce=.5,We=.5;ve.timer&&(clearTimeout(ve.timer),ve.timer=null),U.gain.cancelScheduledValues(le),ve.is_connected||(App.panning.connect(K),K.connect(U),U.connect(se),U.gain.setValueAtTime(0,le),ve.is_connected=!0),U.gain.linearRampToValueAtTime(We,le+_e);let He=le+Ee;U.gain.setValueAtTime(We,He),U.gain.linearRampToValueAtTime(0,He+Ce),ve.timer=setTimeout(()=>{U.disconnect(),K.disconnect(),ve.is_connected=!1},(Ee+Ce)*1e3+100)}}}}}window.AudioContext=l,window.webkitAudioContext&&(window.webkitAudioContext=l)})(),App.modal_factory=(e,o)=>{let l=DOM.el(`#${o}`),d=DOM.create("div");d.innerHTML=l.innerHTML,DOM.el("#modals").appendChild(d);let b=DOM.el(".modal",d);return b.id=`${e}-modal`,b},App.create_modal=e=>App.modal_factory(e,"template-modal"),App.create_list_modal=e=>{let o=App.modal_factory(e,"template-list-modal"),l=DOM.el(".modal-filter",o);return l.id=`${e}-modal-filter`,o},App.create_modals=()=>{App.create_about_modal(),App.create_songs_modal(),App.create_auto_modal(),App.create_visual_modal(),App.create_settings_modal(),DOM.ev("#main","click",e=>{let o=e.target.closest(".modal-close");if(o){let l=o.closest(".modal");l&&App.do_close_modal(l)}}),DOM.ev("#modal-overlay","click",e=>{App.close_all_modals()})},App.show_items_modal=async(e,o={})=>{let l={loaded:!1,active:-1,capitalize:!0,icons:!0};App.def_args(l,o);let d=o.loaded||!1,b=DOM.el(`#${e}-modal`),S=DOM.el(".modal-body",b),M=DOM.el(".modal-filter",b);if(d&&(S.innerHTML='<div class="loading">Loading items...</div>'),M&&(M.value="",M.disabled=!0,M.oninput=null,M.onkeydown=null),!o.items.length){S.innerHTML='<div class="loading">Nothing found</div>';return}let E=R=>{if(S.innerHTML="",!R.length){S.innerHTML='<div class="loading">No results</div>';return}for(let[Z,q]of R.entries()){let K=DOM.create("div"),U=DOM.create("div");K.className="modal-item";let se=q.alt_text||q.text;if(o.icons){let re=DOM.create("canvas","modal-icon");re.width=25,re.height=25,K.appendChild(re),jdenticon.update(re,se)}o.capitalize&&(se=App.capitalize(se)),U.textContent=App.underspace(se),K.title=q.title,DOM.ev(K,"click",()=>o.action(q)),o.active===Z&&K.classList.add("modal-active-item"),K.appendChild(U),S.appendChild(K)}};if(E(o.items),!M)return;let L=()=>{let R=M.value.trim().toLowerCase();if(!R){E(o.items);return}let Z=o.items.filter(q=>(q.alt_text||q.text).toLowerCase().includes(R));E(Z)};M.disabled=!1,M.focus(),M.oninput=L,M.onkeydown=R=>{if(R.key!=="Enter")return;R.preventDefault();let Z=DOM.els(".modal-item",S);for(let q of Z){q.click();break}},App.do_open_modal(b),App.focus_modal_filter(e)},App.open_modal=e=>{let o=DOM.el(`#${e}-modal`);o&&App.do_open_modal(o)},App.do_open_modal=e=>{let o=DOM.el(".modal-body",e);App.show_overlay(),e.classList.add("active"),o.scrollTop=0},App.close_modal=e=>{let o=DOM.el(`#${e}-modal`);o&&App.do_close_modal(o)},App.do_close_modal=e=>{e.classList.remove("active"),DOM.els(".modal.active").length===0&&App.hide_overlay()},App.close_all_modals=()=>{let e=DOM.els(".modal");for(let o of e)App.do_close_modal(o)},App.close_current_modal=()=>{let e=DOM.els(".modal.active");if(e.length>0){let o=e[e.length-1];App.do_close_modal(o)}},App.modal_open=()=>DOM.els(".modal.active").length>0,App.show_overlay=()=>{DOM.show("#modal-overlay")},App.hide_overlay=()=>{DOM.hide("#modal-overlay")},App.focus_modal_filter=e=>{let o=DOM.el(`#${e}-modal-filter`);o&&o.focus()},App.strudel_notes=["c4","e4","g4","a4","f4","d4","b4","c3","e3","g3","a3","f3","d3","b3","f#4","bb4","c#4","eb4","g#4","f#3","bb3","c#3","eb3","g#3","c5","e5","g5","a5","f5","d5","b5","c2","e2","g2","a2","f2","d2","b2","f#5","bb5","c#5","eb5","g#5","f#2","bb2","c#2","eb2","g#2","c6","e6","g6","a6","f6","d6","b6","c1","e1","g1","a1","f1","d1","b1","f#6","bb6","c#6","eb6","g#6","f#1","bb1","c#1","eb1","g#1","c7","e7","g7","c0","e0","g0"],App.is_playing=!1,App.play_running=!1,App.setup_player=()=>{App.setup_drawer(),App.setup_time_controls()},App.reset_playing=()=>{App.play_running=!1},App.play_action=async(e="",o=!1)=>{if(console.info("🔮 Play Action"),!App.play_running){if(App.play_running=!0,App.update_url(),e||(e=App.get_input_value()),!e){App.last_code="",App.current_song="",App.reset_playing(),App.stop_action();return}if(!o&&e===App.last_code){App.reset_playing();return}App.is_playing=!0,App.restart_code_scroll(!1),App.stor_save_code(),App.clear_draw_context(),App.start_color_cycle(),App.clean_canvas(),App.update_title();try{await App.strudel_update(e)}catch(l){App.set_status(`Error: ${l.message}`)}App.reset_playing()}},App.stop_action=()=>{console.info("🔮 Stop Action"),App.is_playing=!1,App.stop_strudel(),App.stop_code_scroll(),App.clear_draw_context(),App.set_song_context(""),App.playing()},App.stop_strudel=()=>{App.stop_color_cycle(),App.clear_draw_context(),App.scheduler.stop(),App.stop_drawer(),App.clean_mirror(),App.clean_canvas()},App.strudel_update=async e=>{if(await App.init_audio(),!App.audio_started){console.warn("Audio not started yet. Call init_audio() first.");return}console.info("Updating 💨"),App.set_song_tempo(e),App.update_url();let o=await App.run_eval(e);if(o.ok){App.playing();return}App.do_partial_updates&&await App.apply_partial_update(e)||App.report_eval_failure(o.error)},App.playing=e=>{App.is_playing?App.set_play_status(e):App.set_stop_status(e)},App.set_play_status=e=>{let o="",l=App.get_song_name(!0);l&&(o=`Playing: ${l}`),o||(App.fetch_timer?o="Playing 🤖":App.beat_title?o=`Playing: ${App.beat_title}`:App.is_url_beat()?o="Playing 🌐":o="Playing 🥁"),e&&(o=`${o} - ${e}`.trim()),App.set_status(o)},App.set_stop_status=()=>{let e=App.get_song_name(!0);e?App.set_status(`Stopped: ${e}`):App.beat_title?App.set_status(`Stopped: ${App.beat_title}`):App.is_url_beat()?App.set_status("Stopped 🌐"):App.set_status("Stopped")},App.load_last_code=()=>{App.last_code&&App.set_input(App.last_code)},App.restart_code_scroll=(e=!0)=>{e&&App.scroll_input_to_top(),App.code_scroll_active&&(App.defer_code_scroll(App.code_scroll_song_pause_ms),App.reset_code_scroll_for_content(App.code_scroll_song_pause_ms))},App.init_audio=async()=>{if(App.audio_started){console.info("Audio already initialized");return}console.info("Initializing Audio...");try{console.info("Initializing audio context..."),await App.setup_eval(),await initAudio(),miniAllStrings();let e="https://raw.githubusercontent.com/felixroos/dough-samples/main";console.info("Loading samples and soundfonts..."),await registerSynthSounds(),await registerSoundfonts(),await samples(`${e}/tidal-drum-machines.json`),await samples(`${e}/piano.json`),await samples(`${e}/Dirt-Samples.json`),await samples(`${e}/vcsl.json`),await samples(`${e}/mridangam.json`),App.audio_started=!0,App.apply_volume(),App.init_scope(),console.info("Audio Ready."),App.code_to_play&&(App.play_action(App.code_to_play),App.code_to_play=""),App.playing()}catch(e){throw console.error("Audio Failed:",e),e}},App.run_eval=async e=>{App.reset_eval_state(),e=App.filter_code(e),App.last_code=e,App.set_input(e),App.seek_offset=0;try{if(App.pattern=await App.evaluate(e),App.pattern){let o=App.scheduler.now(),l=App.scheduler.cps||1;App.seek_offset=o*l,App.start_drawer()}else App.stop_action()}catch(o){return App.stop_action(),{ok:!1,error:o}}return App.has_error?{ok:!1,error:new Error(App.last_eval_error||"Evaluation error")}:{ok:!0}},App.rewind_player=(e=1)=>{let o=App.scheduler.cps||1,l=e*o;App.seek_offset+=l,App.update_playback()},App.forward_player=(e=1)=>{let o=App.scheduler.cps||1,l=e*o;App.seek_offset-=l,App.update_playback()},App.update_playback=()=>{App.pattern&&App.scheduler.setPattern(App.pattern.late(App.seek_offset))},App.setup_time_controls=()=>{let e=DOM.el("#time-rewind"),o=DOM.el("#time-forward");DOM.ev(e,"click",()=>{App.rewind_player()}),DOM.ev(o,"click",()=>{App.forward_player()}),App.remove_context(e),App.remove_context(o)},App.scope_container_el=void 0,App.scope_canvas_el=void 0,App.scope_canvas_ctx=void 0,App.scope_analyser=void 0,App.scope_waveform=void 0,App.scope_animation_id=void 0,App.scope_connected=!1,App.scope_pixel_ratio=1,App.scope_enabled=!0,App.scope_max_y=-1,App.scope_min_y=-1,App.scope_background="#111111da",App.scope_color="rgba(204, 198, 239, 1)",App.scope_click_color_1="rgba(162, 171, 234, 0.5)",App.scope_click_color_2="rgba(255, 137, 204, 1)",App.scope_click_color_3="rgba(222, 242, 92, 1)",App.scope_click_color_4="rgba(91, 163, 240, 1)",App.scope_click_color_5="rgba(255, 255, 255, 1)",App.scope_click_level=1,App.scope_sine_time=0,App.scope_clicks=[],App.scope_click_time=3*1e3,App.scope_click_size=18,App.scope_is_drawing=!1,App.scope_click_distance=120,App.scope_mousedown_date=0,App.scope_beep_delay=300,App.scope_enable_date=0,App.scope_click_lock=250,App.scope_click_level_time=3*1e3,App.scope_clicks_min=5,App.scope_click_rotation_speed=.001,App.setup_scope=()=>{App.stor_load_scope(),App.setup_scope_canvas(),App.start_scope_loop()},App.init_scope=()=>{App.scope_enabled?App.enable_scope_visualizer():App.disable_scope_visualizer()},App.get_scope_wrapper=()=>(App.scope_wrapper_el||(App.scope_wrapper_el=DOM.el("#scope-wrapper")),App.scope_wrapper_el),App.get_scope_container=()=>(App.scope_container_el||(App.scope_container_el=DOM.el("#scope-container")),App.scope_container_el),App.get_scope_canvas=()=>(App.scope_canvas_el||(App.scope_canvas_el=DOM.el("#scope-canvas")),App.scope_canvas_el),App.get_scope_dimensions=()=>{if(!App.scope_canvas_el)return{width:0,height:0};let e=App.scope_canvas_el.clientWidth,o=App.scope_canvas_el.clientHeight;return e||(e=App.scope_canvas_el.width/App.scope_pixel_ratio),o||(o=App.scope_canvas_el.height/App.scope_pixel_ratio),{width:Math.max(0,e||0),height:Math.max(0,o||0)}},App.setup_scope_canvas=()=>{let e=App.get_scope_canvas();if(e){if(!App.scope_canvas_ctx){let o=e.getContext("2d");if(!o){console.warn("Scope canvas context unavailable");return}App.scope_canvas_ctx=o}return e}},App.clear_scope_canvas=()=>{if(!App.scope_canvas_ctx)return;let{width:e,height:o}=App.get_scope_dimensions();!e||!o||(App.scope_canvas_ctx.fillStyle=App.scope_background,App.scope_canvas_ctx.fillRect(0,0,e,o))},App.ensure_scope_waveform=()=>{if(App.scope_analyser)return(!App.scope_waveform||App.scope_waveform.length!==App.scope_analyser.fftSize)&&(App.scope_waveform=new Uint8Array(App.scope_analyser.fftSize)),App.scope_waveform},App.ensure_scope_analyser=()=>{if(App.scope_analyser)return App.scope_analyser;try{let o=window.getAudioContext().createAnalyser();o.fftSize=2048,o.minDecibels=-90,o.maxDecibels=-10,o.smoothingTimeConstant=.85,App.scope_analyser=o,App.ensure_scope_waveform()}catch(e){console.error("Failed to create scope analyser",e),App.scope_analyser=void 0,App.scope_waveform=void 0}return App.scope_analyser},App.connect_scope_analyser=()=>{if(App.scope_connected)return!0;let e=App.ensure_scope_analyser();if(!e)return!1;if(window.master_fx&&window.master_fx.nodes&&window.master_fx.nodes.master_gain)try{return window.master_fx.nodes.master_gain.connect(e),console.log("Connected Scope to Hijacked Master Gain"),App.scope_connected=!0,!0}catch(o){console.warn("Failed to connect to master_fx:",o)}return!1},App.stop_scope_loop=()=>{App.scope_animation_id&&(cancelAnimationFrame(App.scope_animation_id),App.scope_animation_id=void 0)},App.handle_scope_click=e=>{let o=App.get_scope_canvas();if(!o)return;let l=o.getBoundingClientRect(),d=e.clientX-l.left,b=e.clientY-l.top;App.scope_clicks.push({x:d,y:b,timestamp:Date.now()})},App.handle_scope_mouse_down=e=>{App.mouse_down_coords=App.get_scope_coords(e),App.scope_mousedown_date=Date.now(),App.scope_is_drawing=!0,App.scope_clicks.length<=App.scope_clicks_min&&(App.scope_gestures_enabled=!0),App.handle_scope_click(e)},App.handle_scope_mouse_move=e=>{if(App.scope_is_drawing){let o=App.get_scope_canvas();if(!o)return;let l=o.getBoundingClientRect(),d=e.clientX-l.left,b=e.clientY-l.top;if((App.scope_max_y===-1||b>App.scope_max_y)&&(App.scope_max_y=b),(App.scope_min_y===-1||b<App.scope_min_y)&&(App.scope_min_y=b),App.scope_last_point){let S=App.scope_last_point.x,M=App.scope_last_point.y,E=d-S,L=b-M,R=Math.sqrt(E*E+L*L),Z=Math.ceil(R/App.scope_click_distance);for(let q=1;q<=Z;q++){let K=S+E*q/Z,U=M+L*q/Z;App.scope_clicks.push({x:K,y:U,timestamp:Date.now()})}}App.scope_clicks.push({x:d,y:b,timestamp:Date.now()}),App.scope_last_point={x:d,y:b}}},App.handle_scope_mouse_up=e=>{App.mouse_up_coords=App.get_scope_coords(e),App.check_gestures()},App.increase_scope_click_level=e=>{App.scope_click_level=e,clearTimeout(App.scope_click_level_timeout),App.color_interface(e),App.scope_click_level_timeout=setTimeout(()=>{App.scope_click_level=1,App.restore_interface_colors()},App.scope_click_level_time)},App.draw_star=(e,o,l,d,b,S,M=0)=>{let E=Math.PI/2*3+M,L=Math.PI/b,R=o+Math.cos(E)*S,Z=l+Math.sin(E)*S;e.beginPath(),e.moveTo(R,Z);for(let q=0;q<b;q++){let K=o+Math.cos(E)*S,U=l+Math.sin(E)*S;e.lineTo(K,U),E+=L;let se=o+Math.cos(E)*d,re=l+Math.sin(E)*d;e.lineTo(se,re),E+=L}e.lineTo(R,Z),e.closePath()},App.draw_scope_frame=()=>{if(!App.scope_enabled||!App.scope_canvas_ctx){App.stop_scope_loop();return}function e(){App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame)}let o=App.scope_pixel_ratio||1,l=App.scope_canvas_el.width/o,d=App.scope_canvas_el.height/o;if(!l||!d){e();return}let b=App.scope_canvas_ctx,S=10;b.clearRect(-S,-S,l+S*2,d+S*2),b.fillStyle=App.scope_background,b.fillRect(-S,-S,l+S*2,d+S*2);let M=App.ensure_scope_waveform(),E=App.scope_analyser;if(b.strokeStyle=App.scope_color,b.lineWidth=2/o,b.beginPath(),App.is_playing&&E&&M){E.getByteTimeDomainData(M);let R=l/M.length,Z=0;for(let q=0;q<M.length;q++){let U=M[q]/128*d/2;q===0?b.moveTo(Z,U):b.lineTo(Z,U),Z+=R}}else{App.scope_sine_time+=.012;let R=2048,Z=l/R,q=0;for(let K=0;K<R;K++){let U=K/R*Math.PI*12,se=d/2+Math.sin(U+App.scope_sine_time)*(d*.15);K===0?b.moveTo(q,se):b.lineTo(q,se),q+=Z}}if(b.stroke(),App.scheduler&&App.is_playing){let R=4,Z=App.scheduler.now(),q=App.scheduler.cps||1,se=((Z*q-App.seek_offset)%R+R)%R/R*l;if(isNaN(se)){e();return}let re=b.createLinearGradient(se,0,se,d);re.addColorStop(0,"rgba(255, 255, 255, 0)"),re.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),re.addColorStop(1,"rgba(255, 255, 255, 0)"),b.strokeStyle=re,b.lineWidth=4/o,b.beginPath(),b.moveTo(se,0),b.lineTo(se,d),b.stroke()}let L=Date.now();App.scope_clicks=App.scope_clicks.filter(R=>L-R.timestamp<App.scope_click_time);for(let R of App.scope_clicks){let Z=L-R.timestamp,q=App.scope_click_level>1?Z*App.scope_click_rotation_speed:0;b.fillStyle=App[`scope_click_color_${App.scope_click_level}`],App.draw_star(b,R.x,R.y,3,5,App.scope_click_size,q),b.fill()}App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame)},App.start_scope_loop=()=>{App.scope_animation_id||(App.scope_animation_id=requestAnimationFrame(App.draw_scope_frame))},App.set_scope_visibility=e=>{let o=App.get_scope_wrapper();o&&(e?DOM.show(o):DOM.hide(o))},App.stop_scope_visualizer=()=>{App.stop_scope_loop(),App.set_scope_visibility(!1),App.clear_scope_canvas()},App.start_scope_visualizer=()=>{App.scope_connected||App.connect_scope_analyser()},App.scope_mouse_enabled=()=>Date.now()-App.scope_enable_date>=App.scope_click_lock,App.init_scope_click_handler=()=>{let e=App.get_scope_canvas();e&&(DOM.ev(e,"mousedown",o=>{App.scope_max_y=-1,App.scope_min_y=-1,App.scope_mouse_enabled()&&App.handle_scope_mouse_down(o)}),DOM.ev(e,"mousemove",o=>{App.scope_mouse_enabled()&&App.handle_scope_mouse_move(o)}),DOM.ev(e,"click",o=>{App.scope_mouse_enabled()&&App.handle_scope_click(o)}),DOM.ev(document,"mouseup",o=>{App.scope_mouse_enabled()&&App.handle_scope_mouse_up(o),App.scope_is_drawing=!1,App.scope_last_point=null}),DOM.ev(e,"contextmenu",o=>{o.preventDefault()}))},App.toggle_scope=()=>{App.scope_enabled?App.disable_scope_visualizer():App.enable_scope_visualizer()},App.enable_scope_visualizer=()=>{App.scope_enabled=!0,App.set_scope_visibility(!0),App.start_scope_loop(),App.scope_enable_date=Date.now(),App.start_scope_visualizer(),App.init_scope_click_handler(),App.resize_scope(),App.stor_save_scope()},App.disable_scope_visualizer=()=>{App.scope_enabled=!1,App.stop_scope_visualizer(),App.stor_save_scope()},App.get_scope_coords=e=>{let o=App.get_scope_canvas();if(o){let l=o.getBoundingClientRect(),d=e.clientX-l.left,b=e.clientY-l.top;return{x:d,y:b}}},App.clear_clicks=()=>{setTimeout(()=>{App.scope_clicks=[]},100)},App.resize_scope=()=>{let e=App.get_input_wrapper(),o=App.get_scope_wrapper(),l=App.scope_canvas_el,d=App.scope_canvas_ctx;if(!e||!o||!l||!d)return;let b=e.getBoundingClientRect();o.style.width=`${b.width}px`;let S=l.clientWidth,M=l.clientHeight||120,E=window.devicePixelRatio||1;App.scope_pixel_ratio=E;let L=Math.round(S*E),R=Math.round(M*E);(l.width!==L||l.height!==R)&&(l.width=L,l.height=R,d.setTransform(1,0,0,1,0,0),d.scale(E,E))},App.get_scope_height=()=>{if(App.scope_enabled){let e=App.get_scope_wrapper();return App.get_el_height(e)}return 0},App.code_scroll_frame=void 0,App.code_scroll_last_ts=0,App.code_scroll_direction=1,App.code_scroll_active=!1,App.code_scroll_speed_px_per_second=80,App.code_scroll_pause_until=0,App.code_scroll_wheel_pause_ms=1e3,App.code_scroll_song_pause_ms=1.2*1e3,App.code_scroll_pending_delay_ms=0,App.defer_code_scroll=e=>{if(!Number.isFinite(e)||e<=0){App.code_scroll_pending_delay_ms=0;return}App.code_scroll_pending_delay_ms=e},App.reset_code_scroll_for_content=(e={})=>{let o=0,l=e.scroll_delay_ms??App.code_scroll_song_pause_ms,d=e.direction??1;if(App.code_scroll_active&&(Number.isFinite(App.code_scroll_pending_delay_ms)&&App.code_scroll_pending_delay_ms>0?o=App.code_scroll_pending_delay_ms:Number.isFinite(l)&&l>0&&(o=l)),App.code_scroll_pending_delay_ms=0,App.code_scroll_direction=d,App.code_scroll_last_ts=0,o<=0||typeof window>"u"){App.code_scroll_pause_until=0;return}window.performance?.now?App.code_scroll_pause_until=window.performance.now()+o:App.code_scroll_pause_until=o},App.set_code_scroll_button_active=e=>{let o=DOM.el("#code-input-scroll");if(o){if(e){o.classList.add("active");return}o.classList.remove("active")}},App.code_scroll_tick=e=>{if(!App.code_scroll_active){App.code_scroll_frame=void 0;return}if(!App.editor){App.stop_code_scroll();return}if(App.code_scroll_last_ts||(App.code_scroll_last_ts=e),App.code_scroll_pause_until&&e<App.code_scroll_pause_until){App.code_scroll_last_ts=e,App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick);return}App.code_scroll_pause_until=0;let o=e-App.code_scroll_last_ts;App.code_scroll_last_ts=e;let l=App.code_scroll_speed_px_per_second*o/1e3,d=App.get_input_scroll()+l*App.code_scroll_direction,b=Math.max(0,App.get_input_height()-App.get_input_client_height());if(App.set_input_scroll(d),b<=0){App.stop_code_scroll();return}App.code_scroll_direction>0&&Math.ceil(App.get_input_scroll())+1>=b?(App.set_input_scroll(b),App.reset_code_scroll_for_content({direction:-1})):App.code_scroll_direction<0&&App.get_input_scroll()<=0&&(App.scroll_input_to_top(),App.reset_code_scroll_for_content({direction:1})),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick)},App.start_code_scroll=()=>{App.code_scroll_active||Math.max(0,App.get_input_height()-App.get_input_client_height())<=0||(App.code_scroll_active=!0,App.code_scroll_direction=1,App.code_scroll_last_ts=window.performance.now()-16,App.code_scroll_pause_until=0,App.set_code_scroll_button_active(!0),App.code_scroll_frame=window.requestAnimationFrame(App.code_scroll_tick))},App.stop_code_scroll=()=>{!App.code_scroll_active&&!App.code_scroll_frame||(App.code_scroll_active=!1,App.code_scroll_direction=1,App.code_scroll_last_ts=0,App.code_scroll_pause_until=0,App.code_scroll_frame&&(window.cancelAnimationFrame(App.code_scroll_frame),App.code_scroll_frame=void 0),App.set_code_scroll_button_active(!1))},App.restart_code_scroll=()=>{App.scroll_input_to_top(),App.code_scroll_active&&(App.defer_code_scroll(App.code_scroll_song_pause_ms),App.reset_code_scroll_for_content(App.code_scroll_song_pause_ms))},App.scroll_input_to_top=()=>{App.set_input_scroll(0)},App.scroll_input_to_bottom=()=>{let e=App.editor.scrollDOM.scrollHeight;App.editor.scrollDOM.scrollTop=e},App.get_input_scroll=()=>App.editor.scrollDOM.scrollTop,App.set_input_scroll=e=>{App.editor.scrollDOM.scrollTop=e,App.editor.requestMeasure()},App.create_settings_modal=()=>{let e=App.create_modal("settings"),o=DOM.el(".modal-title",e);o.textContent="Settings";let l=DOM.el(".modal-body",e),d=App.register_setting("Select Visual","Change the background animation",()=>{App.open_visual_modal()}),b=App.register_setting("Toggle Scope","Show or hide the scope visualizer",()=>{App.toggle_scope()}),S=App.register_setting("Toggle Colors","Enable or disable the color animation",()=>{App.toggle_colors()}),M=App.register_setting("Toggle Lines","Enable or disable the line numbers",()=>{App.toggle_lines()}),E=App.register_setting("Toggle Mirror","Enable or disable the code execution reflection on the code",()=>{App.toggle_mirror()});l.appendChild(d),l.appendChild(b),l.appendChild(S),l.appendChild(M),l.appendChild(E)},App.register_setting=(e,o,l)=>{let d=DOM.create("button");return d.textContent=e,d.title=o,DOM.ev(d,"click",()=>{l(),App.close_modal("settings")}),d},App.open_settings_modal=()=>{App.open_modal("settings")},App.song_cache={},App.fetched_songs_date=0,App.fetched_songs=[],App.song_fetch_delay=60*1e3,App.fetch_songs_list=async()=>{try{if(Date.now()-App.fetched_songs_date<App.song_fetch_delay)return App.fetched_songs;App.loading();let e=await fetch("/songs/list");if(!e.ok)throw new Error("Failed to fetch songs list");let o=await e.json();return Array.isArray(o)?(App.fetched_songs=o,App.fetched_songs_date=Date.now(),App.playing(),o):(console.error("Songs list payload was not an array"),App.playing(),[])}catch(e){return console.error("Error fetching songs",e),App.playing(),[]}},App.fetch_song_code=async e=>{try{let o=await fetch(`/songs/${e}.js`);if(!o.ok)throw new Error(`Failed to fetch song ${e}`);let l=await o.text(),d=App.clean_song_name(e),b={};return b.name=e,b.clean_name=d,b.raw=l,b.filtered=App.filter_code(l),App.song_cache[e]=b,App.last_code=l,l}catch(o){throw console.error("Error fetching song content",o),o}},App.create_songs_modal=()=>{let e=App.create_list_modal("songs"),o=DOM.el(".modal-title",e);o.textContent="Select Song"},App.open_songs_modal=async()=>{let e=await App.fetch_songs_list(),o=[];for(let l of e)o.push({text:l,title:"Click to load and play this song"});App.show_items_modal("songs",{items:o,action:l=>{App.load_song(l.text)}})},App.load_song=async e=>{App.close_all_modals();try{App.loading();let o=await App.fetch_song_code(e);App.stop_status_watch(),App.stop_color_cycle(),App.clear_draw_context(),App.code_scroll_active&&App.defer_code_scroll(App.code_scroll_song_pause_ms),await App.play_action(o,!0),App.set_song_context(e)}catch(o){App.set_status(`Failed to load song: ${o.message}`),console.error("Failed to load song:",o)}},App.set_song_context=(e="")=>{App.current_song=e||"",App.set_title(App.underspace(App.current_song)),App.update_url(App.current_song),App.update_title()},App.random_song=async()=>{try{let e=await App.fetch_songs_list();if(!e.length){console.error("No songs available to pick from");return}let o=e.filter(b=>b!==App.current_song);if(!o.length){console.error("No songs available after filtering out the current song");return}let l=App.random_int({min:0,max:o.length-1}),d=o[l];await App.load_song(d)}catch(e){console.error("Error selecting a random song",e)}},App.get_matched_song=()=>{for(let e in App.song_cache){let o=App.song_cache[e];if(o.filtered===App.last_code)return o;if(o.raw===App.last_code)return o}},App.get_song_name=(e=!1)=>{let o=App.get_matched_song(),l="";return o&&(e?l=o.clean_name:l=o.name),l},App.clean_song_name=e=>App.capitalize(App.underspace(e)),App.strudel_sounds=["sawtooth","square","triangle","sine","sax","gtr","moog","white","pink","brown","bd","sd","rim","hh","oh","lt","mt","ht","rd","cr"],App.beat_title="",App.setup_status=()=>{App.status_debouncer=App.create_debouncer(o=>{App.do_set_status(o)},200);let e=App.get_status();DOM.ev(e,"click",()=>{App.ask_for_title()}),DOM.ev(e,"wheel",o=>{o.deltaY<0?e.scrollLeft-=20:o.deltaY>0&&(e.scrollLeft+=20)})},App.get_status=()=>DOM.el("#status"),App.set_status=e=>{App.status_debouncer&&App.status_debouncer.call(e)},App.do_set_status=e=>{let o=App.get_status();o.scrollTop=0,o.scrollLeft=0,o.innerText=e},App.ask_for_title=()=>{if(App.get_matched_song())return;let o=prompt("Title of this beat",App.beat_title||"");o||(o=""),App.beat_title=o.trim(),App.update_url(),App.update_title(),App.playing()},App.tempo_storage_key="slide.tempo",App.auto_endpoint_storage_key="slide.auto_endpoint",App.auto_delay_storage_key="slide.auto_delay",App.volume_storage_key="slide.volume",App.visual_storage_key="slide.visual",App.scope_storage_key="slide.scope",App.colors_storage_key="slide.colors",App.code_storage_key="slide.code",App.lines_storage_key="slide.lines",App.mirror_storage_key="slide.mirror",App.load_storage=(e,o)=>{let l=localStorage.getItem(App[`${e}_storage_key`]);[null,void 0].includes(l)||o(l)},App.save_storage=(e,o)=>{localStorage.setItem(App[`${e}_storage_key`],o)},App.load_all_storage=()=>{App.stor_load_auto_endpoint(),App.stor_load_auto_delay(),App.stor_load_tempo(),App.stor_load_volume(),App.stor_load_visual(),App.stor_load_scope(),App.stor_load_colors(),App.stor_load_code(),App.stor_load_lines(),App.stor_load_mirror()},App.stor_load_auto_endpoint=()=>{App.load_storage("auto_endpoint",e=>{App.auto_endpoint=e})},App.stor_load_auto_delay=()=>{App.load_storage("auto_delay",e=>{App.auto_delay=parseInt(e)})},App.stor_load_tempo=()=>{App.load_storage("tempo",e=>{App.tempo=parseInt(e)})},App.stor_load_volume=()=>{App.load_storage("volume",e=>{App.volume=parseInt(e)})},App.stor_load_visual=()=>{App.load_storage("visual",e=>{App.visual=e})},App.stor_load_scope=()=>{App.load_storage("scope",e=>{App.scope_enabled=App.boolstring(e)})},App.stor_load_colors=()=>{App.load_storage("colors",e=>{App.colors_enabled=App.boolstring(e)})},App.stor_load_lines=()=>{App.load_storage("lines",e=>{App.lines_enabled=App.boolstring(e)})},App.stor_load_mirror=()=>{App.load_storage("mirror",e=>{App.mirror_enabled=App.boolstring(e)})},App.stor_load_code=()=>{App.load_storage("code",e=>{App.last_code=e})},App.stor_save_auto_delay=()=>{App.save_storage("auto_delay",App.auto_delay)},App.stor_save_auto_endpoint=()=>{App.save_storage("auto_endpoint",App.auto_endpoint)},App.stor_save_tempo=()=>{App.save_storage("tempo",App.tempo)},App.stor_save_volume=()=>{App.save_storage("volume",App.volume)},App.stor_save_visual=()=>{App.save_storage("visual",App.visual)},App.stor_save_scope=()=>{App.save_storage("scope",App.scope_enabled)},App.stor_save_colors=()=>{App.save_storage("colors",App.colors_enabled)},App.stor_save_lines=()=>{App.save_storage("lines",App.lines_enabled)},App.stor_save_mirror=()=>{App.save_storage("mirror",App.mirror_enabled)},App.stor_save_code=()=>{App.save_storage("code",App.last_code)},App.tempo=App.default_cpm,App.tempo_debounce_timer=void 0,App.tempo_commit_delay_ms=500,App.min_tempo=20,App.max_tempo=120,App.tempo_step=5,App.tempo_wheel_commit_timer=void 0,App.tempo_wheel_commit_delay_ms=150,App.schedule_tempo_commit=e=>{if(typeof window>"u"){e();return}App.tempo_debounce_timer&&window.clearTimeout(App.tempo_debounce_timer),App.tempo_debounce_timer=window.setTimeout(()=>{App.tempo_debounce_timer=void 0,e()},App.tempo_commit_delay_ms)},App.schedule_tempo_wheel_commit=()=>{if(typeof window>"u"){App.on_tempo_change(!0,App.tempo);return}App.tempo_wheel_commit_timer&&window.clearTimeout(App.tempo_wheel_commit_timer),App.tempo_wheel_commit_timer=window.setTimeout(()=>{App.tempo_wheel_commit_timer=void 0,App.on_tempo_change(!0,App.tempo)},App.tempo_wheel_commit_delay_ms)},App.get_tempo_slider=()=>DOM.el("#tempo-slider"),App.get_tempo_value=()=>DOM.el("#tempo-value"),App.refresh_tempo_ui=()=>{let e=App.get_tempo_slider(),o=App.get_tempo_value();e&&(e.value=`${App.tempo}`),o&&(o.textContent=`${App.tempo} cpm`)},App.persist_tempo=()=>{if(!(typeof window>"u"))try{App.stor_save_tempo()}catch(e){console.warn("Failed to persist tempo",e)}},App.update_tempo=e=>{let o=parseInt(e,10);Number.isFinite(o)||(o=App.tempo),o=Math.round(o/App.tempo_step)*App.tempo_step,o=Math.min(App.max_tempo,Math.max(App.min_tempo,o)),App.tempo=o,App.refresh_tempo_ui()},App.on_tempo_change=(e=!1,o=void 0)=>{let l=o;l===null&&(l=App.get_tempo_slider()?.value),App.update_tempo(l),e&&App.schedule_tempo_commit(()=>{App.persist_tempo(),App.set_tempo()})},App.init_tempo_controls=()=>{let e=App.get_tempo_slider(),o=DOM.el("#tempo-control"),l=DOM.el("#tempo-decrement"),d=DOM.el("#tempo-increment"),b=DOM.el("#tempo-intended");if(!e)return;App.refresh_tempo_ui(),App.persist_tempo(),DOM.ev(e,"input",M=>{App.update_tempo(M.target.value)}),App.setup_slider(o,M=>{M.value=App.default_cpm,App.update_tempo(App.default_cpm),App.set_tempo()},M=>{App.on_tempo_change(!1,M),App.schedule_tempo_wheel_commit()}),DOM.ev(o,"change",()=>{App.on_tempo_change(!0)});let S=M=>{let E=App.tempo+M*App.tempo_step;App.on_tempo_change(!0,E)};App.make_control_button(l,()=>{S(-1)}),App.make_control_button(d,()=>{S(1)}),b&&DOM.ev(b,"click",()=>{App.set_song_tempo(App.last_code)}),App.remove_context(b,()=>{App.set_intended_tempo()})},App.set_tempo=()=>{try{App.scheduler.setCps(App.tempo/60)}catch(e){console.debug("Tempo will be applied when audio starts",e)}},App.intended_cpm=e=>{let o=M=>{try{return Function(`"use strict"; return (${M})`)()}catch{return null}},l=App.default_cpm,d=e.match(/setcpm\(\s*([\d./*+ -]+)\s*\)/),b=e.match(/setcps\(\s*([\d./*+ -]+)\s*\)/),S=e.match(/setbpm\(\s*([\d./*+ -]+)\s*\)/);if(d){let M=o(d[1]);M!==null&&(l=M)}else if(b){let M=o(b[1]);M!==null&&(l=M*60)}else if(S){let M=o(S[1]);M!==null&&(l=M/4)}return l},App.set_song_tempo=e=>{App.tempo=App.intended_cpm(e),App.set_tempo(),App.refresh_tempo_ui()},App.set_intended_tempo=()=>{App.set_song_tempo(App.last_code)},App.editor_theme={"& .cm-activeLine":{backgroundColor:"transparent !important"},"& .cm-activeLineGutter":{backgroundColor:"transparent !important"},"& .cm-gutters":{backgroundColor:"#202020 !important",borderRight:"1px solid #4C566A",paddingRight:"0.66rem"},"& .cm-lineNumbers .cm-gutterElement":{paddingLeft:"8px",color:"#aaa"},"& .cm-matchingBracket":{backgroundColor:"rgba(136, 192, 208, 0.2) !important",color:"#ECEFF4 !important"},"& .cm-nonmatchingBracket":{backgroundColor:"rgba(191, 97, 106, 0.3) !important"},"& .cm-selectionMatch":{backgroundColor:"rgba(136, 192, 208, 0.25) !important",outline:"1px solid rgba(136, 192, 208, 0.4)"},"& .cm-selectionBackground, &.cm-focused .cm-selectionBackground":{backgroundColor:"rgba(67, 76, 94, 0.8) !important"},".cm-panels":{backgroundColor:"#2E3440",color:"#D8DEE9",borderTop:"1px solid #4C566A",borderBottom:"1px solid #4C566A"},".cm-panels-top":{borderBottom:"2px solid #3B4252"},".cm-panels-bottom":{borderTop:"2px solid #3B4252"},".cm-search":{display:"block",alignItems:"center",gap:"8px",padding:"8px 12px",fontFamily:"inherit"},".cm-search .cm-textfield":{backgroundColor:"#3B4252",color:"#ECEFF4",border:"1px solid #4C566A",borderRadius:"4px",padding:"4px 8px",outline:"none",minWidth:"200px"},".cm-search .cm-textfield:focus":{border:"1px solid #88C0D0"},".cm-button":{backgroundImage:"none",backgroundColor:"#434C5E",color:"#ECEFF4",border:"none",borderRadius:"4px",padding:"4px 10px",cursor:"pointer",textTransform:"capitalize",fontSize:"0.9em"},".cm-button:hover":{backgroundColor:"#5E81AC"},".cm-button:active":{transform:"translateY(1px)"},".cm-search label":{display:"inline-flex",alignItems:"center",gap:"4px",fontSize:"0.85em",cursor:"pointer"},".cm-search input[type='checkbox']":{cursor:"pointer",accentColor:"#88C0D0"},".cm-panel.cm-search [name='close']":{marginLeft:"auto",padding:"2px 6px",fontSize:"1.2em",background:"transparent"},".cm-panel.cm-search [name='close']:hover":{color:"#C3C3C3"},".cm-searchMatch":{backgroundColor:"rgba(235, 203, 139, 0.4)",outline:"1px solid #EBCB8B"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#EBCB8B",color:"#2E3440"}},App.code_query_key="code",App.song_query_key="song",App.beat_query_key="beat",App.url_query_key="url",App.update_url=(e="")=>{let o=new URL(window.location.href),l=App.get_input_value().trim();if(e||(e=App.get_song_name()),e?o.searchParams.set(App.song_query_key,e):o.searchParams.delete(App.song_query_key),!e&&App.beat_url?o.searchParams.set(App.url_query_key,App.beat_url):o.searchParams.delete(App.url_query_key),l&&!e&&!App.beat_url&&l.length<=App.code_url_max){let d=App.compress_string(l);o.searchParams.set(App.code_query_key,d)}else o.searchParams.delete(App.code_query_key);!e&&App.beat_title?o.searchParams.set(App.beat_query_key,App.beat_title):o.searchParams.delete(App.beat_query_key),window.history.replaceState({},document.title,`${o.pathname}${o.search}${o.hash}`)},App.load_code_from_query=()=>{let o=new URLSearchParams(window.location.search).get(App.code_query_key);if(!o)return!1;try{let l=App.uncompress_string(o);return App.last_code=l,App.load_last_code(),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.load_url_from_query=()=>{let o=new URLSearchParams(window.location.search).get(App.url_query_key);if(!o)return!1;try{return App.beat_url=o,App.load_beat_url(),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.load_song_from_query=async()=>{let o=App.get_query_params().get(App.song_query_key);if(!o)return!1;try{App.loading();let l=await App.fetch_song_code(o);return App.set_input(l),App.set_song_tempo(l),App.set_song_context(o),!0}catch(l){App.set_status(`Failed to load song: ${l.message}`),console.error("Failed to load song:",l)}return!1},App.set_beat_title_from_query=()=>{let o=App.get_query_params().get(App.beat_query_key);o&&(App.beat_title=o)},App.get_beat_url=()=>{let e=prompt("URL of the beat (javascript/text file)",App.beat_url||"");e&&(App.beat_url=e.trim(),App.load_beat_url())},App.load_beat_url=async()=>{if(App.update_url(),!!App.beat_url)try{App.loading();let e=await fetch(App.beat_url);if(!e.ok)throw new Error(`Failed to fetch the beat at ${App.beat_url}`);let o=await e.text();if(!o){App.playing();return}let l=o.trim();if(!l){App.playing();return}App.stop_action(),App.stop_status_watch(),App.last_code=l;let d=App.filter_code(l);App.url_code=d,App.set_input(l),App.set_song_tempo(l),App.update_url(),App.playing()}catch(e){console.error(e),App.playing()}},App.is_url_beat=()=>App.url_code===App.last_code,App.control_button_throttle=100,App.control_button_delay=250,App.def_args=(e,o)=>{for(let l in e)o[l]===void 0&&e[l]!==void 0&&(o[l]=e[l])},App.escape_regex=e=>e.replace(/[\^$*+?.()|[\]{}-]/g,"\\$&"),App.underspace=e=>e.replace(/_+/g," ").trim(),App.clean_canvas=()=>{let e=document.body,o=DOM.els("canvas");for(let l of o)["scope-canvas","background-canvas"].includes(l.id)||Array.from(l.classList).some(b=>["modal-icon"].includes(b))||e.removeChild(l)},App.truncate_path=(e,o=20)=>e.length<=o?e:e.substring(0,o)+"...",App.random_int=(e={})=>{let o={exclude:[]};if(App.def_args(o,e),e.exclude.length>0){let l=[];for(let b=e.min;b<=e.max;b++)e.exclude.includes(b)||l.push(b);if(l.length===0)return;let d;return e.rand?d=Math.floor(e.rand()*l.length):d=Math.floor(Math.random()*l.length),l[d]}return e.rand?Math.floor(e.rand()*(e.max-e.min+1)+e.min):Math.floor(Math.random()*(e.max-e.min+1)+e.min)},App.create_debouncer=(e,o)=>{if(typeof e!="function"){App.error("Invalid debouncer function");return}if(typeof o!="number"||o<1){App.error("Invalid debouncer delay");return}let l,d={};function b(){clearTimeout(l),l=void 0}function S(...M){e(...M)}return d.call=(...M)=>{b(),l=setTimeout(()=>{S(...M)},o)},d.call_2=(...M)=>{l||d.call(M)},d.now=(...M)=>{b(),S(...M)},d.cancel=()=>{b()},d},App.boolstring=e=>e&&e==="true",App.capitalize=e=>e.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),App.get_el_height=e=>{if(!e)return 0;let o=window.getComputedStyle(e),l=e.clientHeight,d=parseFloat(o.paddingTop)||0,b=parseFloat(o.paddingBottom)||0,S=parseFloat(o.marginTop)||0,M=parseFloat(o.marginBottom)||0;return l-d-b+d+b+S+M},App.viewport_height=()=>window.innerHeight||document.documentElement.clientHeight,App.compress_string=e=>{try{return lz.compressToEncodedURIComponent(e)}catch{return""}},App.uncompress_string=e=>{try{return lz.decompressFromEncodedURIComponent(e)}catch{return""}},App.make_control_button=(e,o)=>{DOM.ev(e,"click",()=>{o()}),App.remove_context(e,()=>{o()}),DOM.ev(e,"mousedown",()=>{App.ctrl_btn_interval_delay=setTimeout(()=>{App.ctrl_btn_interval=setInterval(()=>{o()},App.control_button_throttle)},App.control_button_delay)}),DOM.ev(e,"mouseup",()=>{clearInterval(App.ctrl_btn_interval),clearInterval(App.ctrl_btn_interval_delay)})},App.setup_slider=(e,o,l)=>{let d=DOM.el("input",e);DOM.ev(e,"auxclick",b=>{b.button===1&&o(d)}),App.remove_context(e),DOM.ev(e,"wheel",b=>{b.preventDefault();let S=parseInt(d.step,10),M=parseInt(d.value,10),E;b.deltaY<0?E=M+S:E=M-S,d.value=E,l(E)},{passive:!1})},App.remove_context=(e,o)=>{DOM.ev(e,"contextmenu",l=>{l.preventDefault(),o&&o()})},App.canvas_effect_time=3*1e3,App.animation_frames=0,App.visual_items=[{text:"auto",alt_text:"Auto - The code sets it",title:"Let the code decide. If the code contains animation calls they will be visible, else it will be a solid background"},{text:"none",alt_text:"None - Solid background",title:"Use a solid background. Most performant option"},{text:"flux surface",title:"A shimmering, flowing horizon where colors swirl like a sunset blending into dawn, a landscape in constant motion that feels alive and mysterious, like walking through a translucent, rippling lake of light"},{text:"hyper rose",title:"A surreal garden of glowing petals that pulse with vibrant energy, blossoms blooming in impossible hues, evoking a sense of wonder and infinite growth in a dreamlike meadow"},{text:"bio tunnel",title:"A lush, organic corridor woven with twisting vines and luminous flora, evoking the feeling of wandering through an underground rainforest alive with whispers of nature’s secret life"},{text:"liquid aether",title:"A flowing, translucent river of ethereal substance, shimmering with iridescent waves that pulse softly, inviting you to drift through an otherworldly sea of pure energy and serenity"},{text:"aurora borealis",title:"A celestial dance of shimmering lights in the night sky, ribbons of green, pink, and purple swirling gracefully over icy mountains, evoking awe and the mysterious beauty of the polar skies"},{text:"orb balloons",title:"A whimsical cluster of floating orbs, each glowing softly like lanterns drifting lazily in a gentle breeze, creating a playful, dreamlike atmosphere of floating serenity and joyful levity"}],App.get_bg_canvas=()=>DOM.el("#background-canvas"),App.get_bg_context=()=>App.background_canvas.getContext("2d"),App.start_visual=()=>{App.visual=App.visual||"auto",App.background_canvas=App.get_bg_canvas(),App.background_canvas_ctx=App.get_bg_context(),App.visual_animations=[App.anim_neon_waves],DOM.ev(window,"resize",()=>{App.background_canvas&&(App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight)}),App.resize_listener||(App.resize_listener=()=>{App.background_canvas&&(App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight)},DOM.ev(window,"resize",App.resize_listener)),App.background_canvas.width=window.innerWidth,App.background_canvas.height=window.innerHeight,App.apply_visual(App.visual)},App.create_visual_modal=()=>{let e=App.create_list_modal("visual"),o=DOM.el(".modal-title",e);o.textContent="Select Visual"},App.open_visual_modal=async()=>{let e=App.visual_items;App.show_items_modal("visual",{items:e,action:o=>{let l=o.text.toLowerCase();App.apply_visual(l),App.close_modal("visual")},active:App.get_active_visual_index()})},App.apply_visual=e=>{App.animation_id&&(cancelAnimationFrame(App.animation_id),App.animation_id=null),App.flow_particles=null,App.bg_orbs=null,App.visual=e,App.stor_save_visual(),["auto"].includes(e)?(App.clear_visual(),App.background_canvas.classList.add("under")):["none"].includes(e)?(App.clear_visual(),App.background_canvas.classList.remove("under")):(App.background_canvas.classList.remove("under"),App.render_animation())},App.anim_bio_tunnel=(e,o,l,d)=>{let b=o/2,S=l/2,M=d*.02;for(let E=0;E<40;E++){let L=(E*20+d*5)%1e3,R=1e3/(L+10);if(R>20)continue;e.beginPath(),e.lineWidth=2*R;let Z=(M*50+L*.5)%360;e.strokeStyle=`hsla(${Z}, 80%, 60%, ${L/1e3})`;for(let q=0;q<=6;q++){let K=q/6*Math.PI*2,se=(200+Math.sin(M*3+K*4)*50)*R,re=M*.5,ae=b+Math.cos(K+re)*se,de=S+Math.sin(K+re)*se;q===0?e.moveTo(ae,de):e.lineTo(ae,de)}e.closePath(),e.stroke()}},App.anim_flux_surface=(e,o,l,d)=>{let b=30,S=40,M=d*.03,E=M*2,L=65;e.lineWidth=2;let R=[];for(let Z=0;Z<=o;Z+=S)R.push(Math.sin(Z*.005+M)*50);for(let Z=-L;Z<l+L;Z+=b){let q=Z*.01,K=(Z*.2+d*.5)%360;e.strokeStyle=`hsla(${K}, 60%, 60%, 0.8)`,e.beginPath();let U=0;for(let se=0;se<=o;se+=S){let re=R[U],ae=Math.sin(se*.02-E+q)*15;e.lineTo(se,Z+re+ae),U++}e.stroke()}},App.anim_hyper_rose=(e,o,l,d)=>{let b=o/2,S=l/2,M=Math.max(o,l)*.8,E=d*.002,L=Math.PI*2,R=.01;e.lineWidth=2,e.lineJoin="round",e.globalCompositeOperation="lighter";for(let Z=0;Z<8;Z++){let q=Z/8,K=M*(1-q),U=(d*.2+Z*15)%360;e.strokeStyle=`hsla(${U}, 80%, 50%, 0.6)`,e.beginPath();for(let se=0;se<L;se+=R){let re=Math.sin(se*7+E*5)*Math.cos(se*3-E),ae=K*(.5+.5*re),de=se+E*(Z+1),ve=b+Math.cos(de)*ae,Ee=S+Math.sin(de)*ae;e.lineTo(ve,Ee)}e.closePath(),e.stroke()}e.globalCompositeOperation="source-over"},App.anim_liquid_aether=(e,o,l,d)=>{let b=80,S=.6,M=4;(!App.flow_particles||App.flow_particles.length!==b)&&(App.flow_particles=Array(b).fill().map(()=>{let R=Math.random()*100;return{x:Math.random()*o,y:Math.random()*l,speed:S,life:R,max_life:R,angle_offset:Math.random()*Math.PI*2,size:Math.random()*4+2}})),(!App.bg_orbs||App.bg_orbs.length!==M)&&(App.bg_orbs=Array(M).fill().map((R,Z)=>({x:Math.random()*o,y:Math.random()*l,vx:(Math.random()-.5)*1,vy:(Math.random()-.5)*1,radius:Math.random()*500+400,hue:Z*50}))),e.globalCompositeOperation="source-over",e.fillStyle="rgba(15, 10, 30, 0.1)",e.fillRect(0,0,o,l);let E=d*.002;e.globalCompositeOperation="lighter",App.bg_orbs.forEach(R=>{R.x+=R.vx+Math.sin(E)*1,R.y+=R.vy+Math.cos(E)*1,R.x<-R.radius&&(R.x=o+R.radius),R.x>o+R.radius&&(R.x=-R.radius),R.y<-R.radius&&(R.y=l+R.radius),R.y>l+R.radius&&(R.y=-R.radius);let Z=e.createRadialGradient(R.x,R.y,0,R.x,R.y,R.radius),q=.4+Math.sin(E*2+R.hue)*.2;Z.addColorStop(0,`hsla(${R.hue+d*.1}, 80%, 60%, ${q})`),Z.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=Z,e.beginPath(),e.arc(R.x,R.y,R.radius,0,Math.PI*2),e.fill()}),e.globalCompositeOperation="source-over";let L=5e-4;App.flow_particles.forEach(R=>{R.life--,R.life<=0&&(R.x=Math.random()*o,R.y=Math.random()*l,R.life=100+Math.random()*100,R.max_life=R.life,R.size=Math.random()*4+2),e.beginPath();let Z=(d*.1+R.x*.02+R.y*.02)%360,q=(R.max_life-R.life)/50,K=R.life/50,U=Math.min(q,K,.8);U=Math.max(0,U),e.fillStyle=`hsla(${Z}, 90%, 80%, ${U})`,e.arc(R.x,R.y,R.size,0,Math.PI*2),e.fill();let se=Math.cos(R.x*L+E)+Math.sin(R.y*L+E)+R.angle_offset;R.x+=Math.cos(se)*R.speed,R.y+=Math.sin(se)*R.speed,R.x<-10&&(R.x=o+10),R.x>o+10&&(R.x=-10),R.y<-10&&(R.y=l+10),R.y>l+10&&(R.y=-10)})},App.anim_orb_balloons=(e,o,l,d)=>{let b=8;(!App.bg_orbs||App.bg_orbs.length!==b)&&(App.bg_orbs=Array(b).fill().map((M,E)=>({x:Math.random()*o,y:Math.random()*l,vx:(Math.random()-.5)*3,vy:(Math.random()-.5)*3,base_radius:Math.random()*150+100,hue:Math.random()*360,phase:Math.random()*Math.PI*2}))),e.globalCompositeOperation="source-over",e.fillStyle="rgba(15, 5, 25, 0.2)",e.fillRect(0,0,o,l);let S=d*.01;e.globalCompositeOperation="lighter",App.bg_orbs.forEach(M=>{M.x+=M.vx,M.y+=M.vy,M.x<-M.base_radius&&(M.vx*=-1),M.x>o+M.base_radius&&(M.vx*=-1),M.y<-M.base_radius&&(M.vy*=-1),M.y>l+M.base_radius&&(M.vy*=-1);let E=M.base_radius+Math.sin(S+M.phase)*50,L=e.createRadialGradient(M.x,M.y,0,M.x,M.y,E),R=(M.hue+d*.5)%360;L.addColorStop(0,`hsla(${R}, 80%, 60%, 0.6)`),L.addColorStop(1,`hsla(${R}, 80%, 40%, 0)`),e.fillStyle=L,e.beginPath(),e.arc(M.x,M.y,E,0,Math.PI*2),e.fill()}),e.globalCompositeOperation="source-over"},App.anim_aurora_borealis=(e,o,l,d)=>{let b=d*.02;e.lineWidth=2,e.globalCompositeOperation="lighter";for(let S=0;S<5;S++){e.beginPath();let M=l*.8,E=(d*.5+S*50)%360;e.fillStyle=`hsla(${E}, 60%, 50%, 0.3)`,e.moveTo(0,l);for(let L=0;L<=o;L+=20){let R=Math.sin(L*.002+b+S)*100+Math.sin(L*.01-b*2)*50;e.lineTo(L,M+R-S*100)}e.lineTo(o,l),e.closePath(),e.fill()}e.globalCompositeOperation="source-over"},App.render_animation=()=>{if(["auto","none"].includes(App.visual))return;let e=window.innerWidth,o=window.innerHeight,l="rgba(0, 0, 0, 0.12)";App.background_canvas_ctx.fillStyle=l,App.background_canvas_ctx.fillRect(0,0,e,o),App.visual==="bio tunnel"?App.anim_bio_tunnel(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="flux surface"?App.anim_flux_surface(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="hyper rose"?App.anim_hyper_rose(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="liquid aether"?App.anim_liquid_aether(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="aurora borealis"?App.anim_aurora_borealis(App.background_canvas_ctx,e,o,App.animation_frames):App.visual==="orb balloons"&&App.anim_orb_balloons(App.background_canvas_ctx,e,o,App.animation_frames),App.animation_frames++,App.animation_id=requestAnimationFrame(App.render_animation)},App.clear_visual=()=>{let e=window.innerWidth,o=window.innerHeight;App.background_canvas_ctx.clearRect(0,0,e,o)},App.get_active_visual_index=()=>App.visual_items.map(e=>e.text).indexOf(App.visual),App.next_visual=()=>{let e=App.get_active_visual_index();e+=1,e>=App.visual_items.length&&(e=0),e<=1&&(e=2);let o=App.visual_items[e];App.apply_visual(o.text)},App.canvas_effect_1=()=>{let l="brightness(200%) contrast(200%)",d=App.get_bg_canvas();d.style.filter=l,App.start_canvas_effect_timeout()},App.start_canvas_effect_timeout=()=>{App.canvas_effect_timeout=setTimeout(()=>{App.clear_canvas_effects()},App.canvas_effect_time)},App.clear_canvas_effects=()=>{let e=App.get_bg_canvas();e.style.filter=""},App.volume=100,App.volume_step=1,App.setup_volume=()=>{App.update_volume(App.volume)},App.get_volume_slider=()=>DOM.el("#volume-slider"),App.get_volume_value=()=>DOM.el("#volume-value"),App.read_volume_value=e=>{if(!e)return App.volume;let o=e.valueAsNumber;if(Number.isFinite(o))return o;let l=parseInt(e.value,10);return Number.isFinite(l)?l:App.volume},App.refresh_volume_ui=()=>{let e=App.get_volume_slider(),o=App.get_volume_value();e&&(e.value=`${App.volume}`),o&&(o.innerText=`${App.volume}%`)},App.apply_volume=()=>{if(App.audio_started)try{let e=App.volume/100;App.set_gain(e)}catch(e){console.error("Failed to apply volume",e)}},App.update_volume=e=>{let o=Number(e);Number.isFinite(o)||(o=App.volume),o=Math.min(100,Math.max(0,o)),App.volume!==o&&(App.volume=o,App.refresh_volume_ui(),App.stor_save_volume(),App.apply_volume())},App.init_volume_controls=()=>{let e=App.get_volume_slider(),o=DOM.el("#volume-control"),l=DOM.el("#volume-decrement"),d=DOM.el("#volume-increment");if(!e)return;App.refresh_volume_ui(),App.stor_save_volume(),DOM.ev(e,"input",S=>{App.update_volume(App.read_volume_value(S.target))});let b=S=>{App.update_volume(App.volume+S*App.volume_step)};App.make_control_button(l,()=>{b(-1)}),App.make_control_button(d,()=>{b(1)}),App.setup_slider(o,()=>{App.update_volume(50)},()=>{App.update_volume(App.read_volume_value(e))})}})();
